(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function rT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ww={exports:{}},du={},xw={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),sT=Symbol.for("react.portal"),iT=Symbol.for("react.fragment"),oT=Symbol.for("react.strict_mode"),aT=Symbol.for("react.profiler"),lT=Symbol.for("react.provider"),cT=Symbol.for("react.context"),uT=Symbol.for("react.forward_ref"),dT=Symbol.for("react.suspense"),hT=Symbol.for("react.memo"),fT=Symbol.for("react.lazy"),ry=Symbol.iterator;function mT(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var _w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bw=Object.assign,Ew={};function Ki(t,e,n){this.props=t,this.context=e,this.refs=Ew,this.updater=n||_w}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tw(){}Tw.prototype=Ki.prototype;function Gf(t,e,n){this.props=t,this.context=e,this.refs=Ew,this.updater=n||_w}var Kf=Gf.prototype=new Tw;Kf.constructor=Gf;bw(Kf,Ki.prototype);Kf.isPureReactComponent=!0;var sy=Array.isArray,Iw=Object.prototype.hasOwnProperty,Qf={current:null},Nw={key:!0,ref:!0,__self:!0,__source:!0};function Sw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Iw.call(e,r)&&!Nw.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Va,type:t,key:i,ref:o,props:s,_owner:Qf.current}}function pT(t,e){return{$$typeof:Va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Va}function gT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function Sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gT(""+t.key):e.toString(36)}function zl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Va:case sT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Sd(o,0):r,sy(s)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),zl(s,e,n,"",function(d){return d})):s!=null&&(Yf(s)&&(s=pT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sy(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Sd(i,c);o+=zl(i,e,n,u,s)}else if(u=mT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Sd(i,c++),o+=zl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gl(t,e,n){if(t==null)return t;var r=[],s=0;return zl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function yT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Wl={transition:null},vT={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:Qf};function kw(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:gl,forEach:function(t,e,n){gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gl(t,function(){e++}),e},toArray:function(t){return gl(t,function(e){return e})||[]},only:function(t){if(!Yf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=Ki;ae.Fragment=iT;ae.Profiler=aT;ae.PureComponent=Gf;ae.StrictMode=oT;ae.Suspense=dT;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vT;ae.act=kw;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Iw.call(e,u)&&!Nw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Va,type:t.type,key:s,ref:i,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:cT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lT,_context:t},t.Consumer=t};ae.createElement=Sw;ae.createFactory=function(t){var e=Sw.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:uT,render:t}};ae.isValidElement=Yf;ae.lazy=function(t){return{$$typeof:fT,_payload:{_status:-1,_result:t},_init:yT}};ae.memo=function(t,e){return{$$typeof:hT,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};ae.unstable_act=kw;ae.useCallback=function(t,e){return It.current.useCallback(t,e)};ae.useContext=function(t){return It.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ae.useEffect=function(t,e){return It.current.useEffect(t,e)};ae.useId=function(){return It.current.useId()};ae.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return It.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ae.useRef=function(t){return It.current.useRef(t)};ae.useState=function(t){return It.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return It.current.useTransition()};ae.version="18.3.1";xw.exports=ae;var C=xw.exports;const Cw=rT(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT=C,xT=Symbol.for("react.element"),_T=Symbol.for("react.fragment"),bT=Object.prototype.hasOwnProperty,ET=wT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TT={key:!0,ref:!0,__self:!0,__source:!0};function Aw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bT.call(e,r)&&!TT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:xT,type:t,key:i,ref:o,props:s,_owner:ET.current}}du.Fragment=_T;du.jsx=Aw;du.jsxs=Aw;ww.exports=du;var a=ww.exports,wh={},Pw={exports:{}},Kt={},Rw={exports:{}},jw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,B){var O=q.length;q.push(B);e:for(;0<O;){var $=O-1>>>1,Z=q[$];if(0<s(Z,B))q[$]=B,q[O]=Z,O=$;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var B=q[0],O=q.pop();if(O!==B){q[0]=O;e:for(var $=0,Z=q.length,ve=Z>>>1;$<ve;){var me=2*($+1)-1,pe=q[me],Ae=me+1,lt=q[Ae];if(0>s(pe,O))Ae<Z&&0>s(lt,pe)?(q[$]=lt,q[Ae]=O,$=Ae):(q[$]=pe,q[me]=O,$=me);else if(Ae<Z&&0>s(lt,O))q[$]=lt,q[Ae]=O,$=Ae;else break e}}return B}function s(q,B){var O=q.sortIndex-B.sortIndex;return O!==0?O:q.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,S=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=q)r(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=n(d)}}function R(q){if(N=!1,E(q),!S)if(n(u)!==null)S=!0,H(P);else{var B=n(d);B!==null&&oe(R,B.startTime-q)}}function P(q,B){S=!1,N&&(N=!1,x(v),v=-1),w=!0;var O=g;try{for(E(B),m=n(u);m!==null&&(!(m.expirationTime>B)||q&&!j());){var $=m.callback;if(typeof $=="function"){m.callback=null,g=m.priorityLevel;var Z=$(m.expirationTime<=B);B=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===n(u)&&r(u),E(B)}else r(u);m=n(u)}if(m!==null)var ve=!0;else{var me=n(d);me!==null&&oe(R,me.startTime-B),ve=!1}return ve}finally{m=null,g=O,w=!1}}var M=!1,T=null,v=-1,I=5,A=-1;function j(){return!(t.unstable_now()-A<I)}function D(){if(T!==null){var q=t.unstable_now();A=q;var B=!0;try{B=T(!0,q)}finally{B?k():(M=!1,T=null)}}else M=!1}var k;if(typeof y=="function")k=function(){y(D)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=D,k=function(){X.postMessage(null)}}else k=function(){_(D,0)};function H(q){T=q,M||(M=!0,k())}function oe(q,B){v=_(function(){q(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,H(P))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var B=3;break;default:B=g}var O=g;g=B;try{return q()}finally{g=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,B){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var O=g;g=q;try{return B()}finally{g=O}},t.unstable_scheduleCallback=function(q,B,O){var $=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?$+O:$):O=$,q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=O+Z,q={id:f++,callback:B,priorityLevel:q,startTime:O,expirationTime:Z,sortIndex:-1},O>$?(q.sortIndex=O,e(d,q),n(u)===null&&q===n(d)&&(N?(x(v),v=-1):N=!0,oe(R,O-$))):(q.sortIndex=Z,e(u,q),S||w||(S=!0,H(P))),q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(q){var B=g;return function(){var O=g;g=B;try{return q.apply(this,arguments)}finally{g=O}}}})(jw);Rw.exports=jw;var IT=Rw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=C,Ht=IT;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dw=new Set,oa={};function Qs(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(oa[t]=e,t=0;t<e.length;t++)Dw.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=Object.prototype.hasOwnProperty,ST=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},ay={};function kT(t){return xh.call(ay,t)?!0:xh.call(oy,t)?!1:ST.test(t)?ay[t]=!0:(oy[t]=!0,!1)}function CT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AT(t,e,n,r){if(e===null||typeof e>"u"||CT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xf=/[\-:]([a-z])/g;function Jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xf,Jf);ot[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xf,Jf);ot[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xf,Jf);ot[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zf(t,e,n,r){var s=ot.hasOwnProperty(e)?ot[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AT(e,n,s,r)&&(n=null),r||s===null?kT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=NT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),ui=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Lw=Symbol.for("react.provider"),Mw=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),bh=Symbol.for("react.suspense"),Eh=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),Ow=Symbol.for("react.offscreen"),ly=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=ly&&t[ly]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,kd;function Ro(t){if(kd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kd=e&&e[1]||""}return`
`+kd+t}var Cd=!1;function Ad(t,e){if(!t||Cd)return"";Cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Cd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ro(t):""}function PT(t){switch(t.tag){case 5:return Ro(t.type);case 16:return Ro("Lazy");case 13:return Ro("Suspense");case 19:return Ro("SuspenseList");case 0:case 2:case 15:return t=Ad(t.type,!1),t;case 11:return t=Ad(t.type.render,!1),t;case 1:return t=Ad(t.type,!0),t;default:return""}}function Th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case di:return"Fragment";case ui:return"Portal";case _h:return"Profiler";case em:return"StrictMode";case bh:return"Suspense";case Eh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mw:return(t.displayName||"Context")+".Consumer";case Lw:return(t._context.displayName||"Context")+".Provider";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:Th(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return Th(t(e))}catch{}}return null}function RT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Th(e);case 8:return e===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jT(t){var e=Vw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vl(t){t._valueTracker||(t._valueTracker=jT(t))}function Fw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ih(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Uw(t,e){e=e.checked,e!=null&&Zf(t,"checked",e,!1)}function Nh(t,e){Uw(t,e);var n=Qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sh(t,e.type,Qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sh(t,e,n){(e!=="number"||mc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jo=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(jo(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qr(n)}}function $w(t,e){var n=Qr(e.value),r=Qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wl,zw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DT=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){DT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function Ww(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function qw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ww(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var LT=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(LT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=null;function rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jh=null,Ei=null,Ti=null;function fy(t){if(t=$a(t)){if(typeof jh!="function")throw Error(W(280));var e=t.stateNode;e&&(e=gu(e),jh(t.stateNode,t.type,e))}}function Hw(t){Ei?Ti?Ti.push(t):Ti=[t]:Ei=t}function Gw(){if(Ei){var t=Ei,e=Ti;if(Ti=Ei=null,fy(t),e)for(t=0;t<e.length;t++)fy(e[t])}}function Kw(t,e){return t(e)}function Qw(){}var Pd=!1;function Yw(t,e,n){if(Pd)return t(e,n);Pd=!0;try{return Kw(t,e,n)}finally{Pd=!1,(Ei!==null||Ti!==null)&&(Qw(),Gw())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Dh=!1;if(nr)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{Dh=!1}function MT(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Wo=!1,pc=null,gc=!1,Lh=null,OT={onError:function(t){Wo=!0,pc=t}};function VT(t,e,n,r,s,i,o,c,u){Wo=!1,pc=null,MT.apply(OT,arguments)}function FT(t,e,n,r,s,i,o,c,u){if(VT.apply(this,arguments),Wo){if(Wo){var d=pc;Wo=!1,pc=null}else throw Error(W(198));gc||(gc=!0,Lh=d)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function my(t){if(Ys(t)!==t)throw Error(W(188))}function UT(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return my(s),t;if(i===r)return my(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function Jw(t){return t=UT(t),t!==null?Zw(t):null}function Zw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zw(t);if(e!==null)return e;t=t.sibling}return null}var ex=Ht.unstable_scheduleCallback,py=Ht.unstable_cancelCallback,$T=Ht.unstable_shouldYield,BT=Ht.unstable_requestPaint,Be=Ht.unstable_now,zT=Ht.unstable_getCurrentPriorityLevel,sm=Ht.unstable_ImmediatePriority,tx=Ht.unstable_UserBlockingPriority,yc=Ht.unstable_NormalPriority,WT=Ht.unstable_LowPriority,nx=Ht.unstable_IdlePriority,hu=null,jn=null;function qT(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(hu,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:KT,HT=Math.log,GT=Math.LN2;function KT(t){return t>>>=0,t===0?32:31-(HT(t)/GT|0)|0}var xl=64,_l=4194304;function Do(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Do(c):(i&=o,i!==0&&(r=Do(i)))}else o=n&~s,o!==0?r=Do(o):i!==0&&(r=Do(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),s=1<<n,r|=t[n],e&=~s;return r}function QT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=QT(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rx(){var t=xl;return xl<<=1,!(xl&4194240)&&(xl=64),t}function Rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function XT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function im(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function sx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ix,om,ox,ax,lx,Oh=!1,bl=[],Mr=null,Or=null,Vr=null,ca=new Map,ua=new Map,Sr=[],JT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gy(t,e){switch(t){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function To(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=$a(e),e!==null&&om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ZT(t,e,n,r,s){switch(e){case"focusin":return Mr=To(Mr,t,e,n,r,s),!0;case"dragenter":return Or=To(Or,t,e,n,r,s),!0;case"mouseover":return Vr=To(Vr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ca.set(i,To(ca.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ua.set(i,To(ua.get(i)||null,t,e,n,r,s)),!0}return!1}function cx(t){var e=Ts(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=Xw(n),e!==null){t.blockedOn=e,lx(t.priority,function(){ox(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ql(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rh=r,n.target.dispatchEvent(r),Rh=null}else return e=$a(n),e!==null&&om(e),t.blockedOn=n,!1;e.shift()}return!0}function yy(t,e,n){ql(t)&&n.delete(e)}function eI(){Oh=!1,Mr!==null&&ql(Mr)&&(Mr=null),Or!==null&&ql(Or)&&(Or=null),Vr!==null&&ql(Vr)&&(Vr=null),ca.forEach(yy),ua.forEach(yy)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,Oh||(Oh=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,eI)))}function da(t){function e(s){return Io(s,t)}if(0<bl.length){Io(bl[0],t);for(var n=1;n<bl.length;n++){var r=bl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mr!==null&&Io(Mr,t),Or!==null&&Io(Or,t),Vr!==null&&Io(Vr,t),ca.forEach(e),ua.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)cx(n),n.blockedOn===null&&Sr.shift()}var Ii=fr.ReactCurrentBatchConfig,wc=!0;function tI(t,e,n,r){var s=ye,i=Ii.transition;Ii.transition=null;try{ye=1,am(t,e,n,r)}finally{ye=s,Ii.transition=i}}function nI(t,e,n,r){var s=ye,i=Ii.transition;Ii.transition=null;try{ye=4,am(t,e,n,r)}finally{ye=s,Ii.transition=i}}function am(t,e,n,r){if(wc){var s=Vh(t,e,n,r);if(s===null)Bd(t,e,r,xc,n),gy(t,r);else if(ZT(s,t,e,n,r))r.stopPropagation();else if(gy(t,r),e&4&&-1<JT.indexOf(t)){for(;s!==null;){var i=$a(s);if(i!==null&&ix(i),i=Vh(t,e,n,r),i===null&&Bd(t,e,r,xc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Bd(t,e,r,null,n)}}var xc=null;function Vh(t,e,n,r){if(xc=null,t=rm(r),t=Ts(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xc=t,null}function ux(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zT()){case sm:return 1;case tx:return 4;case yc:case WT:return 16;case nx:return 536870912;default:return 16}default:return 16}}var jr=null,lm=null,Hl=null;function dx(){if(Hl)return Hl;var t,e=lm,n=e.length,r,s="value"in jr?jr.value:jr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Hl=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function El(){return!0}function vy(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?El:vy,this.isPropagationStopped=vy,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=Qt(Qi),Ua=je({},Qi,{view:0,detail:0}),rI=Qt(Ua),jd,Dd,No,fu=je({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==No&&(No&&t.type==="mousemove"?(jd=t.screenX-No.screenX,Dd=t.screenY-No.screenY):Dd=jd=0,No=t),jd)},movementY:function(t){return"movementY"in t?t.movementY:Dd}}),wy=Qt(fu),sI=je({},fu,{dataTransfer:0}),iI=Qt(sI),oI=je({},Ua,{relatedTarget:0}),Ld=Qt(oI),aI=je({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),lI=Qt(aI),cI=je({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uI=Qt(cI),dI=je({},Qi,{data:0}),xy=Qt(dI),hI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mI[t])?!!e[t]:!1}function um(){return pI}var gI=je({},Ua,{key:function(t){if(t.key){var e=hI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yI=Qt(gI),vI=je({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_y=Qt(vI),wI=je({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),xI=Qt(wI),_I=je({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=Qt(_I),EI=je({},fu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TI=Qt(EI),II=[9,13,27,32],dm=nr&&"CompositionEvent"in window,qo=null;nr&&"documentMode"in document&&(qo=document.documentMode);var NI=nr&&"TextEvent"in window&&!qo,hx=nr&&(!dm||qo&&8<qo&&11>=qo),by=" ",Ey=!1;function fx(t,e){switch(t){case"keyup":return II.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function SI(t,e){switch(t){case"compositionend":return mx(e);case"keypress":return e.which!==32?null:(Ey=!0,by);case"textInput":return t=e.data,t===by&&Ey?null:t;default:return null}}function kI(t,e){if(hi)return t==="compositionend"||!dm&&fx(t,e)?(t=dx(),Hl=lm=jr=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hx&&e.locale!=="ko"?null:e.data;default:return null}}var CI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CI[t.type]:e==="textarea"}function px(t,e,n,r){Hw(r),e=_c(e,"onChange"),0<e.length&&(n=new cm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ho=null,ha=null;function AI(t){Nx(t,0)}function mu(t){var e=pi(t);if(Fw(e))return t}function PI(t,e){if(t==="change")return e}var gx=!1;if(nr){var Md;if(nr){var Od="oninput"in document;if(!Od){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),Od=typeof Iy.oninput=="function"}Md=Od}else Md=!1;gx=Md&&(!document.documentMode||9<document.documentMode)}function Ny(){Ho&&(Ho.detachEvent("onpropertychange",yx),ha=Ho=null)}function yx(t){if(t.propertyName==="value"&&mu(ha)){var e=[];px(e,ha,t,rm(t)),Yw(AI,e)}}function RI(t,e,n){t==="focusin"?(Ny(),Ho=e,ha=n,Ho.attachEvent("onpropertychange",yx)):t==="focusout"&&Ny()}function jI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(ha)}function DI(t,e){if(t==="click")return mu(e)}function LI(t,e){if(t==="input"||t==="change")return mu(e)}function MI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:MI;function fa(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xh.call(e,s)||!yn(t[s],e[s]))return!1}return!0}function Sy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ky(t,e){var n=Sy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sy(n)}}function vx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wx(){for(var t=window,e=mc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mc(t.document)}return e}function hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OI(t){var e=wx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vx(n.ownerDocument.documentElement,n)){if(r!==null&&hm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ky(n,i);var o=ky(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VI=nr&&"documentMode"in document&&11>=document.documentMode,fi=null,Fh=null,Go=null,Uh=!1;function Cy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||fi==null||fi!==mc(r)||(r=fi,"selectionStart"in r&&hm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Go&&fa(Go,r)||(Go=r,r=_c(Fh,"onSelect"),0<r.length&&(e=new cm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function Tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mi={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},Vd={},xx={};nr&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function pu(t){if(Vd[t])return Vd[t];if(!mi[t])return t;var e=mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xx)return Vd[t]=e[n];return t}var _x=pu("animationend"),bx=pu("animationiteration"),Ex=pu("animationstart"),Tx=pu("transitionend"),Ix=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(t,e){Ix.set(t,e),Qs(e,[t])}for(var Fd=0;Fd<Ay.length;Fd++){var Ud=Ay[Fd],FI=Ud.toLowerCase(),UI=Ud[0].toUpperCase()+Ud.slice(1);os(FI,"on"+UI)}os(_x,"onAnimationEnd");os(bx,"onAnimationIteration");os(Ex,"onAnimationStart");os("dblclick","onDoubleClick");os("focusin","onFocus");os("focusout","onBlur");os(Tx,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$I=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function Py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FT(r,e,void 0,t),t.currentTarget=null}function Nx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Py(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Py(s,c,d),i=u}}}if(gc)throw t=Lh,gc=!1,Lh=null,t}function Te(t,e){var n=e[qh];n===void 0&&(n=e[qh]=new Set);var r=t+"__bubble";n.has(r)||(Sx(e,t,2,!1),n.add(r))}function $d(t,e,n){var r=0;e&&(r|=4),Sx(n,t,r,e)}var Il="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[Il]){t[Il]=!0,Dw.forEach(function(n){n!=="selectionchange"&&($I.has(n)||$d(n,!1,t),$d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Il]||(e[Il]=!0,$d("selectionchange",!1,e))}}function Sx(t,e,n,r){switch(ux(e)){case 1:var s=tI;break;case 4:s=nI;break;default:s=am}n=s.bind(null,e,n,t),s=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=Ts(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Yw(function(){var d=i,f=rm(n),m=[];e:{var g=Ix.get(t);if(g!==void 0){var w=cm,S=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":w=yI;break;case"focusin":S="focus",w=Ld;break;case"focusout":S="blur",w=Ld;break;case"beforeblur":case"afterblur":w=Ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=iI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=xI;break;case _x:case bx:case Ex:w=lI;break;case Tx:w=bI;break;case"scroll":w=rI;break;case"wheel":w=TI;break;case"copy":case"cut":case"paste":w=uI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=_y}var N=(e&4)!==0,_=!N&&t==="scroll",x=N?g!==null?g+"Capture":null:g;N=[];for(var y=d,E;y!==null;){E=y;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,x!==null&&(R=la(y,x),R!=null&&N.push(pa(y,R,E)))),_)break;y=y.return}0<N.length&&(g=new w(g,S,null,n,f),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Rh&&(S=n.relatedTarget||n.fromElement)&&(Ts(S)||S[rr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?Ts(S):null,S!==null&&(_=Ys(S),S!==_||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(N=wy,R="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=_y,R="onPointerLeave",x="onPointerEnter",y="pointer"),_=w==null?g:pi(w),E=S==null?g:pi(S),g=new N(R,y+"leave",w,n,f),g.target=_,g.relatedTarget=E,R=null,Ts(f)===d&&(N=new N(x,y+"enter",S,n,f),N.target=E,N.relatedTarget=_,R=N),_=R,w&&S)t:{for(N=w,x=S,y=0,E=N;E;E=ii(E))y++;for(E=0,R=x;R;R=ii(R))E++;for(;0<y-E;)N=ii(N),y--;for(;0<E-y;)x=ii(x),E--;for(;y--;){if(N===x||x!==null&&N===x.alternate)break t;N=ii(N),x=ii(x)}N=null}else N=null;w!==null&&Ry(m,g,w,N,!1),S!==null&&_!==null&&Ry(m,_,S,N,!0)}}e:{if(g=d?pi(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var P=PI;else if(Ty(g))if(gx)P=LI;else{P=jI;var M=RI}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(P=DI);if(P&&(P=P(t,d))){px(m,P,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Sh(g,"number",g.value)}switch(M=d?pi(d):window,t){case"focusin":(Ty(M)||M.contentEditable==="true")&&(fi=M,Fh=d,Go=null);break;case"focusout":Go=Fh=fi=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,Cy(m,n,f);break;case"selectionchange":if(VI)break;case"keydown":case"keyup":Cy(m,n,f)}var T;if(dm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else hi?fx(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(hx&&n.locale!=="ko"&&(hi||v!=="onCompositionStart"?v==="onCompositionEnd"&&hi&&(T=dx()):(jr=f,lm="value"in jr?jr.value:jr.textContent,hi=!0)),M=_c(d,v),0<M.length&&(v=new xy(v,t,null,n,f),m.push({event:v,listeners:M}),T?v.data=T:(T=mx(n),T!==null&&(v.data=T)))),(T=NI?SI(t,n):kI(t,n))&&(d=_c(d,"onBeforeInput"),0<d.length&&(f=new xy("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=T))}Nx(m,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=la(t,n),i!=null&&r.unshift(pa(t,i,s)),i=la(t,e),i!=null&&r.push(pa(t,i,s))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ry(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=la(n,i),u!=null&&o.unshift(pa(n,u,c))):s||(u=la(n,i),u!=null&&o.push(pa(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BI=/\r\n?/g,zI=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(BI,`
`).replace(zI,"")}function Nl(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(W(425))}function bc(){}var $h=null,Bh=null;function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,WI=typeof clearTimeout=="function"?clearTimeout:void 0,Dy=typeof Promise=="function"?Promise:void 0,qI=typeof queueMicrotask=="function"?queueMicrotask:typeof Dy<"u"?function(t){return Dy.resolve(null).then(t).catch(HI)}:Wh;function HI(t){setTimeout(function(){throw t})}function zd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);da(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ly(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),An="__reactFiber$"+Yi,ga="__reactProps$"+Yi,rr="__reactContainer$"+Yi,qh="__reactEvents$"+Yi,GI="__reactListeners$"+Yi,KI="__reactHandles$"+Yi;function Ts(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ly(t);t!==null;){if(n=t[An])return n;t=Ly(t)}return e}t=n,n=t.parentNode}return null}function $a(t){return t=t[An]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function gu(t){return t[ga]||null}var Hh=[],gi=-1;function as(t){return{current:t}}function Ne(t){0>gi||(t.current=Hh[gi],Hh[gi]=null,gi--)}function be(t,e){gi++,Hh[gi]=t.current,t.current=e}var Yr={},gt=as(Yr),Rt=as(!1),Ls=Yr;function Mi(t,e){var n=t.type.contextTypes;if(!n)return Yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Ec(){Ne(Rt),Ne(gt)}function My(t,e,n){if(gt.current!==Yr)throw Error(W(168));be(gt,e),be(Rt,n)}function kx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,RT(t)||"Unknown",s));return je({},n,r)}function Tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yr,Ls=gt.current,be(gt,t),be(Rt,Rt.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=kx(t,e,Ls),r.__reactInternalMemoizedMergedChildContext=t,Ne(Rt),Ne(gt),be(gt,t)):Ne(Rt),be(Rt,n)}var Hn=null,yu=!1,Wd=!1;function Cx(t){Hn===null?Hn=[t]:Hn.push(t)}function QI(t){yu=!0,Cx(t)}function ls(){if(!Wd&&Hn!==null){Wd=!0;var t=0,e=ye;try{var n=Hn;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,yu=!1}catch(s){throw Hn!==null&&(Hn=Hn.slice(t+1)),ex(sm,ls),s}finally{ye=e,Wd=!1}}return null}var yi=[],vi=0,Ic=null,Nc=0,Yt=[],Xt=0,Ms=null,Kn=1,Qn="";function _s(t,e){yi[vi++]=Nc,yi[vi++]=Ic,Ic=t,Nc=e}function Ax(t,e,n){Yt[Xt++]=Kn,Yt[Xt++]=Qn,Yt[Xt++]=Ms,Ms=t;var r=Kn;t=Qn;var s=32-fn(r)-1;r&=~(1<<s),n+=1;var i=32-fn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kn=1<<32-fn(e)+s|n<<s|r,Qn=i+t}else Kn=1<<i|n<<s|r,Qn=t}function fm(t){t.return!==null&&(_s(t,1),Ax(t,1,0))}function mm(t){for(;t===Ic;)Ic=yi[--vi],yi[vi]=null,Nc=yi[--vi],yi[vi]=null;for(;t===Ms;)Ms=Yt[--Xt],Yt[Xt]=null,Qn=Yt[--Xt],Yt[Xt]=null,Kn=Yt[--Xt],Yt[Xt]=null}var zt=null,Ut=null,ke=!1,dn=null;function Px(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ut=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:Kn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ut=null,!0):!1;default:return!1}}function Gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kh(t){if(ke){var e=Ut;if(e){var n=e;if(!Vy(t,e)){if(Gh(t))throw Error(W(418));e=Fr(n.nextSibling);var r=zt;e&&Vy(t,e)?Px(r,n):(t.flags=t.flags&-4097|2,ke=!1,zt=t)}}else{if(Gh(t))throw Error(W(418));t.flags=t.flags&-4097|2,ke=!1,zt=t}}}function Fy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Sl(t){if(t!==zt)return!1;if(!ke)return Fy(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zh(t.type,t.memoizedProps)),e&&(e=Ut)){if(Gh(t))throw Rx(),Error(W(418));for(;e;)Px(t,e),e=Fr(e.nextSibling)}if(Fy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=Fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=zt?Fr(t.stateNode.nextSibling):null;return!0}function Rx(){for(var t=Ut;t;)t=Fr(t.nextSibling)}function Oi(){Ut=zt=null,ke=!1}function pm(t){dn===null?dn=[t]:dn.push(t)}var YI=fr.ReactCurrentBatchConfig;function So(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uy(t){var e=t._init;return e(t._payload)}function jx(t){function e(x,y){if(t){var E=x.deletions;E===null?(x.deletions=[y],x.flags|=16):E.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=zr(x,y),x.index=0,x.sibling=null,x}function i(x,y,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<y?(x.flags|=2,y):E):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,y,E,R){return y===null||y.tag!==6?(y=Xd(E,x.mode,R),y.return=x,y):(y=s(y,E),y.return=x,y)}function u(x,y,E,R){var P=E.type;return P===di?f(x,y,E.props.children,R,E.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ir&&Uy(P)===y.type)?(R=s(y,E.props),R.ref=So(x,y,E),R.return=x,R):(R=ec(E.type,E.key,E.props,null,x.mode,R),R.ref=So(x,y,E),R.return=x,R)}function d(x,y,E,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Jd(E,x.mode,R),y.return=x,y):(y=s(y,E.children||[]),y.return=x,y)}function f(x,y,E,R,P){return y===null||y.tag!==7?(y=Ps(E,x.mode,R,P),y.return=x,y):(y=s(y,E),y.return=x,y)}function m(x,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Xd(""+y,x.mode,E),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case yl:return E=ec(y.type,y.key,y.props,null,x.mode,E),E.ref=So(x,null,y),E.return=x,E;case ui:return y=Jd(y,x.mode,E),y.return=x,y;case Ir:var R=y._init;return m(x,R(y._payload),E)}if(jo(y)||bo(y))return y=Ps(y,x.mode,E,null),y.return=x,y;kl(x,y)}return null}function g(x,y,E,R){var P=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:c(x,y,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case yl:return E.key===P?u(x,y,E,R):null;case ui:return E.key===P?d(x,y,E,R):null;case Ir:return P=E._init,g(x,y,P(E._payload),R)}if(jo(E)||bo(E))return P!==null?null:f(x,y,E,R,null);kl(x,E)}return null}function w(x,y,E,R,P){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(E)||null,c(y,x,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case yl:return x=x.get(R.key===null?E:R.key)||null,u(y,x,R,P);case ui:return x=x.get(R.key===null?E:R.key)||null,d(y,x,R,P);case Ir:var M=R._init;return w(x,y,E,M(R._payload),P)}if(jo(R)||bo(R))return x=x.get(E)||null,f(y,x,R,P,null);kl(y,R)}return null}function S(x,y,E,R){for(var P=null,M=null,T=y,v=y=0,I=null;T!==null&&v<E.length;v++){T.index>v?(I=T,T=null):I=T.sibling;var A=g(x,T,E[v],R);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(x,T),y=i(A,y,v),M===null?P=A:M.sibling=A,M=A,T=I}if(v===E.length)return n(x,T),ke&&_s(x,v),P;if(T===null){for(;v<E.length;v++)T=m(x,E[v],R),T!==null&&(y=i(T,y,v),M===null?P=T:M.sibling=T,M=T);return ke&&_s(x,v),P}for(T=r(x,T);v<E.length;v++)I=w(T,x,v,E[v],R),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),y=i(I,y,v),M===null?P=I:M.sibling=I,M=I);return t&&T.forEach(function(j){return e(x,j)}),ke&&_s(x,v),P}function N(x,y,E,R){var P=bo(E);if(typeof P!="function")throw Error(W(150));if(E=P.call(E),E==null)throw Error(W(151));for(var M=P=null,T=y,v=y=0,I=null,A=E.next();T!==null&&!A.done;v++,A=E.next()){T.index>v?(I=T,T=null):I=T.sibling;var j=g(x,T,A.value,R);if(j===null){T===null&&(T=I);break}t&&T&&j.alternate===null&&e(x,T),y=i(j,y,v),M===null?P=j:M.sibling=j,M=j,T=I}if(A.done)return n(x,T),ke&&_s(x,v),P;if(T===null){for(;!A.done;v++,A=E.next())A=m(x,A.value,R),A!==null&&(y=i(A,y,v),M===null?P=A:M.sibling=A,M=A);return ke&&_s(x,v),P}for(T=r(x,T);!A.done;v++,A=E.next())A=w(T,x,v,A.value,R),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?v:A.key),y=i(A,y,v),M===null?P=A:M.sibling=A,M=A);return t&&T.forEach(function(D){return e(x,D)}),ke&&_s(x,v),P}function _(x,y,E,R){if(typeof E=="object"&&E!==null&&E.type===di&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case yl:e:{for(var P=E.key,M=y;M!==null;){if(M.key===P){if(P=E.type,P===di){if(M.tag===7){n(x,M.sibling),y=s(M,E.props.children),y.return=x,x=y;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ir&&Uy(P)===M.type){n(x,M.sibling),y=s(M,E.props),y.ref=So(x,M,E),y.return=x,x=y;break e}n(x,M);break}else e(x,M);M=M.sibling}E.type===di?(y=Ps(E.props.children,x.mode,R,E.key),y.return=x,x=y):(R=ec(E.type,E.key,E.props,null,x.mode,R),R.ref=So(x,y,E),R.return=x,x=R)}return o(x);case ui:e:{for(M=E.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(x,y.sibling),y=s(y,E.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=Jd(E,x.mode,R),y.return=x,x=y}return o(x);case Ir:return M=E._init,_(x,y,M(E._payload),R)}if(jo(E))return S(x,y,E,R);if(bo(E))return N(x,y,E,R);kl(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,E),y.return=x,x=y):(n(x,y),y=Xd(E,x.mode,R),y.return=x,x=y),o(x)):n(x,y)}return _}var Vi=jx(!0),Dx=jx(!1),Sc=as(null),kc=null,wi=null,gm=null;function ym(){gm=wi=kc=null}function vm(t){var e=Sc.current;Ne(Sc),t._currentValue=e}function Qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ni(t,e){kc=t,gm=wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(gm!==t)if(t={context:t,memoizedValue:e,next:null},wi===null){if(kc===null)throw Error(W(308));wi=t,kc.dependencies={lanes:0,firstContext:t}}else wi=wi.next=t;return e}var Is=null;function wm(t){Is===null?Is=[t]:Is.push(t)}function Lx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,wm(e)):(n.next=s.next,s.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function xm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sr(t,n)}return s=r.interleaved,s===null?(e.next=e,wm(r)):(e.next=s.next,s.next=e),r.interleaved=e,sr(t,n)}function Kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,im(t,n)}}function $y(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cc(t,e,n,r){var s=t.updateQueue;Nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,N=c;switch(g=e,w=n,N.tag){case 1:if(S=N.payload,typeof S=="function"){m=S.call(w,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=N.payload,g=typeof S=="function"?S.call(w,m,g):S,g==null)break e;m=je({},m,g);break e;case 2:Nr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=m}}function By(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Ba={},Dn=as(Ba),ya=as(Ba),va=as(Ba);function Ns(t){if(t===Ba)throw Error(W(174));return t}function _m(t,e){switch(be(va,e),be(ya,t),be(Dn,Ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ch(e,t)}Ne(Dn),be(Dn,e)}function Fi(){Ne(Dn),Ne(ya),Ne(va)}function Ox(t){Ns(va.current);var e=Ns(Dn.current),n=Ch(e,t.type);e!==n&&(be(ya,t),be(Dn,n))}function bm(t){ya.current===t&&(Ne(Dn),Ne(ya))}var Pe=as(0);function Ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qd=[];function Em(){for(var t=0;t<qd.length;t++)qd[t]._workInProgressVersionPrimary=null;qd.length=0}var Ql=fr.ReactCurrentDispatcher,Hd=fr.ReactCurrentBatchConfig,Os=0,Re=null,Ke=null,Ze=null,Pc=!1,Ko=!1,wa=0,XI=0;function ut(){throw Error(W(321))}function Tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function Im(t,e,n,r,s,i){if(Os=i,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ql.current=t===null||t.memoizedState===null?tN:nN,t=n(r,s),Ko){i=0;do{if(Ko=!1,wa=0,25<=i)throw Error(W(301));i+=1,Ze=Ke=null,e.updateQueue=null,Ql.current=rN,t=n(r,s)}while(Ko)}if(Ql.current=Rc,e=Ke!==null&&Ke.next!==null,Os=0,Ze=Ke=Re=null,Pc=!1,e)throw Error(W(300));return t}function Nm(){var t=wa!==0;return wa=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Re.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function rn(){if(Ke===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?Re.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error(W(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Re.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function xa(t,e){return typeof e=="function"?e(t):e}function Gd(t){var e=rn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Ke,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Os&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Re.lanes|=f,Vs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,yn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Re.lanes|=i,Vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Kd(t){var e=rn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Vx(){}function Fx(t,e){var n=Re,r=rn(),s=e(),i=!yn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Sm(Bx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,_a(9,$x.bind(null,n,r,s,e),void 0,null),et===null)throw Error(W(349));Os&30||Ux(n,e,s)}return s}function Ux(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $x(t,e,n,r){e.value=n,e.getSnapshot=r,zx(e)&&Wx(t)}function Bx(t,e,n){return n(function(){zx(e)&&Wx(t)})}function zx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function Wx(t){var e=sr(t,1);e!==null&&mn(e,t,1,-1)}function zy(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},e.queue=t,t=t.dispatch=eN.bind(null,Re,t),[e.memoizedState,t]}function _a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qx(){return rn().memoizedState}function Yl(t,e,n,r){var s=kn();Re.flags|=t,s.memoizedState=_a(1|e,n,void 0,r===void 0?null:r)}function vu(t,e,n,r){var s=rn();r=r===void 0?null:r;var i=void 0;if(Ke!==null){var o=Ke.memoizedState;if(i=o.destroy,r!==null&&Tm(r,o.deps)){s.memoizedState=_a(e,n,i,r);return}}Re.flags|=t,s.memoizedState=_a(1|e,n,i,r)}function Wy(t,e){return Yl(8390656,8,t,e)}function Sm(t,e){return vu(2048,8,t,e)}function Hx(t,e){return vu(4,2,t,e)}function Gx(t,e){return vu(4,4,t,e)}function Kx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qx(t,e,n){return n=n!=null?n.concat([t]):null,vu(4,4,Kx.bind(null,e,t),n)}function km(){}function Yx(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xx(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jx(t,e,n){return Os&21?(yn(n,e)||(n=rx(),Re.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function JI(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Hd.transition;Hd.transition={};try{t(!1),e()}finally{ye=n,Hd.transition=r}}function Zx(){return rn().memoizedState}function ZI(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},e_(t))t_(e,n);else if(n=Lx(t,e,n,r),n!==null){var s=Et();mn(n,t,r,s),n_(n,e,r)}}function eN(t,e,n){var r=Br(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(e_(t))t_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,yn(c,o)){var u=e.interleaved;u===null?(s.next=s,wm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Lx(t,e,s,r),n!==null&&(s=Et(),mn(n,t,r,s),n_(n,e,r))}}function e_(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function t_(t,e){Ko=Pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function n_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,im(t,n)}}var Rc={readContext:nn,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},tN={readContext:nn,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:Wy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yl(4194308,4,Kx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yl(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZI.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:zy,useDebugValue:km,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=zy(!1),e=t[0];return t=JI.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,s=kn();if(ke){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),et===null)throw Error(W(349));Os&30||Ux(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Wy(Bx.bind(null,r,i,t),[t]),r.flags|=2048,_a(9,$x.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kn(),e=et.identifierPrefix;if(ke){var n=Qn,r=Kn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nN={readContext:nn,useCallback:Yx,useContext:nn,useEffect:Sm,useImperativeHandle:Qx,useInsertionEffect:Hx,useLayoutEffect:Gx,useMemo:Xx,useReducer:Gd,useRef:qx,useState:function(){return Gd(xa)},useDebugValue:km,useDeferredValue:function(t){var e=rn();return Jx(e,Ke.memoizedState,t)},useTransition:function(){var t=Gd(xa)[0],e=rn().memoizedState;return[t,e]},useMutableSource:Vx,useSyncExternalStore:Fx,useId:Zx,unstable_isNewReconciler:!1},rN={readContext:nn,useCallback:Yx,useContext:nn,useEffect:Sm,useImperativeHandle:Qx,useInsertionEffect:Hx,useLayoutEffect:Gx,useMemo:Xx,useReducer:Kd,useRef:qx,useState:function(){return Kd(xa)},useDebugValue:km,useDeferredValue:function(t){var e=rn();return Ke===null?e.memoizedState=t:Jx(e,Ke.memoizedState,t)},useTransition:function(){var t=Kd(xa)[0],e=rn().memoizedState;return[t,e]},useMutableSource:Vx,useSyncExternalStore:Fx,useId:Zx,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wu={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Br(t),i=Jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ur(t,i,s),e!==null&&(mn(e,t,s,r),Kl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Br(t),i=Jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ur(t,i,s),e!==null&&(mn(e,t,s,r),Kl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Br(t),s=Jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ur(t,s,r),e!==null&&(mn(e,t,r,n),Kl(e,t,r))}};function qy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(s,i):!0}function r_(t,e,n){var r=!1,s=Yr,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(s=jt(e)?Ls:gt.current,r=e.contextTypes,i=(r=r!=null)?Mi(t,s):Yr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wu.enqueueReplaceState(e,e.state,null)}function Xh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nn(i):(i=jt(e)?Ls:gt.current,s.context=Mi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Yh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wu.enqueueReplaceState(s,s.state,null),Cc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ui(t,e){try{var n="",r=e;do n+=PT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sN=typeof WeakMap=="function"?WeakMap:Map;function s_(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dc||(Dc=!0,cf=r),Jh(t,e)},n}function i_(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Jh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Jh(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vN.bind(null,t,e,n),e.then(t,t))}function Ky(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var iN=fr.ReactCurrentOwner,Pt=!1;function bt(t,e,n,r){e.child=t===null?Dx(e,null,n,r):Vi(e,t.child,n,r)}function Yy(t,e,n,r,s){n=n.render;var i=e.ref;return Ni(e,s),r=Im(t,e,n,r,i,s),n=Nm(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(ke&&n&&fm(e),e.flags|=1,bt(t,e,r,s),e.child)}function Xy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Mm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,o_(t,e,i,r,s)):(t=ec(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return ir(t,e,s)}return e.flags|=1,t=zr(i,r),t.ref=e.ref,t.return=e,e.child=t}function o_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fa(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,ir(t,e,s)}return Zh(t,e,n,r,s)}function a_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(_i,Vt),Vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(_i,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(_i,Vt),Vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,be(_i,Vt),Vt|=r;return bt(t,e,s,n),e.child}function l_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zh(t,e,n,r,s){var i=jt(n)?Ls:gt.current;return i=Mi(e,i),Ni(e,s),n=Im(t,e,n,r,i,s),r=Nm(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ir(t,e,s)):(ke&&r&&fm(e),e.flags|=1,bt(t,e,n,s),e.child)}function Jy(t,e,n,r,s){if(jt(n)){var i=!0;Tc(e)}else i=!1;if(Ni(e,s),e.stateNode===null)Xl(t,e),r_(e,n,r),Xh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=nn(d):(d=jt(n)?Ls:gt.current,d=Mi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&Hy(e,o,r,d),Nr=!1;var g=e.memoizedState;o.state=g,Cc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Rt.current||Nr?(typeof f=="function"&&(Yh(e,n,f,r),u=e.memoizedState),(c=Nr||qy(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:cn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=nn(u):(u=jt(n)?Ls:gt.current,u=Mi(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&Hy(e,o,r,u),Nr=!1,g=e.memoizedState,o.state=g,Cc(e,r,o,s);var S=e.memoizedState;c!==m||g!==S||Rt.current||Nr?(typeof w=="function"&&(Yh(e,n,w,r),S=e.memoizedState),(d=Nr||qy(e,n,d,r,g,S,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ef(t,e,n,r,i,s)}function ef(t,e,n,r,s,i){l_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Oy(e,n,!1),ir(t,e,i);r=e.stateNode,iN.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vi(e,t.child,null,i),e.child=Vi(e,null,c,i)):bt(t,e,c,i),e.memoizedState=r.state,s&&Oy(e,n,!0),e.child}function c_(t){var e=t.stateNode;e.pendingContext?My(t,e.pendingContext,e.pendingContext!==e.context):e.context&&My(t,e.context,!1),_m(t,e.containerInfo)}function Zy(t,e,n,r,s){return Oi(),pm(s),e.flags|=256,bt(t,e,n,r),e.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function u_(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(Pe,s&1),t===null)return Kh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bu(o,r,0,null),t=Ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nf(n),e.memoizedState=tf,t):Cm(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return oN(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=zr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=zr(c,i):(i=Ps(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?nf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=tf,r}return i=t.child,t=i.sibling,r=zr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cm(t,e){return e=bu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cl(t,e,n,r){return r!==null&&pm(r),Vi(e,t.child,null,n),t=Cm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Qd(Error(W(422))),Cl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bu({mode:"visible",children:r.children},s,0,null),i=Ps(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Vi(e,t.child,null,o),e.child.memoizedState=nf(o),e.memoizedState=tf,i);if(!(e.mode&1))return Cl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(W(419)),r=Qd(i,r,void 0),Cl(t,e,o,r)}if(c=(o&t.childLanes)!==0,Pt||c){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sr(t,s),mn(r,t,s,-1))}return Lm(),r=Qd(Error(W(421))),Cl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=wN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ut=Fr(s.nextSibling),zt=e,ke=!0,dn=null,t!==null&&(Yt[Xt++]=Kn,Yt[Xt++]=Qn,Yt[Xt++]=Ms,Kn=t.id,Qn=t.overflow,Ms=e),e=Cm(e,r.children),e.flags|=4096,e)}function e0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qh(t.return,e,n)}function Yd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function d_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&e0(t,n,e);else if(t.tag===19)e0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ac(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Yd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ac(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Yd(e,!0,n,null,i);break;case"together":Yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aN(t,e,n){switch(e.tag){case 3:c_(e),Oi();break;case 5:Ox(e);break;case 1:jt(e.type)&&Tc(e);break;case 4:_m(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(Sc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?u_(t,e,n):(be(Pe,Pe.current&1),t=ir(t,e,n),t!==null?t.sibling:null);be(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return d_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,a_(t,e,n)}return ir(t,e,n)}var h_,rf,f_,m_;h_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rf=function(){};f_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ns(Dn.current);var i=null;switch(n){case"input":s=Ih(t,s),r=Ih(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=kh(t,s),r=kh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bc)}Ah(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Te("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};m_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lN(t,e,n){var r=e.pendingProps;switch(mm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return jt(e.type)&&Ec(),dt(e),null;case 3:return r=e.stateNode,Fi(),Ne(Rt),Ne(gt),Em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(hf(dn),dn=null))),rf(t,e),dt(e),null;case 5:bm(e);var s=Ns(va.current);if(n=e.type,t!==null&&e.stateNode!=null)f_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return dt(e),null}if(t=Ns(Dn.current),Sl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[ga]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Lo.length;s++)Te(Lo[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":cy(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":dy(r,i),Te("invalid",r)}Ah(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Nl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Nl(r.textContent,c,t),s=["children",""+c]):oa.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":vl(r),uy(r,i,!0);break;case"textarea":vl(r),hy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[ga]=r,h_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ph(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lo.length;s++)Te(Lo[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":cy(t,r),s=Ih(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Te("invalid",t);break;case"textarea":dy(t,r),s=kh(t,r),Te("invalid",t);break;default:s=r}Ah(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?qw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&aa(t,u):typeof u=="number"&&aa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&Zf(t,i,u,o))}switch(n){case"input":vl(t),uy(t,r,!1);break;case"textarea":vl(t),hy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)m_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Ns(va.current),Ns(Dn.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Nl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return dt(e),null;case 13:if(Ne(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Ut!==null&&e.mode&1&&!(e.flags&128))Rx(),Oi(),e.flags|=98560,i=!1;else if(i=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[An]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),i=!1}else dn!==null&&(hf(dn),dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Qe===0&&(Qe=3):Lm())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Fi(),rf(t,e),t===null&&ma(e.stateNode.containerInfo),dt(e),null;case 10:return vm(e.type._context),dt(e),null;case 17:return jt(e.type)&&Ec(),dt(e),null;case 19:if(Ne(Pe),i=e.memoizedState,i===null)return dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ko(i,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ac(t),o!==null){for(e.flags|=128,ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>$i&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ac(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return dt(e),null}else 2*Be()-i.renderingStartTime>$i&&n!==1073741824&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Pe.current,be(Pe,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Dm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function cN(t,e){switch(mm(e),e.tag){case 1:return jt(e.type)&&Ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fi(),Ne(Rt),Ne(gt),Em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bm(e),null;case 13:if(Ne(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Pe),null;case 4:return Fi(),null;case 10:return vm(e.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var Al=!1,mt=!1,uN=typeof WeakSet=="function"?WeakSet:Set,Y=null;function xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function sf(t,e,n){try{n()}catch(r){Me(t,e,r)}}var t0=!1;function dN(t,e){if($h=wc,t=wx(),hm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bh={focusedElem:t,selectionRange:n},wc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var N=S.memoizedProps,_=S.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:cn(e.type,N),_);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(R){Me(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return S=t0,t0=!1,S}function Qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&sf(e,n,i)}s=s.next}while(s!==r)}}function xu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function of(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function p_(t){var e=t.alternate;e!==null&&(t.alternate=null,p_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[ga],delete e[qh],delete e[GI],delete e[KI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function g_(t){return t.tag===5||t.tag===3||t.tag===4}function n0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function af(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bc));else if(r!==4&&(t=t.child,t!==null))for(af(t,e,n),t=t.sibling;t!==null;)af(t,e,n),t=t.sibling}function lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lf(t,e,n),t=t.sibling;t!==null;)lf(t,e,n),t=t.sibling}var nt=null,un=!1;function Er(t,e,n){for(n=n.child;n!==null;)y_(t,e,n),n=n.sibling}function y_(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:mt||xi(n,e);case 6:var r=nt,s=un;nt=null,Er(t,e,n),nt=r,un=s,nt!==null&&(un?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(un?(t=nt,n=n.stateNode,t.nodeType===8?zd(t.parentNode,n):t.nodeType===1&&zd(t,n),da(t)):zd(nt,n.stateNode));break;case 4:r=nt,s=un,nt=n.stateNode.containerInfo,un=!0,Er(t,e,n),nt=r,un=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sf(n,e,o),s=s.next}while(s!==r)}Er(t,e,n);break;case 1:if(!mt&&(xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Me(n,e,c)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,Er(t,e,n),mt=r):Er(t,e,n);break;default:Er(t,e,n)}}function r0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uN),e.forEach(function(r){var s=xN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:nt=c.stateNode,un=!1;break e;case 3:nt=c.stateNode.containerInfo,un=!0;break e;case 4:nt=c.stateNode.containerInfo,un=!0;break e}c=c.return}if(nt===null)throw Error(W(160));y_(i,o,s),nt=null,un=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)v_(e,t),e=e.sibling}function v_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),Sn(t),r&4){try{Qo(3,t,t.return),xu(3,t)}catch(N){Me(t,t.return,N)}try{Qo(5,t,t.return)}catch(N){Me(t,t.return,N)}}break;case 1:ln(e,t),Sn(t),r&512&&n!==null&&xi(n,n.return);break;case 5:if(ln(e,t),Sn(t),r&512&&n!==null&&xi(n,n.return),t.flags&32){var s=t.stateNode;try{aa(s,"")}catch(N){Me(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Uw(s,i),Ph(c,o);var d=Ph(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?qw(s,m):f==="dangerouslySetInnerHTML"?zw(s,m):f==="children"?aa(s,m):Zf(s,f,m,d)}switch(c){case"input":Nh(s,i);break;case"textarea":$w(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?bi(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?bi(s,!!i.multiple,i.defaultValue,!0):bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ga]=i}catch(N){Me(t,t.return,N)}}break;case 6:if(ln(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Me(t,t.return,N)}}break;case 3:if(ln(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(N){Me(t,t.return,N)}break;case 4:ln(e,t),Sn(t);break;case 13:ln(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rm=Be())),r&4&&r0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(d=mt)||f,ln(e,t),mt=d):ln(e,t),Sn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(m=Y=f;Y!==null;){switch(g=Y,w=g.child,g.tag){case 0:case 11:case 14:case 15:Qo(4,g,g.return);break;case 1:xi(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(N){Me(r,n,N)}}break;case 5:xi(g,g.return);break;case 22:if(g.memoizedState!==null){i0(m);continue}}w!==null?(w.return=g,Y=w):i0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Ww("display",o))}catch(N){Me(t,t.return,N)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){Me(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ln(e,t),Sn(t),r&4&&r0(t);break;case 21:break;default:ln(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(g_(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(aa(s,""),r.flags&=-33);var i=n0(t);lf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=n0(t);af(t,c,o);break;default:throw Error(W(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hN(t,e,n){Y=t,w_(t)}function w_(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Al;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||mt;c=Al;var d=mt;if(Al=o,(mt=u)&&!d)for(Y=s;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?o0(s):u!==null?(u.return=o,Y=u):o0(s);for(;i!==null;)Y=i,w_(i),i=i.sibling;Y=s,Al=c,mt=d}s0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):s0(t)}}function s0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||xu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&By(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}By(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&da(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}mt||e.flags&512&&of(e)}catch(g){Me(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function i0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function o0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xu(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{of(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{of(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var fN=Math.ceil,jc=fr.ReactCurrentDispatcher,Am=fr.ReactCurrentOwner,tn=fr.ReactCurrentBatchConfig,he=0,et=null,We=null,it=0,Vt=0,_i=as(0),Qe=0,ba=null,Vs=0,_u=0,Pm=0,Yo=null,kt=null,Rm=0,$i=1/0,qn=null,Dc=!1,cf=null,$r=null,Pl=!1,Dr=null,Lc=0,Xo=0,uf=null,Jl=-1,Zl=0;function Et(){return he&6?Be():Jl!==-1?Jl:Jl=Be()}function Br(t){return t.mode&1?he&2&&it!==0?it&-it:YI.transition!==null?(Zl===0&&(Zl=rx()),Zl):(t=ye,t!==0||(t=window.event,t=t===void 0?16:ux(t.type)),t):1}function mn(t,e,n,r){if(50<Xo)throw Xo=0,uf=null,Error(W(185));Fa(t,n,r),(!(he&2)||t!==et)&&(t===et&&(!(he&2)&&(_u|=n),Qe===4&&kr(t,it)),Dt(t,r),n===1&&he===0&&!(e.mode&1)&&($i=Be()+500,yu&&ls()))}function Dt(t,e){var n=t.callbackNode;YT(t,e);var r=vc(t,t===et?it:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?QI(a0.bind(null,t)):Cx(a0.bind(null,t)),qI(function(){!(he&6)&&ls()}),n=null;else{switch(sx(r)){case 1:n=sm;break;case 4:n=tx;break;case 16:n=yc;break;case 536870912:n=nx;break;default:n=yc}n=S_(n,x_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function x_(t,e){if(Jl=-1,Zl=0,he&6)throw Error(W(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var r=vc(t,t===et?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mc(t,r);else{e=r;var s=he;he|=2;var i=b_();(et!==t||it!==e)&&(qn=null,$i=Be()+500,As(t,e));do try{gN();break}catch(c){__(t,c)}while(!0);ym(),jc.current=i,he=s,We!==null?e=0:(et=null,it=0,e=Qe)}if(e!==0){if(e===2&&(s=Mh(t),s!==0&&(r=s,e=df(t,s))),e===1)throw n=ba,As(t,0),kr(t,r),Dt(t,Be()),n;if(e===6)kr(t,r);else{if(s=t.current.alternate,!(r&30)&&!mN(s)&&(e=Mc(t,r),e===2&&(i=Mh(t),i!==0&&(r=i,e=df(t,i))),e===1))throw n=ba,As(t,0),kr(t,r),Dt(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:bs(t,kt,qn);break;case 3:if(kr(t,r),(r&130023424)===r&&(e=Rm+500-Be(),10<e)){if(vc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wh(bs.bind(null,t,kt,qn),e);break}bs(t,kt,qn);break;case 4:if(kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fN(r/1960))-r,10<r){t.timeoutHandle=Wh(bs.bind(null,t,kt,qn),r);break}bs(t,kt,qn);break;case 5:bs(t,kt,qn);break;default:throw Error(W(329))}}}return Dt(t,Be()),t.callbackNode===n?x_.bind(null,t):null}function df(t,e){var n=Yo;return t.current.memoizedState.isDehydrated&&(As(t,e).flags|=256),t=Mc(t,e),t!==2&&(e=kt,kt=n,e!==null&&hf(e)),t}function hf(t){kt===null?kt=t:kt.push.apply(kt,t)}function mN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(t,e){for(e&=~Pm,e&=~_u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function a0(t){if(he&6)throw Error(W(327));Si();var e=vc(t,0);if(!(e&1))return Dt(t,Be()),null;var n=Mc(t,e);if(t.tag!==0&&n===2){var r=Mh(t);r!==0&&(e=r,n=df(t,r))}if(n===1)throw n=ba,As(t,0),kr(t,e),Dt(t,Be()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bs(t,kt,qn),Dt(t,Be()),null}function jm(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&($i=Be()+500,yu&&ls())}}function Fs(t){Dr!==null&&Dr.tag===0&&!(he&6)&&Si();var e=he;he|=1;var n=tn.transition,r=ye;try{if(tn.transition=null,ye=1,t)return t()}finally{ye=r,tn.transition=n,he=e,!(he&6)&&ls()}}function Dm(){Vt=_i.current,Ne(_i)}function As(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WI(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(mm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ec();break;case 3:Fi(),Ne(Rt),Ne(gt),Em();break;case 5:bm(r);break;case 4:Fi();break;case 13:Ne(Pe);break;case 19:Ne(Pe);break;case 10:vm(r.type._context);break;case 22:case 23:Dm()}n=n.return}if(et=t,We=t=zr(t.current,null),it=Vt=e,Qe=0,ba=null,Pm=_u=Vs=0,kt=Yo=null,Is!==null){for(e=0;e<Is.length;e++)if(n=Is[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Is=null}return t}function __(t,e){do{var n=We;try{if(ym(),Ql.current=Rc,Pc){for(var r=Re.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pc=!1}if(Os=0,Ze=Ke=Re=null,Ko=!1,wa=0,Am.current=null,n===null||n.return===null){Qe=1,ba=e,We=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=it,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Ky(o);if(w!==null){w.flags&=-257,Qy(w,o,c,i,e),w.mode&1&&Gy(i,d,e),e=w,u=d;var S=e.updateQueue;if(S===null){var N=new Set;N.add(u),e.updateQueue=N}else S.add(u);break e}else{if(!(e&1)){Gy(i,d,e),Lm();break e}u=Error(W(426))}}else if(ke&&c.mode&1){var _=Ky(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Qy(_,o,c,i,e),pm(Ui(u,c));break e}}i=u=Ui(u,c),Qe!==4&&(Qe=2),Yo===null?Yo=[i]:Yo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=s_(i,u,e);$y(i,x);break e;case 1:c=u;var y=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&($r===null||!$r.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=i_(i,c,e);$y(i,R);break e}}i=i.return}while(i!==null)}T_(n)}catch(P){e=P,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function b_(){var t=jc.current;return jc.current=Rc,t===null?Rc:t}function Lm(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(Vs&268435455)&&!(_u&268435455)||kr(et,it)}function Mc(t,e){var n=he;he|=2;var r=b_();(et!==t||it!==e)&&(qn=null,As(t,e));do try{pN();break}catch(s){__(t,s)}while(!0);if(ym(),he=n,jc.current=r,We!==null)throw Error(W(261));return et=null,it=0,Qe}function pN(){for(;We!==null;)E_(We)}function gN(){for(;We!==null&&!$T();)E_(We)}function E_(t){var e=N_(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?T_(t):We=e,Am.current=null}function T_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cN(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,We=null;return}}else if(n=lN(n,e,Vt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Qe===0&&(Qe=5)}function bs(t,e,n){var r=ye,s=tn.transition;try{tn.transition=null,ye=1,yN(t,e,n,r)}finally{tn.transition=s,ye=r}return null}function yN(t,e,n,r){do Si();while(Dr!==null);if(he&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(XT(t,i),t===et&&(We=et=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pl||(Pl=!0,S_(yc,function(){return Si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=ye;ye=1;var c=he;he|=4,Am.current=null,dN(t,n),v_(n,t),OI(Bh),wc=!!$h,Bh=$h=null,t.current=n,hN(n),BT(),he=c,ye=o,tn.transition=i}else t.current=n;if(Pl&&(Pl=!1,Dr=t,Lc=s),i=t.pendingLanes,i===0&&($r=null),qT(n.stateNode),Dt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dc)throw Dc=!1,t=cf,cf=null,t;return Lc&1&&t.tag!==0&&Si(),i=t.pendingLanes,i&1?t===uf?Xo++:(Xo=0,uf=t):Xo=0,ls(),null}function Si(){if(Dr!==null){var t=sx(Lc),e=tn.transition,n=ye;try{if(tn.transition=null,ye=16>t?16:t,Dr===null)var r=!1;else{if(t=Dr,Dr=null,Lc=0,he&6)throw Error(W(331));var s=he;for(he|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Y=d;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:Qo(8,f,i)}var m=f.child;if(m!==null)m.return=f,Y=m;else for(;Y!==null;){f=Y;var g=f.sibling,w=f.return;if(p_(f),f===d){Y=null;break}if(g!==null){g.return=w,Y=g;break}Y=w}}}var S=i.alternate;if(S!==null){var N=S.child;if(N!==null){S.child=null;do{var _=N.sibling;N.sibling=null,N=_}while(N!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Y=x;break e}Y=i.return}}var y=t.current;for(Y=y;Y!==null;){o=Y;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Y=E;else e:for(o=y;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:xu(9,c)}}catch(P){Me(c,c.return,P)}if(c===o){Y=null;break e}var R=c.sibling;if(R!==null){R.return=c.return,Y=R;break e}Y=c.return}}if(he=s,ls(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(hu,t)}catch{}r=!0}return r}finally{ye=n,tn.transition=e}}return!1}function l0(t,e,n){e=Ui(n,e),e=s_(t,e,1),t=Ur(t,e,1),e=Et(),t!==null&&(Fa(t,1,e),Dt(t,e))}function Me(t,e,n){if(t.tag===3)l0(t,t,n);else for(;e!==null;){if(e.tag===3){l0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Ui(n,t),t=i_(e,t,1),e=Ur(e,t,1),t=Et(),e!==null&&(Fa(e,1,t),Dt(e,t));break}}e=e.return}}function vN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(it&n)===n&&(Qe===4||Qe===3&&(it&130023424)===it&&500>Be()-Rm?As(t,0):Pm|=n),Dt(t,e)}function I_(t,e){e===0&&(t.mode&1?(e=_l,_l<<=1,!(_l&130023424)&&(_l=4194304)):e=1);var n=Et();t=sr(t,e),t!==null&&(Fa(t,e,n),Dt(t,n))}function wN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),I_(t,n)}function xN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),I_(t,n)}var N_;N_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,aN(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,ke&&e.flags&1048576&&Ax(e,Nc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xl(t,e),t=e.pendingProps;var s=Mi(e,gt.current);Ni(e,n),s=Im(null,e,r,t,s,n);var i=Nm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Tc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xm(e),s.updater=wu,e.stateNode=s,s._reactInternals=e,Xh(e,r,t,n),e=ef(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&fm(e),bt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=bN(r),t=cn(r,t),s){case 0:e=Zh(null,e,r,t,n);break e;case 1:e=Jy(null,e,r,t,n);break e;case 11:e=Yy(null,e,r,t,n);break e;case 14:e=Xy(null,e,r,cn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Zh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Jy(t,e,r,s,n);case 3:e:{if(c_(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Mx(t,e),Cc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ui(Error(W(423)),e),e=Zy(t,e,r,n,s);break e}else if(r!==s){s=Ui(Error(W(424)),e),e=Zy(t,e,r,n,s);break e}else for(Ut=Fr(e.stateNode.containerInfo.firstChild),zt=e,ke=!0,dn=null,n=Dx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=ir(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return Ox(e),t===null&&Kh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zh(r,s)?o=null:i!==null&&zh(r,i)&&(e.flags|=32),l_(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Kh(e),null;case 13:return u_(t,e,n);case 4:return _m(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vi(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Yy(t,e,r,s,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,be(Sc,r._currentValue),r._currentValue=o,i!==null)if(yn(i.value,o)){if(i.children===s.children&&!Rt.current){e=ir(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Jn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Qh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Qh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ni(e,n),s=nn(s),r=r(s),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,s=cn(r,e.pendingProps),s=cn(r.type,s),Xy(t,e,r,s,n);case 15:return o_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:cn(r,s),Xl(t,e),e.tag=1,jt(r)?(t=!0,Tc(e)):t=!1,Ni(e,n),r_(e,r,s),Xh(e,r,s,n),ef(null,e,r,!0,t,n);case 19:return d_(t,e,n);case 22:return a_(t,e,n)}throw Error(W(156,e.tag))};function S_(t,e){return ex(t,e)}function _N(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,r){return new _N(t,e,n,r)}function Mm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bN(t){if(typeof t=="function")return Mm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tm)return 11;if(t===nm)return 14}return 2}function zr(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ec(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Mm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case di:return Ps(n.children,s,i,e);case em:o=8,s|=8;break;case _h:return t=Zt(12,n,e,s|2),t.elementType=_h,t.lanes=i,t;case bh:return t=Zt(13,n,e,s),t.elementType=bh,t.lanes=i,t;case Eh:return t=Zt(19,n,e,s),t.elementType=Eh,t.lanes=i,t;case Ow:return bu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lw:o=10;break e;case Mw:o=9;break e;case tm:o=11;break e;case nm:o=14;break e;case Ir:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Zt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ps(t,e,n,r){return t=Zt(7,t,r,e),t.lanes=n,t}function bu(t,e,n,r){return t=Zt(22,t,r,e),t.elementType=Ow,t.lanes=n,t.stateNode={isHidden:!1},t}function Xd(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function Jd(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rd(0),this.expirationTimes=Rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Om(t,e,n,r,s,i,o,c,u){return t=new EN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xm(i),t}function TN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k_(t){if(!t)return Yr;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(jt(n))return kx(t,n,e)}return e}function C_(t,e,n,r,s,i,o,c,u){return t=Om(n,r,!0,t,s,i,o,c,u),t.context=k_(null),n=t.current,r=Et(),s=Br(n),i=Jn(r,s),i.callback=e??null,Ur(n,i,s),t.current.lanes=s,Fa(t,s,r),Dt(t,r),t}function Eu(t,e,n,r){var s=e.current,i=Et(),o=Br(s);return n=k_(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(s,e,o),t!==null&&(mn(t,s,o,i),Kl(t,s,o)),o}function Oc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vm(t,e){c0(t,e),(t=t.alternate)&&c0(t,e)}function IN(){return null}var A_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fm(t){this._internalRoot=t}Tu.prototype.render=Fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Eu(t,e,null,null)};Tu.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fs(function(){Eu(null,t,null,null)}),e[rr]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ax();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&cx(t)}};function Um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function u0(){}function NN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Oc(o);i.call(d)}}var o=C_(e,r,t,0,null,!1,!1,"",u0);return t._reactRootContainer=o,t[rr]=o.current,ma(t.nodeType===8?t.parentNode:t),Fs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Oc(u);c.call(d)}}var u=Om(t,0,!1,null,null,!1,!1,"",u0);return t._reactRootContainer=u,t[rr]=u.current,ma(t.nodeType===8?t.parentNode:t),Fs(function(){Eu(e,u,n,r)}),u}function Nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Oc(o);c.call(u)}}Eu(e,o,t,s)}else o=NN(n,e,t,s,r);return Oc(o)}ix=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Do(e.pendingLanes);n!==0&&(im(e,n|1),Dt(e,Be()),!(he&6)&&($i=Be()+500,ls()))}break;case 13:Fs(function(){var r=sr(t,1);if(r!==null){var s=Et();mn(r,t,1,s)}}),Vm(t,1)}};om=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Et();mn(e,t,134217728,n)}Vm(t,134217728)}};ox=function(t){if(t.tag===13){var e=Br(t),n=sr(t,e);if(n!==null){var r=Et();mn(n,t,e,r)}Vm(t,e)}};ax=function(){return ye};lx=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};jh=function(t,e,n){switch(e){case"input":if(Nh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gu(r);if(!s)throw Error(W(90));Fw(r),Nh(r,s)}}}break;case"textarea":$w(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};Kw=jm;Qw=Fs;var SN={usingClientEntryPoint:!1,Events:[$a,pi,gu,Hw,Gw,jm]},Co={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kN={bundleType:Co.bundleType,version:Co.version,rendererPackageName:Co.rendererPackageName,rendererConfig:Co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jw(t),t===null?null:t.stateNode},findFiberByHostInstance:Co.findFiberByHostInstance||IN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{hu=Rl.inject(kN),jn=Rl}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SN;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Um(e))throw Error(W(200));return TN(t,e,null,n)};Kt.createRoot=function(t,e){if(!Um(t))throw Error(W(299));var n=!1,r="",s=A_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Om(t,1,!1,null,null,n,!1,r,s),t[rr]=e.current,ma(t.nodeType===8?t.parentNode:t),new Fm(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=Jw(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Fs(t)};Kt.hydrate=function(t,e,n){if(!Iu(e))throw Error(W(200));return Nu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Um(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=A_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=C_(e,null,t,1,n??null,s,!1,i,o),t[rr]=e.current,ma(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tu(e)};Kt.render=function(t,e,n){if(!Iu(e))throw Error(W(200));return Nu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Iu(t))throw Error(W(40));return t._reactRootContainer?(Fs(function(){Nu(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Kt.unstable_batchedUpdates=jm;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Iu(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Nu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function P_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P_)}catch(t){console.error(t)}}P_(),Pw.exports=Kt;var CN=Pw.exports,d0=CN;wh.createRoot=d0.createRoot,wh.hydrateRoot=d0.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var h0="popstate";function AN(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return ff("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ea(s)}return RN(e,n,null,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PN(){return Math.random().toString(36).substring(2,10)}function f0(t,e){return{usr:t.state,key:t.key,idx:e}}function ff(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xi(e):e,state:n,key:e&&e.key||r||PN()}}function Ea({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function RN(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function m(){c="POP";let _=f(),x=_==null?null:_-d;d=_,u&&u({action:c,location:N.location,delta:x})}function g(_,x){c="PUSH";let y=ff(N.location,_,x);d=f()+1;let E=f0(y,d),R=N.createHref(y);try{o.pushState(E,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(R)}i&&u&&u({action:c,location:N.location,delta:1})}function w(_,x){c="REPLACE";let y=ff(N.location,_,x);d=f();let E=f0(y,d),R=N.createHref(y);o.replaceState(E,"",R),i&&u&&u({action:c,location:N.location,delta:0})}function S(_){return jN(_)}let N={get action(){return c},get location(){return t(s,o)},listen(_){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(h0,m),u=_,()=>{s.removeEventListener(h0,m),u=null}},createHref(_){return e(s,_)},createURL:S,encodeLocation(_){let x=S(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:w,go(_){return o.go(_)}};return N}function jN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ce(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ea(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function R_(t,e,n="/"){return DN(t,e,n,!1)}function DN(t,e,n,r){let s=typeof e=="string"?Xi(e):e,i=or(s.pathname||"/",n);if(i==null)return null;let o=j_(t);LN(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=HN(i);c=WN(o[u],d,r)}return c}function j_(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Ce(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=Zn([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(Ce(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),j_(o.children,e,g,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:BN(m,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of D_(o.path))i(o,c,!0,d)}),e}function D_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=D_(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function LN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var MN=/^:[\w-]+$/,ON=3,VN=2,FN=1,UN=10,$N=-2,m0=t=>t==="*";function BN(t,e){let n=t.split("/"),r=n.length;return n.some(m0)&&(r+=$N),e&&(r+=VN),n.filter(s=>!m0(s)).reduce((s,i)=>s+(MN.test(i)?ON:i===""?FN:UN),r)}function zN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function WN(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Vc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Vc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Zn([i,m.pathname]),pathnameBase:YN(Zn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Zn([i,m.pathnameBase]))}return o}function Vc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:m},g)=>{if(f==="*"){let S=c[g]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const w=c[g];return m&&!w?d[f]=void 0:d[f]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function qN(t,e=!1,n=!0){vn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function HN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function or(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function GN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:KN(n,e):e,search:XN(r),hash:JN(s)}}function KN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $m(t){let e=QN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Bm(t,e,n,r=!1){let s;typeof t=="string"?s=Xi(t):(s={...t},Ce(!s.pathname||!s.pathname.includes("?"),Zd("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),Zd("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),Zd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=GN(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Zn=t=>t.join("/").replace(/\/\/+/g,"/"),YN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var L_=["POST","PUT","PATCH","DELETE"];new Set(L_);var eS=["GET",...L_];new Set(eS);var Ji=C.createContext(null);Ji.displayName="DataRouter";var Su=C.createContext(null);Su.displayName="DataRouterState";C.createContext(!1);var M_=C.createContext({isTransitioning:!1});M_.displayName="ViewTransition";var tS=C.createContext(new Map);tS.displayName="Fetchers";var nS=C.createContext(null);nS.displayName="Await";var bn=C.createContext(null);bn.displayName="Navigation";var za=C.createContext(null);za.displayName="Location";var En=C.createContext({outlet:null,matches:[],isDataRoute:!1});En.displayName="Route";var zm=C.createContext(null);zm.displayName="RouteError";function rS(t,{relative:e}={}){Ce(Zi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=C.useContext(bn),{hash:s,pathname:i,search:o}=qa(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Zn([n,i])),r.createHref({pathname:c,search:o,hash:s})}function Zi(){return C.useContext(za)!=null}function cs(){return Ce(Zi(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(za).location}var O_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function V_(t){C.useContext(bn).static||C.useLayoutEffect(t)}function Wa(){let{isDataRoute:t}=C.useContext(En);return t?vS():sS()}function sS(){Ce(Zi(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Ji),{basename:e,navigator:n}=C.useContext(bn),{matches:r}=C.useContext(En),{pathname:s}=cs(),i=JSON.stringify($m(r)),o=C.useRef(!1);return V_(()=>{o.current=!0}),C.useCallback((u,d={})=>{if(vn(o.current,O_),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Bm(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Zn([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}var iS=C.createContext(null);function oS(t){let e=C.useContext(En).outlet;return C.useMemo(()=>e&&C.createElement(iS.Provider,{value:t},e),[e,t])}function qa(t,{relative:e}={}){let{matches:n}=C.useContext(En),{pathname:r}=cs(),s=JSON.stringify($m(n));return C.useMemo(()=>Bm(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function aS(t,e){return F_(t,e)}function F_(t,e,n,r,s){var y;Ce(Zi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(bn),{matches:o}=C.useContext(En),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let E=m&&m.path||"";U_(d,!m||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let g=cs(),w;if(e){let E=typeof e=="string"?Xi(e):e;Ce(f==="/"||((y=E.pathname)==null?void 0:y.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),w=E}else w=g;let S=w.pathname||"/",N=S;if(f!=="/"){let E=f.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=R_(t,{pathname:N});vn(m||_!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),vn(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=hS(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Zn([f,i.encodeLocation?i.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Zn([f,i.encodeLocation?i.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,n,r,s);return e&&x?C.createElement(za.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},x):x}function lS(){let t=yS(),e=ZN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,o)}var cS=C.createElement(lS,null),uS=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?C.createElement(En.Provider,{value:this.props.routeContext},C.createElement(zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dS({routeContext:t,match:e,children:n}){let r=C.useContext(Ji);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(En.Provider,{value:t},n)}function hS(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Ce(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=n,w=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,m)=>{let g,w=!1,S=null,N=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,S=f.route.errorElement||cS,c&&(u<0&&m===0?(U_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):u===m&&(w=!0,N=f.route.hydrateFallbackElement||null)));let _=e.concat(i.slice(0,m+1)),x=()=>{let y;return g?y=S:w?y=N:f.route.Component?y=C.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,C.createElement(dS,{match:f,routeContext:{outlet:d,matches:_,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?C.createElement(uS,{location:n.location,revalidation:n.revalidation,component:S,error:g,children:x(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:r}):x()},null)}function Wm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fS(t){let e=C.useContext(Ji);return Ce(e,Wm(t)),e}function mS(t){let e=C.useContext(Su);return Ce(e,Wm(t)),e}function pS(t){let e=C.useContext(En);return Ce(e,Wm(t)),e}function qm(t){let e=pS(t),n=e.matches[e.matches.length-1];return Ce(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function gS(){return qm("useRouteId")}function yS(){var r;let t=C.useContext(zm),e=mS("useRouteError"),n=qm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function vS(){let{router:t}=fS("useNavigate"),e=qm("useNavigate"),n=C.useRef(!1);return V_(()=>{n.current=!0}),C.useCallback(async(s,i={})=>{vn(n.current,O_),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var p0={};function U_(t,e,n){!e&&!p0[t]&&(p0[t]=!0,vn(!1,n))}C.memo(wS);function wS({routes:t,future:e,state:n,unstable_onError:r}){return F_(t,void 0,n,r,e)}function Hm({to:t,replace:e,state:n,relative:r}){Ce(Zi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=C.useContext(bn);vn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=C.useContext(En),{pathname:o}=cs(),c=Wa(),u=Bm(t,$m(i),o,r==="path"),d=JSON.stringify(u);return C.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function xS(t){return oS(t.context)}function Ot(t){Ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _S({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Ce(!Zi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=C.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Xi(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:g="default"}=n,w=C.useMemo(()=>{let S=or(u,o);return S==null?null:{location:{pathname:S,search:d,hash:f,state:m,key:g},navigationType:r}},[o,u,d,f,m,g,r]);return vn(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:C.createElement(bn.Provider,{value:c},C.createElement(za.Provider,{children:e,value:w}))}function $_({children:t,location:e}){return aS(mf(t),e)}function mf(t,e=[]){let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,mf(r.props.children,i));return}Ce(r.type===Ot,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ce(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mf(r.props.children,i)),n.push(o)}),n}var tc="get",nc="application/x-www-form-urlencoded";function ku(t){return t!=null&&typeof t.tagName=="string"}function bS(t){return ku(t)&&t.tagName.toLowerCase()==="button"}function ES(t){return ku(t)&&t.tagName.toLowerCase()==="form"}function TS(t){return ku(t)&&t.tagName.toLowerCase()==="input"}function IS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NS(t,e){return t.button===0&&(!e||e==="_self")&&!IS(t)}var jl=null;function SS(){if(jl===null)try{new FormData(document.createElement("form"),0),jl=!1}catch{jl=!0}return jl}var kS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eh(t){return t!=null&&!kS.has(t)?(vn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nc}"`),null):t}function CS(t,e){let n,r,s,i,o;if(ES(t)){let c=t.getAttribute("action");r=c?or(c,e):null,n=t.getAttribute("method")||tc,s=eh(t.getAttribute("enctype"))||nc,i=new FormData(t)}else if(bS(t)||TS(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?or(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||tc,s=eh(t.getAttribute("formenctype"))||eh(c.getAttribute("enctype"))||nc,i=new FormData(c,t),!SS()){let{name:d,type:f,value:m}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(ku(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tc,r=null,s=nc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AS(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&or(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function PS(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RS(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function jS(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await PS(i,n);return o.links?o.links():[]}return[]}));return OS(r.flat(1).filter(RS).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function g0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function DS(t,e,{includeHydrateFallback:n}={}){return LS(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function LS(t){return[...new Set(t)]}function MS(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function OS(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(MS(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function B_(){let t=C.useContext(Ji);return Gm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VS(){let t=C.useContext(Su);return Gm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Km=C.createContext(void 0);Km.displayName="FrameworkContext";function z_(){let t=C.useContext(Km);return Gm(t,"You must render this element inside a <HydratedRouter> element"),t}function FS(t,e){let n=C.useContext(Km),[r,s]=C.useState(!1),[i,o]=C.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=e,g=C.useRef(null);C.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=x=>{x.forEach(y=>{o(y.isIntersecting)})},_=new IntersectionObserver(N,{threshold:.5});return g.current&&_.observe(g.current),()=>{_.disconnect()}}},[t]),C.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let w=()=>{s(!0)},S=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Ao(c,w),onBlur:Ao(u,S),onMouseEnter:Ao(d,w),onMouseLeave:Ao(f,S),onTouchStart:Ao(m,w)}]:[!1,g,{}]}function Ao(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function US({page:t,...e}){let{router:n}=B_(),r=C.useMemo(()=>R_(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?C.createElement(BS,{page:t,matches:r,...e}):null}function $S(t){let{manifest:e,routeModules:n}=z_(),[r,s]=C.useState([]);return C.useEffect(()=>{let i=!1;return jS(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function BS({page:t,matches:e,...n}){let r=cs(),{manifest:s,routeModules:i}=z_(),{basename:o}=B_(),{loaderData:c,matches:u}=VS(),d=C.useMemo(()=>g0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=C.useMemo(()=>g0(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=C.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,N=!1;if(e.forEach(x=>{var E;let y=s.routes[x.route.id];!y||!y.hasLoader||(!d.some(R=>R.route.id===x.route.id)&&x.route.id in c&&((E=i[x.route.id])!=null&&E.shouldRevalidate)||y.hasClientLoader?N=!0:S.add(x.route.id))}),S.size===0)return[];let _=AS(t,o,"data");return N&&S.size>0&&_.searchParams.set("_routes",e.filter(x=>S.has(x.route.id)).map(x=>x.route.id).join(",")),[_.pathname+_.search]},[o,c,r,s,d,e,t,i]),g=C.useMemo(()=>DS(f,s),[f,s]),w=$S(f);return C.createElement(C.Fragment,null,m.map(S=>C.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),g.map(S=>C.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:N})=>C.createElement("link",{key:S,nonce:n.nonce,...N})))}function zS(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var W_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{W_&&(window.__reactRouterVersion="7.9.5")}catch{}function WS({basename:t,children:e,window:n}){let r=C.useRef();r.current==null&&(r.current=AN({window:n,v5Compat:!0}));let s=r.current,[i,o]=C.useState({action:s.action,location:s.location}),c=C.useCallback(u=>{C.startTransition(()=>o(u))},[o]);return C.useLayoutEffect(()=>s.listen(c),[s,c]),C.createElement(_S,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var q_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H_=C.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m,...g},w){let{basename:S}=C.useContext(bn),N=typeof d=="string"&&q_.test(d),_,x=!1;if(typeof d=="string"&&N&&(_=d,W_))try{let I=new URL(window.location.href),A=d.startsWith("//")?new URL(I.protocol+d):new URL(d),j=or(A.pathname,S);A.origin===I.origin&&j!=null?d=j+A.search+A.hash:x=!0}catch{vn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=rS(d,{relative:s}),[E,R,P]=FS(r,g),M=GS(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function T(I){e&&e(I),I.defaultPrevented||M(I)}let v=C.createElement("a",{...g,...P,href:_||y,onClick:x||i?e:T,ref:zS(w,R),target:u,"data-discover":!N&&n==="render"?"true":void 0});return E&&!N?C.createElement(C.Fragment,null,v,C.createElement(US,{page:y})):v});H_.displayName="Link";var G_=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let m=qa(o,{relative:d.relative}),g=cs(),w=C.useContext(Su),{navigator:S,basename:N}=C.useContext(bn),_=w!=null&&JS(m)&&c===!0,x=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,y=g.pathname,E=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(y=y.toLowerCase(),E=E?E.toLowerCase():null,x=x.toLowerCase()),E&&N&&(E=or(E,N)||E);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let P=y===x||!s&&y.startsWith(x)&&y.charAt(R)==="/",M=E!=null&&(E===x||!s&&E.startsWith(x)&&E.charAt(x.length)==="/"),T={isActive:P,isPending:M,isTransitioning:_},v=P?e:void 0,I;typeof r=="function"?I=r(T):I=[r,P?"active":null,M?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(T):i;return C.createElement(H_,{...d,"aria-current":v,className:I,ref:f,style:A,to:o,viewTransition:c},typeof u=="function"?u(T):u)});G_.displayName="NavLink";var qS=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=tc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...g},w)=>{let S=YS(),N=XS(c,{relative:d}),_=o.toLowerCase()==="get"?"get":"post",x=typeof c=="string"&&q_.test(c),y=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let R=E.nativeEvent.submitter,P=(R==null?void 0:R.getAttribute("formmethod"))||o;S(R||E.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:m})};return C.createElement("form",{ref:w,method:_,action:N,onSubmit:r?u:y,...g,"data-discover":!x&&t==="render"?"true":void 0})});qS.displayName="Form";function HS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K_(t){let e=C.useContext(Ji);return Ce(e,HS(t)),e}function GS(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let c=Wa(),u=cs(),d=qa(t,{relative:i});return C.useCallback(f=>{if(NS(f,e)){f.preventDefault();let m=n!==void 0?n:Ea(u)===Ea(d);c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,c,d,n,r,e,t,s,i,o])}var KS=0,QS=()=>`__${String(++KS)}__`;function YS(){let{router:t}=K_("useSubmit"),{basename:e}=C.useContext(bn),n=gS();return C.useCallback(async(r,s={})=>{let{action:i,method:o,encType:c,formData:u,body:d}=CS(r,e);if(s.navigate===!1){let f=s.fetcherKey||QS();await t.fetch(f,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function XS(t,{relative:e}={}){let{basename:n}=C.useContext(bn),r=C.useContext(En);Ce(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...qa(t||".",{relative:e})},o=cs();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Zn([n,i.pathname])),Ea(i)}function JS(t,{relative:e}={}){let n=C.useContext(M_);Ce(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=K_("useViewTransitionState"),s=qa(t,{relative:e});if(!n.isTransitioning)return!1;let i=or(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=or(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vc(s.pathname,o)!=null||Vc(s.pathname,i)!=null}const ZS="modulepreload",ek=function(t){return"/"+t},y0={},Xr=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=ek(u),u in y0)return;y0[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":ZS,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,w)=>{m.addEventListener("load",g),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},tk=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Q_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new rk;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const S=d<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sk=function(t){const e=Q_(t);return Y_.encodeByteArray(e,!0)},Fc=function(t){return sk(t).replace(/\./g,"")},X_=function(t){try{return Y_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=()=>ik().__FIREBASE_DEFAULTS__,ak=()=>{if(typeof process>"u"||typeof v0>"u")return;const t=v0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&X_(t[1]);return e&&JSON.parse(e)},Cu=()=>{try{return tk()||ok()||ak()||lk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J_=t=>{var e,n;return(n=(e=Cu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Z_=t=>{const e=J_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eb=()=>{var t;return(t=Cu())==null?void 0:t.config},tb=t=>{var e;return(e=Cu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Fc(JSON.stringify(n)),Fc(JSON.stringify(o)),""].join(".")}const Jo={};function uk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?t.emulator.push(e):t.prod.push(e);return t}function dk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let w0=!1;function Ym(t,e){if(typeof window>"u"||typeof document>"u"||!us(window.location.host)||Jo[t]===e||Jo[t]||w0)return;Jo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=uk().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{w0=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=dk(r),w=n("text"),S=document.getElementById(w)||document.createElement("span"),N=n("learnmore"),_=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),y=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;c(E),f(_,N);const R=d();u(y,x),E.append(y,S,_,R),document.body.appendChild(E)}i?(S.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function fk(){var e;const t=(e=Cu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gk(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yk(){return!fk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sb(){try{return typeof indexedDB=="object"}catch{return!1}}function ib(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function vk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="FirebaseError";class an extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wk,Object.setPrototypeOf(this,an.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xs.prototype.create)}}class Xs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xk(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new an(s,c,r)}}function xk(t,e){return t.replace(_k,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _k=/\{\$([^}]+)}/g;function bk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(x0(i)&&x0(o)){if(!Jr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function x0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Ek(t,e){const n=new Tk(t,e);return n.subscribe.bind(n)}class Tk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ik(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=th),s.error===void 0&&(s.error=th),s.complete===void 0&&(s.complete=th);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ik(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function th(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=1e3,Sk=2,kk=4*60*60*1e3,Ck=.5;function _0(t,e=Nk,n=Sk){const r=e*Math.pow(n,t),s=Math.round(Ck*r*(Math.random()-.5)*2);return Math.min(kk,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class sn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ck;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rk(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pk(t){return t===Es?void 0:t}function Rk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ak(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const Dk={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},Lk=le.INFO,Mk={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},Ok=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Mk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Au{constructor(e){this.name=e,this._logLevel=Lk,this._logHandler=Ok,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const Vk=(t,e)=>e.some(n=>t instanceof n);let b0,E0;function Fk(){return b0||(b0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uk(){return E0||(E0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,pf=new WeakMap,ab=new WeakMap,nh=new WeakMap,Xm=new WeakMap;function $k(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ob.set(n,t)}).catch(()=>{}),Xm.set(e,t),e}function Bk(t){if(pf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pf.set(t,e)}let gf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ab.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zk(t){gf=t(gf)}function Wk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rh(this),e,...n);return ab.set(r,e.sort?e.sort():[e]),Wr(r)}:Uk().includes(t)?function(...e){return t.apply(rh(this),e),Wr(ob.get(this))}:function(...e){return Wr(t.apply(rh(this),e))}}function qk(t){return typeof t=="function"?Wk(t):(t instanceof IDBTransaction&&Bk(t),Vk(t,Fk())?new Proxy(t,gf):t)}function Wr(t){if(t instanceof IDBRequest)return $k(t);if(nh.has(t))return nh.get(t);const e=qk(t);return e!==t&&(nh.set(t,e),Xm.set(e,t)),e}const rh=t=>Xm.get(t);function lb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Wr(o.result),u.oldVersion,u.newVersion,Wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Hk=["get","getKey","getAll","getAllKeys","count"],Gk=["put","add","delete","clear"],sh=new Map;function T0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Gk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Hk.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return sh.set(e,i),i}zk(t=>({...t,get:(e,n,r)=>T0(e,n)||t.get(e,n,r),has:(e,n)=>!!T0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Qk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yf="@firebase/app",I0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Au("@firebase/app"),Yk="@firebase/app-compat",Xk="@firebase/analytics-compat",Jk="@firebase/analytics",Zk="@firebase/app-check-compat",eC="@firebase/app-check",tC="@firebase/auth",nC="@firebase/auth-compat",rC="@firebase/database",sC="@firebase/data-connect",iC="@firebase/database-compat",oC="@firebase/functions",aC="@firebase/functions-compat",lC="@firebase/installations",cC="@firebase/installations-compat",uC="@firebase/messaging",dC="@firebase/messaging-compat",hC="@firebase/performance",fC="@firebase/performance-compat",mC="@firebase/remote-config",pC="@firebase/remote-config-compat",gC="@firebase/storage",yC="@firebase/storage-compat",vC="@firebase/firestore",wC="@firebase/ai",xC="@firebase/firestore-compat",_C="firebase",bC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",EC={[yf]:"fire-core",[Yk]:"fire-core-compat",[Jk]:"fire-analytics",[Xk]:"fire-analytics-compat",[eC]:"fire-app-check",[Zk]:"fire-app-check-compat",[tC]:"fire-auth",[nC]:"fire-auth-compat",[rC]:"fire-rtdb",[sC]:"fire-data-connect",[iC]:"fire-rtdb-compat",[oC]:"fire-fn",[aC]:"fire-fn-compat",[lC]:"fire-iid",[cC]:"fire-iid-compat",[uC]:"fire-fcm",[dC]:"fire-fcm-compat",[hC]:"fire-perf",[fC]:"fire-perf-compat",[mC]:"fire-rc",[pC]:"fire-rc-compat",[gC]:"fire-gcs",[yC]:"fire-gcs-compat",[vC]:"fire-fst",[xC]:"fire-fst-compat",[wC]:"fire-vertex","fire-js":"fire-js",[_C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new Map,TC=new Map,wf=new Map;function N0(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wn(t){const e=t.name;if(wf.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;wf.set(e,t);for(const n of Ta.values())N0(n,t);for(const n of TC.values())N0(n,t);return!0}function ds(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Xs("app","Firebase",IC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=bC;function cb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:vf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw qr.create("bad-app-name",{appName:String(s)});if(n||(n=eb()),!n)throw qr.create("no-options");const i=Ta.get(s);if(i){if(Jr(n,i.options)&&Jr(r,i.config))return i;throw qr.create("duplicate-app",{appName:s})}const o=new jk(s);for(const u of wf.values())o.addComponent(u);const c=new NC(n,r,o);return Ta.set(s,c),c}function Ga(t=vf){const e=Ta.get(t);if(!e&&t===vf&&eb())return cb();if(!e)throw qr.create("no-app",{appName:t});return e}function SC(){return Array.from(Ta.values())}function Lt(t,e,n){let r=EC[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(o.join(" "));return}wn(new sn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="firebase-heartbeat-database",CC=1,Ia="firebase-heartbeat-store";let ih=null;function ub(){return ih||(ih=lb(kC,CC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),ih}async function AC(t){try{const n=(await ub()).transaction(Ia),r=await n.objectStore(Ia).get(db(t));return await n.done,r}catch(e){if(e instanceof an)ar.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function S0(t,e){try{const r=(await ub()).transaction(Ia,"readwrite");await r.objectStore(Ia).put(e,db(t)),await r.done}catch(n){if(n instanceof an)ar.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function db(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1024,RC=30;class jC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=k0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>RC){const o=MC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=k0(),{heartbeatsToSend:r,unsentEntries:s}=DC(this._heartbeatsCache.heartbeats),i=Fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ar.warn(n),""}}}function k0(){return new Date().toISOString().substring(0,10)}function DC(t,e=PC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),C0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),C0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sb()?ib().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return S0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function C0(t){return Fc(JSON.stringify({version:2,heartbeats:t})).length}function MC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t){wn(new sn("platform-logger",e=>new Kk(e),"PRIVATE")),wn(new sn("heartbeat",e=>new jC(e),"PRIVATE")),Lt(yf,I0,t),Lt(yf,I0,"esm2020"),Lt("fire-js","")}OC("");function hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VC=hb,fb=new Xs("auth","Firebase",hb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Au("@firebase/auth");function FC(t,...e){Uc.logLevel<=le.WARN&&Uc.warn(`Auth (${Js}): ${t}`,...e)}function rc(t,...e){Uc.logLevel<=le.ERROR&&Uc.error(`Auth (${Js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw Zm(t,...e)}function pn(t,...e){return Zm(t,...e)}function Jm(t,e,n){const r={...VC(),[e]:n};return new Xs("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return Jm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&on(t,"argument-error"),Jm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fb.create(t,...e)}function ee(t,e,...n){if(!t)throw Zm(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rc(e),new Error(e)}function lr(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $C(){return A0()==="http:"||A0()==="https:"}function A0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($C()||rb()||"connection"in navigator)?navigator.onLine:!0}function zC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=hk()||pk()}get(){return BC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HC=new Ka(3e4,6e4);function mr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Tn(t,e,n,r,s={}){return pb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ha({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return mk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&us(t.emulatorConfig.host)&&(d.credentials="include"),mb.fetch()(await gb(t,t.config.apiHost,n,c),d)})}async function pb(t,e,n){t._canInitEmulator=!1;const r={...WC,...e};try{const s=new KC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Dl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Dl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Dl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Jm(t,f,d);on(t,f)}}catch(s){if(s instanceof an)throw s;on(t,"network-request-failed",{message:String(s)})}}async function Qa(t,e,n,r,s={}){const i=await Tn(t,e,n,r,s);return"mfaPendingCredential"in i&&on(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function gb(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ep(t.config,s):`${t.config.apiScheme}://${s}`;return qC.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function GC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),HC.get())})}}function Dl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pn(t,e,r);return s.customData._tokenResponse=n,s}function P0(t){return t!==void 0&&t.enterprise!==void 0}class QC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function YC(t,e){return Tn(t,"GET","/v2/recaptchaConfig",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(t,e){return Tn(t,"POST","/v1/accounts:delete",e)}async function $c(t,e){return Tn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JC(t,e=!1){const n=fe(t),r=await n.getIdToken(e),s=tp(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zo(oh(s.auth_time)),issuedAtTime:Zo(oh(s.iat)),expirationTime:Zo(oh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function oh(t){return Number(t)*1e3}function tp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rc("JWT malformed, contained fewer than 3 sections"),null;try{const s=X_(n);return s?JSON.parse(s):(rc("Failed to decode base64 JWT payload"),null)}catch(s){return rc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function R0(t){const e=tp(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof an&&ZC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Us(t,$c(e,{idToken:n}));ee(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?yb(s.providerUserInfo):[],o=nA(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new _f(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function tA(t){const e=fe(t);await Bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e){const n=await pb(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await gb(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&us(t.emulatorConfig.host)&&(u.credentials="include"),mb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sA(t,e){return Tn(t,"POST","/v2/accounts:revokeToken",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=R0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await rA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ki;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ki,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new eA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _f(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Us(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JC(this,e)}reload(){return tA(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ct(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Us(this,XC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:w,providerData:S,stsTokenManager:N}=n;ee(m&&N,e,"internal-error");const _=ki.fromJSON(this.name,N);ee(typeof m=="string",e,"internal-error"),Tr(r,e.name),Tr(s,e.name),ee(typeof g=="boolean",e,"internal-error"),ee(typeof w=="boolean",e,"internal-error"),Tr(i,e.name),Tr(o,e.name),Tr(c,e.name),Tr(u,e.name),Tr(d,e.name),Tr(f,e.name);const x=new hn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:_,createdAt:d,lastLoginAt:f});return S&&Array.isArray(S)&&(x.providerData=S.map(y=>({...y}))),u&&(x._redirectEventId=u),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new ki;s.updateFromServerResponse(n);const i=new hn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new ki;c.updateFromIdToken(r);const u=new hn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new _f(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;function Xn(t){lr(t instanceof Function,"Expected a class definition");let e=j0.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,j0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vb.type="NONE";const D0=vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ci{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=sc(this.userKey,s.apiKey,i),this.fullPersistenceKey=sc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $c(this.auth,{idToken:e}).catch(()=>{});return n?hn._fromGetAccountInfoResponse(this.auth,n,e):null}return hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ci(Xn(D0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Xn(D0);const o=sc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await $c(e,{idToken:f}).catch(()=>{});if(!g)break;m=await hn._fromGetAccountInfoResponse(e,g,f)}else m=hn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ci(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ci(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tb(e))return"Blackberry";if(Ib(e))return"Webos";if(xb(e))return"Safari";if((e.includes("chrome/")||_b(e))&&!e.includes("edge/"))return"Chrome";if(Eb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wb(t=yt()){return/firefox\//i.test(t)}function xb(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _b(t=yt()){return/crios\//i.test(t)}function bb(t=yt()){return/iemobile/i.test(t)}function Eb(t=yt()){return/android/i.test(t)}function Tb(t=yt()){return/blackberry/i.test(t)}function Ib(t=yt()){return/webos/i.test(t)}function np(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iA(t=yt()){var e;return np(t)&&!!((e=window.navigator)!=null&&e.standalone)}function oA(){return gk()&&document.documentMode===10}function Nb(t=yt()){return np(t)||Eb(t)||Ib(t)||Tb(t)||/windows phone/i.test(t)||bb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e=[]){let n;switch(t){case"Browser":n=L0(yt());break;case"Worker":n=`${L0(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(t,e={}){return Tn(t,"GET","/v2/passwordPolicy",mr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=6;class uA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M0(this),this.idTokenSubscription=new M0(this),this.beforeStateQueue=new aA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ci.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $c(this,{idToken:e}),r=await hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ct(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ct(this.app))return Promise.reject(er(this));const n=e?fe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ct(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ct(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lA(this),n=new uA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ci.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&FC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pr(t){return fe(t)}class M0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ek(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hA(t){Pu=t}function kb(t){return Pu.loadJS(t)}function fA(){return Pu.recaptchaEnterpriseScript}function mA(){return Pu.gapiScript}function pA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class gA{constructor(){this.enterprise=new yA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vA="recaptcha-enterprise",Cb="NO_RECAPTCHA";class wA{constructor(e){this.type=vA,this.auth=pr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{YC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new QC(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;P0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Cb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&P0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fA();u.length!==0&&(u+=c),kb(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function O0(t,e,n,r=!1,s=!1){const i=new wA(t);let o;if(s)o=Cb;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function zc(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await O0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await O0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e){const n=ds(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Jr(i,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function _A(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bA(t,e,n){const r=pr(t);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Ab(e),{host:o,port:c}=EA(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(Jr(d,r.config.emulator)&&Jr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,us(o)?(Qm(`${i}//${o}${u}`),Ym("Auth",!0)):TA()}function Ab(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EA(t){const e=Ab(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:V0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:V0(o)}}}function V0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function IA(t,e){return Tn(t,"POST","/v1/accounts:update",e)}async function NA(t,e){return Tn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e){return Qa(t,"POST","/v1/accounts:signInWithPassword",mr(t,e))}async function Pb(t,e){return Tn(t,"POST","/v1/accounts:sendOobCode",mr(t,e))}async function kA(t,e){return Pb(t,e)}async function CA(t,e){return Pb(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t,e){return Qa(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}async function PA(t,e){return Qa(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends rp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zc(e,n,"signInWithPassword",SA);case"emailLink":return AA(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zc(e,r,"signUpPassword",NA);case"emailLink":return PA(e,{idToken:n,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ai(t,e){return Qa(t,"POST","/v1/accounts:signInWithIdp",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="http://localhost";class $s extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new $s(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ai(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ai(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ai(e,n)}buildRequest(){const e={requestUri:RA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DA(t){const e=Mo(Oo(t)).link,n=e?Mo(Oo(e)).deep_link_id:null,r=Mo(Oo(t)).deep_link_id;return(r?Mo(Oo(r)).link:null)||r||n||e||t}class sp{constructor(e){const n=Mo(Oo(e)),r=n.apiKey??null,s=n.oobCode??null,i=jA(n.mode??null);ee(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=DA(e);try{return new sp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.providerId=cr.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sp.parseLink(n);return ee(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}cr.PROVIDER_ID="password";cr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends ip{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ya{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Gn.credential(n,r)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ya{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ya{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){return Qa(t,"POST","/v1/accounts:signUp",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await hn._fromIdTokenResponse(e,r,s),o=F0(r);return new Bs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=F0(r);return new Bs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function F0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends an{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wc(e,n,r,s)}}function Rb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,i,e,r):i})}async function MA(t,e,n=!1){const r=await Us(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,e,n=!1){const{auth:r}=t;if(Ct(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await Us(t,Rb(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=tp(i.idToken);ee(o,r,"internal-error");const{sub:c}=o;return ee(t.uid===c,r,"user-mismatch"),Bs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&on(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e,n=!1){if(Ct(t.app))return Promise.reject(er(t));const r="signIn",s=await Rb(t,r,e),i=await Bs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function OA(t,e){return Db(pr(t),e)}async function bf(t,e){return jb(fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(t){const e=pr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function VA(t,e,n){const r=pr(t);await zc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CA)}async function FA(t,e,n){if(Ct(t.app))return Promise.reject(er(t));const r=pr(t),o=await zc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Lb(t),u}),c=await Bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function UA(t,e,n){return Ct(t.app)?Promise.reject(er(t)):OA(fe(t),cr.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Lb(t),r})}async function $A(t,e){const n=fe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await kA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return Tn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=fe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Us(r,BA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Ob(t,e){return zA(fe(t),null,e)}async function zA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Us(t,IA(r,i));await t._updateTokensIfNecessary(o,!0)}function WA(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function qA(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function HA(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}function GA(t){return fe(t).signOut()}async function KA(t){return fe(t).delete()}const qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qc,"1"),this.storage.removeItem(qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=1e3,YA=10;class Fb extends Vb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);oA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},QA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fb.type="LOCAL";const XA=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends Vb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ub.type="SESSION";const $b=Ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await JA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=op("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function eP(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function tP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function rP(){return Bb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firebaseLocalStorageDb",sP=1,Hc="firebaseLocalStorage",Wb="fbase_key";class Xa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ju(t,e){return t.transaction([Hc],e?"readwrite":"readonly").objectStore(Hc)}function iP(){const t=indexedDB.deleteDatabase(zb);return new Xa(t).toPromise()}function Ef(){const t=indexedDB.open(zb,sP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hc,{keyPath:Wb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hc)?e(r):(r.close(),await iP(),e(await Ef()))})})}async function U0(t,e,n){const r=ju(t,!0).put({[Wb]:e,value:n});return new Xa(r).toPromise()}async function oP(t,e){const n=ju(t,!1).get(e),r=await new Xa(n).toPromise();return r===void 0?null:r.value}function $0(t,e){const n=ju(t,!0).delete(e);return new Xa(n).toPromise()}const aP=800,lP=3;class qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ef(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ru._getInstance(rP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await tP(),!this.activeServiceWorker)return;this.sender=new ZA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ef();return await U0(e,qc,"1"),await $0(e,qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>U0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ju(s,!1).getAll();return new Xa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qb.type="LOCAL";const cP=qb;new Ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){return e?Xn(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends rp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ai(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ai(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ai(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uP(t){return Db(t.auth,new ap(t),t.bypassAuthState)}function dP(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),jb(n,new ap(t),t.bypassAuthState)}async function hP(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),MA(n,new ap(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uP;case"linkViaPopup":case"linkViaRedirect":return hP;case"reauthViaPopup":case"reauthViaRedirect":return dP;default:on(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Ka(2e3,1e4);async function mP(t,e,n){if(Ct(t.app))return Promise.reject(pn(t,"operation-not-supported-in-this-environment"));const r=pr(t);UC(t,e,ip);const s=Hb(r,n);return new Ss(r,"signInViaPopup",e,s).executeNotNull()}class Ss extends Gb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fP.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="pendingRedirect",ic=new Map;class gP extends Gb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ic.get(this.auth._key());if(!e){try{const r=await yP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ic.set(this.auth._key(),e)}return this.bypassAuthState||ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yP(t,e){const n=xP(e),r=wP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function vP(t,e){ic.set(t._key(),e)}function wP(t){return Xn(t._redirectPersistence)}function xP(t){return sc(pP,t.config.apiKey,t.name)}async function _P(t,e,n=!1){if(Ct(t.app))return Promise.reject(er(t));const r=pr(t),s=Hb(r,e),o=await new gP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=10*60*1e3;class EP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kb(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bP&&this.cachedEventUids.clear(),this.cachedEventUids.has(B0(e))}saveEventToCache(e){this.cachedEventUids.add(B0(e)),this.lastProcessedEventTime=Date.now()}}function B0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(t,e={}){return Tn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SP=/^https?/;async function kP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IP(t);for(const n of e)try{if(CP(n))return}catch{}on(t,"unauthorized-domain")}function CP(t){const e=xf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SP.test(n))return!1;if(NP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new Ka(3e4,6e4);function z0(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PP(t){return new Promise((e,n)=>{var s,i,o;function r(){z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z0(),n(pn(t,"network-request-failed"))},timeout:AP.get()})}if((i=(s=Ln().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ln().gapi)!=null&&o.load)r();else{const c=pA("iframefcb");return Ln()[c]=()=>{gapi.load?r():n(pn(t,"network-request-failed"))},kb(`${mA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw oc=null,e})}let oc=null;function RP(t){return oc=oc||PP(t),oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new Ka(5e3,15e3),DP="__/auth/iframe",LP="emulator/auth/iframe",MP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VP(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ep(e,LP):`https://${t.config.authDomain}/${DP}`,r={apiKey:e.apiKey,appName:t.name,v:Js},s=OP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ha(r).slice(1)}`}async function FP(t){const e=await RP(t),n=Ln().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:VP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),c=Ln().setTimeout(()=>{i(o)},jP.get());function u(){Ln().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$P=500,BP=600,zP="_blank",WP="http://localhost";class W0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qP(t,e,n,r=$P,s=BP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...UP,width:r.toString(),height:s.toString(),top:i,left:o},d=yt().toLowerCase();n&&(c=_b(d)?zP:n),wb(d)&&(e=e||WP,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,S])=>`${g}${w}=${S},`,"");if(iA(d)&&c!=="_self")return HP(e||"",c),new W0(null);const m=window.open(e||"",c,f);ee(m,t,"popup-blocked");try{m.focus()}catch{}return new W0(m)}function HP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="__/auth/handler",KP="emulator/auth/handler",QP=encodeURIComponent("fac");async function q0(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:s};if(e instanceof ip){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ya){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${QP}=${encodeURIComponent(u)}`:"";return`${YP(t)}?${Ha(c).slice(1)}${d}`}function YP({config:t}){return t.emulator?ep(t,KP):`https://${t.authDomain}/${GP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="webStorageSupport";class XP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$b,this._completeRedirectFn=_P,this._overrideRedirectResult=vP}async _openPopup(e,n,r,s){var o;lr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await q0(e,n,r,xf(),s);return qP(e,i,op())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await q0(e,n,r,xf(),s);return eP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FP(e),r=new EP(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ah,{type:ah},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ah];i!==void 0&&n(!!i),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nb()||xb()||np()}}const JP=XP;var H0="@firebase/auth",G0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tR(t){wn(new sn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sb(t)},d=new dA(r,s,i,u);return _A(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wn(new sn("auth-internal",e=>{const n=pr(e.getProvider("auth").getImmediate());return(r=>new ZP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(H0,G0,eR(t)),Lt(H0,G0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=5*60,rR=tb("authIdTokenMaxAge")||nR;let K0=null;const sR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>rR)return;const s=n==null?void 0:n.token;K0!==s&&(K0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iR(t=Ga()){const e=ds(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xA(t,{popupRedirectResolver:JP,persistence:[cP,XA,$b]}),r=tb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=sR(i.toString());qA(n,o,()=>o(n.currentUser)),WA(n,c=>o(c))}}const s=J_("auth");return s&&bA(n,`http://${s}`),n}function oR(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",oR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tR("Browser");var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,Qb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function I(){}I.prototype=v.prototype,T.F=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(A,j,D){for(var k=Array(arguments.length-2),z=2;z<arguments.length;z++)k[z-2]=arguments[z];return v.prototype[j].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,I){I||(I=0);const A=Array(16);if(typeof v=="string")for(var j=0;j<16;++j)A[j]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(j=0;j<16;++j)A[j]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],j=T.g[2];let D=T.g[3],k;k=v+(D^I&(j^D))+A[0]+3614090360&4294967295,v=I+(k<<7&4294967295|k>>>25),k=D+(j^v&(I^j))+A[1]+3905402710&4294967295,D=v+(k<<12&4294967295|k>>>20),k=j+(I^D&(v^I))+A[2]+606105819&4294967295,j=D+(k<<17&4294967295|k>>>15),k=I+(v^j&(D^v))+A[3]+3250441966&4294967295,I=j+(k<<22&4294967295|k>>>10),k=v+(D^I&(j^D))+A[4]+4118548399&4294967295,v=I+(k<<7&4294967295|k>>>25),k=D+(j^v&(I^j))+A[5]+1200080426&4294967295,D=v+(k<<12&4294967295|k>>>20),k=j+(I^D&(v^I))+A[6]+2821735955&4294967295,j=D+(k<<17&4294967295|k>>>15),k=I+(v^j&(D^v))+A[7]+4249261313&4294967295,I=j+(k<<22&4294967295|k>>>10),k=v+(D^I&(j^D))+A[8]+1770035416&4294967295,v=I+(k<<7&4294967295|k>>>25),k=D+(j^v&(I^j))+A[9]+2336552879&4294967295,D=v+(k<<12&4294967295|k>>>20),k=j+(I^D&(v^I))+A[10]+4294925233&4294967295,j=D+(k<<17&4294967295|k>>>15),k=I+(v^j&(D^v))+A[11]+2304563134&4294967295,I=j+(k<<22&4294967295|k>>>10),k=v+(D^I&(j^D))+A[12]+1804603682&4294967295,v=I+(k<<7&4294967295|k>>>25),k=D+(j^v&(I^j))+A[13]+4254626195&4294967295,D=v+(k<<12&4294967295|k>>>20),k=j+(I^D&(v^I))+A[14]+2792965006&4294967295,j=D+(k<<17&4294967295|k>>>15),k=I+(v^j&(D^v))+A[15]+1236535329&4294967295,I=j+(k<<22&4294967295|k>>>10),k=v+(j^D&(I^j))+A[1]+4129170786&4294967295,v=I+(k<<5&4294967295|k>>>27),k=D+(I^j&(v^I))+A[6]+3225465664&4294967295,D=v+(k<<9&4294967295|k>>>23),k=j+(v^I&(D^v))+A[11]+643717713&4294967295,j=D+(k<<14&4294967295|k>>>18),k=I+(D^v&(j^D))+A[0]+3921069994&4294967295,I=j+(k<<20&4294967295|k>>>12),k=v+(j^D&(I^j))+A[5]+3593408605&4294967295,v=I+(k<<5&4294967295|k>>>27),k=D+(I^j&(v^I))+A[10]+38016083&4294967295,D=v+(k<<9&4294967295|k>>>23),k=j+(v^I&(D^v))+A[15]+3634488961&4294967295,j=D+(k<<14&4294967295|k>>>18),k=I+(D^v&(j^D))+A[4]+3889429448&4294967295,I=j+(k<<20&4294967295|k>>>12),k=v+(j^D&(I^j))+A[9]+568446438&4294967295,v=I+(k<<5&4294967295|k>>>27),k=D+(I^j&(v^I))+A[14]+3275163606&4294967295,D=v+(k<<9&4294967295|k>>>23),k=j+(v^I&(D^v))+A[3]+4107603335&4294967295,j=D+(k<<14&4294967295|k>>>18),k=I+(D^v&(j^D))+A[8]+1163531501&4294967295,I=j+(k<<20&4294967295|k>>>12),k=v+(j^D&(I^j))+A[13]+2850285829&4294967295,v=I+(k<<5&4294967295|k>>>27),k=D+(I^j&(v^I))+A[2]+4243563512&4294967295,D=v+(k<<9&4294967295|k>>>23),k=j+(v^I&(D^v))+A[7]+1735328473&4294967295,j=D+(k<<14&4294967295|k>>>18),k=I+(D^v&(j^D))+A[12]+2368359562&4294967295,I=j+(k<<20&4294967295|k>>>12),k=v+(I^j^D)+A[5]+4294588738&4294967295,v=I+(k<<4&4294967295|k>>>28),k=D+(v^I^j)+A[8]+2272392833&4294967295,D=v+(k<<11&4294967295|k>>>21),k=j+(D^v^I)+A[11]+1839030562&4294967295,j=D+(k<<16&4294967295|k>>>16),k=I+(j^D^v)+A[14]+4259657740&4294967295,I=j+(k<<23&4294967295|k>>>9),k=v+(I^j^D)+A[1]+2763975236&4294967295,v=I+(k<<4&4294967295|k>>>28),k=D+(v^I^j)+A[4]+1272893353&4294967295,D=v+(k<<11&4294967295|k>>>21),k=j+(D^v^I)+A[7]+4139469664&4294967295,j=D+(k<<16&4294967295|k>>>16),k=I+(j^D^v)+A[10]+3200236656&4294967295,I=j+(k<<23&4294967295|k>>>9),k=v+(I^j^D)+A[13]+681279174&4294967295,v=I+(k<<4&4294967295|k>>>28),k=D+(v^I^j)+A[0]+3936430074&4294967295,D=v+(k<<11&4294967295|k>>>21),k=j+(D^v^I)+A[3]+3572445317&4294967295,j=D+(k<<16&4294967295|k>>>16),k=I+(j^D^v)+A[6]+76029189&4294967295,I=j+(k<<23&4294967295|k>>>9),k=v+(I^j^D)+A[9]+3654602809&4294967295,v=I+(k<<4&4294967295|k>>>28),k=D+(v^I^j)+A[12]+3873151461&4294967295,D=v+(k<<11&4294967295|k>>>21),k=j+(D^v^I)+A[15]+530742520&4294967295,j=D+(k<<16&4294967295|k>>>16),k=I+(j^D^v)+A[2]+3299628645&4294967295,I=j+(k<<23&4294967295|k>>>9),k=v+(j^(I|~D))+A[0]+4096336452&4294967295,v=I+(k<<6&4294967295|k>>>26),k=D+(I^(v|~j))+A[7]+1126891415&4294967295,D=v+(k<<10&4294967295|k>>>22),k=j+(v^(D|~I))+A[14]+2878612391&4294967295,j=D+(k<<15&4294967295|k>>>17),k=I+(D^(j|~v))+A[5]+4237533241&4294967295,I=j+(k<<21&4294967295|k>>>11),k=v+(j^(I|~D))+A[12]+1700485571&4294967295,v=I+(k<<6&4294967295|k>>>26),k=D+(I^(v|~j))+A[3]+2399980690&4294967295,D=v+(k<<10&4294967295|k>>>22),k=j+(v^(D|~I))+A[10]+4293915773&4294967295,j=D+(k<<15&4294967295|k>>>17),k=I+(D^(j|~v))+A[1]+2240044497&4294967295,I=j+(k<<21&4294967295|k>>>11),k=v+(j^(I|~D))+A[8]+1873313359&4294967295,v=I+(k<<6&4294967295|k>>>26),k=D+(I^(v|~j))+A[15]+4264355552&4294967295,D=v+(k<<10&4294967295|k>>>22),k=j+(v^(D|~I))+A[6]+2734768916&4294967295,j=D+(k<<15&4294967295|k>>>17),k=I+(D^(j|~v))+A[13]+1309151649&4294967295,I=j+(k<<21&4294967295|k>>>11),k=v+(j^(I|~D))+A[4]+4149444226&4294967295,v=I+(k<<6&4294967295|k>>>26),k=D+(I^(v|~j))+A[11]+3174756917&4294967295,D=v+(k<<10&4294967295|k>>>22),k=j+(v^(D|~I))+A[2]+718787259&4294967295,j=D+(k<<15&4294967295|k>>>17),k=I+(D^(j|~v))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(j+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+j&4294967295,T.g[3]=T.g[3]+D&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const I=v-this.blockSize,A=this.C;let j=this.h,D=0;for(;D<v;){if(j==0)for(;D<=I;)s(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<v;)if(A[j++]=T.charCodeAt(D++),j==this.blockSize){s(this,A),j=0;break}}else for(;D<v;)if(A[j++]=T[D++],j==this.blockSize){s(this,A),j=0;break}}this.h=j,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)T[v++]=this.g[I]>>>A&255;return T};function i(T,v){var I=c;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;const I=[];let A=!0;for(let j=T.length-1;j>=0;j--){const D=T[j]|0;A&&D==v||(I[j]=D,A=!1)}this.g=I}var c={};function u(T){return-128<=T&&T<128?i(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return _(d(-T));const v=[];let I=1;for(let A=0;T>=I;A++)v[A]=T/I|0,I*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return _(f(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(v,8));let A=m;for(let D=0;D<T.length;D+=8){var j=Math.min(8,T.length-D);const k=parseInt(T.substring(D,D+j),v);j<8?(j=d(Math.pow(v,j)),A=A.j(j).add(d(k))):(A=A.j(I),A=A.add(d(k)))}return A}var m=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-_(this).m();let T=0,v=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);T+=(A>=0?A:4294967296+A)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S(this))return"0";if(N(this))return"-"+_(this).toString(T);const v=d(Math.pow(T,6));var I=this;let A="";for(;;){const j=R(I,v).g;I=x(I,j.j(v));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=j,S(I))return D+A;for(;D.length<6;)D="0"+D;A=D+A}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function S(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:S(T)?0:1};function _(T){const v=T.g.length,I=[];for(let A=0;A<v;A++)I[A]=~T.g[A];return new o(I,~T.h).add(g)}t.abs=function(){return N(this)?_(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),I=[];let A=0;for(let j=0;j<=v;j++){let D=A+(this.i(j)&65535)+(T.i(j)&65535),k=(D>>>16)+(this.i(j)>>>16)+(T.i(j)>>>16);A=k>>>16,D&=65535,k&=65535,I[j]=k<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(_(v))}t.j=function(T){if(S(this)||S(T))return m;if(N(this))return N(T)?_(this).j(_(T)):_(_(this).j(T));if(N(T))return _(this.j(_(T)));if(this.l(w)<0&&T.l(w)<0)return d(this.m()*T.m());const v=this.g.length+T.g.length,I=[];for(var A=0;A<2*v;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let j=0;j<T.g.length;j++){const D=this.i(A)>>>16,k=this.i(A)&65535,z=T.i(j)>>>16,X=T.i(j)&65535;I[2*A+2*j]+=k*X,y(I,2*A+2*j),I[2*A+2*j+1]+=D*X,y(I,2*A+2*j+1),I[2*A+2*j+1]+=k*z,y(I,2*A+2*j+1),I[2*A+2*j+2]+=D*z,y(I,2*A+2*j+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function E(T,v){this.g=T,this.h=v}function R(T,v){if(S(v))throw Error("division by zero");if(S(T))return new E(m,m);if(N(T))return v=R(_(T),v),new E(_(v.g),_(v.h));if(N(v))return v=R(T,_(v)),new E(_(v.g),v.h);if(T.g.length>30){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,A=v;A.l(T)<=0;)I=P(I),A=P(A);var j=M(I,1),D=M(A,1);for(A=M(A,2),I=M(I,2);!S(A);){var k=D.add(A);k.l(T)<=0&&(j=j.add(I),D=k),A=M(A,1),I=M(I,1)}return v=x(T,j.j(v)),new E(j,v)}for(j=m;T.l(v)>=0;){for(I=Math.max(1,Math.floor(T.m()/v.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),D=d(I),k=D.j(v);N(k)||k.l(T)>0;)I-=A,D=d(I),k=D.j(v);S(D)&&(D=g),j=j.add(D),T=x(T,k)}return new E(j,T)}t.B=function(T){return R(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)&T.i(A);return new o(I,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)|T.i(A);return new o(I,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<v;A++)I[A]=this.i(A)^T.i(A);return new o(I,this.h^T.h)};function P(T){const v=T.g.length+1,I=[];for(let A=0;A<v;A++)I[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(I,T.h)}function M(T,v){const I=v>>5;v%=32;const A=T.g.length-I,j=[];for(let D=0;D<A;D++)j[D]=v>0?T.i(D+I)>>>v|T.i(D+I+1)<<32-v:T.i(D+I);return new o(j,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Qb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Hr=o}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yb,Vo,Xb,ac,Tf,Jb,Zb,e1;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ll=="object"&&Ll];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var b=0;b<l.length-1;b++){var L=l[b];if(!(L in p))break e;p=p[L]}l=l[l.length-1],b=p[l],h=h(b),h!=b&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var p=[],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&p.push([b,h[b]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,p){return l.call.apply(l.bind,arguments)}function d(l,h,p){return d=u,d.apply(null,arguments)}function f(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function m(l,h){function p(){}p.prototype=h.prototype,l.Z=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Ob=function(b,L,V){for(var G=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)G[ie-2]=arguments[ie];return h.prototype[L].apply(b,G)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function w(l){const h=l.length;if(h>0){const p=Array(h);for(let b=0;b<h;b++)p[b]=l[b];return p}return[]}function S(l,h){for(let b=1;b<arguments.length;b++){const L=arguments[b];var p=typeof L;if(p=p!="object"?p:L?Array.isArray(L)?"array":p:"null",p=="array"||p=="object"&&typeof L.length=="number"){p=l.length||0;const V=L.length||0;l.length=p+V;for(let G=0;G<V;G++)l[p+G]=L[G]}else l.push(L)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(l){o.setTimeout(()=>{throw l},0)}function x(){var l=T;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,p){const b=E.get();b.set(h,p),this.h?this.h.next=b:this.g=b,this.h=b}}var E=new N(()=>new R,l=>l.reset());class R{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let P,M=!1,T=new y,v=()=>{const l=Promise.resolve(void 0);P=()=>{l.then(I)}};function I(){for(var l;l=x();){try{l.h.call(l.g)}catch(p){_(p)}var h=E;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}M=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return l}();function k(l){return/^[\s\xa0]*$/.test(l)}function z(l,h){j.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(z,j),z.prototype.init=function(l,h){const p=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),H=0;function oe(l,h,p,b,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!b,this.ha=L,this.key=++H,this.da=this.fa=!1}function q(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function B(l,h,p){for(const b in l)h.call(p,l[b],b,l)}function O(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function $(l){const h={};for(const p in l)h[p]=l[p];return h}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(l,h){let p,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(p in b)l[p]=b[p];for(let V=0;V<Z.length;V++)p=Z[V],Object.prototype.hasOwnProperty.call(b,p)&&(l[p]=b[p])}}function me(l){this.src=l,this.g={},this.h=0}me.prototype.add=function(l,h,p,b,L){const V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);const G=Ae(l,h,b,L);return G>-1?(h=l[G],p||(h.fa=!1)):(h=new oe(h,this.src,V,!!b,L),h.fa=p,l.push(h)),h};function pe(l,h){const p=h.type;if(p in l.g){var b=l.g[p],L=Array.prototype.indexOf.call(b,h,void 0),V;(V=L>=0)&&Array.prototype.splice.call(b,L,1),V&&(q(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Ae(l,h,p,b){for(let L=0;L<l.length;++L){const V=l[L];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==b)return L}return-1}var lt="closure_lm_"+(Math.random()*1e6|0),tt={};function Wn(l,h,p,b,L){if(Array.isArray(h)){for(let V=0;V<h.length;V++)Wn(l,h[V],p,b,L);return null}return p=lg(p),l&&l[X]?l.J(h,p,c(b)?!!b.capture:!1,L):ps(l,h,p,!1,b,L)}function ps(l,h,p,b,L,V){if(!h)throw Error("Invalid event type");const G=c(L)?!!L.capture:!!L;let ie=ld(l);if(ie||(l[lt]=ie=new me(l)),p=ie.add(h,p,b,G,V),p.proxy)return p;if(b=od(),p.proxy=b,b.src=l,b.listener=p,l.addEventListener)D||(L=G),L===void 0&&(L=!1),l.addEventListener(h.toString(),b,L);else if(l.attachEvent)l.attachEvent(ag(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function od(){function l(p){return h.call(l.src,l.listener,p)}const h=A2;return l}function og(l,h,p,b,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)og(l,h[V],p,b,L);else b=c(b)?!!b.capture:!!b,p=lg(p),l&&l[X]?(l=l.i,V=String(h).toString(),V in l.g&&(h=l.g[V],p=Ae(h,p,b,L),p>-1&&(q(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete l.g[V],l.h--)))):l&&(l=ld(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ae(h,p,b,L)),(p=l>-1?h[l]:null)&&ad(p))}function ad(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[X])pe(h.i,l);else{var p=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(p,b,l.capture):h.detachEvent?h.detachEvent(ag(p),b):h.addListener&&h.removeListener&&h.removeListener(b),(p=ld(h))?(pe(p,l),p.h==0&&(p.src=null,h[lt]=null)):q(l)}}}function ag(l){return l in tt?tt[l]:tt[l]="on"+l}function A2(l,h){if(l.da)l=!0;else{h=new z(h,this);const p=l.listener,b=l.ha||l.src;l.fa&&ad(l),l=p.call(b,h)}return l}function ld(l){return l=l[lt],l instanceof me?l:null}var cd="__closure_events_fn_"+(Math.random()*1e9>>>0);function lg(l){return typeof l=="function"?l:(l[cd]||(l[cd]=function(h){return l.handleEvent(h)}),l[cd])}function ct(){A.call(this),this.i=new me(this),this.M=this,this.G=null}m(ct,A),ct.prototype[X]=!0,ct.prototype.removeEventListener=function(l,h,p,b){og(this,l,h,p,b)};function wt(l,h){var p,b=l.G;if(b)for(p=[];b;b=b.G)p.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new j(h,l);else if(h instanceof j)h.target=h.target||l;else{var L=h;h=new j(b,l),ve(h,L)}L=!0;let V,G;if(p)for(G=p.length-1;G>=0;G--)V=h.g=p[G],L=sl(V,b,!0,h)&&L;if(V=h.g=l,L=sl(V,b,!0,h)&&L,L=sl(V,b,!1,h)&&L,p)for(G=0;G<p.length;G++)V=h.g=p[G],L=sl(V,b,!1,h)&&L}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const p=l.g[h];for(let b=0;b<p.length;b++)q(p[b]);delete l.g[h],l.h--}}this.G=null},ct.prototype.J=function(l,h,p,b){return this.i.add(String(l),h,!1,p,b)},ct.prototype.K=function(l,h,p,b){return this.i.add(String(l),h,!0,p,b)};function sl(l,h,p,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let L=!0;for(let V=0;V<h.length;++V){const G=h[V];if(G&&!G.da&&G.capture==p){const ie=G.listener,Ge=G.ha||G.src;G.fa&&pe(l.i,G),L=ie.call(Ge,b)!==!1&&L}}return L&&!b.defaultPrevented}function P2(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function cg(l){l.g=P2(()=>{l.g=null,l.i&&(l.i=!1,cg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class R2 extends A{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:cg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(l){A.call(this),this.h=l,this.g={}}m(io,A);var ug=[];function dg(l){B(l.g,function(h,p){this.g.hasOwnProperty(p)&&ad(h)},l),l.g={}}io.prototype.N=function(){io.Z.N.call(this),dg(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ud=o.JSON.stringify,j2=o.JSON.parse,D2=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function hg(){}function fg(){}var oo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dd(){j.call(this,"d")}m(dd,j);function hd(){j.call(this,"c")}m(hd,j);var gs={},mg=null;function il(){return mg=mg||new ct}gs.Ia="serverreachability";function pg(l){j.call(this,gs.Ia,l)}m(pg,j);function ao(l){const h=il();wt(h,new pg(h))}gs.STAT_EVENT="statevent";function gg(l,h){j.call(this,gs.STAT_EVENT,l),this.stat=h}m(gg,j);function xt(l){const h=il();wt(h,new gg(h,l))}gs.Ja="timingevent";function yg(l,h){j.call(this,gs.Ja,l),this.size=h}m(yg,j);function lo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function co(){this.g=!0}co.prototype.ua=function(){this.g=!1};function L2(l,h,p,b,L,V){l.info(function(){if(l.g)if(V){var G="",ie=V.split("&");for(let xe=0;xe<ie.length;xe++){var Ge=ie[xe].split("=");if(Ge.length>1){const Xe=Ge[0];Ge=Ge[1];const Nn=Xe.split("_");G=Nn.length>=2&&Nn[1]=="type"?G+(Xe+"="+Ge+"&"):G+(Xe+"=redacted&")}}}else G=null;else G=V;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+h+`
`+p+`
`+G})}function M2(l,h,p,b,L,V,G){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+h+`
`+p+`
`+V+" "+G})}function ni(l,h,p,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+V2(l,p)+(b?" "+b:"")})}function O2(l,h){l.info(function(){return"TIMEOUT: "+h})}co.prototype.info=function(){};function V2(l,h){if(!l.g)return h;if(!h)return null;try{const V=JSON.parse(h);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var p=V[l];if(!(p.length<2)){var b=p[1];if(Array.isArray(b)&&!(b.length<1)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(let G=1;G<b.length;G++)b[G]=""}}}}return ud(V)}catch{return h}}var ol={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wg;function fd(){}m(fd,hg),fd.prototype.g=function(){return new XMLHttpRequest},wg=new fd;function uo(l){return encodeURIComponent(String(l))}function F2(l){var h=1;l=l.split(":");const p=[];for(;h>0&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function yr(l,h,p,b){this.j=l,this.i=h,this.l=p,this.S=b||1,this.V=new io(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xg}function xg(){this.i=null,this.g="",this.h=!1}var _g={},md={};function pd(l,h,p){l.M=1,l.A=ll(In(h)),l.u=p,l.R=!0,bg(l,null)}function bg(l,h){l.F=Date.now(),al(l),l.B=In(l.A);var p=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),Lg(p.i,"t",b),l.C=0,p=l.j.L,l.h=new xg,l.g=Zg(l.j,p?h:null,!l.u),l.P>0&&(l.O=new R2(d(l.Y,l,l.g),l.P)),h=l.V,p=l.g,b=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(ug[0]=L.toString()),L=ug);for(let V=0;V<L.length;V++){const G=Wn(p,L[V],b||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=l.J?$(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),ao(),L2(l.i,l.v,l.B,l.l,l.S,l.u)}yr.prototype.ba=function(l){l=l.target;const h=this.O;h&&xr(l)==3?h.j():this.Y(l)},yr.prototype.Y=function(l){try{if(l==this.g)e:{const ie=xr(this.g),Ge=this.g.ya(),xe=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Bg(this.g)))){this.K||ie!=4||Ge==7||(Ge==8||xe<=0?ao(3):ao(2)),gd(this);var h=this.g.ca();this.X=h;var p=U2(this);if(this.o=h==200,M2(this.i,this.v,this.B,this.l,this.S,ie,h),this.o){if(this.U&&!this.L){t:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(b)){var V=b;break t}}V=null}if(l=V)ni(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yd(this,l);else{this.o=!1,this.m=3,xt(12),ys(this),ho(this);break e}}if(this.R){l=!0;let Xe;for(;!this.K&&this.C<p.length;)if(Xe=$2(this,p),Xe==md){ie==4&&(this.m=4,xt(14),l=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(Xe==_g){this.m=4,xt(15),ni(this.i,this.l,p,"[Invalid Chunk]"),l=!1;break}else ni(this.i,this.l,Xe,null),yd(this,Xe);if(Eg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||p.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)ni(this.i,this.l,p,"[Invalid Chunked Response]"),ys(this),ho(this);else if(p.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Id(G),G.P=!0,xt(11))}}else ni(this.i,this.l,p,null),yd(this,p);ie==4&&ys(this),this.o&&!this.K&&(ie==4?Qg(this.j,this):(this.o=!1,al(this)))}else tT(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),ys(this),ho(this)}}}catch{}finally{}};function U2(l){if(!Eg(l))return l.g.la();const h=Bg(l.g);if(h==="")return"";let p="";const b=h.length,L=xr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ys(l),ho(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<b;V++)l.h.h=!0,p+=l.h.i.decode(h[V],{stream:!(L&&V==b-1)});return h.length=0,l.h.g+=p,l.C=0,l.h.g}function Eg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function $2(l,h){var p=l.C,b=h.indexOf(`
`,p);return b==-1?md:(p=Number(h.substring(p,b)),isNaN(p)?_g:(b+=1,b+p>h.length?md:(h=h.slice(b,b+p),l.C=b+p,h)))}yr.prototype.cancel=function(){this.K=!0,ys(this)};function al(l){l.T=Date.now()+l.H,Tg(l,l.H)}function Tg(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=lo(d(l.aa,l),h)}function gd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}yr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(O2(this.i,this.B),this.M!=2&&(ao(),xt(17)),ys(this),this.m=2,ho(this)):Tg(this,this.T-l)};function ho(l){l.j.I==0||l.K||Qg(l.j,l)}function ys(l){gd(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,dg(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function yd(l,h){try{var p=l.j;if(p.I!=0&&(p.g==l||vd(p.h,l))){if(!l.L&&vd(p.h,l)&&p.I==3){try{var b=p.Ba.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<l.F)fl(p),dl(p);else break e;Td(p),xt(18)}}else p.xa=L[1],0<p.xa-p.K&&L[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=lo(d(p.Va,p),6e3));Sg(p.h)<=1&&p.ta&&(p.ta=void 0)}else ws(p,11)}else if((l.L||p.g==l)&&fl(p),!k(h))for(L=p.Ba.g.parse(h),h=0;h<L.length;h++){let xe=L[h];const Xe=xe[0];if(!(Xe<=p.K))if(p.K=Xe,xe=xe[1],p.I==2)if(xe[0]=="c"){p.M=xe[1],p.ba=xe[2];const Nn=xe[3];Nn!=null&&(p.ka=Nn,p.j.info("VER="+p.ka));const xs=xe[4];xs!=null&&(p.za=xs,p.j.info("SVER="+p.za));const _r=xe[5];_r!=null&&typeof _r=="number"&&_r>0&&(b=1.5*_r,p.O=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const br=l.g;if(br){const pl=br.g?br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pl){var V=b.h;V.g||pl.indexOf("spdy")==-1&&pl.indexOf("quic")==-1&&pl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(wd(V,V.h),V.h=null))}if(b.G){const Nd=br.g?br.g.getResponseHeader("X-HTTP-Session-Id"):null;Nd&&(b.wa=Nd,Ee(b.J,b.G,Nd))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-l.F,p.j.info("Handshake RTT: "+p.T+"ms")),b=p;var G=l;if(b.na=Jg(b,b.L?b.ba:null,b.W),G.L){kg(b.h,G);var ie=G,Ge=b.O;Ge&&(ie.H=Ge),ie.D&&(gd(ie),al(ie)),b.g=G}else Gg(b);p.i.length>0&&hl(p)}else xe[0]!="stop"&&xe[0]!="close"||ws(p,7);else p.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?ws(p,7):Ed(p):xe[0]!="noop"&&p.l&&p.l.qa(xe),p.A=0)}}ao(4)}catch{}}var B2=class{constructor(l,h){this.g=l,this.map=h}};function Ig(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ng(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Sg(l){return l.h?1:l.g?l.g.size:0}function vd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function wd(l,h){l.g?l.g.add(h):l.h=h}function kg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Ig.prototype.cancel=function(){if(this.i=Cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Cg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.G);return h}return w(l.i)}var Ag=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function z2(l,h){if(l){l=l.split("&");for(let p=0;p<l.length;p++){const b=l[p].indexOf("=");let L,V=null;b>=0?(L=l[p].substring(0,b),V=l[p].substring(b+1)):L=l[p],h(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function vr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof vr?(this.l=l.l,fo(this,l.j),this.o=l.o,this.g=l.g,mo(this,l.u),this.h=l.h,xd(this,Mg(l.i)),this.m=l.m):l&&(h=String(l).match(Ag))?(this.l=!1,fo(this,h[1]||"",!0),this.o=po(h[2]||""),this.g=po(h[3]||"",!0),mo(this,h[4]),this.h=po(h[5]||"",!0),xd(this,h[6]||"",!0),this.m=po(h[7]||"")):(this.l=!1,this.i=new yo(null,this.l))}vr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(go(h,Pg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(go(h,Pg,!0),"@"),l.push(uo(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&l.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(go(p,p.charAt(0)=="/"?H2:q2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",go(p,K2)),l.join("")},vr.prototype.resolve=function(l){const h=In(this);let p=!!l.j;p?fo(h,l.j):p=!!l.o,p?h.o=l.o:p=!!l.g,p?h.g=l.g:p=l.u!=null;var b=l.h;if(p)mo(h,l.u);else if(p=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var L=h.h.lastIndexOf("/");L!=-1&&(b=h.h.slice(0,L+1)+b)}if(L=b,L==".."||L==".")b="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){b=L.lastIndexOf("/",0)==0,L=L.split("/");const V=[];for(let G=0;G<L.length;){const ie=L[G++];ie=="."?b&&G==L.length&&V.push(""):ie==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),b&&G==L.length&&V.push("")):(V.push(ie),b=!0)}b=V.join("/")}else b=L}return p?h.h=b:p=l.i.toString()!=="",p?xd(h,Mg(l.i)):p=!!l.m,p&&(h.m=l.m),h};function In(l){return new vr(l)}function fo(l,h,p){l.j=p?po(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function mo(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function xd(l,h,p){h instanceof yo?(l.i=h,Q2(l.i,l.l)):(p||(h=go(h,G2)),l.i=new yo(h,l.l))}function Ee(l,h,p){l.i.set(h,p)}function ll(l){return Ee(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function po(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function go(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,W2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function W2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Pg=/[#\/\?@]/g,q2=/[#\?:]/g,H2=/[#\?]/g,G2=/[#\?@]/g,K2=/#/g;function yo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function vs(l){l.g||(l.g=new Map,l.h=0,l.i&&z2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=yo.prototype,t.add=function(l,h){vs(this),this.i=null,l=ri(this,l);let p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Rg(l,h){vs(l),h=ri(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function jg(l,h){return vs(l),h=ri(l,h),l.g.has(h)}t.forEach=function(l,h){vs(this),this.g.forEach(function(p,b){p.forEach(function(L){l.call(h,L,b,this)},this)},this)};function Dg(l,h){vs(l);let p=[];if(typeof h=="string")jg(l,h)&&(p=p.concat(l.g.get(ri(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)p=p.concat(l[h]);return p}t.set=function(l,h){return vs(this),this.i=null,l=ri(this,l),jg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Dg(this,l),l.length>0?String(l[0]):h):h};function Lg(l,h,p){Rg(l,h),p.length>0&&(l.i=null,l.g.set(ri(l,h),w(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let b=0;b<h.length;b++){var p=h[b];const L=uo(p);p=Dg(this,p);for(let V=0;V<p.length;V++){let G=L;p[V]!==""&&(G+="="+uo(p[V])),l.push(G)}}return this.i=l.join("&")};function Mg(l){const h=new yo;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function ri(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Q2(l,h){h&&!l.j&&(vs(l),l.i=null,l.g.forEach(function(p,b){const L=b.toLowerCase();b!=L&&(Rg(this,b),Lg(this,L,p))},l)),l.j=h}function Y2(l,h){const p=new co;if(o.Image){const b=new Image;b.onload=f(wr,p,"TestLoadImage: loaded",!0,h,b),b.onerror=f(wr,p,"TestLoadImage: error",!1,h,b),b.onabort=f(wr,p,"TestLoadImage: abort",!1,h,b),b.ontimeout=f(wr,p,"TestLoadImage: timeout",!1,h,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function X2(l,h){const p=new co,b=new AbortController,L=setTimeout(()=>{b.abort(),wr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(V=>{clearTimeout(L),V.ok?wr(p,"TestPingServer: ok",!0,h):wr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),wr(p,"TestPingServer: error",!1,h)})}function wr(l,h,p,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(p)}catch{}}function J2(){this.g=new D2}function _d(l){this.i=l.Sb||null,this.h=l.ab||!1}m(_d,hg),_d.prototype.g=function(){return new cl(this.i,this.h)};function cl(l,h){ct.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(cl,ct),t=cl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,wo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Og(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Og(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?vo(this):wo(this),this.readyState==3&&Og(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,vo(this))},t.Na=function(l){this.g&&(this.response=l,vo(this))},t.ga=function(){this.g&&vo(this)};function vo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,wo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function wo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Vg(l){let h="";return B(l,function(p,b){h+=b,h+=":",h+=p,h+=`\r
`}),h}function bd(l,h,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=Vg(p),typeof l=="string"?p!=null&&uo(p):Ee(l,h,p))}function Le(l){ct.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Le,ct);var Z2=/^https?$/i,eT=["POST","PUT"];t=Le.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wg.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Fg(this,V);return}if(l=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)p.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const V of b.keys())p.set(V,b.get(V));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(eT,h,void 0)>=0)||b||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,G]of p)this.g.setRequestHeader(V,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){Fg(this,V)}};function Fg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Ug(l),ul(l)}function Ug(l){l.A||(l.A=!0,wt(l,"complete"),wt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,wt(this,"complete"),wt(this,"abort"),ul(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ul(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?$g(this):this.Xa())},t.Xa=function(){$g(this)};function $g(l){if(l.h&&typeof i<"u"){if(l.v&&xr(l)==4)setTimeout(l.Ca.bind(l),0);else if(wt(l,"readystatechange"),xr(l)==4){l.h=!1;try{const V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var b;if(b=V===0){let G=String(l.D).match(Ag)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),b=!Z2.test(G?G.toLowerCase():"")}p=b}if(p)wt(l,"complete"),wt(l,"success");else{l.o=6;try{var L=xr(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",Ug(l)}}finally{ul(l)}}}}function ul(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const p=l.g;l.g=null,h||wt(l,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return xr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),j2(h)}};function Bg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function tT(l){const h={};l=(l.g&&xr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(k(l[b]))continue;var p=F2(l[b]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[L]||[];h[L]=V,V.push(p)}O(h,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xo(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function zg(l){this.za=0,this.i=[],this.j=new co,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xo("baseRetryDelayMs",5e3,l),this.Za=xo("retryDelaySeedMs",1e4,l),this.Ta=xo("forwardChannelMaxRetries",2,l),this.va=xo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ig(l&&l.concurrentRequestLimit),this.Ba=new J2,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zg.prototype,t.ka=8,t.I=1,t.connect=function(l,h,p,b){xt(0),this.W=l,this.H=h||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.J=Jg(this,null,this.W),hl(this)};function Ed(l){if(Wg(l),l.I==3){var h=l.V++,p=In(l.J);if(Ee(p,"SID",l.M),Ee(p,"RID",h),Ee(p,"TYPE","terminate"),_o(l,p),h=new yr(l,l.j,h),h.M=2,h.A=ll(In(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=Zg(h.j,null),h.g.ea(h.A)),h.F=Date.now(),al(h)}Xg(l)}function dl(l){l.g&&(Id(l),l.g.cancel(),l.g=null)}function Wg(l){dl(l),l.v&&(o.clearTimeout(l.v),l.v=null),fl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function hl(l){if(!Ng(l.h)&&!l.m){l.m=!0;var h=l.Ea;P||v(),M||(P(),M=!0),T.add(h,l),l.D=0}}function nT(l,h){return Sg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=lo(d(l.Ea,l,h),Yg(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new yr(this,this.j,l);let V=this.o;if(this.U&&(V?(V=$(V),ve(V,this.U)):V=this.U),this.u!==null||this.R||(L.J=V,V=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Hg(this,L,h),p=In(this.J),Ee(p,"RID",l),Ee(p,"CVER",22),this.G&&Ee(p,"X-HTTP-Session-Id",this.G),_o(this,p),V&&(this.R?h="headers="+uo(Vg(V))+"&"+h:this.u&&bd(p,this.u,V)),wd(this.h,L),this.Ra&&Ee(p,"TYPE","init"),this.S?(Ee(p,"$req",h),Ee(p,"SID","null"),L.U=!0,pd(L,p,null)):pd(L,p,h),this.I=2}}else this.I==3&&(l?qg(this,l):this.i.length==0||Ng(this.h)||qg(this))};function qg(l,h){var p;h?p=h.l:p=l.V++;const b=In(l.J);Ee(b,"SID",l.M),Ee(b,"RID",p),Ee(b,"AID",l.K),_o(l,b),l.u&&l.o&&bd(b,l.u,l.o),p=new yr(l,l.j,p,l.D+1),l.u===null&&(p.J=l.o),h&&(l.i=h.G.concat(l.i)),h=Hg(l,p,1e3),p.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),wd(l.h,p),pd(p,b,h)}function _o(l,h){l.H&&B(l.H,function(p,b){Ee(h,b,p)}),l.l&&B({},function(p,b){Ee(h,b,p)})}function Hg(l,h,p){p=Math.min(l.i.length,p);const b=l.l?d(l.l.Ka,l.l,l):null;e:{var L=l.i;let ie=-1;for(;;){const Ge=["count="+p];ie==-1?p>0?(ie=L[0].g,Ge.push("ofs="+ie)):ie=0:Ge.push("ofs="+ie);let xe=!0;for(let Xe=0;Xe<p;Xe++){var V=L[Xe].g;const Nn=L[Xe].map;if(V-=ie,V<0)ie=Math.max(0,L[Xe].g-100),xe=!1;else try{V="req"+V+"_"||"";try{var G=Nn instanceof Map?Nn:Object.entries(Nn);for(const[xs,_r]of G){let br=_r;c(_r)&&(br=ud(_r)),Ge.push(V+xs+"="+encodeURIComponent(br))}}catch(xs){throw Ge.push(V+"type="+encodeURIComponent("_badmap")),xs}}catch{b&&b(Nn)}}if(xe){G=Ge.join("&");break e}}G=void 0}return l=l.i.splice(0,p),h.G=l,G}function Gg(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;P||v(),M||(P(),M=!0),T.add(h,l),l.A=0}}function Td(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=lo(d(l.Da,l),Yg(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Kg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=lo(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),dl(this),Kg(this))};function Id(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Kg(l){l.g=new yr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=In(l.na);Ee(h,"RID","rpc"),Ee(h,"SID",l.M),Ee(h,"AID",l.K),Ee(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ee(h,"TO",l.ia),Ee(h,"TYPE","xmlhttp"),_o(l,h),l.u&&l.o&&bd(h,l.u,l.o),l.O&&(l.g.H=l.O);var p=l.g;l=l.ba,p.M=1,p.A=ll(In(h)),p.u=null,p.R=!0,bg(p,l)}t.Va=function(){this.C!=null&&(this.C=null,dl(this),Td(this),xt(19))};function fl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Qg(l,h){var p=null;if(l.g==h){fl(l),Id(l),l.g=null;var b=2}else if(vd(l.h,h))p=h.G,kg(l.h,h),b=1;else return;if(l.I!=0){if(h.o)if(b==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var L=l.D;b=il(),wt(b,new yg(b,p)),hl(l)}else Gg(l);else if(L=h.m,L==3||L==0&&h.X>0||!(b==1&&nT(l,h)||b==2&&Td(l)))switch(p&&p.length>0&&(h=l.h,h.i=h.i.concat(p)),L){case 1:ws(l,5);break;case 4:ws(l,10);break;case 3:ws(l,6);break;default:ws(l,2)}}}function Yg(l,h){let p=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(p*=2),p*h}function ws(l,h){if(l.j.info("Error code "+h),h==2){var p=d(l.bb,l),b=l.Ua;const L=!b;b=new vr(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||fo(b,"https"),ll(b),L?Y2(b.toString(),p):X2(b.toString(),p)}else xt(2);l.I=0,l.l&&l.l.pa(h),Xg(l),Wg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Xg(l){if(l.I=0,l.ja=[],l.l){const h=Cg(l.h);(h.length!=0||l.i.length!=0)&&(S(l.ja,h),S(l.ja,l.i),l.h.i.length=0,w(l.i),l.i.length=0),l.l.oa()}}function Jg(l,h,p){var b=p instanceof vr?In(p):new vr(p);if(b.g!="")h&&(b.g=h+"."+b.g),mo(b,b.u);else{var L=o.location;b=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;const V=new vr(null);b&&fo(V,b),h&&(V.g=h),L&&mo(V,L),p&&(V.h=p),b=V}return p=l.G,h=l.wa,p&&h&&Ee(b,p,h),Ee(b,"VER",l.ka),_o(l,b),b}function Zg(l,h,p){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Le(new _d({ab:p})):new Le(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ey(){}t=ey.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ml(){}ml.prototype.g=function(l,h){return new Mt(l,h)};function Mt(l,h){ct.call(this),this.g=new zg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!k(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new si(this)}m(Mt,ct),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Ed(this.g)},Mt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.v&&(p={},p.__data__=ud(l),l=p);h.i.push(new B2(h.Ya++,l)),h.I==3&&hl(h)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Ed(this.g),delete this.g,Mt.Z.N.call(this)};function ty(l){dd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(ty,dd);function ny(){hd.call(this),this.status=1}m(ny,hd);function si(l){this.g=l}m(si,ey),si.prototype.ra=function(){wt(this.g,"a")},si.prototype.qa=function(l){wt(this.g,new ty(l))},si.prototype.pa=function(l){wt(this.g,new ny)},si.prototype.oa=function(){wt(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,e1=function(){return new ml},Zb=function(){return il()},Jb=gs,Tf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ol.NO_ERROR=0,ol.TIMEOUT=8,ol.HTTP_ERROR=6,ac=ol,vg.COMPLETE="complete",Xb=vg,fg.EventType=oo,oo.OPEN="a",oo.CLOSE="b",oo.ERROR="c",oo.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Vo=fg,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,Yb=Le}).apply(typeof Ll<"u"?Ll:typeof self<"u"?self:typeof window<"u"?window:{});const Y0="@firebase/firestore",X0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Au("@firebase/firestore");function oi(){return zs.logLevel}function Q(t,...e){if(zs.logLevel<=le.DEBUG){const n=e.map(lp);zs.debug(`Firestore (${eo}): ${t}`,...n)}}function ur(t,...e){if(zs.logLevel<=le.ERROR){const n=e.map(lp);zs.error(`Firestore (${eo}): ${t}`,...n)}}function Bi(t,...e){if(zs.logLevel<=le.WARN){const n=e.map(lp);zs.warn(`Firestore (${eo}): ${t}`,...n)}}function lp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,t1(t,r,n)}function t1(t,e,n){let r=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ur(r),new Error(r)}function ge(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||t1(e,s,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends an{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class lR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cR{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new n1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class uR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new uR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new J0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function If(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return lh(s)===lh(i)?ce(s,i):lh(s)?1:-1}return ce(t.length,e.length)}const mR=55296,pR=57343;function lh(t){const e=t.charCodeAt(0);return e>=mR&&e<=pR}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ce(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),s=Cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):If(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class _e extends Cn{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const gR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Cn{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return gR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z0}static keyField(){return new st([Z0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(_e.fromString(e))}static fromName(e){return new J(_e.fromString(e).popFirst(5))}static empty(){return new J(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new _e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yR(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ev(t){if(!J.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tv(t){if(J.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function s1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Du(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Du(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vR(t,e){if(e<=0)throw new K(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ja(t,e){if(!s1(t))throw new K(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=-62135596800,rv=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rv);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nv)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rv}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ja(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:He("string",Ie._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ie(0,0))}static max(){return new re(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=-1;function wR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new Zr(s,J.empty(),e)}function xR(t){return new Zr(t.readTime,t.key,Sa)}class Zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zr(re.min(),J.empty(),Sa)}static max(){return new Zr(re.max(),J.empty(),Sa)}}function _R(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ER{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==bR)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function TR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function no(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-1;function Mu(t){return t==null}function Gc(t){return t===0&&1/t==-1/0}function IR(t){return typeof t=="number"&&Number.isInteger(t)&&!Gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="";function NR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sv(e)),e=SR(t.get(n),e);return sv(e)}function SR(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case i1:n+="";break;default:n+=i}}return n}function sv(t){return t+i1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function o1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ml(this.root,e,this.comparator,!0)}}class Ml{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new $t([])}unionWith(e){let n=new Ye(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new a1("Invalid base64 string: "+i):i}}(e);return new at(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const kR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=kR.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="server_timestamp",c1="__type__",u1="__previous_value__",d1="__local_write_time__";function dp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c1])==null?void 0:r.stringValue)===l1}function Ou(t){const e=t.mapValue.fields[u1];return dp(e)?Ou(e):e}function ka(t){const e=es(t.mapValue.fields[d1].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Kc="(default)";class Ca{constructor(e,n){this.projectId=e,this.database=n||Kc}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="__type__",AR="__max__",Ol={mapValue:{}},f1="__vector__",Qc="value";function ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dp(t)?4:RR(t)?9007199254740991:PR(t)?10:11:te(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=ns(t);if(n!==ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ka(t).isEqual(ka(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=es(s.timestampValue),c=es(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ts(s.bytesValue).isEqual(ts(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),c=$e(i.doubleValue);return o===c?Gc(o)===Gc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(iv(o)!==iv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Un(o[u],c[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Aa(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Wi(t,e){if(t===e)return 0;const n=ns(t),r=ns(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=$e(i.integerValue||i.doubleValue),u=$e(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return av(t.timestampValue,e.timestampValue);case 4:return av(ka(t),ka(e));case 5:return If(t.stringValue,e.stringValue);case 6:return function(i,o){const c=ts(i),u=ts(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ce(c[d],u[d]);if(f!==0)return f}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ce($e(i.latitude),$e(o.latitude));return c!==0?c:ce($e(i.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,w,S,N;const c=i.fields||{},u=o.fields||{},d=(g=c[Qc])==null?void 0:g.arrayValue,f=(w=u[Qc])==null?void 0:w.arrayValue,m=ce(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((N=f==null?void 0:f.values)==null?void 0:N.length)||0);return m!==0?m:lv(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ol.mapValue&&o===Ol.mapValue)return 0;if(i===Ol.mapValue)return 1;if(o===Ol.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=If(u[m],f[m]);if(g!==0)return g;const w=Wi(c[u[m]],d[f[m]]);if(w!==0)return w}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function av(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=es(t),r=es(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function lv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Wi(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function qi(t){return Nf(t)}function Nf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Nf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Nf(n.fields[o])}`;return s+"}"}(t.mapValue):te(61005,{value:t})}function lc(t){switch(ns(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ou(t);return e?16+lc(e):16;case 5:return 2*t.stringValue.length;case 6:return ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+lc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return hs(r.fields,(i,o)=>{s+=i.length+lc(o)}),s}(t.mapValue);default:throw te(13486,{value:t})}}function cv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sf(t){return!!t&&"integerValue"in t}function hp(t){return!!t&&"arrayValue"in t}function uv(t){return!!t&&"nullValue"in t}function dv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cc(t){return!!t&&"mapValue"in t}function PR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[h1])==null?void 0:r.stringValue)===f1}function ea(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ea(t.arrayValue.values[n]);return e}return{...t}}function RR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ea(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];cc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(ea(this.value))}}function m1(t){const e=[];return hs(t.fields,(n,r)=>{const s=new st([n]);if(cc(r)){const i=m1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new pt(e,0,re.min(),re.min(),re.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,re.min(),re.min(),At.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,re.min(),re.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.position=e,this.inclusive=n}}function hv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Wi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function fv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n="asc"){this.field=e,this.dir=n}}function jR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{}class qe extends p1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LR(e,n,r):n==="array-contains"?new VR(e,r):n==="in"?new FR(e,r):n==="not-in"?new UR(e,r):n==="array-contains-any"?new $R(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MR(e,r):new OR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wi(n,this.value)):n!==null&&ns(this.value)===ns(n)&&this.matchesComparison(Wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends p1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xn(e,n)}matches(e){return g1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function g1(t){return t.op==="and"}function y1(t){return DR(t)&&g1(t)}function DR(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function kf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+qi(t.value);if(y1(t))return t.filters.map(e=>kf(e)).join(",");{const e=t.filters.map(n=>kf(n)).join(",");return`${t.op}(${e})`}}function v1(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Un(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&v1(o,s.filters[c]),!0):!1}(t,e):void te(19439)}function w1(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${qi(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(w1).join(" ,")+"}"}(t):"Filter"}class LR extends qe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class MR extends qe{constructor(e,n){super(e,"in",n),this.keys=x1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OR extends qe{constructor(e,n){super(e,"not-in",n),this.keys=x1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class VR extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hp(n)&&Aa(n.arrayValue,this.value)}}class FR extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class UR extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Aa(this.value.arrayValue,n)}}class $R extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function mv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new BR(t,e,n,r,s,i,o)}function fp(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qi(r)).join(",")),e.Te=n}return e.Te}function mp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fv(t.startAt,e.startAt)&&fv(t.endAt,e.endAt)}function Cf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zR(t,e,n,r,s,i,o,c){return new ro(t,e,n,r,s,i,o,c)}function Vu(t){return new ro(t)}function pv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _1(t){return t.collectionGroup!==null}function ta(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ye(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Pa(i,r))}),n.has(st.keyField().canonicalString())||e.Ie.push(new Pa(st.keyField(),r))}return e.Ie}function Mn(t){const e=se(t);return e.Ee||(e.Ee=WR(e,ta(t))),e.Ee}function WR(t,e){if(t.limitType==="F")return mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Pa(s.field,i)});const n=t.endAt?new Yc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yc(t.startAt.position,t.startAt.inclusive):null;return mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Af(t,e){const n=t.filters.concat([e]);return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xc(t,e,n){return new ro(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fu(t,e){return mp(Mn(t),Mn(e))&&t.limitType===e.limitType}function b1(t){return`${fp(Mn(t))}|lt:${t.limitType}`}function ai(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>w1(s)).join(", ")}]`),Mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>qi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>qi(s)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function Uu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ta(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=hv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ta(r),s)||r.endAt&&!function(o,c,u){const d=hv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ta(r),s))}(t,e)}function qR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function E1(t){return(e,n)=>{let r=!1;for(const s of ta(t)){const i=HR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function HR(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Wi(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return o1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new De(J.comparator);function dr(){return GR}const T1=new De(J.comparator);function Fo(...t){let e=T1;for(const n of t)e=e.insert(n.key,n);return e}function I1(t){let e=T1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return na()}function N1(){return na()}function na(){return new Zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const KR=new De(J.comparator),QR=new Ye(J.comparator);function ue(...t){let e=QR;for(const n of t)e=e.add(n);return e}const YR=new Ye(ce);function XR(){return YR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(e)?"-0":e}}function S1(t){return{integerValue:""+t}}function JR(t,e){return IR(e)?S1(e):pp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(){this._=void 0}}function ZR(t,e,n){return t instanceof Ra?function(s,i){const o={fields:{[c1]:{stringValue:l1},[d1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&dp(i)&&(i=Ou(i)),i&&(o.fields[u1]=i),{mapValue:o}}(n,e):t instanceof ja?C1(t,e):t instanceof Da?A1(t,e):function(s,i){const o=k1(s,i),c=gv(o)+gv(s.Ae);return Sf(o)&&Sf(s.Ae)?S1(c):pp(s.serializer,c)}(t,e)}function ej(t,e,n){return t instanceof ja?C1(t,e):t instanceof Da?A1(t,e):n}function k1(t,e){return t instanceof Jc?function(r){return Sf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ra extends $u{}class ja extends $u{constructor(e){super(),this.elements=e}}function C1(t,e){const n=P1(e);for(const r of t.elements)n.some(s=>Un(s,r))||n.push(r);return{arrayValue:{values:n}}}class Da extends $u{constructor(e){super(),this.elements=e}}function A1(t,e){let n=P1(e);for(const r of t.elements)n=n.filter(s=>!Un(s,r));return{arrayValue:{values:n}}}class Jc extends $u{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gv(t){return $e(t.integerValue||t.doubleValue)}function P1(t){return hp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.field=e,this.transform=n}}function nj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ja&&s instanceof ja||r instanceof Da&&s instanceof Da?zi(r.elements,s.elements,Un):r instanceof Jc&&s instanceof Jc?Un(r.Ae,s.Ae):r instanceof Ra&&s instanceof Ra}(t.transform,e.transform)}class rj{constructor(e,n){this.version=e,this.transformResults=n}}class gn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bu{}function R1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new D1(t.key,gn.none()):new Za(t.key,t.data,gn.none());{const n=t.data,r=At.empty();let s=new Ye(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new fs(t.key,r,new $t(s.toArray()),gn.none())}}function sj(t,e,n){t instanceof Za?function(s,i,o){const c=s.value.clone(),u=vv(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof fs?function(s,i,o){if(!uc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=vv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(j1(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,r){return t instanceof Za?function(i,o,c,u){if(!uc(i.precondition,o))return c;const d=i.value.clone(),f=wv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof fs?function(i,o,c,u){if(!uc(i.precondition,o))return c;const d=wv(i.fieldTransforms,u,o),f=o.data;return f.setAll(j1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return uc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function ij(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=k1(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function yv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>nj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Za extends Bu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fs extends Bu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function j1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vv(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,ej(o,c,n[s]))}return r}function wv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ZR(i,o,e))}return r}class D1 extends Bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oj extends Bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=N1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=R1(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>yv(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>yv(n,r))}}class gp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return KR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new gp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,de;function uj(t){switch(t){case F.OK:return te(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function L1(t){if(t===void 0)return ur("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return te(39323,{code:t})}}(de=ze||(ze={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new Hr([4294967295,4294967295],0);function xv(t){const e=dj().encode(t),n=new Qb;return n.update(e),new Uint8Array(n.digest())}function _v(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class yp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Uo(`Invalid padding: ${n}`);if(r<0)throw new Uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Uo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(hj)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xv(e),[r,s]=_v(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new yp(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=xv(e),[r,s]=_v(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zu(re.min(),s,new De(ce),dr(),ue())}}class el{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new el(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class M1{constructor(e,n){this.targetId=e,this.Ce=n}}class O1{constructor(e,n,r=at.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class bv{constructor(){this.ve=0,this.Fe=Ev(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te(38017,{changeType:i})}}),new el(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Ev()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fj{constructor(e){this.Ge=e,this.ze=new Map,this.je=dr(),this.Je=Vl(),this.He=Vl(),this.Ye=new De(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Cf(i))if(r===0){const o=new J(i.path);this.et(n,o,pt.newNoDocument(o,re.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=ts(r).toUint8Array()}catch(u){if(u instanceof a1)return Bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new yp(o,s,i)}catch(u){return Bi(u instanceof Uo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Cf(c.target)){const u=new J(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,pt.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ue();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new zu(e,n,this.Ye,this.je,r);return this.je=dr(),this.Je=Vl(),this.He=Vl(),this.Ye=new De(ce),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new bv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ye(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ye(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vl(){return new De(J.comparator)}function Ev(){return new De(J.comparator)}const mj={asc:"ASCENDING",desc:"DESCENDING"},pj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gj={and:"AND",or:"OR"};class yj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pf(t,e){return t.useProto3Json||Mu(e)?e:{value:e}}function Zc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vj(t,e){return Zc(t,e.toTimestamp())}function On(t){return ge(!!t,49232),re.fromTimestamp(function(n){const r=es(n);return new Ie(r.seconds,r.nanos)}(t))}function vp(t,e){return Rf(t,e).canonicalString()}function Rf(t,e){const n=function(s){return new _e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function F1(t){const e=_e.fromString(t);return ge(W1(e),10190,{key:e.toString()}),e}function jf(t,e){return vp(t.databaseId,e.path)}function ch(t,e){const n=F1(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J($1(n))}function U1(t,e){return vp(t.databaseId,e)}function wj(t){const e=F1(t);return e.length===4?_e.emptyPath():$1(e)}function Df(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $1(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tv(t,e,n){return{name:jf(t,e),fields:n.value.mapValue.fields}}function xj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ge(f===void 0||typeof f=="string",58123),at.fromBase64String(f||"")):(ge(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),at.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?F.UNKNOWN:L1(d.code);return new K(f,d.message||"")}(o);n=new O1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ch(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):re.min(),c=new At({mapValue:{fields:r.document.fields}}),u=pt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new dc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ch(t,r.document),i=r.readTime?On(r.readTime):re.min(),o=pt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new dc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ch(t,r.document),i=r.removedTargetIds||[];n=new dc([],i,s,null)}else{if(!("filter"in e))return te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new cj(s,i),c=r.targetId;n=new M1(c,o)}}return n}function _j(t,e){let n;if(e instanceof Za)n={update:Tv(t,e.key,e.value)};else if(e instanceof D1)n={delete:jf(t,e.key)};else if(e instanceof fs)n={update:Tv(t,e.key,e.data),updateMask:Aj(e.fieldMask)};else{if(!(e instanceof oj))return te(16599,{Vt:e.type});n={verify:jf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Jc)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:vj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te(27497)}(t,e.precondition)),n}function bj(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(re.min())&&(o=On(i)),new rj(o,s.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[U1(t,e.path)]}}function Tj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=U1(t,s);const i=function(d){if(d.length!==0)return z1(xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:li(g.field),direction:Sj(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Pf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Ij(t){let e=wj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ge(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=B1(m);return g instanceof xn&&y1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(S){return new Pa(ci(S.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Mu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new Yc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new Yc(w,g)}(n.endAt)),zR(e,s,o,i,c,"F",u,d)}function Nj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function B1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ci(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ci(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ci(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ci(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ci(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>B1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function Sj(t){return mj[t]}function kj(t){return pj[t]}function Cj(t){return gj[t]}function li(t){return{fieldPath:t.canonicalString()}}function ci(t){return st.fromServerFormat(t.fieldPath)}function z1(t){return t instanceof qe?function(n){if(n.op==="=="){if(dv(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NAN"}};if(uv(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dv(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NAN"}};if(uv(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:li(n.field),op:kj(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>z1(s));return r.length===1?r[0]:{compositeFilter:{op:Cj(n.op),filters:r}}}(t):te(54877,{filter:t})}function Aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function W1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,r,s,i=re.min(),o=re.min(),c=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.yt=e}}function Rj(t){const e=Ij({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.Cn=new Dj}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Zr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Dj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(_e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q1=41943040;class St{static withCacheSize(e){return new St(e,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St.DEFAULT_COLLECTION_PERCENTILE=10,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,St.DEFAULT=new St(q1,St.DEFAULT_COLLECTION_PERCENTILE,St.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),St.DISABLED=new St(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hi(0)}static cr(){return new Hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="LruGarbageCollector",Lj=1048576;function Sv([t,e],[n,r]){const s=ce(t,n);return s===0?ce(e,r):s}class Mj{constructor(e){this.Ir=e,this.buffer=new Ye(Sv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Sv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Oj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Q(Nv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){no(n)?Q(Nv,"Ignoring IndexedDB error during garbage collection: ",n):await to(n)}await this.Vr(3e5)})}}class Vj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Lu.ce);const r=new Mj(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Iv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),oi()<=le.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Fj(t,e){return new Vj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.changes=new Zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ra(r.mutation,s,$t.empty(),Ie.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=ks();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Fo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=dr();const o=na(),c=function(){return na()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof fs)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ra(f.mutation,d,f.mutation.getFieldMask(),Ie.now())):o.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new $j(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=na();let s=new De((o,c)=>o-c),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||$t.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||ue()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=N1();f.forEach(g=>{if(!i.has(g)){const w=R1(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ks());let c=Sa,u=i;return o.next(d=>U.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ue())).next(f=>({batchId:c,changes:I1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Fo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Fo();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(m,g){return new ro(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,pt.newInvalidDocument(f)))});let c=Fo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ra(f.mutation,d,$t.empty(),Ie.now()),Uu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Rj(s.bundledQuery),readTime:On(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.overlays=new De(J.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ks(),i=n.length+1,o=new J(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ks(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ks(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lj(n,r));let i=this.qr.get(n);i===void 0&&(i=ue(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this.Qr=new Ye(Je.$r),this.Ur=new Ye(Je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Je(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new _e([])),r=new Je(n,e),s=new Je(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new _e([])),r=new Je(n,e),s=new Je(n,e+1);let i=ue();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Je(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(Je.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aj(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Je(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?up:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ce);return n.forEach(s=>{const i=new Je(s,0),o=new Je(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new Je(new J(i),0);let c=new Ye(ce);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Je(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Je(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.ri=e,this.docs=function(){return new De(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=dr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=dr();const o=n.path,c=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||_R(xR(f),r)<=0||(s.has(f.key)||Uu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Kj(this)}getSize(e){return U.resolve(this.size)}}class Kj extends Uj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.persistence=e,this.si=new Zs(n=>fp(n),mp),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new wp,this.targetCount=0,this.ai=Hi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Hi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lu(0),this.li=!1,this.li=!0,this.hi=new qj,this.referenceDelegate=e(this),this.Pi=new Qj(this),this.indexManager=new jj,this.remoteDocumentCache=function(s){return new Gj(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Pj(n),this.Ii=new zj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Wj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Hj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new Yj(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Yj extends ER{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Ri=new wp,this.Vi=null}static mi(e){return new xp(e)}get fi(){if(this.Vi)return this.Vi;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=J.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class eu{constructor(e,n){this.persistence=e,this.pi=new Zs(r=>NR(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Fj(this,n)}static mi(e,n){return new eu(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lc(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _p(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return yk()?8:TR(yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Xj;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(oi()<=le.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(oi()<=le.DEBUG&&Q("QueryEngine","Query:",ai(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(oi()<=le.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):U.resolve())}ys(e,n){if(pv(n))return U.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xc(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ue(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Xc(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return pv(n)||s.isEqual(re.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(oi()<=le.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ai(n)),this.vs(e,o,n,wR(s,Sa)).next(c=>c))})}Ds(e,n){let r=new Ye(E1(e));return n.forEach((s,i)=>{Uu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return oi()<=le.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ai(n)),this.ps.getDocumentsMatchingQuery(e,n,Zr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="LocalStore",Zj=3e8;class e4{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new De(ce),this.xs=new Zs(i=>fp(i),mp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function t4(t,e,n,r){return new e4(t,e,n,r)}async function G1(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=ue();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function n4(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=U.resolve();return g.forEach(S=>{w=w.next(()=>f.getEntry(u,S)).next(N=>{const _=d.docVersions.get(S);ge(_!==null,48541),N.version.compareTo(_)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ue();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function K1(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function r4(t,e){const n=se(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(at.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(N,_,x){return N.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Zj?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,w,f)&&c.push(n.Pi.updateTargetData(i,w))});let u=dr(),d=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(s4(i,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(re.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function s4(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=dr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Q(bp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function i4(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=up),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function o4(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Lr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Lf(t,e,n){const r=se(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!no(o))throw o;Q(bp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function kv(t,e,n){const r=se(t);let s=re.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=se(u),g=m.xs.get(f);return g!==void 0?U.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,Mn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:ue())).next(c=>(a4(r,qR(e),c),{documents:c,Qs:i})))}function a4(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Cv{constructor(){this.activeTargetIds=XR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l4{constructor(){this.Mo=new Cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="ConnectivityMonitor";class Pv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Q(Av,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Q(Av,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=null;function Mf(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="RestConnection",u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Kc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Mf(),c=this.zo(e,n.toUriEncodedString());Q(uh,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),f=us(d);return this.Jo(e,c,u,r,f).then(m=>(Q(uh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Bi(uh,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=u4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class f4 extends d4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Mf();return new Promise((c,u)=>{const d=new Yb;d.setWithCredentials(!0),d.listenOnce(Xb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ac.NO_ERROR:const m=d.getResponseJson();Q(ht,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case ac.TIMEOUT:Q(ht,`RPC '${e}' ${o} timed out`),u(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const g=d.getStatus();if(Q(ht,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w==null?void 0:w.error;if(S&&S.status&&S.message){const N=function(x){const y=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(y)>=0?y:F.UNKNOWN}(S.status);u(new K(N,S.message))}else u(new K(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K(F.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(ht,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);Q(ht,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=Mf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e1(),c=Zb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(ht,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,w=!1;const S=new h4({Yo:_=>{w?Q(ht,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(g||(Q(ht,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Q(ht,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},Zo:()=>m.close()}),N=(_,x,y)=>{_.listen(x,E=>{try{y(E)}catch(R){setTimeout(()=>{throw R},0)}})};return N(m,Vo.EventType.OPEN,()=>{w||(Q(ht,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),N(m,Vo.EventType.CLOSE,()=>{w||(w=!0,Q(ht,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(m))}),N(m,Vo.EventType.ERROR,_=>{w||(w=!0,Bi(ht,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),S.a_(new K(F.UNAVAILABLE,"The operation could not be completed")))}),N(m,Vo.EventType.MESSAGE,_=>{var x;if(!w){const y=_.data[0];ge(!!y,16349);const E=y,R=(E==null?void 0:E.error)||((x=E[0])==null?void 0:x.error);if(R){Q(ht,`RPC '${e}' stream ${s} received error:`,R);const P=R.status;let M=function(I){const A=ze[I];if(A!==void 0)return L1(A)}(P),T=R.message;M===void 0&&(M=F.INTERNAL,T="Unknown error status: "+P+" with message "+R.message),w=!0,S.a_(new K(M,T)),m.close()}else Q(ht,`RPC '${e}' stream ${s} received:`,y),S.u_(y)}}),N(c,Jb.STAT_EVENT,_=>{_.stat===Tf.PROXY?Q(ht,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Tf.NOPROXY&&Q(ht,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return new yj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="PersistentStream";class Y1{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Q1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Rv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Q(Rv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m4 extends Y1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xj(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?On(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Df(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Cf(u)?{documents:Ej(i,u)}:{query:Tj(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=V1(i,o.resumeToken);const d=Pf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(re.min())>0){c.readTime=Zc(i,o.snapshotVersion.toTimestamp());const d=Pf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Nj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Df(this.serializer),n.removeTarget=e,this.q_(n)}}class p4 extends Y1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bj(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Df(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_j(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{}class y4 extends g4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Rf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(F.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Rf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class v4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ur(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class w4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ei(this)&&(Q(Ws,"Restarting streams for network reachability change."),await async function(u){const d=se(u);d.Ea.add(4),await tl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await qu(d)}(this))})}),this.Ra=new v4(r,s)}}async function qu(t){if(ei(t))for(const e of t.da)await e(!0)}async function tl(t){for(const e of t.da)await e(!1)}function X1(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Np(n)?Ip(n):so(n).O_()&&Tp(n,e))}function Ep(t,e){const n=se(t),r=so(n);n.Ia.delete(e),r.O_()&&J1(n,e),n.Ia.size===0&&(r.O_()?r.L_():ei(n)&&n.Ra.set("Unknown"))}function Tp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}so(t).Y_(e)}function J1(t,e){t.Va.Ue(e),so(t).Z_(e)}function Ip(t){t.Va=new fj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),so(t).start(),t.Ra.ua()}function Np(t){return ei(t)&&!so(t).x_()&&t.Ia.size>0}function ei(t){return se(t).Ea.size===0}function Z1(t){t.Va=void 0}async function x4(t){t.Ra.set("Online")}async function _4(t){t.Ia.forEach((e,n)=>{Tp(t,e)})}async function b4(t,e){Z1(t),Np(t)?(t.Ra.ha(e),Ip(t)):t.Ra.set("Unknown")}async function E4(t,e,n){if(t.Ra.set("Online"),e instanceof O1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){Q(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tu(t,r)}else if(e instanceof dc?t.Va.Ze(e):e instanceof M1?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await K1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(at.EMPTY_BYTE_STRING,f.snapshotVersion)),J1(i,u);const m=new Lr(f.target,u,d,f.sequenceNumber);Tp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q(Ws,"Failed to raise snapshot:",r),await tu(t,r)}}async function tu(t,e,n){if(!no(e))throw e;t.Ea.add(1),await tl(t),t.Ra.set("Offline"),n||(n=()=>K1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(Ws,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qu(t)})}function eE(t,e){return e().catch(n=>tu(t,n,e))}async function Hu(t){const e=se(t),n=rs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:up;for(;T4(e);)try{const s=await i4(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,I4(e,s)}catch(s){await tu(e,s)}tE(e)&&nE(e)}function T4(t){return ei(t)&&t.Ta.length<10}function I4(t,e){t.Ta.push(e);const n=rs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function tE(t){return ei(t)&&!rs(t).x_()&&t.Ta.length>0}function nE(t){rs(t).start()}async function N4(t){rs(t).ra()}async function S4(t){const e=rs(t);for(const n of t.Ta)e.ea(n.mutations)}async function k4(t,e,n){const r=t.Ta.shift(),s=gp.from(r,e,n);await eE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Hu(t)}async function C4(t,e){e&&rs(t).X_&&await async function(r,s){if(function(o){return uj(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();rs(r).B_(),await eE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Hu(r)}}(t,e),tE(t)&&nE(t)}async function jv(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),Q(Ws,"RemoteStore received new credentials");const r=ei(n);n.Ea.add(3),await tl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qu(n)}async function A4(t,e){const n=se(t);e?(n.Ea.delete(2),await qu(n)):e||(n.Ea.add(2),await tl(n),n.Ra.set("Unknown"))}function so(t){return t.ma||(t.ma=function(n,r,s){const i=se(n);return i.sa(),new m4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:x4.bind(null,t),t_:_4.bind(null,t),r_:b4.bind(null,t),H_:E4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Np(t)?Ip(t):t.Ra.set("Unknown")):(await t.ma.stop(),Z1(t))})),t.ma}function rs(t){return t.fa||(t.fa=function(n,r,s){const i=se(n);return i.sa(),new p4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:N4.bind(null,t),r_:C4.bind(null,t),ta:S4.bind(null,t),na:k4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Hu(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(Ws,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Sp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(t,e){if(ur("AsyncQueue",`${e}: ${t}`),no(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static emptySet(e){return new Pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Fo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.ga=new De(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Gi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Gi(e,n,Pi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class R4{constructor(){this.queries=Lv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=se(n),i=s.queries;s.queries=Lv(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function Lv(){return new Zs(t=>b1(t),Fu)}async function Cp(t,e){const n=se(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new P4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=kp(o,`Initialization of query '${ai(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Pp(n)}async function Ap(t,e){const n=se(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function j4(t,e){const n=se(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Pp(n)}function D4(t,e,n){const r=se(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Pp(t){t.Ca.forEach(e=>{e.next()})}var Of,Mv;(Mv=Of||(Of={})).Ma="default",Mv.Cache="cache";class Rp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Gi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.key=e}}class sE{constructor(e){this.key=e}}class L4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ue(),this.mutatedKeys=ue(),this.eu=E1(e),this.tu=new Pi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Dv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=Uu(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;g&&w?g.data.isEqual(w.data)?S!==N&&(r.track({type:3,doc:w}),_=!0):this.su(g,w)||(r.track({type:2,doc:w}),_=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),_=!0):g&&!w&&(r.track({type:1,doc:g}),_=!0,(u||d)&&(c=!0)),_&&(w?(o=o.add(w),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(w,S){const N=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Rt:_})}};return N(w)-N(S)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Gi(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sE(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new rE(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jp="SyncEngine";class M4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class O4{constructor(e){this.key=e,this.hu=!1}}class V4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zs(c=>b1(c),Fu),this.Iu=new Map,this.Eu=new Set,this.du=new De(J.comparator),this.Au=new Map,this.Ru=new wp,this.Vu={},this.mu=new Map,this.fu=Hi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function F4(t,e,n=!0){const r=uE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await iE(r,e,n,!0),s}async function U4(t,e){const n=uE(t);await iE(n,e,!0,!1)}async function iE(t,e,n,r){const s=await o4(t.localStore,Mn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await $4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&X1(t.remoteStore,s),c}async function $4(t,e,n,r,s){t.pu=(m,g,w)=>async function(N,_,x,y){let E=_.view.ru(x);E.Cs&&(E=await kv(N.localStore,_.query,!1).then(({documents:T})=>_.view.ru(T,E)));const R=y&&y.targetChanges.get(_.targetId),P=y&&y.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(E,N.isPrimaryClient,R,P);return Vv(N,_.targetId,M.au),M.snapshot}(t,m,g,w);const i=await kv(t.localStore,e,!0),o=new L4(e,i.Qs),c=o.ru(i.documents),u=el.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Vv(t,n,d.au);const f=new M4(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function B4(t,e,n){const r=se(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Fu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Lf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ep(r.remoteStore,s.targetId),Vf(r,s.targetId)}).catch(to)):(Vf(r,s.targetId),await Lf(r.localStore,s.targetId,!0))}async function z4(t,e){const n=se(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ep(n.remoteStore,r.targetId))}async function W4(t,e,n){const r=X4(t);try{const s=await function(o,c){const u=se(o),d=Ie.now(),f=c.reduce((w,S)=>w.add(S.key),ue());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=dr(),N=ue();return u.Ns.getEntries(w,f).next(_=>{S=_,S.forEach((x,y)=>{y.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(_=>{m=_;const x=[];for(const y of c){const E=ij(y,m.get(y.key).overlayedDocument);E!=null&&x.push(new fs(y.key,E,m1(E.value.mapValue),gn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,x,c)}).next(_=>{g=_;const x=_.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(w,_.batchId,x)})}).then(()=>({batchId:g.batchId,changes:I1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new De(ce)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await nl(r,s.changes),await Hu(r.remoteStore)}catch(s){const i=kp(s,"Failed to persist write");n.reject(i)}}async function oE(t,e){const n=se(t);try{const r=await r4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ge(o.hu,14607):s.removedDocuments.size>0&&(ge(o.hu,42227),o.hu=!1))}),await nl(n,r,e)}catch(r){await to(r)}}function Ov(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=se(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&Pp(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q4(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(J.comparator);o=o.insert(i,pt.newNoDocument(i,re.min()));const c=ue().add(i),u=new zu(re.min(),new Map,new De(ce),o,c);await oE(r,u),r.du=r.du.remove(i),r.Au.delete(e),Dp(r)}else await Lf(r.localStore,e,!1).then(()=>Vf(r,e,n)).catch(to)}async function H4(t,e){const n=se(t),r=e.batch.batchId;try{const s=await n4(n.localStore,e);lE(n,r,null),aE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nl(n,s)}catch(s){await to(s)}}async function G4(t,e,n){const r=se(t);try{const s=await function(o,c){const u=se(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ge(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);lE(r,e,n),aE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nl(r,s)}catch(s){await to(s)}}function aE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lE(t,e,n){const r=se(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||cE(t,r)})}function cE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ep(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Dp(t))}function Vv(t,e,n){for(const r of n)r instanceof rE?(t.Ru.addReference(r.key,e),K4(t,r)):r instanceof sE?(Q(jp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||cE(t,r.key)):te(19791,{wu:r})}function K4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Q(jp,"New document in limbo: "+n),t.Eu.add(r),Dp(t))}function Dp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(_e.fromString(e)),r=t.fu.next();t.Au.set(r,new O4(n)),t.du=t.du.insert(n,r),X1(t.remoteStore,new Lr(Mn(Vu(n.path)),r,"TargetPurposeLimboResolution",Lu.ce))}}async function nl(t,e,n){const r=se(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=_p.As(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=se(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.Es,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>U.forEach(g.ds,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!no(m))throw m;Q(bp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.Ms.get(g),S=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(g,N)}}}(r.localStore,i))}async function Q4(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){Q(jp,"User change. New user:",e.toKey());const r=await G1(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nl(n,r.Ls)}}function Y4(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let s=ue();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function uE(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q4.bind(null,e),e.Pu.H_=j4.bind(null,e.eventManager),e.Pu.yu=D4.bind(null,e.eventManager),e}function X4(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G4.bind(null,e),e}class nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return t4(this.persistence,new Jj,e.initialUser,this.serializer)}Cu(e){return new H1(xp.mi,this.serializer)}Du(e){return new l4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nu.provider={build:()=>new nu};class J4 extends nu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof eu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Oj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?St.withCacheSize(this.cacheSizeBytes):St.DEFAULT;return new H1(r=>eu.mi(r,n),this.serializer)}}class Ff{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ov(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q4.bind(null,this.syncEngine),await A4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R4}()}createDatastore(e){const n=Wu(e.databaseInfo.databaseId),r=function(i){return new f4(i)}(e.databaseInfo);return function(i,o,c,u){return new y4(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new w4(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Ov(this.syncEngine,n,0),function(){return Pv.v()?new Pv:new c4}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new V4(s,i,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=se(s);Q(Ws,"RemoteStore shutting down."),i.Ea.add(5),await tl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ff.provider={build:()=>new Ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="FirestoreClient";class Z4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q(ss,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(ss,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hh(t,e){t.asyncQueue.verifyOperationInProgress(),Q(ss,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await G1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eD(t);Q(ss,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>jv(e.remoteStore,s)),t._onlineComponents=e}async function eD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(ss,"Using user provided OfflineComponentProvider");try{await hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),await hh(t,new nu)}}else Q(ss,"Using default OfflineComponentProvider"),await hh(t,new J4(void 0));return t._offlineComponents}async function dE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(ss,"Using user provided OnlineComponentProvider"),await Fv(t,t._uninitializedComponentsProvider._online)):(Q(ss,"Using default OnlineComponentProvider"),await Fv(t,new Ff))),t._onlineComponents}function tD(t){return dE(t).then(e=>e.syncEngine)}async function ru(t){const e=await dE(t),n=e.eventManager;return n.onListen=F4.bind(null,e.syncEngine),n.onUnlisten=B4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z4.bind(null,e.syncEngine),n}function nD(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Lp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Ap(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Rp(Vu(c.path),f,{includeMetadataChanges:!0,qa:!0});return Cp(i,m)}(await ru(t),t.asyncQueue,e,n,r)),r.promise}function rD(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Lp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Ap(i,m)),g.fromCache&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Rp(c,f,{includeMetadataChanges:!0,qa:!0});return Cp(i,m)}(await ru(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="firestore.googleapis.com",$v=!0;class Bv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fE,this.ssl=$v}else this.host=e.host,this.ssl=e.ssl??$v;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Lj)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aR;switch(r.type){case"firstParty":return new dR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Uv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Uv.delete(n),r.terminate())}(this),Promise.resolve()}}function sD(t,e,n,r={}){var d;t=Wt(t,Gu);const s=us(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Qm(`https://${c}`),Ym("Firestore",!0)),i.host!==fE&&i.host!==c&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Jr(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ft.MOCK_USER;else{f=nb(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ft(g)}t._authCredentials=new lR(new n1(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ja(n,Oe._jsonSchema))return new Oe(e,r||null,new J(_e.fromString(n.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:He("string",Oe._jsonSchemaVersion),referencePath:He("string")};class Gr extends gr{constructor(e,n,r){super(e,n,Vu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new J(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function Se(t,e,...n){if(t=fe(t),r1("collection","path",e),t instanceof Gu){const r=_e.fromString(e,...n);return tv(r),new Gr(t,null,r)}{if(!(t instanceof Oe||t instanceof Gr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return tv(r),new Gr(t.firestore,null,r)}}function Ve(t,e,...n){if(t=fe(t),arguments.length===1&&(e=cp.newId()),r1("doc","path",e),t instanceof Gu){const r=_e.fromString(e,...n);return ev(r),new Oe(t,null,new J(r))}{if(!(t instanceof Oe||t instanceof Gr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return ev(r),new Oe(t.firestore,t instanceof Gr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="AsyncQueue";class Wv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Q1(this,"async_queue_retry"),this._c=()=>{const r=dh();r&&Q(zv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=dh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!no(e))throw e;Q(zv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ur("INTERNAL UNHANDLED ERROR: ",qv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Sp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&te(47125,{Pc:qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function qv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class is extends Gu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Wv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wv(e),this._firestoreClient=void 0,await e}}}function iD(t,e){const n=typeof t=="object"?t:Ga(),r=typeof t=="string"?t:Kc,s=ds(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Z_("firestore");i&&sD(s,...i)}return s}function Ku(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oD(t),t._firestoreClient}function oD(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,f){return new CR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,hE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Z4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jt(at.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ja(e,Jt._jsonSchema))return Jt.fromBase64String(e.bytes)}}Jt._jsonSchemaVersion="firestore/bytes/1.0",Jt._jsonSchema={type:He("string",Jt._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(e){if(Ja(e,Vn._jsonSchema))return new Vn(e.latitude,e.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:He("string",Vn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ja(e,Fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fn(e.vectorValues);throw new K(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fn._jsonSchemaVersion="firestore/vectorValue/1.0",Fn._jsonSchema={type:He("string",Fn._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^__.*__$/;class lD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Za(e,this.data,n,this.fieldTransforms)}}class mE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ac:t})}}class Mp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return su(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pE(this.Ac)&&aD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wu(e)}Cc(e,n,r,s=!1){return new Mp({Ac:e,methodName:n,Dc:r,path:st.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xu(t){const e=t._freezeSettings(),n=Wu(t._databaseId);return new cD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gE(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Vp("Data must be an object, but it was:",o,r);const c=yE(r,o);let u,d;if(i.merge)u=new $t(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Uf(e,m,n);if(!o.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);wE(f,g)||f.push(g)}u=new $t(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new lD(new At(c),u,d)}class Ju extends Yu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ju}}class Op extends Yu{_toFieldTransform(e){return new tj(e.path,new Ra)}isEqual(e){return e instanceof Op}}function uD(t,e,n,r){const s=t.Cc(1,e,n);Vp("Data must be an object, but it was:",s,r);const i=[],o=At.empty();hs(r,(u,d)=>{const f=Fp(e,u,n);d=fe(d);const m=s.yc(f);if(d instanceof Ju)i.push(f);else{const g=rl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new $t(i);return new mE(o,c,s.fieldTransforms)}function dD(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[Uf(e,r,n)],u=[s];if(i.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Uf(e,i[g])),u.push(i[g+1]);const d=[],f=At.empty();for(let g=c.length-1;g>=0;--g)if(!wE(d,c[g])){const w=c[g];let S=u[g];S=fe(S);const N=o.yc(w);if(S instanceof Ju)d.push(w);else{const _=rl(S,N);_!=null&&(d.push(w),f.set(w,_))}}const m=new $t(d);return new mE(f,m,o.fieldTransforms)}function hD(t,e,n,r=!1){return rl(n,t.Cc(r?4:3,e))}function rl(t,e){if(vE(t=fe(t)))return Vp("Unsupported field value:",e,t),yE(t,e);if(t instanceof Yu)return function(r,s){if(!pE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=rl(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ie.fromDate(r);return{timestampValue:Zc(s.serializer,i)}}if(r instanceof Ie){const i=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zc(s.serializer,i)}}if(r instanceof Vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jt)return{bytesValue:V1(s.serializer,r._byteString)};if(r instanceof Oe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fn)return function(o,c){return{mapValue:{fields:{[h1]:{stringValue:f1},[Qc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return pp(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Du(r)}`)}(t,e)}function yE(t,e){const n={};return o1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(t,(r,s)=>{const i=rl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Vn||t instanceof Jt||t instanceof Oe||t instanceof Yu||t instanceof Fn)}function Vp(t,e,n){if(!vE(n)||!s1(n)){const r=Du(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Uf(t,e,n){if((e=fe(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return Fp(t,e);throw su("Field path arguments must be of type string or ",t,!1,void 0,n)}const fD=new RegExp("[~\\*/\\[\\]]");function Fp(t,e,n){if(e.search(fD)>=0)throw su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function su(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(F.INVALID_ARGUMENT,c+t+u)}function wE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mD extends xE{data(){return super.data()}}function Zu(t,e){return typeof e=="string"?Fp(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Up{}class $p extends Up{}function zn(t,e,...n){let r=[];e instanceof Up&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Bp).length,c=i.filter(u=>u instanceof ed).length;if(o>1||o>0&&c>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ed extends $p{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ed(e,n,r)}_apply(e){const n=this._parse(e);return bE(e._query,n),new gr(e.firestore,e.converter,Af(e._query,n))}_parse(e){const n=Xu(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Kv(m,f);const S=[];for(const N of m)S.push(Gv(u,i,N));g={arrayValue:{values:S}}}else g=Gv(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Kv(m,f),g=hD(c,o,m,f==="in"||f==="not-in");return qe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hr(t,e,n){const r=e,s=Zu("where",t);return ed._create(s,r,n)}class Bp extends Up{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)bE(o,u),o=Af(o,u)}(e._query,n),new gr(e.firestore,e.converter,Af(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zp extends $p{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pa(i,o)}(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ro(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ti(t,e="asc"){const n=e,r=Zu("orderBy",t);return zp._create(r,n)}class Wp extends $p{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Wp(e,n,r)}_apply(e){return new gr(e.firestore,e.converter,Xc(e._query,this._limit,this._limitType))}}function qp(t){return vR("limit",t),Wp._create("limit",t,"F")}function Gv(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_1(e)&&n.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!J.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cv(t,new J(r))}if(n instanceof Oe)return cv(t,n._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Du(n)}.`)}function Kv(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bE(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pD{convertValue(e,n="none"){switch(ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Qc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>$e(o.doubleValue));return new Fn(n)}convertGeoPoint(e){return new Vn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ou(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const n=es(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);ge(W1(r),9688,{name:e});const s=new Ca(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||ur(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class $o{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rs extends xE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Rs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Rs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rs._jsonSchema={type:He("string",Rs._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class hc extends Rs{data(e={}){return super.data(e)}}class js{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new $o(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hc(this._firestore,this._userDataWriter,r.key,r,new $o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new hc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new $o(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new hc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new $o(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:gD(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=js._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){t=Wt(t,Oe);const e=Wt(t.firestore,is);return nD(Ku(e),t._key).then(n=>IE(e,t,n))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:He("string",js._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class Hp extends pD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function $n(t){t=Wt(t,gr);const e=Wt(t.firestore,is),n=Ku(e),r=new Hp(e);return _E(t._query),rD(n,t._query).then(s=>new js(e,r,t,s))}function iu(t,e,n){t=Wt(t,Oe);const r=Wt(t.firestore,is),s=EE(t.converter,e,n);return Gp(r,[gE(Xu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,gn.none())])}function ms(t,e,n,...r){t=Wt(t,Oe);const s=Wt(t.firestore,is),i=Xu(s);let o;return o=typeof(e=fe(e))=="string"||e instanceof Qu?dD(i,"updateDoc",t._key,e,n,r):uD(i,"updateDoc",t._key,e),Gp(s,[o.toMutation(t._key,gn.exists(!0))])}function Gt(t,e){const n=Wt(t.firestore,is),r=Ve(t),s=EE(t.converter,e);return Gp(n,[gE(Xu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,gn.exists(!1))]).then(()=>r)}function TE(t,...e){var u,d,f;t=fe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Hv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Hv(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,c;if(t instanceof Oe)o=Wt(t.firestore,is),c=Vu(t._key.path),i={next:m=>{e[r]&&e[r](IE(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Wt(t,gr);o=Wt(m.firestore,is),c=m._query;const g=new Hp(o);i={next:w=>{e[r]&&e[r](new js(o,g,m,w))},error:e[r+1],complete:e[r+2]},_E(t._query)}return function(g,w,S,N){const _=new Lp(N),x=new Rp(w,_,S);return g.asyncQueue.enqueueAndForget(async()=>Cp(await ru(g),x)),()=>{_.Nu(),g.asyncQueue.enqueueAndForget(async()=>Ap(await ru(g),x))}}(Ku(o),c,s,i)}function Gp(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>W4(await tD(r),s,i)),i.promise}(Ku(t),e)}function IE(t,e,n){const r=n.docs.get(e._key),s=new Hp(t);return new Rs(t,s,e._key,r,new $o(n.hasPendingWrites,n.fromCache),e.converter)}function we(){return new Op("serverTimestamp")}(function(e,n=!0){(function(s){eo=s})(Js),wn(new sn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new is(new cR(r.getProvider("auth-internal")),new hR(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Lt(Y0,X0,e),Lt(Y0,X0,"esm2020")})();var yD="firebase",vD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt(yD,vD,"app");const NE="@firebase/installations",Kp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=1e4,kE=`w:${Kp}`,CE="FIS_v2",wD="https://firebaseinstallations.googleapis.com/v1",xD=60*60*1e3,_D="installations",bD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qs=new Xs(_D,bD,ED);function AE(t){return t instanceof an&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE({projectId:t}){return`${wD}/projects/${t}/installations`}function RE(t){return{token:t.token,requestStatus:2,expiresIn:ID(t.expiresIn),creationTime:Date.now()}}async function jE(t,e){const r=(await e.json()).error;return qs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function DE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function TD(t,{refreshToken:e}){const n=DE(t);return n.append("Authorization",ND(e)),n}async function LE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ID(t){return Number(t.replace("s","000"))}function ND(t){return`${CE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=PE(t),s=DE(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:CE,appId:t.appId,sdkVersion:kE},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await LE(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:RE(d.authToken)}}else throw await jE("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=/^[cdef][\w-]{21}$/,$f="";function AD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=PD(t);return CD.test(n)?n:$f}catch{return $f}}function PD(t){return kD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;function VE(t,e){const n=td(t);FE(n,e),RD(n,e)}function FE(t,e){const n=OE.get(t);if(n)for(const r of n)r(e)}function RD(t,e){const n=jD();n&&n.postMessage({key:t,fid:e}),DD()}let Cs=null;function jD(){return!Cs&&"BroadcastChannel"in self&&(Cs=new BroadcastChannel("[Firebase] FID Change"),Cs.onmessage=t=>{FE(t.data.key,t.data.fid)}),Cs}function DD(){OE.size===0&&Cs&&(Cs.close(),Cs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebase-installations-database",MD=1,Hs="firebase-installations-store";let fh=null;function Qp(){return fh||(fh=lb(LD,MD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hs)}}})),fh}async function ou(t,e){const n=td(t),s=(await Qp()).transaction(Hs,"readwrite"),i=s.objectStore(Hs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&VE(t,e.fid),e}async function UE(t){const e=td(t),r=(await Qp()).transaction(Hs,"readwrite");await r.objectStore(Hs).delete(e),await r.done}async function nd(t,e){const n=td(t),s=(await Qp()).transaction(Hs,"readwrite"),i=s.objectStore(Hs),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&VE(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t){let e;const n=await nd(t.appConfig,r=>{const s=OD(r),i=VD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===$f?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function OD(t){const e=t||{fid:AD(),registrationStatus:0};return $E(e)}function VD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(qs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=FD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:UD(t)}:{installationEntry:e}}async function FD(t,e){try{const n=await SD(t,e);return ou(t.appConfig,n)}catch(n){throw AE(n)&&n.customData.serverCode===409?await UE(t.appConfig):await ou(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function UD(t){let e=await Qv(t.appConfig);for(;e.registrationStatus===1;)await ME(100),e=await Qv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Yp(t);return r||n}return e}function Qv(t){return nd(t,e=>{if(!e)throw qs.create("installation-not-found");return $E(e)})}function $E(t){return $D(t)?{fid:t.fid,registrationStatus:0}:t}function $D(t){return t.registrationStatus===1&&t.registrationTime+SE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD({appConfig:t,heartbeatServiceProvider:e},n){const r=zD(t,n),s=TD(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:kE,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await LE(()=>fetch(r,c));if(u.ok){const d=await u.json();return RE(d)}else throw await jE("Generate Auth Token",u)}function zD(t,{fid:e}){return`${PE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xp(t,e=!1){let n;const r=await nd(t.appConfig,i=>{if(!BE(i))throw qs.create("not-registered");const o=i.authToken;if(!e&&HD(o))return i;if(o.requestStatus===1)return n=WD(t,e),i;{if(!navigator.onLine)throw qs.create("app-offline");const c=KD(i);return n=qD(t,c),c}});return n?await n:r.authToken}async function WD(t,e){let n=await Yv(t.appConfig);for(;n.authToken.requestStatus===1;)await ME(100),n=await Yv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Xp(t,e):r}function Yv(t){return nd(t,e=>{if(!BE(e))throw qs.create("not-registered");const n=e.authToken;return QD(n)?{...e,authToken:{requestStatus:0}}:e})}async function qD(t,e){try{const n=await BD(t,e),r={...e,authToken:n};return await ou(t.appConfig,r),n}catch(n){if(AE(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await UE(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ou(t.appConfig,r)}throw n}}function BE(t){return t!==void 0&&t.registrationStatus===2}function HD(t){return t.requestStatus===2&&!GD(t)}function GD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+xD}function KD(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function QD(t){return t.requestStatus===1&&t.requestTime+SE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t){const e=t,{installationEntry:n,registrationPromise:r}=await Yp(e);return r?r.catch(console.error):Xp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e=!1){const n=t;return await JD(n),(await Xp(n,e)).token}async function JD(t){const{registrationPromise:e}=await Yp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){if(!t||!t.options)throw mh("App Configuration");if(!t.name)throw mh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw mh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function mh(t){return qs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="installations",e3="installations-internal",t3=t=>{const e=t.getProvider("app").getImmediate(),n=ZD(e),r=ds(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},n3=t=>{const e=t.getProvider("app").getImmediate(),n=ds(e,zE).getImmediate();return{getId:()=>YD(n),getToken:s=>XD(n,s)}};function r3(){wn(new sn(zE,t3,"PUBLIC")),wn(new sn(e3,n3,"PRIVATE"))}r3();Lt(NE,Kp);Lt(NE,Kp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="analytics",s3="firebase_id",i3="origin",o3=60*1e3,a3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=new Au("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qt=new Xs("analytics","Analytics",l3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){if(!t.startsWith(Jp)){const e=qt.create("invalid-gtag-resource",{gtagURL:t});return Tt.warn(e.message),""}return t}function WE(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function u3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function d3(t,e){const n=u3("firebase-js-sdk-policy",{createScriptURL:c3}),r=document.createElement("script"),s=`${Jp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function h3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function f3(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await WE(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){Tt.error(c)}t("config",s,i)}async function m3(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await WE(n);for(const u of o){const d=c.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Tt.error(i)}}function p3(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[c,u]=o;await m3(t,e,n,c,u)}else if(i==="config"){const[c,u]=o;await f3(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=o;t("consent",c,u)}else if(i==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(i==="set"){const[c]=o;t("set",c)}else t(i,...o)}catch(c){Tt.error(c)}}return s}function g3(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=p3(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function y3(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Jp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=30,w3=1e3;class x3{constructor(e={},n=w3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const qE=new x3;function _3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function b3(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:_3(n)},s=a3.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let c="";try{const u=await i.json();(o=u.error)!=null&&o.message&&(c=u.error.message)}catch{}throw qt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:c})}return i.json()}async function E3(t,e=qE,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw qt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw qt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new N3;return setTimeout(async()=>{c.abort()},o3),HE({appId:r,apiKey:s,measurementId:i},o,c,e)}async function HE(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=qE){var c;const{appId:i,measurementId:o}=t;try{await T3(r,e)}catch(u){if(o)return Tt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw u}try{const u=await b3(t);return s.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!I3(d)){if(s.deleteThrottleMetadata(i),o)return Tt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:o};throw u}const f=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?_0(n,s.intervalMillis,v3):_0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,m),Tt.debug(`Calling attemptFetch again in ${f} millis`),HE(t,m,r,s)}}function T3(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function I3(t){if(!(t instanceof an)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class N3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function S3(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function k3(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C3(){if(sb())try{await ib()}catch(t){return Tt.warn(qt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Tt.warn(qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function A3(t,e,n,r,s,i,o){const c=E3(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Tt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Tt.error(g)),e.push(c);const u=C3().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([c,u]);y3(i)||d3(i,d.measurementId),s("js",new Date);const m=(o==null?void 0:o.config)??{};return m[i3]="firebase",m.update=!0,f!=null&&(m[s3]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.app=e}_delete(){return delete Ri[this.app.options.appId],Promise.resolve()}}let Ri={},Xv=[];const Jv={};let ph="dataLayer",R3="gtag",Zv,Zp,ew=!1;function j3(){const t=[];if(rb()&&t.push("This is a browser extension environment."),vk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=qt.create("invalid-analytics-context",{errorInfo:e});Tt.warn(n.message)}}function D3(t,e,n){j3();const r=t.options.appId;if(!r)throw qt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Tt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qt.create("no-api-key");if(Ri[r]!=null)throw qt.create("already-exists",{id:r});if(!ew){h3(ph);const{wrappedGtag:i,gtagCore:o}=g3(Ri,Xv,Jv,ph,R3);Zp=i,Zv=o,ew=!0}return Ri[r]=A3(t,Xv,Jv,e,Zv,ph,n),new P3(t)}function L3(t=Ga()){t=fe(t);const e=ds(t,au);return e.isInitialized()?e.getImmediate():M3(t)}function M3(t,e={}){const n=ds(t,au);if(n.isInitialized()){const s=n.getImmediate();if(Jr(e,n.getOptions()))return s;throw qt.create("already-initialized")}return n.initialize({options:e})}function O3(t,e,n){t=fe(t),k3(Zp,Ri[t.app.options.appId],e,n).catch(r=>Tt.error(r))}function V3(t,e,n,r){t=fe(t),S3(Zp,Ri[t.app.options.appId],e,n,r).catch(s=>Tt.error(s))}const tw="@firebase/analytics",nw="0.10.19";function F3(){wn(new sn(au,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return D3(r,s,n)},"PUBLIC")),wn(new sn("analytics-internal",t,"PRIVATE")),Lt(tw,nw),Lt(tw,nw,"esm2020");function t(e){try{const n=e.getProvider(au).getImmediate();return{logEvent:(r,s,i)=>V3(n,r,s,i),setUserProperties:(r,s)=>O3(n,r,s)}}catch(n){throw qt.create("interop-component-reg-failed",{reason:n})}}}F3();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firebasestorage.googleapis.com",KE="storageBucket",U3=2*60*1e3,$3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue extends an{constructor(e,n,r=0){super(gh(e),`Firebase Storage: ${n} (${gh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ue.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fe||(Fe={}));function gh(t){return"storage/"+t}function eg(){const t="An unknown error occurred, please check the error payload for server response.";return new Ue(Fe.UNKNOWN,t)}function B3(t){return new Ue(Fe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function z3(t){return new Ue(Fe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function W3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ue(Fe.UNAUTHENTICATED,t)}function q3(){return new Ue(Fe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function H3(t){return new Ue(Fe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function G3(){return new Ue(Fe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function K3(){return new Ue(Fe.CANCELED,"User canceled the upload/download.")}function Q3(t){return new Ue(Fe.INVALID_URL,"Invalid URL '"+t+"'.")}function Y3(t){return new Ue(Fe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function X3(){return new Ue(Fe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KE+"' property when initializing the app?")}function J3(){return new Ue(Fe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z3(){return new Ue(Fe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eL(t){return new Ue(Fe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bf(t){return new Ue(Fe.INVALID_ARGUMENT,t)}function QE(){return new Ue(Fe.APP_DELETED,"The Firebase app was deleted.")}function tL(t){return new Ue(Fe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sa(t,e){return new Ue(Fe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Po(t){throw new Ue(Fe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bt.makeFromUrl(e,n)}catch{return new Bt(e,"")}if(r.path==="")return r;throw Y3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),S={bucket:1,path:3},N=n===GE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",x=new RegExp(`^https?://${N}/${s}/${_}`,"i"),E=[{regex:c,indices:u,postModify:i},{regex:w,indices:S,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<E.length;R++){const P=E[R],M=P.regex.exec(e);if(M){const T=M[P.indices.bucket];let v=M[P.indices.path];v||(v=""),r=new Bt(T,v),P.postModify(r);break}}if(r==null)throw Q3(e);return r}}class nL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(..._){d||(d=!0,e.apply(null,_))}function m(_){s=setTimeout(()=>{s=null,t(w,u())},_)}function g(){i&&clearTimeout(i)}function w(_,...x){if(d){g();return}if(_){g(),f.call(null,_,...x);return}if(u()||o){g(),f.call(null,_,...x);return}r<64&&(r*=2);let E;c===1?(c=2,E=0):E=(r+Math.random())*1e3,m(E)}let S=!1;function N(_){S||(S=!0,g(),!d&&(s!==null?(_||(c=2),clearTimeout(s),m(0)):_||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function sL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){return t!==void 0}function oL(t){return typeof t=="object"&&!Array.isArray(t)}function tg(t){return typeof t=="string"||t instanceof String}function rw(t){return ng()&&t instanceof Blob}function ng(){return typeof Blob<"u"}function sw(t,e,n,r){if(r<e)throw Bf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Bf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function YE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ds;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ds||(Ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,s,i,o,c,u,d,f,m,g=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,N)=>{this.resolve_=S,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ul(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Ds.NO_ERROR,u=i.getStatus();if(!c||aL(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Ds.ABORT;r(!1,new Ul(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Ul(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());iL(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=eg();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?QE():K3();o(u)}else{const u=G3();o(u)}};this.canceled_?n(!1,new Ul(!1,null,!0)):this.backoffId_=rL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ul{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function cL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function uL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function fL(t,e,n,r,s,i,o=!0,c=!1){const u=YE(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return dL(f,e),cL(f,n),uL(f,i),hL(f,r),new lL(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pL(...t){const e=mL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ng())return new Blob(t);throw new Ue(Fe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t){if(typeof atob>"u")throw eL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class yh{constructor(e,n){this.data=e,this.contentType=n||null}}function vL(t,e){switch(t){case Pn.RAW:return new yh(XE(e));case Pn.BASE64:case Pn.BASE64URL:return new yh(JE(t,e));case Pn.DATA_URL:return new yh(xL(e),_L(e))}throw eg()}function XE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function wL(t){let e;try{e=decodeURIComponent(t)}catch{throw sa(Pn.DATA_URL,"Malformed data URL.")}return XE(e)}function JE(t,e){switch(t){case Pn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw sa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Pn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw sa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yL(e)}catch(s){throw s.message.includes("polyfill")?s:sa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class ZE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw sa(Pn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=bL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function xL(t){const e=new ZE(t);return e.base64?JE(Pn.BASE64,e.rest):wL(e.rest)}function _L(t){return new ZE(t).contentType}function bL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){let r=0,s="";rw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(rw(this.data_)){const r=this.data_,s=gL(r,e,n);return s===null?null:new Rr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Rr(r,!0)}}static getBlob(...e){if(ng()){const n=e.map(r=>r instanceof Rr?r.data_:r);return new Rr(pL.apply(null,n))}else{const n=e.map(o=>tg(o)?vL(Pn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new Rr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){let e;try{e=JSON.parse(t)}catch{return null}return oL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function TL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function t2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t,e){return e}class _t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||IL}}let $l=null;function NL(t){return!tg(t)||t.length<2?t:t2(t)}function n2(){if($l)return $l;const t=[];t.push(new _t("bucket")),t.push(new _t("generation")),t.push(new _t("metageneration")),t.push(new _t("name","fullPath",!0));function e(i,o){return NL(o)}const n=new _t("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new _t("size");return s.xform=r,t.push(s),t.push(new _t("timeCreated")),t.push(new _t("updated")),t.push(new _t("md5Hash",null,!0)),t.push(new _t("cacheControl",null,!0)),t.push(new _t("contentDisposition",null,!0)),t.push(new _t("contentEncoding",null,!0)),t.push(new _t("contentLanguage",null,!0)),t.push(new _t("contentType",null,!0)),t.push(new _t("metadata","customMetadata",!0)),$l=t,$l}function SL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Bt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function kL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return SL(r,t),r}function r2(t,e,n){const r=e2(e);return r===null?null:kL(t,r,n)}function CL(t,e,n,r){const s=e2(e);if(s===null||!tg(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),w=rg(g,n,r),S=YE({alt:"media",token:d});return w+S})[0]}function AL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class s2{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){if(!t)throw eg()}function PL(t,e){function n(r,s){const i=r2(t,s,e);return i2(i!==null),i}return n}function RL(t,e){function n(r,s){const i=r2(t,s,e);return i2(i!==null),CL(i,s,t.host,t._protocol)}return n}function o2(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=q3():s=W3():n.getStatus()===402?s=z3(t.bucket):n.getStatus()===403?s=H3(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function jL(t){const e=o2(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=B3(t.path)),i.serverResponse=s.serverResponse,i}return n}function DL(t,e,n){const r=e.fullServerUrl(),s=rg(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new s2(s,i,RL(t,n),o);return c.errorHandler=jL(e),c}function LL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ML(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=LL(null,e)),r}function OL(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let R=0;R<2;R++)E=E+Math.random().toString().slice(2);return E}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=ML(e,r,s),f=AL(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=Rr.getBlob(m,r,g);if(w===null)throw J3();const S={name:d.fullPath},N=rg(i,t.host,t._protocol),_="POST",x=t.maxUploadRetryTime,y=new s2(N,_,PL(t,n),x);return y.urlParams=S,y.headers=o,y.body=w.uploadData(),y.errorHandler=o2(e),y}class VL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Po("cannot .send() more than once");if(us(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Po("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Po("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Po("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Po("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class FL extends VL{initXhr(){this.xhr_.responseType="text"}}function a2(){return new FL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this._service=e,n instanceof Bt?this._location=n:this._location=Bt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Gs(e,n)}get root(){const e=new Bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t2(this._location.path)}get storage(){return this._service}get parent(){const e=EL(this._location.path);if(e===null)return null;const n=new Bt(this._location.bucket,e);return new Gs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tL(e)}}function UL(t,e,n){t._throwIfRoot("uploadBytes");const r=OL(t.storage,t._location,n2(),new Rr(e,!0),n);return t.storage.makeRequestWithTokens(r,a2).then(s=>({metadata:s,ref:t}))}function $L(t){t._throwIfRoot("getDownloadURL");const e=DL(t.storage,t._location,n2());return t.storage.makeRequestWithTokens(e,a2).then(n=>{if(n===null)throw Z3();return n})}function BL(t,e){const n=TL(t._location.path,e),r=new Bt(t._location.bucket,n);return new Gs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){return/^[A-Za-z]+:\/\//.test(t)}function WL(t,e){return new Gs(t,e)}function l2(t,e){if(t instanceof sg){const n=t;if(n._bucket==null)throw X3();const r=new Gs(n,n._bucket);return e!=null?l2(r,e):r}else return e!==void 0?BL(t,e):t}function qL(t,e){if(e&&zL(e)){if(t instanceof sg)return WL(t,e);throw Bf("To use ref(service, url), the first argument must be a Storage instance.")}else return l2(t,e)}function iw(t,e){const n=e==null?void 0:e[KE];return n==null?null:Bt.makeFromBucketSpec(n,t)}function HL(t,e,n,r={}){t.host=`${e}:${n}`;const s=us(e);s&&(Qm(`https://${t.host}/b`),Ym("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:nb(i,t.app.options.projectId))}class sg{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=GE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=U3,this._maxUploadRetryTime=$3,this._requests=new Set,s!=null?this._bucket=Bt.makeFromBucketSpec(s,this._host):this._bucket=iw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bt.makeFromBucketSpec(this._url,e):this._bucket=iw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new nL(QE());{const o=fL(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ow="@firebase/storage",aw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="storage";function GL(t,e,n){return t=fe(t),UL(t,e,n)}function KL(t){return t=fe(t),$L(t)}function QL(t,e){return t=fe(t),qL(t,e)}function YL(t=Ga(),e){t=fe(t);const r=ds(t,c2).getImmediate({identifier:e}),s=Z_("storage");return s&&XL(r,...s),r}function XL(t,e,n,r={}){HL(t,e,n,r)}function JL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new sg(n,r,s,e,Js)}function ZL(){wn(new sn(c2,JL,"PUBLIC").setMultipleInstances(!0)),Lt(ow,aw,""),Lt(ow,aw,"esm2020")}ZL();const eM={apiKey:"AIzaSyBHyhsDtZABqCEgmPdVHsA8r4vqTQIBJSs",authDomain:"dermaglareapp.firebaseapp.com",projectId:"dermaglareapp",storageBucket:"dermaglareapp.firebasestorage.app",messagingSenderId:"462818904186",appId:"1:462818904186:web:2040dcd437664d563bd3c3",measurementId:"G-3XLGD4G27R"},rd=SC().length?Ga():cb(eM),Bn=iR(rd),ne=iD(rd),tM=YL(rd);L3(rd);const u2=new Gn;u2.setCustomParameters({prompt:"select_account"});const La=t=>{if(!t||t.trim()==="")return{isValid:!1,error:"Email is required."};if(!t.includes("@"))return{isValid:!1,error:"Email must contain @ symbol."};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return{isValid:!1,error:"Please enter a valid email address."};if(!/\.(com|net|org|edu|gov|co\.za|za|io|me|info|biz)$/i.test(t))return{isValid:!1,error:"Email must have a valid domain (.com, .net, .org, .co.za, etc.)."};const r=t.split("@")[1].toLowerCase(),s={"gmial.com":"gmail.com","gmai.com":"gmail.com","yahooo.com":"yahoo.com","yaho.com":"yahoo.com","outlok.com":"outlook.com","hotmial.com":"hotmail.com"};return s[r]?{isValid:!1,error:`Did you mean ${s[r]}?`}:{isValid:!0}},d2=t=>t.length<8?{isValid:!1,error:"Password must be at least 8 characters long."}:/[A-Z]/.test(t)?/[a-z]/.test(t)?/[0-9]/.test(t)?{isValid:!0}:{isValid:!1,error:"Password must contain at least one number."}:{isValid:!1,error:"Password must contain at least one lowercase letter."}:{isValid:!1,error:"Password must contain at least one uppercase letter."},nM=(t,e)=>t!==e?{isValid:!1,error:"Passwords do not match."}:{isValid:!0},rM=async(t,e)=>{try{const n=La(t);if(!n.isValid)throw new Error(n.error);const r=await UA(Bn,t,e),s=await _n(Ve(ne,"patients",r.user.uid));if(!s.exists())throw new Error("Patient record not found. Please contact support.");return{user:r.user,patientData:s.data()}}catch(n){throw console.error("Login error:",n),new Error(sd(n.code))}},sM=async(t,e,n,r)=>{try{console.log("Starting signup process for:",t);const s=La(t);if(!s.isValid)throw new Error(s.error);const i=d2(e);if(!i.isValid)throw new Error(i.error);console.log("Creating user account...");const o=await FA(Bn,t,e);console.log("User account created with UID:",o.user.uid),console.log("Sending verification/welcome email..."),await $A(o.user),console.log(" Welcome/verification email sent successfully to:",t),console.log("Updating user profile..."),await Mb(o.user,{displayName:n}),console.log("Profile updated successfully");const c=(r==null?void 0:r.firstName)||n.split(" ")[0]||n,u=(r==null?void 0:r.lastName)||n.split(" ").slice(1).join(" ")||"";console.log("Creating patient record in Firestore...");const d={name:n,firstName:c,lastName:u,email:t,createdAt:we(),lastVisit:we(),role:"patient",status:"active",emailVerified:!1,...r};await iu(Ve(ne,"patients",o.user.uid),d),console.log("Patient record created successfully"),console.log("Creating user record in users collection...");const f={id:o.user.uid,uid:o.user.uid,email:t,firstName:c,lastName:u,displayName:n,role:"patient",isActive:!0,authMethod:"email",createdAt:we()};if(await iu(Ve(ne,"users",o.user.uid),f),console.log(" User record created in users collection for Admin App"),!(await _n(Ve(ne,"patients",o.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");console.log("Patient record verified in database");try{const{sendWelcomeEmail:g}=await Xr(async()=>{const{sendWelcomeEmail:w}=await Promise.resolve().then(()=>id);return{sendWelcomeEmail:w}},[]);await g(t,n,o.user.uid),console.log("Welcome email sent successfully")}catch(g){console.error("Failed to send welcome email:",g)}return o.user}catch(s){throw console.error("Signup error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(sd(s.code))}},iM=async()=>{try{console.log("Starting Google sign-in...");const t=await mP(Bn,u2);console.log("Google sign-in successful, UID:",t.user.uid);const e=await _n(Ve(ne,"patients",t.user.uid));if(console.log("Patient document exists:",e.exists()),e.exists())return console.log("Updating last visit for existing user..."),await iu(Ve(ne,"patients",t.user.uid),{lastVisit:we()},{merge:!0}),console.log("Last visit updated"),{user:t.user,patientData:e.data()};{console.log("Creating new patient record for Google user...");const n={name:t.user.displayName||"Google User",email:t.user.email,photoURL:t.user.photoURL,createdAt:we(),lastVisit:we(),role:"patient",status:"active"};if(await iu(Ve(ne,"patients",t.user.uid),n),console.log("New patient record created"),!(await _n(Ve(ne,"patients",t.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),{user:t.user,patientData:n}}}catch(t){throw console.error("Google login error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),t.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(sd(t.code))}},lw=async()=>{try{await GA(Bn)}catch(t){throw console.error("Logout error:",t),new Error("Failed to logout. Please try again.")}},oM=async t=>{try{const e=La(t);if(!e.isValid)throw new Error(e.error);console.log(" Attempting to send password reset email to:",t),await VA(Bn,t),console.log(" Firebase password reset email sent successfully to:",t);try{const{sendPasswordResetNotification:n}=await Xr(async()=>{const{sendPasswordResetNotification:o}=await Promise.resolve().then(()=>id);return{sendPasswordResetNotification:o}},void 0),r=Se(ne,"patients"),s=zn(r,hr("email","==",t),qp(1)),i=await $n(s);if(i.empty)console.log(" No patient record found for email:",t);else{const o=i.docs[0].data(),c=i.docs[0].id,u=o.name||"Patient";await n(t,u,c),console.log(" Password reset notification logged to Firestore")}}catch(n){console.error(" Failed to log password reset notification to Firestore:",n)}return{success:!0,message:`Password reset email sent to ${t}. Please check your inbox and spam folder.`}}catch(e){throw console.error(" Password reset error:",e),new Error(sd(e.code))}},aM=t=>HA(Bn,t),sd=t=>({"auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters.","auth/invalid-email":"Invalid email address.","auth/user-disabled":"This account has been disabled.","auth/too-many-requests":"Too many attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/popup-closed-by-user":"Sign-in popup was closed.","auth/cancelled-popup-request":"Only one popup request is allowed at a time.","auth/operation-not-allowed":"This sign-in method is not enabled. Please contact support.","permission-denied":"Database permission error. Please contact support."})[t]||"An error occurred. Please try again.",lu=async t=>{try{const e=zn(Se(ne,"appointments"),hr("patientId","==",t),ti("date","desc"));return(await $n(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching appointments:",e),e}},lM=async t=>{try{console.log("bookAppointment called with:",t),console.log("Firebase db instance:",ne);const{getServicePrice:e}=await Xr(async()=>{const{getServicePrice:c}=await Promise.resolve().then(()=>ig);return{getServicePrice:c}},void 0),n=e(t.type)||{basePrice:500,name:t.type},r=await Gt(Se(ne,"appointments"),{...t,amount:n.basePrice,paymentStatus:"pending",paymentMethod:"",paymentTransactionId:"",paidAt:null,createdAt:we(),updatedAt:we()});console.log("Document created with ID:",r.id);const s={patientId:t.patientId,patientName:t.patientName,patientEmail:t.patientEmail||"",appointmentId:r.id,amount:n.basePrice,description:`${t.type} - ${t.doctorName}`,service:t.type,status:"Pending",date:new Date().toISOString(),dueDate:t.date,invoiceNumber:`INV-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,createdAt:we()},i=await Gt(Se(ne,"invoices"),s);console.log("Invoice created with ID:",i.id);const{sendInvoiceCreatedEmail:o}=await Xr(async()=>{const{sendInvoiceCreatedEmail:c}=await Promise.resolve().then(()=>id);return{sendInvoiceCreatedEmail:c}},void 0);return await o(t.patientEmail||"",t.patientName,t.patientId,s.invoiceNumber,n.basePrice,t.date,[t.type]),r.id}catch(e){throw console.error("Error booking appointment:",e),console.error("Error details:",JSON.stringify(e,null,2)),e}},cM=async(t,e=!0)=>{var n;try{const r=Ve(ne,"appointments",t),s=await _n(r);if(!s.exists())throw new Error("Appointment not found");const i=s.data();if(await ms(r,{status:"Cancelled",cancelledAt:we()}),e&&i.patientId){const{createCancellationFeeInvoice:o,getServicePrice:c}=await Xr(async()=>{const{createCancellationFeeInvoice:m,getServicePrice:g}=await Promise.resolve().then(()=>ig);return{createCancellationFeeInvoice:m,getServicePrice:g}},void 0),{sendCancellationFeeEmail:u}=await Xr(async()=>{const{sendCancellationFeeEmail:m}=await Promise.resolve().then(()=>id);return{sendCancellationFeeEmail:m}},void 0),d=i.type||i.serviceType,f=c(d);if(f){const m=f.basePrice*.1,g=await o(t,i.patientId);return i.patientEmail&&await u(i.patientEmail,i.patientName||"Patient",i.patientId,i.date,i.time,f.basePrice,m,`INV-${(n=g.id)==null?void 0:n.slice(-8).toUpperCase()}`),{success:!0,invoiceId:g.id,cancellationFee:m}}}return{success:!0}}catch(r){throw console.error("Error cancelling appointment:",r),r}},uM=async t=>{try{const e=zn(Se(ne,"documents"),hr("patientId","==",t),ti("date","desc"));return(await $n(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching documents:",e),e}},dM=async(t,e)=>{try{const n=zn(Se(ne,"chats"),hr("patientId","==",t),qp(1)),r=await $n(n);if(!r.empty)return r.docs[0].id;let s=e;try{const o=await _n(Ve(ne,"users",t));if(o.exists()){const c=o.data();c.firstName&&c.lastName?s=`${c.firstName} ${c.lastName}`:c.firstName?s=c.firstName:c.displayName&&(s=c.displayName),console.log(" Fetched real patient name:",s)}else{const c=await _n(Ve(ne,"patients",t));if(c.exists()){const u=c.data();u.firstName&&u.lastName?s=`${u.firstName} ${u.lastName}`:u.name&&(s=u.name)}}}catch(o){console.warn("Could not fetch patient name, using fallback:",o)}const i=await Gt(Se(ne,"chats"),{patientId:t,patientName:s,lastMessageText:"",lastMessageTimestamp:we(),unreadByPatient:0,unreadByAdmin:!1});return console.log(" Chat created with patient name:",s),i.id}catch(n){throw console.error("Error getting/creating chat:",n),n}},hM=async t=>{try{const e=zn(Se(ne,`chats/${t}/messages`),ti("timestamp","asc"));return(await $n(e)).docs.map(r=>({id:r.id,chatId:t,...r.data()}))}catch(e){throw console.error("Error fetching messages:",e),e}},fM=async(t,e,n,r)=>{try{const s=await Gt(Se(ne,`chats/${t}/messages`),{senderId:e,text:n,timestamp:we(),read:!1});await ms(Ve(ne,"chats",t),{lastMessageText:n,lastMessageTimestamp:we(),unreadByAdmin:e!=="admin"});try{const{notifyMessageRecipient:i}=await Xr(async()=>{const{notifyMessageRecipient:o}=await import("./message-notification-service-DIwpN0Sg.js");return{notifyMessageRecipient:o}},[]);await i(t,e,r||"Patient","patient",n)}catch(i){console.warn(" Failed to send message notification:",i)}return s.id}catch(s){throw console.error("Error sending message:",s),s}},mM=async t=>{try{await ms(Ve(ne,"chats",t),{unreadByPatient:0})}catch(e){throw console.error("Error marking messages as read:",e),e}},pM=(t,e)=>{const n=zn(Se(ne,`chats/${t}/messages`),ti("timestamp","asc"));return TE(n,r=>{const s=r.docs.map(i=>({id:i.id,chatId:t,...i.data()}));e(s)})},Ma=async t=>{try{const e=await _n(Ve(ne,"patients",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error fetching patient profile:",e),e}},ji=async(t,e)=>{try{await ms(Ve(ne,"patients",t),e)}catch(n){throw console.error("Error updating patient profile:",n),n}},h2=C.createContext(void 0),vt=()=>{const t=C.useContext(h2);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},gM=({children:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(!0),[i,o]=C.useState([]);C.useEffect(()=>aM(async N=>{if(N)try{const _=await Ma(N.uid);n({...N,displayName:(_==null?void 0:_.name)||N.displayName||"Patient",photoURL:(_==null?void 0:_.photoURL)||N.photoURL||`https://ui-avatars.com/api/?name=${(_==null?void 0:_.name)||"P"}&background=F4E48E&color=3A565B`})}catch(_){console.error("Failed to fetch patient profile",_),n({...N,displayName:N.displayName||"Patient",photoURL:N.photoURL||`https://ui-avatars.com/api/?name=${N.displayName||"P"}&background=F4E48E&color=3A565B`})}else n(null);s(!1)}),[]),C.useEffect(()=>{const S=()=>{e&&lw()};return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[e]);const c=async(S,N)=>{await rM(S,N)},u=async(S,N,_,x)=>{await sM(S,N,_,x)},d=async()=>{await lw()},f=async()=>{if(e)try{const S=await Ma(e.uid);S&&n({...e,displayName:S.name||e.displayName||"Patient",photoURL:S.photoURL||e.photoURL||`https://ui-avatars.com/api/?name=${S.name||"P"}&background=F4E48E&color=3A565B`})}catch(S){console.error("Failed to refresh user data:",S)}},m=C.useCallback((S,N="info")=>{const _=Math.random().toString(36).substr(2,9);o(x=>[...x,{id:_,message:S,type:N}]),setTimeout(()=>g(_),5e3)},[]),g=S=>{o(N=>N.filter(_=>_.id!==S))},w={user:e,loading:r,login:c,signup:u,logout:d,refreshUser:f,showToast:m,toasts:i,removeToast:g};return a.jsx(h2.Provider,{value:w,children:t})},cw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{x:"3",y:"8",width:"18",height:"8",rx:"4"}),a.jsx("rect",{x:"7",y:"4",width:"10",height:"4",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"15.5",cy:"12",r:"1.5"}),a.jsx("path",{d:"M12 16v2"}),a.jsx("path",{d:"M8 20h8"})]}),uw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Ft=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),a.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),a.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),Di=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),a.jsx("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),zf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),yM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),vM=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"9 18 15 12 9 6"})}),wM=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"15 18 9 12 15 6"})}),Kr=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),f2=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),a.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),Rn=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),xM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Oa=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),m2=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),a.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),fc=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),a.jsx("polyline",{points:"22 6 12 13 2 6"})]}),en=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),cu=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.jsx("polyline",{points:"12 5 19 12 12 19"})]}),_M=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Ks=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),bM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),p2=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),EM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),a.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]}),dw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),g2=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a.jsx("polyline",{points:"17 6 23 6 23 12"})]}),y2=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),v2=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),w2=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),TM=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),IM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.35-4.35"})]}),uu=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),hw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),a.jsx("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),a.jsx("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),a.jsx("line",{x1:"2",x2:"22",y1:"2",y2:"22"})]}),fw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),mw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),a.jsx("path",{d:"M22 2 11 13"})]}),NM=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),SM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 8-6 4 6 4V8Z"}),a.jsx("rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2"})]}),kM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),CM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),a.jsx("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),a.jsx("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]}),AM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),a.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),vh=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]}),PM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),a.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),pw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),gw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),yw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),ia=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),RM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),a.jsx("path",{d:"M9 22v-4h6v4"}),a.jsx("path",{d:"M8 6h.01"}),a.jsx("path",{d:"M16 6h.01"}),a.jsx("path",{d:"M12 6h.01"}),a.jsx("path",{d:"M12 10h.01"}),a.jsx("path",{d:"M12 14h.01"}),a.jsx("path",{d:"M16 10h.01"}),a.jsx("path",{d:"M16 14h.01"}),a.jsx("path",{d:"M8 10h.01"}),a.jsx("path",{d:"M8 14h.01"})]}),jM=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"}),a.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),x2=async(t,e,n,r,s,i,o)=>{try{const c="Payment Successful - Dermaglare Skin & Laser Clinic",u=`
Dear ${e},

Thank you for your payment!

Payment Details:

Invoice Number: ${r}
Amount Paid: R${s.toFixed(2)}
Payment Method: ${o}
Transaction ID: ${i}
Date: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

Your payment has been successfully processed and your invoice has been marked as paid.

You can view your invoice and payment history in your patient portal at any time.

If you have any questions about this payment, please don't hesitate to contact us at:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for choosing Dermaglare Skin & Laser Clinic!

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),d={to:t,subject:c,body:u,type:"payment_success",patientId:n,relatedId:i,sentAt:we(),status:"sent"};return await Gt(Se(ne,"email_notifications"),d),console.log(" Payment success email sent to:",t),console.log("Subject:",c),console.log(`
Email body:
`,u),!0}catch(c){return console.error("Error sending payment success email:",c),!1}},_2=async(t,e,n,r,s,i)=>{try{const o="Payment Failed - Dermaglare Skin & Laser Clinic",c=`
Dear ${e},

We were unable to process your payment.

Payment Details:

Invoice Number: ${r}
Amount: R${s.toFixed(2)}
Reason: ${i}
Date: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

Please try again or use a different payment method. Your invoice remains unpaid and can be accessed in your patient portal.

If you continue to experience issues, please contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for your understanding.

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),u={to:t,subject:o,body:c,type:"payment_failed",patientId:n,sentAt:we(),status:"sent"};return await Gt(Se(ne,"email_notifications"),u),console.log(" Payment failed email sent to:",t),!0}catch(o){return console.error("Error sending payment failed email:",o),!1}},DM=async(t,e,n,r,s,i,o)=>{try{const c="New Invoice - Dermaglare Skin & Laser Clinic",u=`
Dear ${e},

A new invoice has been generated for your recent visit.

Invoice Details:

Invoice Number: ${r}
Amount Due: R${s.toFixed(2)}
Due Date: ${new Date(i).toLocaleDateString("en-ZA")}

Services:
${o.map((f,m)=>`${m+1}. ${f}`).join(`
`)}

You can view and pay your invoice online through your patient portal.

Payment Options:
 Credit/Debit Card (Instant)
 EFT (1-3 business days)
 Cash (In-person)

Please ensure payment is made by the due date to avoid any additional charges.

Questions? Contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for choosing Dermaglare!

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),d={to:t,subject:c,body:u,type:"invoice_created",patientId:n,relatedId:r,sentAt:we(),status:"sent"};return await Gt(Se(ne,"email_notifications"),d),console.log(" Invoice created email sent to:",t),!0}catch(c){return console.error("Error sending invoice created email:",c),!1}},LM=async(t,e,n,r,s,i,o,c)=>{try{const u="Appointment Cancellation Fee - Dermaglare Skin & Laser Clinic",d=`
Dear ${e},

Your appointment has been cancelled and a cancellation fee has been applied.

Cancellation Details:

Original Appointment: ${new Date(r).toLocaleDateString("en-ZA")} at ${s}
Consultation Fee: R${i.toFixed(2)}
Cancellation Fee (10%): R${o.toFixed(2)}
Invoice Number: ${c}

As per our cancellation policy, a 10% cancellation fee of the consultation fee has been applied.

This fee helps cover administrative costs and the reserved appointment slot. An invoice has been generated and can be viewed in your patient portal.

To avoid cancellation fees in the future, please:
 Cancel at least 24 hours in advance when possible
 Contact us if you need to reschedule

Payment can be made through:
 Credit/Debit Card (Instant)
 EFT (1-3 business days)
 Cash (In-person)

Questions about our cancellation policy? Contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

We look forward to serving you in the future.

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),f={to:t,subject:u,body:d,type:"cancellation_fee",patientId:n,relatedId:c,sentAt:we(),status:"sent"};return await Gt(Se(ne,"email_notifications"),f),console.log(" Cancellation fee email sent to:",t),!0}catch(u){return console.error("Error sending cancellation fee email:",u),!1}},MM=async(t,e,n)=>{try{const r="Welcome to Dermaglare Skin & Laser Clinic!",s=`
Dear ${e},

Welcome to Dermaglare Skin & Laser Clinic! 

Thank you for registering with us. We're excited to have you as part of our community dedicated to exceptional skin health and beauty care.

Your Patient Portal Account

Email: ${t}
Portal: ${window.location.origin}

With your patient portal, you can:
 Book and manage appointments 24/7
 View and pay invoices online
 Access your medical documents
 Message our support team
 Update your profile information
 Track your health records

Getting Started:
1. Verify your email address (check your inbox)
2. Complete your profile with medical information
3. Book your first appointment
4. Explore the dashboard features

Our Services:
 Medical Dermatology
 Cosmetic Dermatology
 Laser Treatments
 Skin Surgery
 Anti-Aging Treatments
 Acne & Scar Treatment

Need Help?
Our team is here to assist you with any questions or concerns.
 info@dermaglareskin.co.za
 +27 11 234 5678
 www.dermaglareskin.co.za

Office Hours:
Monday - Friday: 8:00 AM - 5:00 PM
Saturday: 9:00 AM - 1:00 PM
Sunday: Closed

We look forward to serving you and helping you achieve your skin health goals!

Best regards,
Dr. Jabu Nkehli & The Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),i={to:t,subject:r,body:s,type:"welcome",patientId:n,sentAt:we(),status:"sent"};return await Gt(Se(ne,"email_notifications"),i),console.log(" Welcome email sent to:",t),!0}catch(r){return console.error("Error sending welcome email:",r),!1}},OM=async(t,e,n)=>{try{const r="Password Reset Request - Dermaglare Patient Portal",s=`
Dear ${e},

We received a request to reset your password for your Dermaglare Patient Portal account.

Account Information:

Email: ${t}
Request Time: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

A password reset email has been sent to your email address from Firebase Authentication. Please check your inbox and follow the instructions to reset your password.

If you didn't request this password reset:
 Your account is still secure
 No changes have been made
 You can safely ignore this email
 Consider changing your password if you're concerned

Security Tips:
 Use a strong, unique password
 Never share your password
 Enable two-factor authentication
 Log out from shared devices
 Keep your email secure

If you have any concerns about your account security, please contact us immediately:
 info@dermaglareskin.co.za
 +27 11 234 5678

Best regards,
Dermaglare Security Team


This is an automated email. Please do not reply.
    `.trim(),i={to:t,subject:r,body:s,type:"password_reset",patientId:n,sentAt:we(),status:"sent"};return await Gt(Se(ne,"email_notifications"),i),console.log(" Password reset notification email sent to:",t),!0}catch(r){return console.error("Error sending password reset notification email:",r),!1}},id=Object.freeze(Object.defineProperty({__proto__:null,sendCancellationFeeEmail:LM,sendInvoiceCreatedEmail:DM,sendPasswordResetNotification:OM,sendPaymentFailedEmail:_2,sendPaymentSuccessEmail:x2,sendWelcomeEmail:MM},Symbol.toStringTag,{value:"Module"})),b2=[{id:"consultation",name:"Standard Consultation",basePrice:1300,duration:"30 min",description:"Comprehensive skin assessment and treatment plan",category:"medical"},{id:"medical_dermatology",name:"Medical Dermatology",basePrice:1500,duration:"30 min",description:"Treatment of skin conditions",category:"medical"},{id:"cosmetic_dermatology",name:"Cosmetic Dermatology",basePrice:1600,duration:"30-60 min",description:"Aesthetic treatments and procedures",category:"cosmetic"},{id:"laser_treatment",name:"Laser Treatment",basePrice:3500,duration:"45-60 min",description:"Advanced laser procedures",category:"cosmetic"},{id:"chemical_peel",name:"Chemical Peel",basePrice:1800,duration:"30-45 min",description:"Chemical peels for skin renewal",category:"cosmetic"},{id:"microneedling",name:"Microneedling",basePrice:1900,duration:"45 min",description:"Collagen induction therapy",category:"cosmetic"},{id:"botox",name:"Botox Injections",basePrice:4500,duration:"20-30 min",description:"Anti-aging wrinkle treatment",category:"cosmetic"},{id:"prp_therapy",name:"Platelet-Rich Plasma (PRP)",basePrice:3200,duration:"45-60 min",description:"PRP therapy for skin rejuvenation",category:"specialty"},{id:"skin_tightening",name:"Skin Tightening",basePrice:2200,duration:"45-60 min",description:"Non-surgical skin firming",category:"cosmetic"},{id:"mole_removal",name:"Mole Removal",basePrice:1800,duration:"30 min",description:"Surgical removal of moles",category:"surgical"},{id:"skin_cancer_screening",name:"Skin Cancer Screening",basePrice:1750,duration:"30 min",description:"Comprehensive skin cancer examination",category:"medical"},{id:"acne_treatment",name:"Acne Treatment",basePrice:1650,duration:"30 min",description:"Specialized acne management",category:"medical"},{id:"paediatric_dermatology",name:"Paediatric Dermatology",basePrice:1450,duration:"30-45 min",description:"Specialized skin care for children",category:"specialty"}],E2=t=>b2.find(e=>e.id===t.toLowerCase().replace(/\s+/g,"_")||e.name.toLowerCase()===t.toLowerCase()),Wf=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`INV-${e}${n}-${r}`},T2=async t=>{try{const e=Se(ne,"invoices"),n=zn(e,hr("patientId","==",t),ti("createdAt","desc"));return(await $n(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error fetching patient invoices:",e),[]}},qf=async t=>{try{const e=Ve(ne,"invoices",t),n=await _n(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error fetching invoice:",e),null}},VM=(t=2e3)=>new Promise(e=>setTimeout(e,t)),FM=()=>{const t=Date.now(),e=Math.floor(Math.random()*1e5);return`TXN-${t}-${e}`},UM=t=>{const e=t.replace(/\s+/g,"");if(!/^\d{13,19}$/.test(e))return!1;let n=0,r=!1;for(let s=e.length-1;s>=0;s--){let i=parseInt(e[s]);r&&(i*=2,i>9&&(i-=9)),n+=i,r=!r}return n%10===0},I2=async(t,e,n)=>{try{if(!UM(e.cardNumber))return{success:!1,message:"Invalid card number"};const r=new Date;if(new Date(parseInt(`20${e.expiryYear}`),parseInt(e.expiryMonth)-1)<r)return{success:!1,message:"Card has expired"};if(!/^\d{3,4}$/.test(e.cvv))return{success:!1,message:"Invalid CVV"};const i=await qf(t);if(!i)return{success:!1,message:"Invoice not found"};if(i.status==="paid")return{success:!1,message:"Invoice already paid"};if(await VM(2e3),Math.random()<.1){const m={invoiceId:t,amount:i.amount,currency:"ZAR",status:"failed",paymentMethod:"card",createdAt:we(),updatedAt:we()};return await Gt(Se(ne,"payment_intents"),m),await _2(n,i.patientName,i.patientId,Wf(),i.amount,"Payment declined by bank"),{success:!1,message:"Payment declined by bank. Please try again or use a different card."}}const c=FM(),u={invoiceId:t,amount:i.amount,currency:"ZAR",status:"succeeded",paymentMethod:"card",createdAt:we(),updatedAt:we()};await Gt(Se(ne,"payment_intents"),u);const d=Ve(ne,"invoices",t);await ms(d,{status:"paid",paymentMethod:"card",transactionId:c,paidAt:new Date().toISOString(),updatedAt:we()});const f=await qf(t);return await x2(n,i.patientName,i.patientId,Wf(),i.amount,c,"Credit/Debit Card"),{success:!0,transactionId:c,message:"Payment processed successfully",invoice:f}}catch(r){return console.error("Error processing card payment:",r),{success:!1,message:"Payment processing failed. Please try again."}}},$M=async(t,e)=>{try{const n=Ve(ne,"appointments",t),r=await _n(n);if(!r.exists())throw new Error("Appointment not found");const s=r.data(),i=s.type||s.serviceType,o=E2(i);if(!o)throw new Error(`Service pricing not found for: ${i}`);const c=o.basePrice*.1,u={serviceId:"cancellation_fee",serviceName:`Cancellation Fee (10% of ${o.name})`,price:c,quantity:1,total:c},d=Ve(ne,"patients",e),f=await _n(d),m=f.exists()?f.data().name:s.patientName||"Unknown Patient",g=new Date,w=new Date;w.setDate(w.getDate()+7);const S={patientId:e,patientName:m,amount:c,status:"pending",date:g.toISOString().split("T")[0],dueDate:w.toISOString().split("T")[0],services:[u],description:`Cancellation Fee - Appointment on ${s.date} at ${s.time}`,appointmentId:t,createdAt:we(),updatedAt:we()},N=Se(ne,"invoices"),_=await Gt(N,S);return await ms(n,{cancellationFeeInvoiceId:_.id,cancellationFeeApplied:!0,cancellationFeeAmount:c}),{id:_.id,...S}}catch(n){throw console.error("Error creating cancellation fee invoice:",n),n}},ig=Object.freeze(Object.defineProperty({__proto__:null,SERVICE_PRICES:b2,createCancellationFeeInvoice:$M,generateInvoiceNumber:Wf,getInvoice:qf,getPatientInvoices:T2,getServicePrice:E2,processCardPayment:I2},Symbol.toStringTag,{value:"Module"})),BM=({invoice:t,onClose:e,onSuccess:n})=>{var q;const{user:r,showToast:s}=vt(),[i,o]=C.useState("card"),[c,u]=C.useState(!1),[d,f]=C.useState(0),[m,g]=C.useState(""),[w,S]=C.useState(""),[N,_]=C.useState(""),[x,y]=C.useState(""),[E,R]=C.useState(""),[P,M]=C.useState(""),[T,v]=C.useState(""),[I,A]=C.useState(""),[j,D]=C.useState(""),[k,z]=C.useState("");if(!t)return null;const X=B=>(B.replace(/\s+/g,"").match(/.{1,4}/g)||[]).join(" "),H=B=>{const O=B.target.value.replace(/\s+/g,"");O.length<=16&&/^\d*$/.test(O)&&g(O)},oe=async()=>{if(!t.id||!(r!=null&&r.email)){s("Missing payment information","error");return}u(!0),f(0);try{const B=setInterval(()=>{f(O=>O>=90?(clearInterval(B),90):O+10)},200);if(i==="card"){if(!m||!w||!N||!x||!E){s("Please fill in all card details","error"),u(!1),clearInterval(B);return}const O=await I2(t.id,{cardNumber:m,expiryMonth:N,expiryYear:x,cvv:E,cardholderName:w},r.email);clearInterval(B),f(100),O.success?(s(` Payment successful! Confirmation email sent to ${r.email}`,"success"),setTimeout(()=>{n(),e()},1e3)):(s(O.message,"error"),u(!1),f(0))}else if(i==="eft"){if(!P||!T||!I||!j){s("Please fill in all EFT details","error"),u(!1),clearInterval(B);return}clearInterval(B),f(100),s("EFT payment initiated. Please allow 1-3 business days for processing.","success"),setTimeout(()=>{e()},2e3)}else if(i==="cash"){if(!k||parseFloat(k)<t.amount){s("Insufficient cash amount","error"),u(!1),clearInterval(B);return}clearInterval(B),f(100),s("Cash payment recorded successfully","success"),setTimeout(()=>{n(),e()},1e3)}}catch(B){console.error("Payment error:",B),s("Payment processing failed. Please try again.","error"),u(!1),f(0)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark text-white p-6 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Payment Gateway"}),a.jsxs("p",{className:"text-white/80 mt-1",children:["Secure payment processing for Invoice #",(q=t.id)==null?void 0:q.slice(-8)]})]}),a.jsx("button",{onClick:e,disabled:c,className:"p-2 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(Kr,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-brand-light to-white border border-brand-teal/20 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Amount Due:"}),a.jsxs("span",{className:"text-3xl font-bold text-brand-dark",children:["R",t.amount.toFixed(2)]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Service:"})," ",t.description||t.service||"Medical Services"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Payment Method"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"card",icon:f2,label:"Card"},{id:"eft",icon:RM,label:"EFT"},{id:"cash",icon:jM,label:"Cash"}].map(B=>a.jsxs("button",{onClick:()=>o(B.id),disabled:c,className:`p-4 rounded-xl border-2 transition-all duration-300 ${i===B.id?"border-brand-teal bg-brand-light text-brand-teal shadow-lg":"border-gray-200 hover:border-brand-teal/50"} disabled:opacity-50`,children:[a.jsx(B.icon,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-semibold",children:B.label})]},B.id))})]}),i==="card"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Card Number"}),a.jsx("input",{type:"text",value:X(m),onChange:H,placeholder:"1234 5678 9012 3456",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cardholder Name"}),a.jsx("input",{type:"text",value:w,onChange:B=>S(B.target.value),placeholder:"John Doe",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Month"}),a.jsx("input",{type:"text",value:N,onChange:B=>{const O=B.target.value;/^\d{0,2}$/.test(O)&&parseInt(O||"0")<=12&&_(O)},placeholder:"MM",disabled:c,maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Year"}),a.jsx("input",{type:"text",value:x,onChange:B=>{const O=B.target.value;/^\d{0,2}$/.test(O)&&y(O)},placeholder:"YY",disabled:c,maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CVV"}),a.jsx("input",{type:"text",value:E,onChange:B=>{const O=B.target.value;/^\d{0,4}$/.test(O)&&R(O)},placeholder:"123",disabled:c,maxLength:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]})]})]}),i==="eft"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Account Holder Name"}),a.jsx("input",{type:"text",value:P,onChange:B=>M(B.target.value),placeholder:"John Doe",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Account Number"}),a.jsx("input",{type:"text",value:T,onChange:B=>v(B.target.value),placeholder:"1234567890",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bank Name"}),a.jsx("input",{type:"text",value:I,onChange:B=>A(B.target.value),placeholder:"Standard Bank",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Branch Code"}),a.jsx("input",{type:"text",value:j,onChange:B=>D(B.target.value),placeholder:"051001",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Note:"})," EFT payments typically take 1-3 business days to process. You will receive a confirmation email once the payment is verified."]})})]}),i==="cash"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cash Amount (R)"}),a.jsx("input",{type:"number",value:k,onChange:B=>z(B.target.value),placeholder:t.amount.toFixed(2),disabled:c,min:t.amount,step:"0.01",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono text-lg"})]}),k&&parseFloat(k)>t.amount&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Change Due:"})," R",(parseFloat(k)-t.amount).toFixed(2)]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Cash payments must be made in person at our clinic. This form records the payment for our records."]})})]}),c&&a.jsxs("div",{className:"space-y-2 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Processing payment..."}),a.jsxs("span",{className:"font-semibold text-brand-teal",children:[d,"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal to-brand-dark transition-all duration-300 ease-out",style:{width:`${d}%`}})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:e,disabled:c,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:oe,disabled:c,type:"button",className:"flex-1 px-6 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:transform-none flex items-center justify-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(en,{className:"w-5 h-5"}),"Pay R",t.amount.toFixed(2)]})})]}),a.jsx("div",{className:"text-center text-xs text-gray-500 pt-2",children:" Secure payment processing powered by Dermaglare Payment Gateway"})]})]})})},zM=()=>{const{user:t,showToast:e}=vt(),[n,r]=C.useState("invoices"),[s,i]=C.useState([]),[o,c]=C.useState(!0),[u,d]=C.useState(null),[f,m]=C.useState(!1),g=async()=>{if(t!=null&&t.uid)try{c(!0);const M=(await T2(t.uid)).map(T=>{var v,I,A;return{...T,invoiceNumber:`INV-${(v=T.id)==null?void 0:v.slice(-8).toUpperCase()}`,service:T.description||((A=(I=T.services)==null?void 0:I[0])==null?void 0:A.serviceName)||"Medical Service"}});i(M),c(!1)}catch(P){console.error("Error fetching invoices:",P),e("Failed to load invoices","error"),c(!1)}};C.useEffect(()=>{g()},[t]);const w=P=>{switch(P.toLowerCase()){case"paid":return"from-green-500 to-emerald-600";case"pending":return"from-yellow-500 to-orange-600";case"overdue":return"from-red-500 to-rose-600";case"cancelled":return"from-gray-500 to-slate-600";default:return"from-gray-500 to-slate-600"}},S=P=>{switch(P.toLowerCase()){case"paid":return a.jsx(en,{className:"w-5 h-5"});case"pending":return a.jsx(Oa,{className:"w-5 h-5"});case"overdue":return a.jsx(m2,{className:"w-5 h-5"});case"cancelled":return a.jsx(Kr,{className:"w-5 h-5"});default:return null}},N=s.filter(P=>P.status.toLowerCase()==="paid").reduce((P,M)=>P+M.amount,0),_=s.filter(P=>P.status.toLowerCase()==="pending"||P.status.toLowerCase()==="overdue").reduce((P,M)=>P+M.amount,0),x=s.filter(P=>{const M=new Date(P.date),T=new Date;return M.getMonth()===T.getMonth()&&M.getFullYear()===T.getFullYear()}).reduce((P,M)=>P+M.amount,0),y=P=>{d(P),m(!0)},E=async()=>{g()},R=P=>{const M=`
DERMAGLARE SKIN & LASER CLINIC
Invoice: ${P.invoiceNumber}
Date: ${new Date(P.date).toLocaleDateString()}
Due Date: ${P.dueDate?new Date(P.dueDate).toLocaleDateString():"N/A"}

Patient: ${P.patientName}
Service: ${P.service}
Amount: R${P.amount.toFixed(2)}
Status: ${P.status}

Thank you for choosing Dermaglare!
    `.trim(),T=new Blob([M],{type:"text/plain"}),v=URL.createObjectURL(T),I=document.createElement("a");I.href=v,I.download=`${P.invoiceNumber}.txt`,I.click(),URL.revokeObjectURL(v),e("Invoice downloaded successfully","success")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Billing & Payments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your invoices and make secure payments"})]})}),a.jsxs("div",{className:"flex gap-4 animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("button",{onClick:()=>r("invoices"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 ${n==="invoices"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:"Invoices"}),a.jsx("button",{onClick:()=>r("history"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 ${n==="history"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:"Payment History"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{label:"Total Paid",amount:N,icon:en,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Total Pending",amount:_,icon:Oa,color:"from-yellow-500 to-orange-600",delay:"0.3s"},{label:"Total Invoices",amount:s.length,icon:Di,color:"from-blue-500 to-cyan-600",delay:"0.4s",isCount:!0},{label:"This Month",amount:x,icon:g2,color:"from-purple-500 to-violet-600",delay:"0.5s"}].map(P=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:P.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${P.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(P.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:P.isCount?P.amount:`R${P.amount.toFixed(2)}`}),a.jsx("div",{className:"text-gray-600 font-medium",children:P.label})]},P.label))}),n==="invoices"?a.jsx("div",{className:"space-y-6",children:o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading invoices..."})]})}):s.length===0?a.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center shadow-lg",children:[a.jsx(Di,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Invoices Found"}),a.jsx("p",{className:"text-gray-600",children:"You don't have any invoices yet."})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.map((P,M)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.01] animate-slide-in-up",style:{animationDelay:`${.6+M*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${w(P.status)} animate-shimmer`}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(Di,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-brand-teal transition-colors duration-300",children:P.invoiceNumber}),a.jsx("p",{className:"text-gray-600",children:P.service})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Invoice Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(P.date).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Due Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:P.dueDate?new Date(P.dueDate).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Amount"}),a.jsxs("p",{className:"font-bold text-2xl text-gray-800",children:["R",P.amount.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-4",children:[a.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${w(P.status)} text-white font-semibold`,children:[S(P.status),P.status.charAt(0).toUpperCase()+P.status.slice(1)]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>R(P),className:"px-4 py-2 bg-brand-light text-brand-teal rounded-lg hover:bg-brand-teal hover:text-white font-semibold transform hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[a.jsx(xM,{className:"w-4 h-4"}),"Download"]}),P.status.toLowerCase()!=="paid"&&P.status.toLowerCase()!=="cancelled"&&P.id&&a.jsx("button",{onClick:()=>y(P),className:"px-4 py-2 bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark rounded-lg font-semibold transform hover:scale-105 transition-all duration-300",children:"Pay Now"})]})]})]})})]},P.id))})})}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Payment History"}),s.filter(P=>P.status.toLowerCase()==="paid").length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(AM,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No payment history yet."})]}):a.jsx("div",{className:"space-y-4",children:s.filter(P=>P.status.toLowerCase()==="paid").map(P=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:a.jsx(en,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:P.invoiceNumber}),a.jsx("p",{className:"text-sm text-gray-600",children:P.service}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(P.date).toLocaleDateString("en-ZA")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-xl text-green-600",children:["R",P.amount.toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:P.paymentMethod||"Card"})]})]},P.id))})]})}),f&&a.jsx(BM,{invoice:u,onClose:()=>{m(!1),d(null)},onSuccess:E})]})},Bo=({children:t,variant:e="primary",size:n="md",className:r="",onClick:s,disabled:i,type:o="button"})=>{const c="relative overflow-hidden font-medium rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",u={primary:"bg-brand-teal text-white hover:bg-brand-dark shadow-lg hover:shadow-xl hover:shadow-brand-teal/30",secondary:"bg-brand-yellow text-brand-dark hover:bg-yellow-400 shadow-lg hover:shadow-xl hover:shadow-brand-yellow/30",ghost:"bg-transparent text-brand-dark hover:bg-brand-teal/10 hover:text-brand-teal",danger:"bg-red-600 text-white hover:bg-red-700 shadow-lg hover:shadow-xl hover:shadow-red-600/30"},d={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},f=m=>{const g=m.currentTarget,w=document.createElement("span"),S=g.getBoundingClientRect(),N=Math.max(S.width,S.height),_=m.clientX-S.left-N/2,x=m.clientY-S.top-N/2;w.style.width=w.style.height=`${N}px`,w.style.left=`${_}px`,w.style.top=`${x}px`,w.classList.add("absolute","bg-white/30","rounded-full","pointer-events-none","animate-ping"),g.appendChild(w),setTimeout(()=>{w.remove()},600),s&&s(m)};return a.jsx("button",{type:o,disabled:i,onClick:f,className:`${c} ${u[e]} ${d[n]} ${r}`,children:a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:t})})},Bl=({id:t,label:e,type:n="text",placeholder:r,value:s,onChange:i,icon:o,disabled:c,defaultValue:u,error:d,required:f=!1})=>{const[m,g]=C.useState(!1);return a.jsxs("div",{className:"relative group",children:[a.jsx("label",{htmlFor:t,className:`
          block text-sm font-medium mb-2 transition-all duration-300
          ${m?"text-brand-teal":"text-gray-700"}
        `,children:e}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 transition-all duration-300 group-focus-within:text-brand-teal",children:Cw.cloneElement(o,{className:"w-5 h-5"})}),a.jsx("input",{id:t,type:n,placeholder:r,value:s,defaultValue:u,onChange:i,disabled:c,required:f,"aria-invalid":!!d,onFocus:()=>g(!0),onBlur:()=>g(!1),className:`
            w-full px-4 py-3 border-2 rounded-lg
            ${o?"pl-11":""}
            transition-all duration-300
            focus:outline-none focus:border-brand-teal focus:ring-4 focus:ring-brand-teal/20
            disabled:bg-gray-100 disabled:cursor-not-allowed
            hover:border-brand-teal/50
            ${m?"shadow-lg scale-[1.02]":""}
            ${d?"border-red-400 focus:ring-red-200":""}
          `})]}),d&&a.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:d})]})},WM=()=>{const t=Array.from({length:20});return a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map((e,n)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},n))})},qM=({className:t="w-5 h-5"})=>a.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),HM=()=>{const{login:t,signup:e,showToast:n}=vt(),[r,s]=C.useState(!0),[i,o]=C.useState(""),[c,u]=C.useState(""),[d,f]=C.useState(""),[m,g]=C.useState(""),[w,S]=C.useState(""),[N,_]=C.useState(""),[x,y]=C.useState(!1),[E,R]=C.useState(!1),[P,M]=C.useState(!1),[T,v]=C.useState(""),[I,A]=C.useState(!1),[j,D]=C.useState(!1),[k,z]=C.useState(!1),[X,H]=C.useState({}),oe=async $=>{$.preventDefault(),H({}),y(!0);try{const Z=La(i);if(!Z.isValid){H({email:Z.error}),y(!1),n(Z.error||"Invalid email","error");return}if(r)await t(i,c),n("Welcome back! ","success");else{const ve=d2(c);if(!ve.isValid){H({password:ve.error}),y(!1);return}const me=nM(c,d);if(!me.isValid){H({confirmPassword:me.error}),y(!1);return}const pe=w||m.split(" ")[0]||m,Ae=N||m.split(" ").slice(1).join(" ")||"";await e(i,c,m,{firstName:pe,lastName:Ae}),n("Account created successfully!  Please check your email to verify your account.","success")}}catch(Z){console.error("Login/Signup Error:",Z),H({general:Z.message||"Authentication failed"}),n(Z.message||"Authentication failed","error")}finally{y(!1)}},q=async()=>{try{n("Connecting to Google... ","info"),await iM(),n("Google login successful! ","success")}catch($){console.error("Google Login Error:",$),n($.message||"Google login failed","error")}},B=async()=>{if(!T){n("Please enter your email address","error");return}const $=La(T);if(!$.isValid){n($.error||"Invalid email","error");return}try{A(!0);const Z=await oM(T);n(Z.message||"Password reset email sent! ","success"),M(!1),v("")}catch(Z){n(Z.message||"Failed to send reset email","error")}finally{A(!1)}},O=()=>{R(!E),H({}),setTimeout(()=>{s(!r)},300)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsx(WM,{}),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/10 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/5 to-brand-yellow/5 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"w-full max-w-md relative z-10",style:{perspective:"1000px"},children:a.jsx("div",{className:`relative w-full transition-transform duration-700 transform-style-3d ${E?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:a.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl p-8 border border-white/50 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-brand-teal/20 via-brand-yellow/20 to-brand-teal/20 animate-shimmer",style:{backgroundSize:"200% 100%",filter:"blur(20px)",zIndex:-1}}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"relative inline-block mb-6 animate-slide-up",children:[a.jsx("div",{className:"relative p-4 bg-white rounded-3xl shadow-2xl animate-pulse-glow",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain"})}),a.jsx("div",{className:"absolute inset-0 border-4 border-brand-yellow/30 rounded-3xl animate-ping"}),a.jsx("div",{className:"absolute inset-0 border-2 border-brand-teal/20 rounded-3xl animate-pulse",style:{animationDelay:"0.5s"}})]}),a.jsx("h1",{className:"text-4xl font-bold text-brand-dark mb-2 animate-slide-up",style:{animationDelay:"100ms"},children:r?"Welcome Back!":"Join Dermaglare"}),a.jsx("p",{className:"text-gray-600 animate-slide-up",style:{animationDelay:"200ms"},children:r?"Continue your skincare journey":"Begin your transformation today"})]}),X.general&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg animate-slide-up",children:a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx(m2,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium",children:X.general})]})}),a.jsxs("form",{onSubmit:oe,className:"space-y-5",children:[!r&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"animate-slide-up grid grid-cols-2 gap-3",children:[a.jsx(Bl,{id:"firstName",label:"First Name",placeholder:"Jane",value:w,onChange:$=>{S($.target.value),g(`${$.target.value} ${N}`.trim())},icon:a.jsx(Ks,{}),required:!0}),a.jsx(Bl,{id:"lastName",label:"Last Name",placeholder:"Doe",value:N,onChange:$=>{_($.target.value),g(`${w} ${$.target.value}`.trim())},icon:a.jsx(Ks,{}),required:!0})]})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"100ms"},children:a.jsx(Bl,{id:"email",label:"Email Address",type:"email",placeholder:"jane@example.com",value:i,onChange:$=>o($.target.value),icon:a.jsx(fc,{}),error:X.email})}),a.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"200ms"},children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 text-gray-700",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:a.jsx(Rn,{className:"w-5 h-5"})}),a.jsx("input",{id:"password",type:j?"text":"password",placeholder:"",value:c,onChange:$=>u($.target.value),required:!0,className:`
                      w-full pl-10 pr-10 py-3 border-2 rounded-lg
                      focus:outline-none focus:ring-2 focus:ring-brand-teal focus:border-transparent
                      transition-all duration-300
                      ${X.password?"border-red-500":"border-gray-300"}
                    `}),a.jsx("button",{type:"button",onClick:()=>D(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-brand-teal transition-colors",children:j?a.jsx(hw,{className:"w-5 h-5"}):a.jsx(uu,{className:"w-5 h-5"})})]}),X.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:X.password})]}),!r&&a.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"250ms"},children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-2 text-gray-700",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:a.jsx(Rn,{className:"w-5 h-5"})}),a.jsx("input",{id:"confirmPassword",type:k?"text":"password",placeholder:"",value:d,onChange:$=>f($.target.value),required:!0,className:`
                        w-full pl-10 pr-10 py-3 border-2 rounded-lg
                        focus:outline-none focus:ring-2 focus:ring-brand-teal focus:border-transparent
                        transition-all duration-300
                        ${X.confirmPassword?"border-red-500":"border-gray-300"}
                      `}),a.jsx("button",{type:"button",onClick:()=>z(!k),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-brand-teal transition-colors",children:k?a.jsx(hw,{className:"w-5 h-5"}):a.jsx(uu,{className:"w-5 h-5"})})]}),X.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:X.confirmPassword})]}),!r&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 animate-slide-up",style:{animationDelay:"300ms"},children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password must contain:"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-3 h-3"}),"At least 8 characters"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-3 h-3"}),"One uppercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-3 h-3"}),"One lowercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-3 h-3"}),"One number"]})]})]}),r&&a.jsxs("div",{className:"flex items-center justify-between text-sm animate-slide-up",style:{animationDelay:"250ms"},children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-2 border-brand-teal text-brand-teal focus:ring-2 focus:ring-brand-teal/20 transition-all group-hover:scale-110"}),a.jsx("span",{className:"text-gray-600 group-hover:text-brand-teal transition-colors",children:"Remember me"})]}),a.jsx("button",{type:"button",className:"text-brand-teal hover:text-brand-dark font-medium hover:underline transition-all hover:scale-105",onClick:()=>M(!0),children:"Forgot Password?"})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"300ms"},children:a.jsxs(Bo,{type:"submit",size:"lg",className:"w-full relative overflow-hidden group",disabled:x,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-dark via-brand-teal to-brand-dark opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer",style:{backgroundSize:"200% 100%"}}),a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:x?a.jsx(uw,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[r?"Log In":"Create Account",a.jsx(cu,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})})]}),a.jsxs("div",{className:"relative my-6 animate-slide-up",style:{animationDelay:"350ms"},children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white/70 text-gray-500 font-medium",children:"Or continue with"})})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"400ms"},children:a.jsxs("button",{type:"button",onClick:q,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg hover:border-brand-teal hover:shadow-lg transition-all duration-300 group hover:scale-105 active:scale-95",children:[a.jsx(qM,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"font-medium text-gray-700 group-hover:text-brand-teal transition-colors",children:"Continue with Google"})]})}),a.jsx("div",{className:"mt-6 text-center animate-slide-up",style:{animationDelay:"450ms"},children:a.jsxs("p",{className:"text-gray-600",children:[r?"Don't have an account?":"Already have an account?",a.jsxs("button",{onClick:O,className:"ml-2 text-brand-teal font-semibold hover:text-brand-dark transition-all hover:scale-105 inline-block relative group",children:[r?"Sign Up":"Log In",a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-brand-teal group-hover:w-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"mt-8 flex items-center justify-center gap-6 text-xs text-gray-500 animate-slide-up",style:{animationDelay:"500ms"},children:[a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(Rn,{className:"w-3 h-3"}),a.jsx("span",{children:"Secure"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(ia,{className:"w-3 h-3"}),a.jsx("span",{children:"HIPAA Compliant"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(ia,{className:"w-3 h-3"}),a.jsx("span",{children:"Encrypted"})]})]})]})})}),a.jsx("div",{className:"absolute bottom-10 left-10 animate-bounce-subtle opacity-50",children:a.jsx(ia,{className:"w-12 h-12 text-brand-teal"})}),a.jsx("div",{className:"absolute top-10 right-10 animate-float opacity-50",style:{animationDelay:"1s"},children:a.jsx(Rn,{className:"w-10 h-10 text-brand-yellow"})}),P&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(fc,{className:"w-8 h-8 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"Reset Password"}),a.jsx("p",{className:"text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Bl,{id:"resetEmail",label:"Email Address",type:"email",placeholder:"jane@example.com",value:T,onChange:$=>v($.target.value),icon:a.jsx(fc,{})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{M(!1),v("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:I,children:"Cancel"}),a.jsx("button",{type:"button",onClick:B,disabled:I||!T,className:"flex-1 px-4 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:I?a.jsxs(a.Fragment,{children:[a.jsx(uw,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Sending..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(cu,{className:"w-5 h-5"}),a.jsx("span",{children:"Send Reset Link"})]})})]})]})]})})]})},GM=(t,e,n=20)=>{try{console.log(" Subscribing to notifications for user:",t);const r=zn(Se(ne,"notifications"),hr("userId","==",t),ti("createdAt","desc"),qp(n)),s=TE(r,i=>{console.log(" Notification snapshot received:",{size:i.size,empty:i.empty,docs:i.docs.length});const o=i.docs.map(c=>({id:c.id,...c.data()}));o.length>0?(console.log(" Notifications found:",o.length),console.log("First notification:",o[0])):console.log(" No notifications found for this user"),e(o)},i=>{console.error(" Error listening to notifications:",i)});return console.log(" Notification listener setup complete"),s}catch(r){return console.error(" Error setting up notifications listener:",r),()=>{}}},KM=async t=>{try{const e=zn(Se(ne,"notifications"),hr("userId","==",t),ti("createdAt","desc"));return(await $n(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching notifications:",e),e}},N2=async t=>{try{const e=Ve(ne,"notifications",t);await ms(e,{read:!0,readAt:we()})}catch(e){throw console.error("Error marking notification as read:",e),e}},QM=async t=>{try{const e=zn(Se(ne,"notifications"),hr("userId","==",t),hr("read","==",!1)),r=(await $n(e)).docs.map(s=>ms(Ve(ne,"notifications",s.id),{read:!0,readAt:we()}));await Promise.all(r),console.log(` Marked ${r.length} notifications as read`)}catch(e){throw console.error("Error marking all notifications as read:",e),e}},S2=t=>{switch(t){case"appointment_approved":return"";case"appointment_declined":return"";case"appointment_cancelled":return"";case"payment_received":return"";case"new_message":return"";case"general_message":return"";default:return""}},k2=t=>{try{const e=t.toDate(),r=new Date().getTime()-e.getTime(),s=Math.floor(r/6e4),i=Math.floor(r/36e5),o=Math.floor(r/864e5);return s<1?"Just now":s<60?`${s} minute${s>1?"s":""} ago`:i<24?`${i} hour${i>1?"s":""} ago`:o<7?`${o} day${o>1?"s":""} ago`:e.toLocaleDateString()}catch{return"Recently"}},YM=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(0),[s,i]=C.useState(!1),[o,c]=C.useState(!0),u=C.useRef(null),d=Wa(),{user:f}=vt();C.useEffect(()=>{if(!(f!=null&&f.uid)){c(!1);return}const w=GM(f.uid,S=>{e(S),r(S.filter(N=>!N.read).length),c(!1)},20);return()=>w()},[f]),C.useEffect(()=>{const w=S=>{u.current&&!u.current.contains(S.target)&&i(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const m=async w=>{var S;try{w.read||await N2(w.id),i(!1),w.actionUrl?d(w.actionUrl):(S=w.relatedTo)!=null&&S.appointmentId&&d("/appointments")}catch(N){console.error("Error handling notification click:",N)}},g=()=>{i(!1),d("/notifications")};return f?a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>i(!s),className:"relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Notifications",children:[a.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),n>0&&a.jsx("span",{className:"absolute top-0 right-0 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:n>9?"9+":n})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Notifications"}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n," unread"]})]})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:o?a.jsxs("div",{className:"p-4 text-center text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-sm",children:"Loading notifications..."})]}):t.length===0?a.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),a.jsx("p",{className:"text-sm",children:"No notifications yet"})]}):t.map(w=>a.jsx("div",{onClick:()=>m(w),className:`p-4 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors ${w.read?"bg-white dark:bg-gray-800":"bg-blue-50 dark:bg-blue-900/20"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl flex-shrink-0",children:S2(w.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900 dark:text-white line-clamp-1",children:w.title}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1 line-clamp-2",children:w.message}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:k2(w.createdAt)})]}),!w.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]})},w.id))}),a.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 text-center",children:a.jsx("button",{onClick:g,className:"text-sm text-teal-600 dark:text-teal-400 hover:underline font-medium",children:"View All Notifications"})})]})]}):null},XM=({children:t})=>{const[e,n]=C.useState(!0),{logout:r,user:s}=vt(),i=[{to:"/dashboard",icon:a.jsx(_M,{className:"w-6 h-6"}),label:"Dashboard",color:"from-brand-teal to-brand-dark"},{to:"/appointments",icon:a.jsx(Ft,{className:"w-6 h-6"}),label:"Appointments",color:"from-brand-yellow to-brand-teal"},{to:"/chatbot",icon:a.jsx(Ks,{className:"w-6 h-6"}),label:"Chatbot",color:"from-brand-teal to-brand-yellow"},{to:"/chat",icon:a.jsx(zf,{className:"w-6 h-6"}),label:"Chat",color:"from-brand-dark to-brand-teal"},{to:"/billing",icon:a.jsx(f2,{className:"w-6 h-6"}),label:"Billing",color:"from-brand-yellow to-brand-dark"},{to:"/profile",icon:a.jsx(Ks,{className:"w-6 h-6"}),label:"Profile",color:"from-brand-teal to-brand-yellow"},{to:"/settings",icon:a.jsx(bM,{className:"w-6 h-6"}),label:"Settings",color:"from-brand-dark to-brand-teal"}],o=()=>{var u;return a.jsxs("div",{className:`fixed top-0 left-0 h-full bg-gradient-to-b from-brand-dark via-brand-teal to-brand-dark text-white transition-all duration-500 ease-in-out shadow-2xl z-50 ${e?"w-72":"w-20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 h-28 border-b border-white/10 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-yellow/10 to-transparent animate-gradient-x"}),a.jsx("div",{className:`flex items-center justify-center overflow-hidden transition-all duration-500 relative z-10 ${e?"w-full":"w-0"}`,children:a.jsx("div",{className:"bg-white/95 px-4 py-2 rounded-xl shadow-lg",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain",onError:d=>{const f=d.target;f.style.display="none";const m=f.parentElement;m&&(m.innerHTML='<span class="text-2xl font-bold text-brand-teal">DERMAGLARE</span>')}})})}),a.jsx("button",{onClick:()=>n(!e),className:"p-2.5 text-brand-yellow hover:text-white focus:outline-none rounded-xl hover:bg-white/10 transition-all duration-300 relative z-10 group",children:a.jsx(EM,{className:"w-6 h-6 transform group-hover:rotate-180 transition-transform duration-300"})})]}),a.jsx("nav",{className:"mt-6 px-3",children:a.jsx("ul",{className:"space-y-2",children:i.map((d,f)=>a.jsx("li",{className:"animate-slide-in-left",style:{animationDelay:`${f*.05}s`},children:a.jsx(G_,{to:d.to,className:({isActive:m})=>`flex items-center p-3.5 rounded-xl transition-all duration-300 group relative overflow-hidden ${m?"bg-gradient-to-r "+d.color+" text-white shadow-2xl shadow-brand-yellow/20 scale-105":"text-white/70 hover:bg-white/10 hover:text-white hover:scale-105"}`,children:({isActive:m})=>a.jsxs(a.Fragment,{children:[m&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 animate-shimmer"}),a.jsx("div",{className:`relative transition-transform duration-300 ${m?"animate-bounce-subtle":"group-hover:scale-110"}`,children:d.icon}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:d.label}),m&&a.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-brand-yellow rounded-l-full animate-pulse"})]})})},d.to))})}),a.jsxs("div",{className:"absolute bottom-0 w-full p-4 border-t border-white/10 bg-gradient-to-t from-black/20 to-transparent",children:[e&&s&&a.jsx("div",{className:"mb-3 p-2.5 rounded-xl bg-white/5 backdrop-blur-sm animate-fade-in-up",children:a.jsxs("div",{className:"flex items-center space-x-2.5",children:[a.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg flex-shrink-0",children:((u=s.email)==null?void 0:u.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[a.jsx("p",{className:"text-xs font-semibold text-white truncate leading-tight",children:s.displayName||"Patient"}),a.jsx("p",{className:"text-[10px] text-white/60 truncate leading-tight",children:s.email})]})]})}),a.jsxs("button",{onClick:r,className:"flex items-center p-2.5 w-full text-white/70 hover:bg-red-500/20 hover:text-red-300 rounded-xl transition-all duration-300 group relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/10 to-red-500/0 opacity-0 group-hover:opacity-100 animate-shimmer"}),a.jsx(p2,{className:"w-5 h-5 relative z-10 transform group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:`ml-3 font-semibold text-sm whitespace-nowrap transition-all duration-500 relative z-10 ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:"Logout"})]})]})]})},c=()=>{var u;return a.jsx("header",{className:`fixed top-0 right-0 h-20 bg-white/80 backdrop-blur-xl border-b border-gray-200/50 z-40 transition-all duration-500 ease-in-out shadow-lg ${e?"left-72":"left-20"}`,children:a.jsxs("div",{className:"flex items-center justify-between h-full px-8",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent",children:"Welcome Back!"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx(YM,{}),a.jsxs("div",{className:"flex items-center space-x-3 p-2 pr-4 rounded-full bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 hover:from-brand-teal/20 hover:to-brand-yellow/20 transition-all duration-300 cursor-pointer",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:s!=null&&s.email?s.email.charAt(0).toUpperCase():"G"}),a.jsx("span",{className:"text-sm font-semibold text-brand-dark",children:((u=s==null?void 0:s.email)==null?void 0:u.split("@")[0])||"Guest"})]})]})]})})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/10",children:[a.jsx(o,{}),a.jsx(c,{}),a.jsx("main",{className:`transition-all duration-500 ease-in-out pt-20 ${e?"ml-72":"ml-20"}`,children:a.jsx("div",{className:"p-8 animate-fade-in-up",children:t})})]})},vw="I'm sorry, I can only answer frequently asked questions. For anything else, please kindly refer to our staff or your doctor.",JM=()=>{const[t,e]=C.useState([]);C.useEffect(()=>{(async()=>{try{const x=await $n(Se(ne,"chatbot_knowledge/categories/list"));let y=[];for(const E of x.docs){const R=await $n(Se(ne,`chatbot_knowledge/categories/list/${E.id}/questions`));for(const P of R.docs){const M=P.data();y.push({question:M.question||M.name||"",answer:M.answer||"",keywords:M.keywords||[]})}}e(y.slice(0,6)),r(y)}catch{e([])}})()},[]);const[n,r]=C.useState([]),[s,i]=C.useState([{sender:"bot",text:"Hello! I'm your virtual assistant. Ask me any question about the clinic, appointments, billing, or services!"}]),[o,c]=C.useState(""),u=C.useRef(null),[d,f]=C.useState(!1),[m,g]=C.useState(!1),w=C.useRef(null);C.useEffect(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth"})},[s,d]),C.useEffect(()=>{u.current&&u.current.focus()},[s]);const S=async(_,x)=>{_&&_.preventDefault();const y=x!==void 0?x:o;if(!y.trim())return;const E={sender:"user",text:y};i(R=>[...R,E]),c(""),g(!0),f(!0),setTimeout(()=>{const R=n.find(P=>P.question&&P.question.trim().toLowerCase()===y.trim().toLowerCase())||n.find(P=>{const M=y.toLowerCase().split(" ");return P.keywords&&P.keywords.some(T=>M.includes(T.toLowerCase()))});i(R?P=>[...P,{sender:"bot",text:R.answer||vw}]:P=>[...P,{sender:"bot",text:vw}]),g(!1),f(!1)},900+Math.random()*800)},N=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),S())};return a.jsxs("div",{className:"relative w-full h-screen min-h-screen flex flex-col bg-gradient-to-br from-brand-light/80 to-brand-yellow/30 rounded-none shadow-none border-0",children:[a.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none",children:[a.jsx("svg",{className:"absolute top-0 left-0 w-[28rem] h-[28rem] opacity-30 animate-float-slow",viewBox:"0 0 400 400",children:a.jsx("circle",{cx:"200",cy:"200",r:"180",fill:"#14b8a6",fillOpacity:"0.10"})}),a.jsx("svg",{className:"absolute bottom-0 right-0 w-[22rem] h-[22rem] opacity-20 animate-float-slower",viewBox:"0 0 300 300",children:a.jsx("rect",{x:"0",y:"0",width:"300",height:"300",rx:"80",fill:"#f4e48e",fillOpacity:"0.10"})})]}),a.jsxs("h2",{className:"text-4xl font-extrabold mb-6 text-brand-dark tracking-tight drop-shadow-lg flex items-center gap-3 justify-center",children:[a.jsx("span",{className:"animate-wave inline-block text-5xl",children:""})," Clinic Chatbot"]}),a.jsxs("div",{className:"flex-1 overflow-y-auto glassmorphic border border-brand-teal/20 p-10 mb-6 shadow-2xl backdrop-blur-2xl relative transition-all duration-700 min-h-[500px] h-full max-h-none",children:[s.length===0&&a.jsx("div",{className:"flex flex-col items-center justify-center h-full text-2xl text-brand-dark/60 font-semibold animate-fade-in",children:a.jsx("span",{children:"Welcome! Ask me anything about the clinic, appointments, or billing."})}),s.map((_,x)=>a.jsxs("div",{className:`flex mb-4 items-end ${_.sender==="user"?"justify-end":"justify-start"}`,children:[_.sender==="bot"&&a.jsx("span",{className:"mr-2 animate-bounce-bot",children:a.jsx(cw,{className:"w-8 h-8 text-brand-teal drop-shadow-glow"})}),a.jsxs("div",{className:`relative px-6 py-4 rounded-2xl max-w-[80%] text-lg font-medium shadow-lg transition-all duration-700
                  ${_.sender==="user"?"bg-brand-teal text-white rounded-br-none animate-slide-in-right":"bg-white/90 text-brand-dark border border-brand-teal/10 rounded-bl-none animate-slide-in-left"}
                `,style:{animationDelay:`${x*60}ms`},children:[a.jsx("span",{style:{whiteSpace:"pre-line",wordBreak:"break-word",display:"block",lineHeight:"1.7"},className:"whitespace-pre-line break-words",children:_.text}),_.sender==="bot"&&a.jsx("span",{className:"absolute -bottom-2 left-4 w-3 h-3 bg-brand-teal rounded-full opacity-30 animate-pulse-bubble"})]}),_.sender==="user"&&a.jsx("span",{className:"ml-2",children:a.jsx(Ks,{className:"w-8 h-8 text-brand-dark"})})]},x)),m&&a.jsxs("div",{className:"flex items-end mb-4 animate-fade-in",children:[a.jsx("span",{className:"mr-2 animate-bounce-bot",children:a.jsx(cw,{className:"w-8 h-8 text-brand-teal drop-shadow-glow animate-pulse"})}),a.jsxs("div",{className:"px-5 py-3 rounded-2xl bg-white/80 text-brand-dark border border-brand-teal/10 max-w-[70%] text-base font-medium shadow-md flex items-center gap-2",children:[a.jsxs("span",{className:"flex gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-brand-teal rounded-full animate-typing-bounce"}),a.jsx("span",{className:"w-2 h-2 bg-brand-teal rounded-full animate-typing-bounce delay-150"}),a.jsx("span",{className:"w-2 h-2 bg-brand-teal rounded-full animate-typing-bounce delay-300"})]}),a.jsx("span",{className:"ml-2 text-sm font-light",children:"Typing..."})]})]}),a.jsx("div",{ref:w})]}),t.length>0&&a.jsx("div",{className:"flex flex-wrap gap-3 mb-6 animate-fade-in-up justify-center",children:t.map((_,x)=>a.jsx("button",{type:"button",className:"faq-chip px-5 py-3 rounded-full bg-gradient-to-r from-brand-teal/90 to-brand-yellow/80 text-brand-dark font-semibold shadow-lg hover:scale-110 hover:from-brand-yellow/90 hover:to-brand-teal/80 focus:ring-4 focus:ring-brand-teal/40 focus:outline-none active:scale-95 transition-all duration-300 border-2 border-brand-teal/20 animate-float",style:{animationDelay:`${x*120}ms`},onClick:()=>S(void 0,_.question),disabled:d,tabIndex:0,children:_.question},_.question))}),a.jsxs("form",{onSubmit:S,className:"flex gap-4 relative z-10 justify-center w-full sticky bottom-0 bg-gradient-to-t from-white/80 to-transparent p-6 backdrop-blur-xl border-t border-brand-teal/10",style:{boxShadow:"0 -8px 32px 0 rgba(31, 38, 135, 0.08)"},children:[a.jsx("input",{ref:u,className:"flex-1 border border-brand-teal/40 bg-white/90 rounded-2xl px-6 py-4 focus:outline-none focus:ring-4 focus:ring-brand-teal/30 text-xl shadow-lg transition-all duration-500 max-w-2xl",type:"text",placeholder:"Type your question... (Enter to send, Shift+Enter for new line)",value:o,onChange:_=>c(_.target.value),onKeyDown:N,disabled:d,autoFocus:!0}),a.jsxs("button",{type:"submit",className:"bg-gradient-to-r from-brand-teal to-brand-yellow text-white px-8 py-4 rounded-2xl font-bold text-xl shadow-xl hover:from-brand-yellow hover:to-brand-teal transition-all duration-500 active:scale-95 focus:outline-none focus:ring-4 focus:ring-brand-teal relative overflow-hidden",disabled:d||!o.trim(),children:[a.jsx("span",{className:"relative z-10",children:"Send"}),a.jsx("span",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-all rounded-2xl"})]})]}),a.jsx("style",{children:`
        .glassmorphic {
          background: rgba(255,255,255,0.8);
          box-shadow: 0 12px 48px 0 rgba(31, 38, 135, 0.14);
          backdrop-filter: blur(18px);
          border-radius: 32px;
        }
        .drop-shadow-glow {
          filter: drop-shadow(0 0 12px #14b8a6cc);
        }
        .animate-float-slow {
          animation: float-slow 14s ease-in-out infinite alternate;
        }
        .animate-float-slower {
          animation: float-slower 20s ease-in-out infinite alternate;
        }
        .animate-float {
          animation: float 5s ease-in-out infinite alternate;
        }
        @keyframes float-slow {
          0% { transform: translateY(0px) scale(1); }
          100% { transform: translateY(-40px) scale(1.06); }
        }
        @keyframes float-slower {
          0% { transform: translateY(0px) scale(1); }
          100% { transform: translateY(40px) scale(1.05); }
        }
        @keyframes float {
          0% { transform: translateY(0px); }
          100% { transform: translateY(-20px); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.9s cubic-bezier(.4,2,.6,1) both;
        }
        @keyframes fade-in-up {
          0% { opacity: 0; transform: translateY(60px); }
          100% { opacity: 1; transform: translateY(0); }
        }
        .faq-chip {
          cursor: pointer;
          will-change: transform, box-shadow;
        }
        .animate-wave {
          animation: wave 2.2s infinite;
          transform-origin: 70% 70%;
          display: inline-block;
        }
        @keyframes wave {
          0%, 60%, 100% { transform: rotate(0deg); }
          10% { transform: rotate(14deg); }
          20% { transform: rotate(-8deg); }
          30% { transform: rotate(14deg); }
          40% { transform: rotate(-4deg); }
          50% { transform: rotate(10deg); }
        }
        .animate-bounce-bot {
          animation: bounce-bot 1.2s infinite alternate;
        }
        @keyframes bounce-bot {
          0% { transform: translateY(0); }
          100% { transform: translateY(-10px); }
        }
        .animate-slide-in-right {
          animation: slide-in-right 0.7s cubic-bezier(.4,2,.6,1) both;
        }
        @keyframes slide-in-right {
          0% { opacity: 0; transform: translateX(80px) scale(0.95); }
          100% { opacity: 1; transform: translateX(0) scale(1); }
        }
        .animate-slide-in-left {
          animation: slide-in-left 0.7s cubic-bezier(.4,2,.6,1) both;
        }
        @keyframes slide-in-left {
          0% { opacity: 0; transform: translateX(-80px) scale(0.95); }
          100% { opacity: 1; transform: translateX(0) scale(1); }
        }
        .animate-pulse-bubble {
          animation: pulse-bubble 1.2s infinite alternate;
        }
        @keyframes pulse-bubble {
          0% { opacity: 0.2; transform: scale(1); }
          100% { opacity: 0.5; transform: scale(1.3); }
        }
        .animate-fade-in {
          animation: fade-in 0.7s ease-in;
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-typing-bounce {
          animation: typing-bounce 1s infinite;
        }
        @keyframes typing-bounce {
          0%, 80%, 100% { transform: scale(1); opacity: 0.5; }
          40% { transform: scale(1.3); opacity: 1; }
        }
      `})]})},Hf=({children:t,className:e="",hover:n=!0,style:r})=>a.jsx("div",{className:`
        bg-white rounded-xl shadow-md p-6 
        transition-all duration-300
        ${n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":""}
        ${e}
        animate-scale-in
      `,style:r,children:t}),ZM=({icon:t,label:e,value:n,trend:r,color:s,delay:i,onClick:o})=>{const[c,u]=C.useState(0),d=typeof n=="number"?n:0;return C.useEffect(()=>{if(typeof n=="number"){const g=d/60;let w=0;const S=setInterval(()=>{w+=g,w>=d?(u(d),clearInterval(S)):u(Math.floor(w))},2e3/60);return()=>clearInterval(S)}},[d]),a.jsx("div",{className:"group animate-scale-in",style:{animationDelay:`${i}ms`},onClick:o,children:a.jsxs(Hf,{className:"relative overflow-hidden hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 cursor-pointer border-2 border-transparent hover:border-brand-yellow/50",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s} opacity-5 group-hover:opacity-10 transition-opacity duration-500`}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${s} group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:a.jsx("div",{className:"text-white",children:t})}),r&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 text-sm font-semibold",children:[a.jsx(g2,{className:"w-4 h-4"}),a.jsx("span",{children:r})]})]}),a.jsx("h3",{className:"text-4xl font-bold text-brand-dark mb-2 group-hover:scale-105 transition-transform duration-300",children:typeof n=="number"?c:n}),a.jsx("p",{className:"text-gray-600 font-medium",children:e})]})]})})},e6=()=>{var E;const{user:t}=vt(),e=Wa(),[n,r]=C.useState(""),[s,i]=C.useState([]),[o,c]=C.useState([]),[u,d]=C.useState(0),[f,m]=C.useState(!0),[g,w]=C.useState([]);C.useEffect(()=>{const R=new Date().getHours();R<12?r("Good Morning"):R<18?r("Good Afternoon"):r("Good Evening")},[]),C.useEffect(()=>{(async()=>{if(t)try{m(!0);const P=await lu(t.uid);i(P);const M=await uM(t.uid);c(M),d(M.length);const T=[];M.slice(0,2).forEach(v=>{const I=v.uploadedAt?new Date(v.uploadedAt):new Date;T.push({id:v.id||"",action:"New document uploaded",detail:v.name,time:S(I),icon:a.jsx(Di,{className:"w-5 h-5"}),color:"bg-brand-yellow",onClick:()=>e("/documents"),timestamp:I})}),P.filter(v=>{var I,A;return v.status==="Confirmed"||v.status==="confirmed"||v.status==="upcoming"||((I=v.status)==null?void 0:I.toLowerCase())==="confirmed"||((A=v.status)==null?void 0:A.toLowerCase())==="upcoming"}).slice(0,2).forEach(v=>{const I=v.createdAt?new Date(v.createdAt):new Date;T.push({id:v.id||"",action:"Appointment confirmed",detail:`${v.type} - ${new Date(v.date).toLocaleDateString()}`,time:S(I),icon:a.jsx(ia,{className:"w-5 h-5"}),color:"bg-green-500",onClick:()=>e("/appointments"),timestamp:I})}),T.sort((v,I)=>I.timestamp.getTime()-v.timestamp.getTime()),w(T.slice(0,3))}catch(P){console.error("Error fetching dashboard data:",P)}finally{m(!1)}})()},[t,e]);const S=R=>{const P=Math.floor((new Date().getTime()-R.getTime())/1e3);if(P<60)return"Just now";const M=Math.floor(P/60);if(M<60)return`${M} ${M===1?"minute":"minutes"} ago`;const T=Math.floor(M/60);if(T<24)return`${T} ${T===1?"hour":"hours"} ago`;const v=Math.floor(T/24);if(v<7)return`${v} ${v===1?"day":"days"} ago`;const I=Math.floor(v/7);if(I<4)return`${I} ${I===1?"week":"weeks"} ago`;const A=Math.floor(v/30);return`${A} ${A===1?"month":"months"} ago`},N=s.filter(R=>{var P,M;return R.status==="Pending"||R.status==="Confirmed"||R.status==="upcoming"||((P=R.status)==null?void 0:P.toLowerCase())==="pending"||((M=R.status)==null?void 0:M.toLowerCase())==="confirmed"}),_=s.filter(R=>{var P;return R.status==="Completed"||R.status==="completed"||((P=R.status)==null?void 0:P.toLowerCase())==="completed"}).length,x=[{icon:a.jsx(Ft,{className:"w-8 h-8"}),label:"Upcoming Appointments",value:N.length,trend:N.length>0?`+${N.length}`:void 0,color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{icon:a.jsx(Di,{className:"w-8 h-8"}),label:"Documents",value:u,color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{icon:a.jsx(zf,{className:"w-8 h-8"}),label:"Unread Messages",value:0,color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{icon:a.jsx(ia,{className:"w-8 h-8"}),label:"Completed Visits",value:_,color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}],y=N.slice(0,3).map(R=>{const P=new Date(R.date),M=new Date,T=new Date(M);T.setDate(T.getDate()+1);let v="";return P.toDateString()===M.toDateString()?v="Today":P.toDateString()===T.toDateString()?v="Tomorrow":v=P.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),{id:R.id||"",title:R.type,doctor:R.doctorName||"Dr. Jabu Nkehli",date:v,time:R.time,type:"In-Person",color:"from-brand-teal to-brand-dark"}});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-teal via-brand-dark to-brand-teal p-8 md:p-12 shadow-2xl animate-fade-in-down",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-yellow/20 rounded-full filter blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-teal/30 rounded-full filter blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"bg-white/95 p-4 rounded-2xl shadow-2xl backdrop-blur-sm",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Logo",className:"h-20 w-auto object-contain",onError:R=>{const P=R.target;P.style.display="none";const M=P.parentElement;M&&(M.innerHTML='<span class="text-4xl font-bold text-brand-teal px-4">DERMAGLARE</span>')}})}),a.jsxs("div",{className:"border-l-2 border-brand-yellow/50 pl-6",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-3 animate-slide-in-left flex items-center gap-3",children:[n,","," ",(t==null?void 0:t.displayName)||((E=t==null?void 0:t.email)==null?void 0:E.split("@")[0])||"there","!",a.jsx("span",{className:"text-brand-yellow",children:""})]}),a.jsxs("p",{className:"text-brand-yellow text-lg animate-slide-in-left",style:{animationDelay:"0.1s"},children:["Your skin health journey continues."," ",N.length>0?`You have ${N.length} upcoming ${N.length===1?"appointment":"appointments"}.`:"Book your next appointment today."]})]})]}),a.jsx("div",{className:"animate-scale-in",style:{animationDelay:"0.2s"},children:a.jsxs(Bo,{onClick:()=>e("/appointments"),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark font-bold shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[a.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map((R,P)=>a.jsx(ZM,{...R,delay:P*100},R.label))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent animate-slide-in-right",children:"Upcoming Appointments"}),a.jsxs(Bo,{onClick:()=>e("/appointments"),variant:"ghost",className:"text-brand-teal hover:text-brand-dark",children:["View All ",a.jsx(cu,{className:"w-4 h-4 ml-2"})]})]}),a.jsx("div",{className:"space-y-4",children:y.length>0?y.map((R,P)=>a.jsx("div",{className:"group animate-slide-in-up",style:{animationDelay:`${P*100}ms`},children:a.jsx(Hf,{className:"hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 cursor-pointer border-2 border-transparent hover:border-brand-yellow/30",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${R.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:a.jsx(Ft,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:R.title}),a.jsx("p",{className:"text-gray-600",children:R.doctor})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-brand-teal/10 text-brand-teal",children:R.type})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ft,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:R.date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oa,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:R.time})]})]})]}),a.jsx(Bo,{onClick:()=>e("/appointments"),size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-brand-teal to-brand-dark text-white",children:"View Details"})]})})},R.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming appointments"})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent mb-6 animate-slide-in-left",children:"Recent Activity"}),a.jsxs(Hf,{className:"bg-gradient-to-br from-white to-brand-light/50 backdrop-blur-sm animate-scale-in",children:[a.jsx("div",{className:"space-y-4",children:g.length>0?g.map((R,P)=>a.jsxs("div",{onClick:R.onClick,className:"flex items-start gap-4 p-3 rounded-xl hover:bg-white/60 transition-all duration-300 cursor-pointer group animate-slide-in-right",style:{animationDelay:`${P*100}ms`},children:[a.jsx("div",{className:`${R.color} p-2.5 rounded-xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300`,children:R.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:R.action}),a.jsx("p",{className:"text-sm text-gray-600",children:R.detail}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:R.time})]})]},R.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})}),a.jsxs(Bo,{onClick:()=>e("/appointments"),variant:"ghost",className:"w-full mt-4 text-brand-teal hover:text-brand-dark",children:["View All Activity ",a.jsx(cu,{className:"w-4 h-4 ml-2"})]})]}),a.jsxs("div",{className:"mt-6 animate-scale-in",style:{animationDelay:"0.4s"},children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-4",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Book",icon:a.jsx(Ft,{className:"w-5 h-5"}),color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{label:"Upload",icon:a.jsx(Di,{className:"w-5 h-5"}),color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{label:"Message",icon:a.jsx(zf,{className:"w-5 h-5"}),color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{label:"History",icon:a.jsx(y2,{className:"w-5 h-5"}),color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}].map((R,P)=>a.jsxs("button",{onClick:R.onClick,className:`p-4 rounded-xl bg-gradient-to-br ${R.color} text-white font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 animate-scale-in`,style:{animationDelay:`${.5+P*.1}s`},children:[R.icon,a.jsx("span",{className:"block mt-2 text-sm",children:R.label})]},R.label))})]})]})]})]})},t6=()=>{const{user:t,showToast:e,refreshUser:n}=vt(),[r,s]=C.useState(!1),[i,o]=C.useState(!1),[c,u]=C.useState(!0),[d,f]=C.useState(!1),[m,g]=C.useState(!1),[w,S]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),N=C.useRef(null),[_,x]=C.useState({name:"",email:"",phone:"",address:"",dateOfBirth:"",bloodType:"",height:"",weight:"",allergies:"",emergencyContact:"",photoURL:""}),[y,E]=C.useState(0),[R,P]=C.useState(0),[M,T]=C.useState(0);C.useEffect(()=>{(async()=>{var oe,q,B,O;if(t)try{u(!0);const $=await Ma(t.uid),Z=await lu(t.uid);x($?{name:$.name||t.displayName||"",email:$.email||t.email||"",phone:$.phone||"",address:$.address||"",dateOfBirth:$.dob||"",bloodType:$.bloodType||"",height:((q=(oe=$.vitals)==null?void 0:oe.heightCm)==null?void 0:q.toString())||"",weight:((O=(B=$.vitals)==null?void 0:B.weightKg)==null?void 0:O.toString())||"",allergies:Array.isArray($.allergies)?$.allergies.join(", "):"",emergencyContact:$.emergencyContact||"",photoURL:$.photoURL||t.photoURL||""}:pe=>({...pe,name:t.displayName||"",email:t.email||"",photoURL:t.photoURL||""}));const ve=Z.filter(pe=>pe.status==="Pending"||pe.status==="Confirmed").length,me=Z.filter(pe=>pe.status==="Completed").length;E(Z.length),P(me),T(ve)}catch($){console.error("Error fetching profile:",$),e("Failed to load profile data","error")}finally{u(!1)}})()},[t,e]);const v=async()=>{if(t)try{const H={name:_.name,email:_.email,phone:_.phone,address:_.address,dob:_.dateOfBirth,allergies:_.allergies?_.allergies.split(",").map(oe=>oe.trim()):[],vitals:{heightCm:_.height?parseFloat(_.height):void 0,weightKg:_.weight?parseFloat(_.weight):void 0},bloodType:_.bloodType,emergencyContact:_.emergencyContact,photoURL:_.photoURL};await ji(t.uid,H),Bn.currentUser&&_.name&&_.name!==t.displayName&&await Mb(Bn.currentUser,{displayName:_.name}),s(!1),await n(),e("Profile updated successfully! ","success")}catch(H){console.error("Error saving profile:",H),e("Failed to update profile","error")}},I=async()=>{if(t)try{const H={bloodType:_.bloodType,allergies:_.allergies?_.allergies.split(",").map(oe=>oe.trim()):[],vitals:{heightCm:_.height?parseFloat(_.height):void 0,weightKg:_.weight?parseFloat(_.weight):void 0},emergencyContact:_.emergencyContact};await ji(t.uid,H),o(!1),await n(),e("Medical information updated successfully! ","success")}catch(H){console.error("Error saving medical info:",H),e("Failed to update medical information","error")}},A=async H=>{if(!H.target.files||!H.target.files[0]||!t)return;const oe=H.target.files[0];if(!oe.type.startsWith("image/")){e("Please select an image file","error");return}if(oe.size>5*1024*1024){e("Image size must be less than 5MB","error");return}try{f(!0);const q=QL(tM,`profile-pictures/${t.uid}/${Date.now()}_${oe.name}`);await GL(q,oe);const B=await KL(q),O={photoURL:B};await ji(t.uid,O),x($=>({...$,photoURL:B})),await n(),e("Profile picture updated successfully! ","success")}catch(q){console.error("Error uploading profile picture:",q),e("Failed to upload profile picture","error")}finally{f(!1)}},j=async()=>{if(!(!t||!t.email)){if(!w.currentPassword||!w.newPassword||!w.confirmPassword){e("Please fill in all password fields","error");return}if(w.newPassword!==w.confirmPassword){e("New passwords do not match","error");return}if(w.newPassword.length<6){e("Password must be at least 6 characters","error");return}try{const H=cr.credential(t.email,w.currentPassword);await bf(t,H),await Ob(t,w.newPassword),g(!1),S({currentPassword:"",newPassword:"",confirmPassword:""}),e("Password changed successfully! ","success")}catch(H){console.error("Error changing password:",H),H.code==="auth/wrong-password"?e("Current password is incorrect","error"):e("Failed to change password","error")}}},k=(()=>{let H=0;const oe=[_.name,_.email,_.phone,_.address,_.dateOfBirth,_.bloodType,_.height,_.weight,_.emergencyContact],q=oe.filter(B=>B&&B.trim()!=="").length;if(H+=q/oe.length*60,y>0){const B=R/y*40;H+=B}return Math.round(H)})(),z=k>=80?"Excellent":k>=60?"Good":k>=40?"Fair":"Needs Attention",X=[{label:"Total Appointments",value:y.toString(),change:`${M} upcoming`,icon:Ft,color:"from-blue-500 to-cyan-600"},{label:"Health Score",value:`${k}%`,change:z,icon:pw,color:k>=80?"from-green-500 to-emerald-600":k>=60?"from-yellow-500 to-orange-500":"from-red-500 to-rose-600"},{label:"Completed Visits",value:R.toString(),change:`${Math.round(R/(y||1)*100)}% attendance`,icon:y2,color:"from-purple-500 to-violet-600"}];return c?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading profile..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"My Profile"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your personal information and health records"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden animate-slide-in-left",children:[a.jsx("div",{className:"h-32 bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal relative",children:a.jsx("div",{className:"absolute inset-0 bg-black/10"})}),a.jsxs("div",{className:"px-6 pb-6",children:[a.jsxs("div",{className:"relative -mt-16 mb-4",children:[_.photoURL?a.jsx("img",{src:_.photoURL,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl mx-auto animate-scale-in"}):a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center text-brand-dark font-bold text-5xl border-4 border-white shadow-xl mx-auto animate-scale-in",children:_.name.charAt(0).toUpperCase()}),a.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:A,className:"hidden"}),a.jsx("button",{onClick:()=>{var H;return(H=N.current)==null?void 0:H.click()},disabled:d,className:"absolute bottom-0 right-1/2 translate-x-16 w-10 h-10 bg-gradient-to-r from-brand-teal to-brand-dark rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Upload profile picture",children:d?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(PM,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:_.name}),a.jsx("p",{className:"text-gray-600",children:_.email}),a.jsx("div",{className:"mt-4 inline-block px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-sm font-semibold",children:"Active Patient"})]}),a.jsx("div",{className:"space-y-3",children:X.map((H,oe)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-br from-brand-light to-white rounded-xl animate-fade-in",style:{animationDelay:`${oe*.1}s`},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${H.color} flex items-center justify-center`,children:a.jsx(H.icon,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:H.label}),a.jsx("p",{className:"font-bold text-gray-800",children:H.value})]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:H.change})]},H.label))}),a.jsxs("div",{className:"space-y-3 mt-6",children:[a.jsx("button",{onClick:()=>s(!r),className:"w-full bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:r?a.jsxs(a.Fragment,{children:[a.jsx(en,{className:"w-5 h-5"}),"Save Changes"]}):a.jsxs(a.Fragment,{children:[a.jsx(vh,{className:"w-5 h-5"}),"Edit Profile"]})}),a.jsxs("button",{onClick:()=>g(!0),className:"w-full bg-gradient-to-r from-purple-500 to-violet-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(Rn,{className:"w-5 h-5"}),"Change Password"]})]})]})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(Ks,{className:"w-5 h-5 text-white"})}),"Personal Information"]}),!r&&a.jsx("button",{onClick:()=>s(!0),className:"text-brand-teal hover:text-brand-dark transition-colors duration-300",children:a.jsx(vh,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),r?a.jsx("input",{type:"text",value:_.name,onChange:H=>x({..._,name:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:_.name})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),r?a.jsx("input",{type:"email",value:_.email,onChange:H=>x({..._,email:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(fc,{className:"w-4 h-4 text-brand-teal"}),_.email]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),r?a.jsx("input",{type:"tel",value:_.phone,onChange:H=>x({..._,phone:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(v2,{className:"w-4 h-4 text-brand-teal"}),_.phone]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date of Birth"}),r?a.jsx("input",{type:"date",value:_.dateOfBirth,onChange:H=>x({..._,dateOfBirth:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(Ft,{className:"w-4 h-4 text-brand-teal"}),new Date(_.dateOfBirth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Address"}),r?a.jsx("input",{type:"text",value:_.address,onChange:H=>x({..._,address:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(w2,{className:"w-4 h-4 text-brand-teal"}),_.address]})]})]}),r&&a.jsxs("div",{className:"mt-6 flex gap-4 animate-fade-in",children:[a.jsx("button",{onClick:v,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Save Changes"}),a.jsx("button",{onClick:()=>s(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-up",style:{animationDelay:"0.3s"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(pw,{className:"w-5 h-5 text-white"})}),"Medical Information"]}),!i&&a.jsx("button",{onClick:()=>o(!0),className:"text-brand-teal hover:text-brand-dark transition-colors duration-300",children:a.jsx(vh,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Blood Type"}),i?a.jsxs("select",{value:_.bloodType,onChange:H=>x({..._,bloodType:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",children:[a.jsx("option",{value:"",children:"Select Blood Type"}),a.jsx("option",{value:"A+",children:"A+"}),a.jsx("option",{value:"A-",children:"A-"}),a.jsx("option",{value:"B+",children:"B+"}),a.jsx("option",{value:"B-",children:"B-"}),a.jsx("option",{value:"AB+",children:"AB+"}),a.jsx("option",{value:"AB-",children:"AB-"}),a.jsx("option",{value:"O+",children:"O+"}),a.jsx("option",{value:"O-",children:"O-"})]}):a.jsx("div",{className:"px-4 py-3 bg-red-50 rounded-xl text-red-800 font-bold",children:_.bloodType||"Not specified"})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Allergies (comma-separated)"}),i?a.jsx("input",{type:"text",value:_.allergies,onChange:H=>x({..._,allergies:H.target.value}),placeholder:"e.g., Penicillin, Peanuts",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-orange-50 rounded-xl text-orange-800 font-medium",children:_.allergies||"None"})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Height (cm)"}),i?a.jsx("input",{type:"number",value:_.height,onChange:H=>x({..._,height:H.target.value}),placeholder:"e.g., 170",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:_.height?`${_.height} cm`:"Not specified"})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Weight (kg)"}),i?a.jsx("input",{type:"number",value:_.weight,onChange:H=>x({..._,weight:H.target.value}),placeholder:"e.g., 70",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:_.weight?`${_.weight} kg`:"Not specified"})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Emergency Contact"}),i?a.jsx("input",{type:"text",value:_.emergencyContact,onChange:H=>x({..._,emergencyContact:H.target.value}),placeholder:"Name and phone number",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:_.emergencyContact||"Not specified"})]})]}),i&&a.jsxs("div",{className:"mt-6 flex gap-4 animate-fade-in",children:[a.jsx("button",{onClick:I,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Save Medical Info"}),a.jsx("button",{onClick:()=>o(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]})]})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(Rn,{className:"w-5 h-5 text-white"})}),"Change Password"]}),a.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Kr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),a.jsx("input",{type:"password",value:w.currentPassword,onChange:H=>S({...w,currentPassword:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Enter current password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:w.newPassword,onChange:H=>S({...w,newPassword:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Enter new password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:w.confirmPassword,onChange:H=>S({...w,confirmPassword:H.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Confirm new password"})]}),a.jsxs("div",{className:"flex gap-4 mt-6",children:[a.jsx("button",{onClick:j,className:"flex-1 bg-gradient-to-r from-purple-500 to-violet-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Change Password"}),a.jsx("button",{onClick:()=>{g(!1),S({currentPassword:"",newPassword:"",confirmPassword:""})},className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]})]})})]})},C2=C.createContext(void 0),n6=()=>{const t=C.useContext(C2);if(!t)throw new Error("useAppearance must be used within AppearanceProvider");return t},r6=({children:t})=>{const{user:e}=vt(),[n,r]=C.useState({theme:"light",fontSize:"medium"});C.useEffect(()=>{(async()=>{var o;if(e!=null&&e.uid)try{const c=await Ma(e.uid);(o=c==null?void 0:c.settings)!=null&&o.appearance&&r(c.settings.appearance)}catch(c){console.error("Error loading appearance settings:",c)}})()},[e==null?void 0:e.uid]),C.useEffect(()=>{const i=document.documentElement;let o=n.theme;switch(n.theme==="auto"&&(o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o==="dark"?i.classList.add("dark"):i.classList.remove("dark"),n.fontSize){case"small":i.style.fontSize="13px";break;case"medium":i.style.fontSize="14px";break;case"large":i.style.fontSize="15px";break}},[n]);const s=i=>{r(i)};return a.jsx(C2.Provider,{value:{appearance:n,setAppearance:s},children:t})},s6=()=>{const{user:t,showToast:e,logout:n}=vt(),{appearance:r,setAppearance:s}=n6(),[i,o]=C.useState(!1),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[m,g]=C.useState(!1),[w,S]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[N,_]=C.useState(""),[x,y]=C.useState([{id:"email_notifications",label:"Email Notifications",description:"Receive email updates about appointments and health reminders",enabled:!0},{id:"sms_notifications",label:"SMS Notifications",description:"Get text messages for appointment reminders",enabled:!1},{id:"push_notifications",label:"Push Notifications",description:"Receive push notifications on your devices",enabled:!0},{id:"marketing_emails",label:"Marketing Emails",description:"Receive newsletters and promotional content",enabled:!1}]),[E,R]=C.useState([{id:"profile_visibility",label:"Profile Visibility",description:"Make your profile visible to healthcare providers",enabled:!0},{id:"share_data",label:"Share Anonymous Data",description:"Help improve our services with anonymous usage data",enabled:!1},{id:"two_factor",label:"Two-Factor Authentication",description:"Add an extra layer of security to your account",enabled:!0}]);C.useEffect(()=>{(async()=>{var X,H;if(t!=null&&t.uid)try{const oe=await Ma(t.uid);(X=oe==null?void 0:oe.settings)!=null&&X.notifications&&y(oe.settings.notifications),(H=oe==null?void 0:oe.settings)!=null&&H.privacy&&R(oe.settings.privacy)}catch(oe){console.error("Error loading settings:",oe)}})()},[t]);const P=async()=>{if(t!=null&&t.uid)try{o(!0),await ji(t.uid,{settings:{notifications:x,privacy:E,appearance:r}}),e("Settings saved successfully!","success"),o(!1)}catch(z){console.error("Error saving settings:",z),e("Failed to save settings","error"),o(!1)}},M=z=>{y(x.map(X=>X.id===z?{...X,enabled:!X.enabled}:X)),setTimeout(P,500)},T=z=>{R(E.map(X=>X.id===z?{...X,enabled:!X.enabled}:X)),setTimeout(P,500)},v=async z=>{const X={...r,theme:z};s(X);try{t!=null&&t.uid&&await ji(t.uid,{settings:{notifications:x,privacy:E,appearance:X}})}catch(H){console.error("Error saving theme:",H)}},I=async z=>{const X={...r,fontSize:z};s(X);try{t!=null&&t.uid&&await ji(t.uid,{settings:{notifications:x,privacy:E,appearance:X}})}catch(H){console.error("Error saving font size:",H)}},A=async()=>{if(!w.currentPassword||!w.newPassword||!w.confirmPassword){e("Please fill in all password fields","error");return}if(w.newPassword!==w.confirmPassword){e("New passwords don't match","error");return}if(w.newPassword.length<6){e("Password must be at least 6 characters","error");return}try{const z=Bn.currentUser;if(!z||!z.email){e("No user logged in","error");return}const X=cr.credential(z.email,w.currentPassword);await bf(z,X),await Ob(z,w.newPassword),e("Password changed successfully!","success"),u(!1),S({currentPassword:"",newPassword:"",confirmPassword:""})}catch(z){console.error("Error changing password:",z),z.code==="auth/wrong-password"?e("Current password is incorrect","error"):e("Failed to change password","error")}},j=async()=>{if(!N){e("Please enter your password to confirm","error");return}try{const z=Bn.currentUser;if(!z||!z.email){e("No user logged in","error");return}const X=cr.credential(z.email,N);await bf(z,X),await KA(z),e("Account deleted successfully","success"),f(!1)}catch(z){console.error("Error deleting account:",z),z.code==="auth/wrong-password"?e("Password is incorrect","error"):e("Failed to delete account","error")}},D=async()=>{try{await n(),e("Signed out successfully","success")}catch(z){console.error("Error signing out:",z),e("Failed to sign out","error")}},k=({enabled:z,onToggle:X})=>a.jsx("button",{onClick:X,className:`relative w-14 h-7 rounded-full transition-all duration-300 ${z?"bg-gradient-to-r from-brand-teal to-brand-dark":"bg-gray-300"}`,children:a.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 ${z?"transform translate-x-7":""}`})});return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Settings"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your account preferences and settings"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8 animate-slide-in-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Navigation"}),a.jsx("nav",{className:"space-y-2",children:[{icon:dw,label:"Notifications",href:"#notifications"},{icon:gw,label:"Privacy & Security",href:"#privacy"},{icon:yw,label:"Appearance",href:"#appearance"},{icon:Rn,label:"Account",href:"#account"}].map((z,X)=>a.jsxs("a",{href:z.href,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-brand-light transition-all duration-300 group animate-fade-in",style:{animationDelay:`${X*.1}s`},children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:a.jsx(z.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"font-semibold text-gray-700 group-hover:text-brand-teal transition-colors duration-300",children:z.label})]},z.label))})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{id:"notifications",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:a.jsx(dw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage how you receive notifications"})]})]}),a.jsx("div",{className:"space-y-4",children:x.map((z,X)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${X*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:z.label}),a.jsx("p",{className:"text-sm text-gray-600",children:z.description})]}),a.jsx(k,{enabled:z.enabled,onToggle:()=>M(z.id)})]},z.id))})]}),a.jsxs("div",{id:"privacy",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(gw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Privacy & Security"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Control your privacy and security settings"})]})]}),a.jsx("div",{className:"space-y-4 mb-6",children:E.map((z,X)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${.3+X*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:z.label}),a.jsx("p",{className:"text-sm text-gray-600",children:z.description})]}),a.jsx(k,{enabled:z.enabled,onToggle:()=>T(z.id)})]},z.id))}),a.jsx("div",{className:"pt-6 border-t border-gray-200",children:a.jsxs("button",{onClick:()=>u(!0),className:"w-full bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(Rn,{className:"w-5 h-5"}),"Change Password"]})})]}),a.jsxs("div",{id:"appearance",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.4s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(yw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Appearance"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Customize how the app looks"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Theme"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(z=>a.jsx("button",{onClick:()=>v(z),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${r.theme===z?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:z.charAt(0).toUpperCase()+z.slice(1)},z))})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Font Size"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["small","medium","large"].map(z=>a.jsx("button",{onClick:()=>I(z),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${r.fontSize===z?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:z.charAt(0).toUpperCase()+z.slice(1)},z))})]})]})]}),a.jsxs("div",{id:"account",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.6s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center",children:a.jsx(Rn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Account Actions"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your account data"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-between p-4 bg-yellow-50 hover:bg-yellow-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(uu,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Privacy Policy"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review how we protect your data"})]})]}),a.jsx("div",{className:"text-yellow-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-between p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.9s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fw,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Delete Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and data"})]})]}),a.jsx("div",{className:"text-red-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{onClick:D,className:"w-full flex items-center justify-center gap-2 p-4 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 animate-fade-in",style:{animationDelay:"1s"},children:[a.jsx(p2,{className:"w-5 h-5"}),"Sign Out"]})]})]})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center",children:a.jsx(Rn,{className:"w-5 h-5 text-white"})}),"Change Password"]}),a.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Kr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),a.jsx("input",{type:"password",value:w.currentPassword,onChange:z=>S({...w,currentPassword:z.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Enter current password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:w.newPassword,onChange:z=>S({...w,newPassword:z.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Enter new password (min 6 characters)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:w.confirmPassword,onChange:z=>S({...w,confirmPassword:z.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Confirm new password"})]}),a.jsxs("div",{className:"flex gap-4 mt-6",children:[a.jsx("button",{onClick:A,className:"flex-1 bg-gradient-to-r from-brand-yellow to-orange-400 text-brand-dark py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Change Password"}),a.jsx("button",{onClick:()=>{u(!1),S({currentPassword:"",newPassword:"",confirmPassword:""})},className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]})]})}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-red-600 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center",children:a.jsx(fw,{className:"w-5 h-5 text-white"})}),"Delete Account"]}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Kr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("p",{className:"text-gray-700 mb-4",children:[a.jsx("strong",{className:"text-red-600",children:"Warning:"})," This action cannot be undone. All your data, including appointments, medical records, and billing information will be permanently deleted."]}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Please enter your password to confirm account deletion."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:N,onChange:z=>_(z.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-red-500 outline-none transition-all duration-300",placeholder:"Enter your password"})]}),a.jsxs("div",{className:"flex gap-4 mt-6",children:[a.jsx("button",{onClick:j,className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Delete Account"}),a.jsx("button",{onClick:()=>{f(!1),_("")},className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6 shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white pb-4 border-b",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-amber-600 flex items-center justify-center",children:a.jsx(uu,{className:"w-5 h-5 text-white"})}),"Privacy Policy"]}),a.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Kr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-6 text-gray-700",children:[a.jsxs("section",{children:[a.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Data Collection"}),a.jsx("p",{className:"mb-2",children:"We collect and process your personal health information to provide you with quality healthcare services. This includes:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[a.jsx("li",{children:"Personal identification information (name, email, phone)"}),a.jsx("li",{children:"Medical history and health records"}),a.jsx("li",{children:"Appointment and consultation details"}),a.jsx("li",{children:"Billing and payment information"})]})]}),a.jsxs("section",{children:[a.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Data Protection"}),a.jsx("p",{children:"Your data is encrypted both in transit and at rest. We use industry-standard security measures including SSL encryption, secure cloud storage, and regular security audits to protect your information."})]}),a.jsxs("section",{children:[a.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Data Sharing"}),a.jsx("p",{children:"We do not sell your personal information. Your data is only shared with:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[a.jsx("li",{children:"Healthcare providers involved in your care"}),a.jsx("li",{children:"Payment processors for billing purposes"}),a.jsx("li",{children:"Legal authorities when required by law"})]})]}),a.jsxs("section",{children:[a.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Your Rights"}),a.jsx("p",{className:"mb-2",children:"You have the right to:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[a.jsx("li",{children:"Access your personal data at any time"}),a.jsx("li",{children:"Request correction of inaccurate data"}),a.jsx("li",{children:"Request deletion of your account and data"}),a.jsx("li",{children:"Export your data in a machine-readable format"}),a.jsx("li",{children:"Opt-out of marketing communications"})]})]}),a.jsxs("section",{children:[a.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:"Contact Us"}),a.jsxs("p",{children:["If you have any questions about our privacy practices, please contact us at"," ",a.jsx("a",{href:"mailto:privacy@dermaglare.com",className:"text-brand-teal hover:underline",children:"privacy@dermaglare.com"})]})]}),a.jsx("div",{className:"pt-4 border-t",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Last updated: ",new Date().toLocaleDateString()]})})]}),a.jsx("div",{className:"mt-6 pt-4 border-t",children:a.jsx("button",{onClick:()=>g(!1),className:"w-full bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Close"})})]})})]})},i6=()=>{const{user:t,showToast:e}=vt(),[n,r]=C.useState("all"),[s,i]=C.useState(!1),[o,c]=C.useState([]),[u,d]=C.useState(!0),[f,m]=C.useState(!1),[g,w]=C.useState("list"),[S,N]=C.useState(new Date),[_,x]=C.useState(null),[y,E]=C.useState({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"});C.useEffect(()=>{(async()=>{if(t)try{d(!0);const Z=(await lu(t.uid)).map(ve=>{let me="upcoming";return ve.status==="Completed"?me="completed":ve.status==="Cancelled"?me="cancelled":me="upcoming",{id:ve.id||"",title:ve.type,doctor:ve.doctorName||"Dr. Jabu Nkehli",date:ve.date,time:ve.time,location:"Dermaglare Clinic - Main Branch",type:ve.type,status:me}});c(Z)}catch($){console.error("Error fetching appointments:",$),e("Failed to load appointments","error")}finally{d(!1)}})()},[t,e]);const R=async O=>{try{await cM(String(O)),c(o.map($=>$.id===O?{...$,status:"cancelled"}:$)),e("Appointment cancelled successfully","success")}catch($){console.error("Error cancelling appointment:",$),e("Failed to cancel appointment","error")}},P=async O=>{if(O.preventDefault(),console.log("=== Booking Appointment ==="),console.log("User:",t),console.log("Form data:",y),!t){e("Please login to book an appointment","error");return}if(!y.date||!y.time||!y.type){console.log("Validation failed - missing fields"),e("Please fill in all required fields","error");return}try{m(!0);const{getServicePrice:$}=await Xr(async()=>{const{getServicePrice:tt}=await Promise.resolve().then(()=>ig);return{getServicePrice:tt}},void 0),Z=$(y.type),ve=(Z==null?void 0:Z.basePrice)||0,me={patientId:t.uid,patientName:t.displayName||t.email||"Patient",patientEmail:t.email||"",date:y.date,time:y.time,type:y.type,status:"Pending",doctorName:y.doctorName,notes:y.notes,amount:ve};console.log("Appointment data to save:",me),console.log("Service amount:",ve);const pe=await lM(me);console.log("Appointment booked with ID:",pe);const Ae=await lu(t.uid);console.log("Fetched appointments:",Ae);const lt=Ae.map(tt=>{let Wn="upcoming";return tt.status==="Completed"?Wn="completed":tt.status==="Cancelled"?Wn="cancelled":Wn="upcoming",{id:tt.id||"",title:tt.type,doctor:tt.doctorName||"Dr. Jabu Nkehli",date:tt.date,time:tt.time,location:"Dermaglare Clinic - Main Branch",type:tt.type,status:Wn}});console.log("Transformed appointments:",lt),c(lt),E({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"}),i(!1),m(!1),e("Appointment booked successfully! ","success")}catch($){console.error("Error booking appointment:",$),e(`Failed to book appointment: ${$}`,"error"),m(!1)}},M=n==="all"?o:o.filter(O=>O.status===n),T=o.filter(O=>O.status==="upcoming").length,v=o.filter(O=>O.status==="completed").length,I=new Date().getMonth(),A=new Date().getFullYear(),j=o.filter(O=>{const $=new Date(O.date);return $.getMonth()===I&&$.getFullYear()===A}).length,D=O=>{const $=O.getFullYear(),Z=O.getMonth(),ve=new Date($,Z,1),pe=new Date($,Z+1,0).getDate(),Ae=ve.getDay();return{daysInMonth:pe,startingDayOfWeek:Ae,year:$,month:Z}},k=O=>o.filter($=>{const Z=new Date($.date);return Z.getDate()===O.getDate()&&Z.getMonth()===O.getMonth()&&Z.getFullYear()===O.getFullYear()}),z=()=>{N(new Date(S.getFullYear(),S.getMonth()-1,1))},X=()=>{N(new Date(S.getFullYear(),S.getMonth()+1,1))},H=O=>{const $=new Date;return O.getDate()===$.getDate()&&O.getMonth()===$.getMonth()&&O.getFullYear()===$.getFullYear()},oe=(O,$)=>O?O.getDate()===$.getDate()&&O.getMonth()===$.getMonth()&&O.getFullYear()===$.getFullYear():!1,q=O=>{switch(O){case"upcoming":return"from-green-500 to-emerald-600";case"completed":return"from-blue-500 to-cyan-600";case"cancelled":return"from-red-500 to-rose-600";default:return"from-gray-500 to-slate-600"}},B=O=>{switch(O){case"upcoming":return a.jsx(Oa,{className:"w-5 h-5"});case"completed":return a.jsx(en,{className:"w-5 h-5"});case"cancelled":return a.jsx(Kr,{className:"w-5 h-5"});default:return null}};return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading appointments..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Appointments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your healthcare appointments"})]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(yM,{className:"w-5 h-5"}),"Book Appointment"]})]}),a.jsxs("div",{className:"flex gap-4 items-center animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("div",{className:"flex gap-2",children:["all","upcoming","completed","cancelled"].map(O=>a.jsx("button",{onClick:()=>r(O),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 ${n===O?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:O.charAt(0).toUpperCase()+O.slice(1)},O))}),a.jsxs("div",{className:"ml-auto flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(TM,{className:"w-5 h-5 text-brand-teal"})}),a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(IM,{className:"w-5 h-5 text-brand-teal"})})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{label:"Upcoming",count:T,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Completed",count:v,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"This Month",count:j,color:"from-purple-500 to-violet-600",delay:"0.4s"}].map(O=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:O.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${O.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(Ft,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:O.count}),a.jsx("div",{className:"text-gray-600 font-medium",children:O.label})]},O.label))}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-1 shadow-md",children:[a.jsx("button",{onClick:()=>w("list"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="list"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"List View"}),a.jsx("button",{onClick:()=>w("calendar"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="calendar"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"Calendar View"})]})}),g==="calendar"&&a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:S.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:z,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(wM,{className:"w-6 h-6 text-brand-teal"})}),a.jsx("button",{onClick:X,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(vM,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(O=>a.jsx("div",{className:"text-center font-bold text-gray-600 py-2",children:O},O)),(()=>{const{daysInMonth:O,startingDayOfWeek:$,year:Z,month:ve}=D(S),me=[];for(let pe=0;pe<$;pe++)me.push(a.jsx("div",{className:"aspect-square"},`empty-${pe}`));for(let pe=1;pe<=O;pe++){const Ae=new Date(Z,ve,pe),lt=k(Ae),tt=H(Ae),Wn=oe(_,Ae);me.push(a.jsx("div",{onClick:()=>x(Ae),className:`aspect-square p-2 rounded-lg border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${tt?"border-brand-yellow bg-brand-yellow/10 ring-2 ring-brand-yellow ring-offset-2":Wn?"border-brand-teal bg-brand-teal/10":"border-gray-200 hover:border-brand-teal/50"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("span",{className:`text-sm font-semibold ${tt?"text-brand-teal":"text-gray-700"}`,children:pe}),lt.length>0&&a.jsxs("div",{className:"flex-1 flex flex-col gap-1 mt-1",children:[lt.slice(0,2).map((ps,od)=>a.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${ps.status==="upcoming"?"bg-green-100 text-green-700":ps.status==="completed"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,title:`${ps.time} - ${ps.title}`,children:ps.time},od)),lt.length>2&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",lt.length-2," more"]})]})]})},pe))}return me})()]}),_&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:["Appointments on"," ",_.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),k(_).length>0?a.jsx("div",{className:"space-y-3",children:k(_).map(O=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${O.status==="upcoming"?"bg-green-500":O.status==="completed"?"bg-blue-500":"bg-red-500"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:O.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[O.time,"  ",O.doctor]})]})]}),O.status==="upcoming"&&a.jsx("button",{onClick:()=>R(O.id),className:"text-red-600 hover:text-red-700 text-sm font-semibold hover:underline transition-colors",children:"Cancel"})]},O.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments on this date"})]})]}),g==="list"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:M.map((O,$)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.5+$*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${q(O.status)} animate-shimmer`}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1 group-hover:text-brand-teal transition-colors duration-300",children:O.title}),a.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-brand-light text-brand-teal",children:O.type})]}),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${q(O.status)} text-white text-sm font-semibold`,children:[B(O.status),O.status]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(Ks,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Doctor"}),a.jsx("p",{className:"font-semibold",children:O.doctor})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center",children:a.jsx(Ft,{className:"w-5 h-5 text-brand-dark"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),a.jsxs("p",{className:"font-semibold",children:[new Date(O.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})," ","at ",O.time]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(w2,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),a.jsx("p",{className:"font-semibold",children:O.location})]})]})]}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[O.status==="upcoming"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Reschedule"}),a.jsx("button",{onClick:()=>R(O.id),className:"px-6 bg-red-50 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-100 transform hover:scale-105 transition-all duration-300",children:"Cancel"})]}),O.status==="completed"&&a.jsx("button",{className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"View Details"})]})]})]},O.id))}),M.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(Ft,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:n==="all"?"You don't have any appointments scheduled yet.":`No ${n} appointments.`}),a.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Book Your First Appointment"})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full mx-4 shadow-2xl animate-scale-in max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-1",children:"Book New Appointment"}),a.jsx("p",{className:"text-brand-yellow",children:"Schedule your visit with us"})]}),a.jsx("button",{onClick:()=>i(!1),className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(Kr,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Appointment Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:y.type,onChange:O=>E({...y,type:O.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select appointment type"}),a.jsx("option",{value:"Standard Consultation",children:"Standard Consultation - R1,300"}),a.jsx("option",{value:"Medical Dermatology",children:"Medical Dermatology - R1,500"}),a.jsx("option",{value:"Cosmetic Dermatology",children:"Cosmetic Dermatology - R1,600"}),a.jsx("option",{value:"Laser Treatment",children:"Laser Treatment - R3,500"}),a.jsx("option",{value:"Chemical Peel",children:"Chemical Peel - R1,800"}),a.jsx("option",{value:"Microneedling",children:"Microneedling - R1,900"}),a.jsx("option",{value:"Botox Injections",children:"Botox Injections - R4,500"}),a.jsx("option",{value:"Platelet-Rich Plasma (PRP)",children:"PRP Therapy - R3,200"}),a.jsx("option",{value:"Skin Tightening",children:"Skin Tightening - R2,200"}),a.jsx("option",{value:"Mole Removal",children:"Mole Removal - R1,800"}),a.jsx("option",{value:"Skin Cancer Screening",children:"Skin Cancer Screening - R1,750"}),a.jsx("option",{value:"Acne Treatment",children:"Acne Treatment - R1,650"}),a.jsx("option",{value:"Paediatric Dermatology",children:"Paediatric Dermatology - R1,450"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Doctor ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:y.doctorName,onChange:O=>E({...y,doctorName:O.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"Dr. Jabu Nkehli",children:"Dr. Jabu Nkehli - Dermatologist"}),a.jsx("option",{value:"Dr. Sarah Johnson",children:"Dr. Sarah Johnson - Specialist"}),a.jsx("option",{value:"Dr. Michael Chen",children:"Dr. Michael Chen - Cosmetic Dermatology"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"date",value:y.date,onChange:O=>E({...y,date:O.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsxs("select",{value:y.time,onChange:O=>E({...y,time:O.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select time"}),a.jsx("option",{value:"08:00 AM",children:"08:00 AM"}),a.jsx("option",{value:"09:00 AM",children:"09:00 AM"}),a.jsx("option",{value:"10:00 AM",children:"10:00 AM"}),a.jsx("option",{value:"11:00 AM",children:"11:00 AM"}),a.jsx("option",{value:"12:00 PM",children:"12:00 PM"}),a.jsx("option",{value:"01:00 PM",children:"01:00 PM"}),a.jsx("option",{value:"02:00 PM",children:"02:00 PM"}),a.jsx("option",{value:"03:00 PM",children:"03:00 PM"}),a.jsx("option",{value:"04:00 PM",children:"04:00 PM"}),a.jsx("option",{value:"05:00 PM",children:"05:00 PM"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:y.notes,onChange:O=>E({...y,notes:O.target.value}),rows:4,placeholder:"Please provide any additional information about your condition or concerns...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors resize-none text-gray-700"})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ft,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important Information:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Appointments are subject to availability and confirmation"}),a.jsx("li",{children:"You will receive a confirmation email within 24 hours"}),a.jsx("li",{children:"Please arrive 10 minutes before your appointment"})]})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Booking..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(en,{className:"w-5 h-5"}),a.jsx("span",{children:"Confirm Booking"})]})})]})]})]})})]})},o6=()=>{const{user:t,showToast:e}=vt(),[n,r]=C.useState(""),[s,i]=C.useState([]),[o,c]=C.useState(null),[u,d]=C.useState(!0),[f,m]=C.useState(!1),g=C.useRef(null),w={name:"Dermaglare Support",role:"Customer Support",avatar:"DS"};C.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{d(!0);const E=await dM(t.uid,t.displayName||t.email||"Patient");c(E);const R=await hM(E),P=R.map(M=>{var I;let T="support",v="";return M.senderId===t.uid?T="user":M.senderRole==="doctor"||M.senderId==="doctor"||(I=M.senderName)!=null&&I.toLowerCase().includes("dr")?(T="doctor",v=M.senderName||"Dr. Jabu Nkehli"):(T="support",v=M.senderName||"Support Team"),{id:M.id||"",sender:T,text:M.text,timestamp:S(M.timestamp),read:M.read||!1,senderName:v}});i(P),R.length>0&&await mM(E),d(!1)}catch(E){console.error("Error initializing chat:",E),e("Failed to load chat","error"),d(!1)}})()},[t]),C.useEffect(()=>{if(!o||!(t!=null&&t.uid))return;const y=pM(o,E=>{const R=E.map(P=>{var v;let M="support",T="";return P.senderId===t.uid?M="user":P.senderRole==="doctor"||P.senderId==="doctor"||(v=P.senderName)!=null&&v.toLowerCase().includes("dr")?(M="doctor",T=P.senderName||"Dr. Jabu Nkehli"):(M="support",T=P.senderName||"Support Team"),{id:P.id||"",sender:M,text:P.text,timestamp:S(P.timestamp),read:P.read||!1,senderName:T}});i(R)});return()=>y()},[o,t]);const S=y=>{if(!y)return"";let E;return y.toDate?E=y.toDate():y.seconds?E=new Date(y.seconds*1e3):E=new Date(y),E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},N=()=>{var y;(y=g.current)==null||y.scrollIntoView({behavior:"smooth"})};C.useEffect(()=>{N()},[s]);const _=async y=>{var R;if(y.preventDefault(),!n.trim()||!o||!(t!=null&&t.uid)||f)return;const E=n.trim();try{m(!0),r("");const P=t.displayName||((R=t.email)==null?void 0:R.split("@")[0])||"Patient";await fM(o,t.uid,E,P),N()}catch(P){console.error("Error sending message:",P),e("Failed to send message","error"),r(E)}finally{m(!1)}},x=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),_(y))};return a.jsxs("div",{className:"h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex flex-col",children:[a.jsxs("div",{className:"mb-6 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Messages"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Connect with your healthcare providers"})]}),a.jsx("div",{className:"flex-1 flex flex-col overflow-hidden animate-slide-in-up",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col h-full",children:[a.jsxs("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-4 flex items-center justify-between animate-slide-in-down",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-brand-teal font-bold",children:w.avatar}),a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white",children:w.name}),a.jsxs("p",{className:"text-xs text-brand-yellow",children:["Online"," "," ",w.role]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(v2,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(SM,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(kM,{className:"w-5 h-5 text-white"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-brand-light/20 to-white",children:[u?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]})}):s.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center animate-fade-in",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(mw,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Start the conversation"}),a.jsxs("p",{className:"text-gray-500",children:["Send a message to ",w.name]})]})}):s.map((y,E)=>a.jsx("div",{className:`flex ${y.sender==="user"?"justify-end":"justify-start"} animate-slide-in-up`,style:{animationDelay:`${E*.05}s`},children:a.jsxs("div",{className:"max-w-[70%]",children:[y.sender==="doctor"&&a.jsxs("div",{className:"flex items-center gap-2 mb-2 ml-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center text-white text-xs font-bold",children:"JN"}),a.jsx("span",{className:"text-xs font-semibold text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:y.senderName||"Dr. Jabu Nkehli"})]}),y.sender==="support"&&a.jsx("div",{className:"flex items-center gap-2 mb-2 ml-2",children:a.jsx("span",{className:"text-xs font-semibold text-gray-600 bg-gray-100 px-2 py-1 rounded-full",children:y.senderName||"Support Team"})}),a.jsxs("div",{className:`${y.sender==="user"?"bg-gradient-to-br from-brand-teal to-brand-dark text-white":y.sender==="doctor"?"bg-gradient-to-br from-purple-500 to-violet-600 text-white border-2 border-purple-300":"bg-white shadow-md"} rounded-2xl p-4 transform hover:scale-[1.02] transition-all duration-300`,children:[a.jsx("p",{className:`mb-2 ${y.sender==="user"||y.sender==="doctor"?"text-white":"text-gray-800"}`,children:y.text}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-xs ${y.sender==="user"?"text-brand-yellow":y.sender==="doctor"?"text-purple-200":"text-gray-500"}`,children:y.timestamp}),y.sender==="user"&&a.jsx(en,{className:`w-4 h-4 ${y.read?"text-brand-yellow":"text-white/50"}`})]})]})]})},y.id)),f&&a.jsx("div",{className:"flex justify-end animate-fade-in",children:a.jsx("div",{className:"max-w-[70%] bg-gradient-to-br from-brand-teal/50 to-brand-dark/50 text-white rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("span",{className:"text-xs text-brand-yellow",children:"Sending..."})]})})}),a.jsx("div",{ref:g})]}),a.jsx("form",{onSubmit:_,className:"p-4 border-t border-gray-200 bg-white",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(NM,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(CM,{className:"w-5 h-5"})}),a.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),onKeyPress:x,placeholder:"Type your message...",disabled:f,className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300 disabled:opacity-50"}),a.jsx("button",{type:"submit",disabled:!n.trim()||f,className:"bg-gradient-to-r from-brand-teal to-brand-dark text-white p-3 rounded-xl hover:shadow-lg transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center min-w-[48px]",children:f?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(mw,{className:"w-5 h-5"})})]})})]})})]})},a6=()=>{const[t,e]=C.useState([]),[n,r]=C.useState("all"),[s,i]=C.useState(!0),{user:o,showToast:c}=vt(),u=Wa();C.useEffect(()=>{(async()=>{if(o!=null&&o.uid)try{i(!0);const _=await KM(o.uid);e(_)}catch(_){console.error("Error fetching notifications:",_),c("Failed to load notifications","error")}finally{i(!1)}})()},[o,c]);const d=n==="unread"?t.filter(N=>!N.read):t,f=t.filter(N=>!N.read).length,m=async N=>{var _;try{N.read||(await N2(N.id),e(t.map(x=>x.id===N.id?{...x,read:!0}:x))),N.actionUrl?u(N.actionUrl):(_=N.relatedTo)!=null&&_.appointmentId&&u("/appointments")}catch(x){console.error("Error handling notification click:",x),c("Failed to mark notification as read","error")}},g=async()=>{if(o!=null&&o.uid)try{await QM(o.uid),e(t.map(N=>({...N,read:!0}))),c("All notifications marked as read","success")}catch(N){console.error("Error marking all as read:",N),c("Failed to mark all as read","error")}},w=N=>{switch(N){case"urgent":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-blue-500 bg-blue-50";case"low":return"border-gray-300 bg-gray-50";default:return"border-gray-300 bg-gray-50"}},S=N=>{switch(N){case"urgent":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-blue-100 text-blue-800";case"low":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return s?a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"h-32 bg-gray-200 rounded"}),a.jsx("div",{className:"h-32 bg-gray-200 rounded"}),a.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})}):a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),f>0&&a.jsx("button",{onClick:g,className:"px-4 py-2 text-sm font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded-lg transition-colors",children:"Mark all as read"})]}),a.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[a.jsxs("button",{onClick:()=>r("all"),className:`px-6 py-3 font-medium transition-colors relative ${n==="all"?"text-teal-600 border-b-2 border-teal-600":"text-gray-600 hover:text-gray-900"}`,children:["All",a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.length,")"]})]}),a.jsxs("button",{onClick:()=>r("unread"),className:`px-6 py-3 font-medium transition-colors relative ${n==="unread"?"text-teal-600 border-b-2 border-teal-600":"text-gray-600 hover:text-gray-900"}`,children:["Unread",f>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-semibold bg-red-500 text-white rounded-full",children:f})]})]})]}),a.jsx("div",{className:"space-y-4",children:d.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[a.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n==="unread"?"No unread notifications":"No notifications yet"}),a.jsx("p",{className:"text-gray-500",children:n==="unread"?"You're all caught up! All notifications have been read.":"You'll see notifications here when you receive them."})]}):d.map(N=>a.jsx("div",{onClick:()=>m(N),className:`bg-white rounded-xl shadow-sm border-l-4 cursor-pointer hover:shadow-md transition-all ${N.read?"border-gray-300":w(N.priority)}`,children:a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:"text-4xl flex-shrink-0",children:S2(N.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.title}),a.jsxs("div",{className:"flex items-center gap-2",children:[N.priority!=="low"&&a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S(N.priority)}`,children:N.priority.toUpperCase()}),!N.read&&a.jsx("div",{className:"w-3 h-3 bg-teal-500 rounded-full"})]})]}),a.jsx("p",{className:"text-gray-700 whitespace-pre-line mb-3",children:N.message}),a.jsx("p",{className:"text-sm text-gray-500",children:k2(N.createdAt)})]})]})})})},N.id))}),t.length===0&&a.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-xl p-6",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" How Notifications Work"}),a.jsx("p",{className:"text-sm text-blue-700",children:"You'll receive notifications when:"}),a.jsxs("ul",{className:"mt-2 text-sm text-blue-700 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Your appointment is approved or declined"}),a.jsx("li",{children:"Payment is confirmed"}),a.jsx("li",{children:"Important updates about your account"})]})]})]})},l6=({onLoadingComplete:t})=>{const[e,n]=C.useState(0),[r,s]=C.useState(!1);return C.useEffect(()=>{const i=setInterval(()=>{n(c=>c>=100?(clearInterval(i),100):c+2)},100),o=setTimeout(()=>{s(!0),setTimeout(()=>{t()},500)},5e3);return()=>{clearInterval(i),clearTimeout(o)}},[t]),a.jsxs("div",{className:`fixed inset-0 bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center z-[9999] transition-opacity duration-500 ${r?"opacity-0":"opacity-100"}`,children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[[...Array(20)].map((i,o)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},o)),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/20 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/30 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[a.jsxs("div",{className:"relative mb-12 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 -m-8",children:a.jsx("div",{className:"w-full h-full border-4 border-brand-teal/30 rounded-full animate-ping"})}),a.jsx("div",{className:"absolute inset-0 -m-12",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-yellow/30 rounded-full animate-pulse",style:{animationDelay:"0.5s"}})}),a.jsx("div",{className:"absolute inset-0 -m-16",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-teal/20 rounded-full animate-ping",style:{animationDelay:"1s"}})}),a.jsx("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare",className:"h-24 w-auto object-contain animate-pulse-glow"})}),a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-brand-yellow rounded-full animate-bounce opacity-75"}),a.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-brand-teal rounded-full animate-bounce opacity-75",style:{animationDelay:"0.3s"}})]}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-4 animate-gradient-x",children:"Welcome to Dermaglare"}),a.jsx("p",{className:"text-gray-600 text-lg mb-8 animate-fade-in",children:"Preparing your skincare journey..."}),a.jsx("div",{className:"w-80 h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal via-brand-yellow to-brand-teal rounded-full transition-all duration-300 ease-out animate-shimmer",style:{width:`${e}%`,backgroundSize:"200% 100%"}})}),a.jsxs("p",{className:"text-brand-teal font-semibold mt-3 text-sm",children:[e,"% Complete"]}),a.jsxs("div",{className:"flex gap-2 mt-8",children:[a.jsx("div",{className:"w-3 h-3 bg-brand-teal rounded-full animate-bounce"}),a.jsx("div",{className:"w-3 h-3 bg-brand-yellow rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-3 h-3 bg-brand-dark rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-500 text-sm italic animate-fade-in",children:[e<20&&" Loading your personalized dashboard...",e>=20&&e<40&&" Securing your data...",e>=40&&e<60&&" Syncing appointments...",e>=60&&e<80&&" Preparing documents...",e>=80&&e<100&&" Almost there...",e>=100&&" Ready!"]})})]}),a.jsx("div",{className:"absolute bottom-10 left-10 w-16 h-16 border-4 border-brand-teal/20 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute top-10 right-10 w-12 h-12 border-4 border-brand-yellow/20 rounded-full animate-spin-slow",style:{animationDelay:"1s"}})]})};class c6 extends C.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null},this.handleReload=()=>{window.location.href="/login"}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 flex items-center justify-center p-8",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-red-600",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Oops! Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try reloading the page."}),this.state.error&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-left",children:a.jsx("p",{className:"text-sm text-red-800 font-mono break-all",children:this.state.error.message})}),a.jsx("button",{onClick:this.handleReload,className:"w-full px-6 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all",children:"Return to Login"})]})}):this.props.children}}const u6=()=>{const{user:t}=vt();return t?a.jsx(XM,{children:a.jsxs($_,{children:[a.jsx(Ot,{path:"dashboard",element:a.jsx(e6,{})}),a.jsx(Ot,{path:"appointments",element:a.jsx(i6,{})}),a.jsx(Ot,{path:"chatbot",element:a.jsx(JM,{})}),a.jsx(Ot,{path:"chat",element:a.jsx(o6,{})}),a.jsx(Ot,{path:"billing",element:a.jsx(zM,{})}),a.jsx(Ot,{path:"notifications",element:a.jsx(a6,{})}),a.jsx(Ot,{path:"profile",element:a.jsx(t6,{})}),a.jsx(Ot,{path:"settings",element:a.jsx(s6,{})}),a.jsx(Ot,{path:"*",element:a.jsx(Hm,{to:"/dashboard",replace:!0})})]})}):null},d6=()=>{const{user:t}=vt();return t?a.jsx(u6,{}):a.jsx(Hm,{to:"/login",replace:!0})},h6=()=>{const{user:t}=vt();return t?a.jsx(Hm,{to:"/dashboard",replace:!0}):a.jsx(xS,{})};function f6(){const{loading:t}=vt(),[e,n]=C.useState(()=>{try{return!sessionStorage.getItem("hasShownLoading")}catch(s){return console.error("SessionStorage error:",s),!1}}),r=()=>{n(!1);try{sessionStorage.setItem("hasShownLoading","true")}catch(s){console.error("SessionStorage error:",s)}};return e&&!t?a.jsx(l6,{onLoadingComplete:r}):t?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:a.jsx("div",{className:"text-xl font-semibold animate-pulse",children:"Loading Patient Portal..."})}):a.jsx(c6,{children:a.jsxs($_,{children:[a.jsx(Ot,{element:a.jsx(h6,{}),children:a.jsx(Ot,{path:"/login",element:a.jsx(HM,{})})}),a.jsx(Ot,{path:"/*",element:a.jsx(d6,{})})]})})}wh.createRoot(document.getElementById("root")).render(a.jsx(Cw.StrictMode,{children:a.jsx(WS,{children:a.jsx(gM,{children:a.jsx(r6,{children:a.jsx(f6,{})})})})}));export{ne as a,Gt as b,Se as c,Ve as d,_n as g,we as s};
