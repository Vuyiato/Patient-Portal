(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function eI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ew={exports:{}},gu={},bw={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=Symbol.for("react.element"),tI=Symbol.for("react.portal"),nI=Symbol.for("react.fragment"),rI=Symbol.for("react.strict_mode"),sI=Symbol.for("react.profiler"),iI=Symbol.for("react.provider"),oI=Symbol.for("react.context"),aI=Symbol.for("react.forward_ref"),lI=Symbol.for("react.suspense"),cI=Symbol.for("react.memo"),uI=Symbol.for("react.lazy"),fy=Symbol.iterator;function dI(t){return t===null||typeof t!="object"?null:(t=fy&&t[fy]||t["@@iterator"],typeof t=="function"?t:null)}var Tw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iw=Object.assign,Sw={};function Ki(t,e,n){this.props=t,this.context=e,this.refs=Sw,this.updater=n||Tw}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nw(){}Nw.prototype=Ki.prototype;function em(t,e,n){this.props=t,this.context=e,this.refs=Sw,this.updater=n||Tw}var tm=em.prototype=new Nw;tm.constructor=em;Iw(tm,Ki.prototype);tm.isPureReactComponent=!0;var my=Array.isArray,kw=Object.prototype.hasOwnProperty,nm={current:null},Aw={key:!0,ref:!0,__self:!0,__source:!0};function Cw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)kw.call(e,r)&&!Aw.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:$a,type:t,key:i,ref:o,props:s,_owner:nm.current}}function hI(t,e){return{$$typeof:$a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rm(t){return typeof t=="object"&&t!==null&&t.$$typeof===$a}function fI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var py=/\/+/g;function jd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fI(""+t.key):e.toString(36)}function Kl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $a:case tI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jd(o,0):r,my(s)?(n="",t!=null&&(n=t.replace(py,"$&/")+"/"),Kl(s,e,n,"",function(d){return d})):s!=null&&(rm(s)&&(s=hI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(py,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",my(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+jd(i,c);o+=Kl(i,e,n,u,s)}else if(u=dI(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+jd(i,c++),o+=Kl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function El(t,e,n){if(t==null)return t;var r=[],s=0;return Kl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Ql={transition:null},pI={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Ql,ReactCurrentOwner:nm};function Rw(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:El,forEach:function(t,e,n){El(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return El(t,function(){e++}),e},toArray:function(t){return El(t,function(e){return e})||[]},only:function(t){if(!rm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ki;re.Fragment=nI;re.Profiler=sI;re.PureComponent=em;re.StrictMode=rI;re.Suspense=lI;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pI;re.act=Rw;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Iw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=nm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)kw.call(e,u)&&!Aw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:$a,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:oI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iI,_context:t},t.Consumer=t};re.createElement=Cw;re.createFactory=function(t){var e=Cw.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:aI,render:t}};re.isValidElement=rm;re.lazy=function(t){return{$$typeof:uI,_payload:{_status:-1,_result:t},_init:mI}};re.memo=function(t,e){return{$$typeof:cI,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Ql.transition;Ql.transition={};try{t()}finally{Ql.transition=e}};re.unstable_act=Rw;re.useCallback=function(t,e){return Et.current.useCallback(t,e)};re.useContext=function(t){return Et.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};re.useEffect=function(t,e){return Et.current.useEffect(t,e)};re.useId=function(){return Et.current.useId()};re.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Et.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};re.useRef=function(t){return Et.current.useRef(t)};re.useState=function(t){return Et.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Et.current.useTransition()};re.version="18.3.1";bw.exports=re;var P=bw.exports;const Pw=eI(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI=P,yI=Symbol.for("react.element"),vI=Symbol.for("react.fragment"),wI=Object.prototype.hasOwnProperty,_I=gI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xI={key:!0,ref:!0,__self:!0,__source:!0};function jw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wI.call(e,r)&&!xI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yI,type:t,key:i,ref:o,props:s,_owner:_I.current}}gu.Fragment=vI;gu.jsx=jw;gu.jsxs=jw;Ew.exports=gu;var a=Ew.exports,Ih={},Dw={exports:{}},qt={},Lw={exports:{}},Ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var M=B.length;B.push(W);e:for(;0<M;){var Y=M-1>>>1,le=B[Y];if(0<s(le,W))B[Y]=W,B[M]=le,M=Y;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],M=B.pop();if(M!==W){B[0]=M;e:for(var Y=0,le=B.length,Pe=le>>>1;Y<Pe;){var he=2*(Y+1)-1,Te=B[he],Ke=he+1,Lt=B[Ke];if(0>s(Te,M))Ke<le&&0>s(Lt,Te)?(B[Y]=Lt,B[Ke]=M,Y=Ke):(B[Y]=Te,B[he]=M,Y=he);else if(Ke<le&&0>s(Lt,M))B[Y]=Lt,B[Ke]=M,Y=Ke;else break e}}return W}function s(B,W){var M=B.sortIndex-W.sortIndex;return M!==0?M:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,x=!1,E=!1,I=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=B)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function C(B){if(I=!1,w(B),!E)if(n(u)!==null)E=!0,H(L);else{var W=n(d);W!==null&&$(C,W.startTime-B)}}function L(B,W){E=!1,I&&(I=!1,b(v),v=-1),x=!0;var M=g;try{for(w(W),m=n(u);m!==null&&(!(m.expirationTime>W)||B&&!R());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,g=m.priorityLevel;var le=Y(m.expirationTime<=W);W=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(u)&&r(u),w(W)}else r(u);m=n(u)}if(m!==null)var Pe=!0;else{var he=n(d);he!==null&&$(C,he.startTime-W),Pe=!1}return Pe}finally{m=null,g=M,x=!1}}var V=!1,T=null,v=-1,S=5,k=-1;function R(){return!(t.unstable_now()-k<S)}function j(){if(T!==null){var B=t.unstable_now();k=B;var W=!0;try{W=T(!0,B)}finally{W?N():(V=!1,T=null)}}else V=!1}var N;if(typeof y=="function")N=function(){y(j)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ze=ae.port2;ae.port1.onmessage=j,N=function(){ze.postMessage(null)}}else N=function(){A(j,0)};function H(B){T=B,V||(V=!0,N())}function $(B,W){v=A(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){E||x||(E=!0,H(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var M=g;g=W;try{return B()}finally{g=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var M=g;g=B;try{return W()}finally{g=M}},t.unstable_scheduleCallback=function(B,W,M){var Y=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Y+M:Y):M=Y,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=M+le,B={id:f++,callback:W,priorityLevel:B,startTime:M,expirationTime:le,sortIndex:-1},M>Y?(B.sortIndex=M,e(d,B),n(u)===null&&B===n(d)&&(I?(b(v),v=-1):I=!0,$(C,M-Y))):(B.sortIndex=le,e(u,B),E||x||(E=!0,H(L))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var W=g;return function(){var M=g;g=W;try{return B.apply(this,arguments)}finally{g=M}}}})(Ow);Lw.exports=Ow;var EI=Lw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI=P,Ht=EI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mw=new Set,da={};function Bs(t,e){Pi(t,e),Pi(t+"Capture",e)}function Pi(t,e){for(da[t]=e,t=0;t<e.length;t++)Mw.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,TI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gy={},yy={};function II(t){return Sh.call(yy,t)?!0:Sh.call(gy,t)?!1:TI.test(t)?yy[t]=!0:(gy[t]=!0,!1)}function SI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NI(t,e,n,r){if(e===null||typeof e>"u"||SI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function im(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sm,im);st[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sm,im);st[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sm,im);st[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function om(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NI(e,n,s,r)&&(n=null),r||s===null?II(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=bI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),ai=Symbol.for("react.portal"),li=Symbol.for("react.fragment"),am=Symbol.for("react.strict_mode"),Nh=Symbol.for("react.profiler"),Vw=Symbol.for("react.provider"),Fw=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Ah=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),Uw=Symbol.for("react.offscreen"),vy=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=vy&&t[vy]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Dd;function Vo(t){if(Dd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dd=e&&e[1]||""}return`
`+Dd+t}var Ld=!1;function Od(t,e){if(!t||Ld)return"";Ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vo(t):""}function kI(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function Ch(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case li:return"Fragment";case ai:return"Portal";case Nh:return"Profiler";case am:return"StrictMode";case kh:return"Suspense";case Ah:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fw:return(t.displayName||"Context")+".Consumer";case Vw:return(t._context.displayName||"Context")+".Provider";case lm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cm:return e=t.displayName||null,e!==null?e:Ch(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Ch(t(e))}catch{}}return null}function AI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ch(e);case 8:return e===am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CI(t){var e=Bw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tl(t){t._valueTracker||(t._valueTracker=CI(t))}function $w(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zw(t,e){e=e.checked,e!=null&&om(t,"checked",e,!1)}function Ph(t,e){zw(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&jh(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _y(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jh(t,e,n){(e!=="number"||wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fo=Array.isArray;function wi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Fo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function Hw(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ey(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Il,Ww=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RI=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){RI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function Gw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function Kw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PI=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oh(t,e){if(e){if(PI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Mh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vh=null;function um(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,_i=null,xi=null;function by(t){if(t=qa(t)){if(typeof Fh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=xu(e),Fh(t.stateNode,t.type,e))}}function Qw(t){_i?xi?xi.push(t):xi=[t]:_i=t}function Yw(){if(_i){var t=_i,e=xi;if(xi=_i=null,by(t),e)for(t=0;t<e.length;t++)by(e[t])}}function Xw(t,e){return t(e)}function Jw(){}var Md=!1;function Zw(t,e,n){if(Md)return t(e,n);Md=!0;try{return Xw(t,e,n)}finally{Md=!1,(_i!==null||xi!==null)&&(Jw(),Yw())}}function fa(t,e){var n=t.stateNode;if(n===null)return null;var r=xu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Uh=!1;if(Xn)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Uh=!1}function jI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Yo=!1,_c=null,xc=!1,Bh=null,DI={onError:function(t){Yo=!0,_c=t}};function LI(t,e,n,r,s,i,o,c,u){Yo=!1,_c=null,jI.apply(DI,arguments)}function OI(t,e,n,r,s,i,o,c,u){if(LI.apply(this,arguments),Yo){if(Yo){var d=_c;Yo=!1,_c=null}else throw Error(z(198));xc||(xc=!0,Bh=d)}}function $s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function e_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if($s(t)!==t)throw Error(z(188))}function MI(t){var e=t.alternate;if(!e){if(e=$s(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ty(s),t;if(i===r)return Ty(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function t_(t){return t=MI(t),t!==null?n_(t):null}function n_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=n_(t);if(e!==null)return e;t=t.sibling}return null}var r_=Ht.unstable_scheduleCallback,Iy=Ht.unstable_cancelCallback,VI=Ht.unstable_shouldYield,FI=Ht.unstable_requestPaint,Me=Ht.unstable_now,UI=Ht.unstable_getCurrentPriorityLevel,dm=Ht.unstable_ImmediatePriority,s_=Ht.unstable_UserBlockingPriority,Ec=Ht.unstable_NormalPriority,BI=Ht.unstable_LowPriority,i_=Ht.unstable_IdlePriority,yu=null,An=null;function $I(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:qI,zI=Math.log,HI=Math.LN2;function qI(t){return t>>>=0,t===0?32:31-(zI(t)/HI|0)|0}var Sl=64,Nl=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Uo(c):(i&=o,i!==0&&(r=Uo(i)))}else o=n&~s,o!==0?r=Uo(o):i!==0&&(r=Uo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),s=1<<n,r|=t[n],e&=~s;return r}function WI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-fn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=WI(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function $h(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function o_(){var t=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),t}function Vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function KI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function hm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function a_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l_,fm,c_,u_,d_,zh=!1,kl=[],Cr=null,Rr=null,Pr=null,ma=new Map,pa=new Map,xr=[],QI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(t,e){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(e.pointerId)}}function Ao(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qa(e),e!==null&&fm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YI(t,e,n,r,s){switch(e){case"focusin":return Cr=Ao(Cr,t,e,n,r,s),!0;case"dragenter":return Rr=Ao(Rr,t,e,n,r,s),!0;case"mouseover":return Pr=Ao(Pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ma.set(i,Ao(ma.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pa.set(i,Ao(pa.get(i)||null,t,e,n,r,s)),!0}return!1}function h_(t){var e=ys(t.target);if(e!==null){var n=$s(e);if(n!==null){if(e=n.tag,e===13){if(e=e_(n),e!==null){t.blockedOn=e,d_(t.priority,function(){c_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vh=r,n.target.dispatchEvent(r),Vh=null}else return e=qa(n),e!==null&&fm(e),t.blockedOn=n,!1;e.shift()}return!0}function Ny(t,e,n){Yl(t)&&n.delete(e)}function XI(){zh=!1,Cr!==null&&Yl(Cr)&&(Cr=null),Rr!==null&&Yl(Rr)&&(Rr=null),Pr!==null&&Yl(Pr)&&(Pr=null),ma.forEach(Ny),pa.forEach(Ny)}function Co(t,e){t.blockedOn===e&&(t.blockedOn=null,zh||(zh=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,XI)))}function ga(t){function e(s){return Co(s,t)}if(0<kl.length){Co(kl[0],t);for(var n=1;n<kl.length;n++){var r=kl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cr!==null&&Co(Cr,t),Rr!==null&&Co(Rr,t),Pr!==null&&Co(Pr,t),ma.forEach(e),pa.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)h_(n),n.blockedOn===null&&xr.shift()}var Ei=ar.ReactCurrentBatchConfig,Tc=!0;function JI(t,e,n,r){var s=me,i=Ei.transition;Ei.transition=null;try{me=1,mm(t,e,n,r)}finally{me=s,Ei.transition=i}}function ZI(t,e,n,r){var s=me,i=Ei.transition;Ei.transition=null;try{me=4,mm(t,e,n,r)}finally{me=s,Ei.transition=i}}function mm(t,e,n,r){if(Tc){var s=Hh(t,e,n,r);if(s===null)Kd(t,e,r,Ic,n),Sy(t,r);else if(YI(s,t,e,n,r))r.stopPropagation();else if(Sy(t,r),e&4&&-1<QI.indexOf(t)){for(;s!==null;){var i=qa(s);if(i!==null&&l_(i),i=Hh(t,e,n,r),i===null&&Kd(t,e,r,Ic,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Kd(t,e,r,null,n)}}var Ic=null;function Hh(t,e,n,r){if(Ic=null,t=um(r),t=ys(t),t!==null)if(e=$s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=e_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ic=t,null}function f_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UI()){case dm:return 1;case s_:return 4;case Ec:case BI:return 16;case i_:return 536870912;default:return 16}default:return 16}}var Nr=null,pm=null,Xl=null;function m_(){if(Xl)return Xl;var t,e=pm,n=e.length,r,s="value"in Nr?Nr.value:Nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Jl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Al(){return!0}function ky(){return!1}function Wt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Al:ky,this.isPropagationStopped=ky,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gm=Wt(Qi),Ha=Ae({},Qi,{view:0,detail:0}),e2=Wt(Ha),Fd,Ud,Ro,vu=Ae({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ym,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ro&&(Ro&&t.type==="mousemove"?(Fd=t.screenX-Ro.screenX,Ud=t.screenY-Ro.screenY):Ud=Fd=0,Ro=t),Fd)},movementY:function(t){return"movementY"in t?t.movementY:Ud}}),Ay=Wt(vu),t2=Ae({},vu,{dataTransfer:0}),n2=Wt(t2),r2=Ae({},Ha,{relatedTarget:0}),Bd=Wt(r2),s2=Ae({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),i2=Wt(s2),o2=Ae({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a2=Wt(o2),l2=Ae({},Qi,{data:0}),Cy=Wt(l2),c2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d2[t])?!!e[t]:!1}function ym(){return h2}var f2=Ae({},Ha,{key:function(t){if(t.key){var e=c2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ym,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),m2=Wt(f2),p2=Ae({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=Wt(p2),g2=Ae({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ym}),y2=Wt(g2),v2=Ae({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w2=Wt(v2),_2=Ae({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x2=Wt(_2),E2=[9,13,27,32],vm=Xn&&"CompositionEvent"in window,Xo=null;Xn&&"documentMode"in document&&(Xo=document.documentMode);var b2=Xn&&"TextEvent"in window&&!Xo,p_=Xn&&(!vm||Xo&&8<Xo&&11>=Xo),Py=" ",jy=!1;function g_(t,e){switch(t){case"keyup":return E2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function T2(t,e){switch(t){case"compositionend":return y_(e);case"keypress":return e.which!==32?null:(jy=!0,Py);case"textInput":return t=e.data,t===Py&&jy?null:t;default:return null}}function I2(t,e){if(ci)return t==="compositionend"||!vm&&g_(t,e)?(t=m_(),Xl=pm=Nr=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return p_&&e.locale!=="ko"?null:e.data;default:return null}}var S2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!S2[t.type]:e==="textarea"}function v_(t,e,n,r){Qw(r),e=Sc(e,"onChange"),0<e.length&&(n=new gm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jo=null,ya=null;function N2(t){A_(t,0)}function wu(t){var e=hi(t);if($w(e))return t}function k2(t,e){if(t==="change")return e}var w_=!1;if(Xn){var $d;if(Xn){var zd="oninput"in document;if(!zd){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),zd=typeof Ly.oninput=="function"}$d=zd}else $d=!1;w_=$d&&(!document.documentMode||9<document.documentMode)}function Oy(){Jo&&(Jo.detachEvent("onpropertychange",__),ya=Jo=null)}function __(t){if(t.propertyName==="value"&&wu(ya)){var e=[];v_(e,ya,t,um(t)),Zw(N2,e)}}function A2(t,e,n){t==="focusin"?(Oy(),Jo=e,ya=n,Jo.attachEvent("onpropertychange",__)):t==="focusout"&&Oy()}function C2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(ya)}function R2(t,e){if(t==="click")return wu(e)}function P2(t,e){if(t==="input"||t==="change")return wu(e)}function j2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:j2;function va(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sh.call(e,s)||!gn(t[s],e[s]))return!1}return!0}function My(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vy(t,e){var n=My(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=My(n)}}function x_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?x_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function E_(){for(var t=window,e=wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=wc(t.document)}return e}function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function D2(t){var e=E_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&x_(n.ownerDocument.documentElement,n)){if(r!==null&&wm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Vy(n,i);var o=Vy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var L2=Xn&&"documentMode"in document&&11>=document.documentMode,ui=null,qh=null,Zo=null,Wh=!1;function Fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wh||ui==null||ui!==wc(r)||(r=ui,"selectionStart"in r&&wm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&va(Zo,r)||(Zo=r,r=Sc(qh,"onSelect"),0<r.length&&(e=new gm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ui)))}function Cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},Hd={},b_={};Xn&&(b_=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function _u(t){if(Hd[t])return Hd[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in b_)return Hd[t]=e[n];return t}var T_=_u("animationend"),I_=_u("animationiteration"),S_=_u("animationstart"),N_=_u("transitionend"),k_=new Map,Uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(t,e){k_.set(t,e),Bs(e,[t])}for(var qd=0;qd<Uy.length;qd++){var Wd=Uy[qd],O2=Wd.toLowerCase(),M2=Wd[0].toUpperCase()+Wd.slice(1);Zr(O2,"on"+M2)}Zr(T_,"onAnimationEnd");Zr(I_,"onAnimationIteration");Zr(S_,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(N_,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function By(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,OI(r,e,void 0,t),t.currentTarget=null}function A_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;By(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;By(s,c,d),i=u}}}if(xc)throw t=Bh,xc=!1,Bh=null,t}function _e(t,e){var n=e[Xh];n===void 0&&(n=e[Xh]=new Set);var r=t+"__bubble";n.has(r)||(C_(e,t,2,!1),n.add(r))}function Gd(t,e,n){var r=0;e&&(r|=4),C_(n,t,r,e)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function wa(t){if(!t[Rl]){t[Rl]=!0,Mw.forEach(function(n){n!=="selectionchange"&&(V2.has(n)||Gd(n,!1,t),Gd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rl]||(e[Rl]=!0,Gd("selectionchange",!1,e))}}function C_(t,e,n,r){switch(f_(e)){case 1:var s=JI;break;case 4:s=ZI;break;default:s=mm}n=s.bind(null,e,n,t),s=void 0,!Uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Kd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=ys(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Zw(function(){var d=i,f=um(n),m=[];e:{var g=k_.get(t);if(g!==void 0){var x=gm,E=t;switch(t){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":x=m2;break;case"focusin":E="focus",x=Bd;break;case"focusout":E="blur",x=Bd;break;case"beforeblur":case"afterblur":x=Bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=n2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=y2;break;case T_:case I_:case S_:x=i2;break;case N_:x=w2;break;case"scroll":x=e2;break;case"wheel":x=x2;break;case"copy":case"cut":case"paste":x=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ry}var I=(e&4)!==0,A=!I&&t==="scroll",b=I?g!==null?g+"Capture":null:g;I=[];for(var y=d,w;y!==null;){w=y;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,b!==null&&(C=fa(y,b),C!=null&&I.push(_a(y,C,w)))),A)break;y=y.return}0<I.length&&(g=new x(g,E,null,n,f),m.push({event:g,listeners:I}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==Vh&&(E=n.relatedTarget||n.fromElement)&&(ys(E)||E[Jn]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(E=n.relatedTarget||n.toElement,x=d,E=E?ys(E):null,E!==null&&(A=$s(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(x=null,E=d),x!==E)){if(I=Ay,C="onMouseLeave",b="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(I=Ry,C="onPointerLeave",b="onPointerEnter",y="pointer"),A=x==null?g:hi(x),w=E==null?g:hi(E),g=new I(C,y+"leave",x,n,f),g.target=A,g.relatedTarget=w,C=null,ys(f)===d&&(I=new I(b,y+"enter",E,n,f),I.target=w,I.relatedTarget=A,C=I),A=C,x&&E)t:{for(I=x,b=E,y=0,w=I;w;w=ei(w))y++;for(w=0,C=b;C;C=ei(C))w++;for(;0<y-w;)I=ei(I),y--;for(;0<w-y;)b=ei(b),w--;for(;y--;){if(I===b||b!==null&&I===b.alternate)break t;I=ei(I),b=ei(b)}I=null}else I=null;x!==null&&$y(m,g,x,I,!1),E!==null&&A!==null&&$y(m,A,E,I,!0)}}e:{if(g=d?hi(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var L=k2;else if(Dy(g))if(w_)L=P2;else{L=C2;var V=A2}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=R2);if(L&&(L=L(t,d))){v_(m,L,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&jh(g,"number",g.value)}switch(V=d?hi(d):window,t){case"focusin":(Dy(V)||V.contentEditable==="true")&&(ui=V,qh=d,Zo=null);break;case"focusout":Zo=qh=ui=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,Fy(m,n,f);break;case"selectionchange":if(L2)break;case"keydown":case"keyup":Fy(m,n,f)}var T;if(vm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ci?g_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(p_&&n.locale!=="ko"&&(ci||v!=="onCompositionStart"?v==="onCompositionEnd"&&ci&&(T=m_()):(Nr=f,pm="value"in Nr?Nr.value:Nr.textContent,ci=!0)),V=Sc(d,v),0<V.length&&(v=new Cy(v,t,null,n,f),m.push({event:v,listeners:V}),T?v.data=T:(T=y_(n),T!==null&&(v.data=T)))),(T=b2?T2(t,n):I2(t,n))&&(d=Sc(d,"onBeforeInput"),0<d.length&&(f=new Cy("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=T))}A_(m,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fa(t,n),i!=null&&r.unshift(_a(t,i,s)),i=fa(t,e),i!=null&&r.push(_a(t,i,s))),t=t.return}return r}function ei(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $y(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=fa(n,i),u!=null&&o.unshift(_a(n,u,c))):s||(u=fa(n,i),u!=null&&o.push(_a(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var F2=/\r\n?/g,U2=/\u0000|\uFFFD/g;function zy(t){return(typeof t=="string"?t:""+t).replace(F2,`
`).replace(U2,"")}function Pl(t,e,n){if(e=zy(e),zy(t)!==e&&n)throw Error(z(425))}function Nc(){}var Gh=null,Kh=null;function Qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yh=typeof setTimeout=="function"?setTimeout:void 0,B2=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,$2=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(t){return Hy.resolve(null).then(t).catch(z2)}:Yh;function z2(t){setTimeout(function(){throw t})}function Qd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ga(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Yi,xa="__reactProps$"+Yi,Jn="__reactContainer$"+Yi,Xh="__reactEvents$"+Yi,H2="__reactListeners$"+Yi,q2="__reactHandles$"+Yi;function ys(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qy(t);t!==null;){if(n=t[Nn])return n;t=qy(t)}return e}t=n,n=t.parentNode}return null}function qa(t){return t=t[Nn]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function xu(t){return t[xa]||null}var Jh=[],fi=-1;function es(t){return{current:t}}function Ee(t){0>fi||(t.current=Jh[fi],Jh[fi]=null,fi--)}function ve(t,e){fi++,Jh[fi]=t.current,t.current=e}var Hr={},ft=es(Hr),Ct=es(!1),As=Hr;function ji(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function kc(){Ee(Ct),Ee(ft)}function Wy(t,e,n){if(ft.current!==Hr)throw Error(z(168));ve(ft,e),ve(Ct,n)}function R_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,AI(t)||"Unknown",s));return Ae({},n,r)}function Ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,As=ft.current,ve(ft,t),ve(Ct,Ct.current),!0}function Gy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=R_(t,e,As),r.__reactInternalMemoizedMergedChildContext=t,Ee(Ct),Ee(ft),ve(ft,t)):Ee(Ct),ve(Ct,n)}var Fn=null,Eu=!1,Yd=!1;function P_(t){Fn===null?Fn=[t]:Fn.push(t)}function W2(t){Eu=!0,P_(t)}function ts(){if(!Yd&&Fn!==null){Yd=!0;var t=0,e=me;try{var n=Fn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,Eu=!1}catch(s){throw Fn!==null&&(Fn=Fn.slice(t+1)),r_(dm,ts),s}finally{me=e,Yd=!1}}return null}var mi=[],pi=0,Cc=null,Rc=0,Qt=[],Yt=0,Cs=null,Bn=1,$n="";function fs(t,e){mi[pi++]=Rc,mi[pi++]=Cc,Cc=t,Rc=e}function j_(t,e,n){Qt[Yt++]=Bn,Qt[Yt++]=$n,Qt[Yt++]=Cs,Cs=t;var r=Bn;t=$n;var s=32-fn(r)-1;r&=~(1<<s),n+=1;var i=32-fn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Bn=1<<32-fn(e)+s|n<<s|r,$n=i+t}else Bn=1<<i|n<<s|r,$n=t}function _m(t){t.return!==null&&(fs(t,1),j_(t,1,0))}function xm(t){for(;t===Cc;)Cc=mi[--pi],mi[pi]=null,Rc=mi[--pi],mi[pi]=null;for(;t===Cs;)Cs=Qt[--Yt],Qt[Yt]=null,$n=Qt[--Yt],Qt[Yt]=null,Bn=Qt[--Yt],Qt[Yt]=null}var $t=null,Ft=null,Ie=!1,dn=null;function D_(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ky(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Ft=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cs!==null?{id:Bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Ft=null,!0):!1;default:return!1}}function Zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ef(t){if(Ie){var e=Ft;if(e){var n=e;if(!Ky(t,e)){if(Zh(t))throw Error(z(418));e=jr(n.nextSibling);var r=$t;e&&Ky(t,e)?D_(r,n):(t.flags=t.flags&-4097|2,Ie=!1,$t=t)}}else{if(Zh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ie=!1,$t=t}}}function Qy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function jl(t){if(t!==$t)return!1;if(!Ie)return Qy(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qh(t.type,t.memoizedProps)),e&&(e=Ft)){if(Zh(t))throw L_(),Error(z(418));for(;e;)D_(t,e),e=jr(e.nextSibling)}if(Qy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=$t?jr(t.stateNode.nextSibling):null;return!0}function L_(){for(var t=Ft;t;)t=jr(t.nextSibling)}function Di(){Ft=$t=null,Ie=!1}function Em(t){dn===null?dn=[t]:dn.push(t)}var G2=ar.ReactCurrentBatchConfig;function Po(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Dl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yy(t){var e=t._init;return e(t._payload)}function O_(t){function e(b,y){if(t){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!t)return null;for(;y!==null;)e(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function s(b,y){return b=Mr(b,y),b.index=0,b.sibling=null,b}function i(b,y,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,y,w,C){return y===null||y.tag!==6?(y=rh(w,b.mode,C),y.return=b,y):(y=s(y,w),y.return=b,y)}function u(b,y,w,C){var L=w.type;return L===li?f(b,y,w.props.children,C,w.key):y!==null&&(y.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wr&&Yy(L)===y.type)?(C=s(y,w.props),C.ref=Po(b,y,w),C.return=b,C):(C=ic(w.type,w.key,w.props,null,b.mode,C),C.ref=Po(b,y,w),C.return=b,C)}function d(b,y,w,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=sh(w,b.mode,C),y.return=b,y):(y=s(y,w.children||[]),y.return=b,y)}function f(b,y,w,C,L){return y===null||y.tag!==7?(y=Is(w,b.mode,C,L),y.return=b,y):(y=s(y,w),y.return=b,y)}function m(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rh(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bl:return w=ic(y.type,y.key,y.props,null,b.mode,w),w.ref=Po(b,null,y),w.return=b,w;case ai:return y=sh(y,b.mode,w),y.return=b,y;case wr:var C=y._init;return m(b,C(y._payload),w)}if(Fo(y)||No(y))return y=Is(y,b.mode,w,null),y.return=b,y;Dl(b,y)}return null}function g(b,y,w,C){var L=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return L!==null?null:c(b,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bl:return w.key===L?u(b,y,w,C):null;case ai:return w.key===L?d(b,y,w,C):null;case wr:return L=w._init,g(b,y,L(w._payload),C)}if(Fo(w)||No(w))return L!==null?null:f(b,y,w,C,null);Dl(b,w)}return null}function x(b,y,w,C,L){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(w)||null,c(y,b,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case bl:return b=b.get(C.key===null?w:C.key)||null,u(y,b,C,L);case ai:return b=b.get(C.key===null?w:C.key)||null,d(y,b,C,L);case wr:var V=C._init;return x(b,y,w,V(C._payload),L)}if(Fo(C)||No(C))return b=b.get(w)||null,f(y,b,C,L,null);Dl(y,C)}return null}function E(b,y,w,C){for(var L=null,V=null,T=y,v=y=0,S=null;T!==null&&v<w.length;v++){T.index>v?(S=T,T=null):S=T.sibling;var k=g(b,T,w[v],C);if(k===null){T===null&&(T=S);break}t&&T&&k.alternate===null&&e(b,T),y=i(k,y,v),V===null?L=k:V.sibling=k,V=k,T=S}if(v===w.length)return n(b,T),Ie&&fs(b,v),L;if(T===null){for(;v<w.length;v++)T=m(b,w[v],C),T!==null&&(y=i(T,y,v),V===null?L=T:V.sibling=T,V=T);return Ie&&fs(b,v),L}for(T=r(b,T);v<w.length;v++)S=x(T,b,v,w[v],C),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?v:S.key),y=i(S,y,v),V===null?L=S:V.sibling=S,V=S);return t&&T.forEach(function(R){return e(b,R)}),Ie&&fs(b,v),L}function I(b,y,w,C){var L=No(w);if(typeof L!="function")throw Error(z(150));if(w=L.call(w),w==null)throw Error(z(151));for(var V=L=null,T=y,v=y=0,S=null,k=w.next();T!==null&&!k.done;v++,k=w.next()){T.index>v?(S=T,T=null):S=T.sibling;var R=g(b,T,k.value,C);if(R===null){T===null&&(T=S);break}t&&T&&R.alternate===null&&e(b,T),y=i(R,y,v),V===null?L=R:V.sibling=R,V=R,T=S}if(k.done)return n(b,T),Ie&&fs(b,v),L;if(T===null){for(;!k.done;v++,k=w.next())k=m(b,k.value,C),k!==null&&(y=i(k,y,v),V===null?L=k:V.sibling=k,V=k);return Ie&&fs(b,v),L}for(T=r(b,T);!k.done;v++,k=w.next())k=x(T,b,v,k.value,C),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?v:k.key),y=i(k,y,v),V===null?L=k:V.sibling=k,V=k);return t&&T.forEach(function(j){return e(b,j)}),Ie&&fs(b,v),L}function A(b,y,w,C){if(typeof w=="object"&&w!==null&&w.type===li&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case bl:e:{for(var L=w.key,V=y;V!==null;){if(V.key===L){if(L=w.type,L===li){if(V.tag===7){n(b,V.sibling),y=s(V,w.props.children),y.return=b,b=y;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wr&&Yy(L)===V.type){n(b,V.sibling),y=s(V,w.props),y.ref=Po(b,V,w),y.return=b,b=y;break e}n(b,V);break}else e(b,V);V=V.sibling}w.type===li?(y=Is(w.props.children,b.mode,C,w.key),y.return=b,b=y):(C=ic(w.type,w.key,w.props,null,b.mode,C),C.ref=Po(b,y,w),C.return=b,b=C)}return o(b);case ai:e:{for(V=w.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),y=s(y,w.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else e(b,y);y=y.sibling}y=sh(w,b.mode,C),y.return=b,b=y}return o(b);case wr:return V=w._init,A(b,y,V(w._payload),C)}if(Fo(w))return E(b,y,w,C);if(No(w))return I(b,y,w,C);Dl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),y=s(y,w),y.return=b,b=y):(n(b,y),y=rh(w,b.mode,C),y.return=b,b=y),o(b)):n(b,y)}return A}var Li=O_(!0),M_=O_(!1),Pc=es(null),jc=null,gi=null,bm=null;function Tm(){bm=gi=jc=null}function Im(t){var e=Pc.current;Ee(Pc),t._currentValue=e}function tf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bi(t,e){jc=t,bm=gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(bm!==t)if(t={context:t,memoizedValue:e,next:null},gi===null){if(jc===null)throw Error(z(308));gi=t,jc.dependencies={lanes:0,firstContext:t}}else gi=gi.next=t;return e}var vs=null;function Sm(t){vs===null?vs=[t]:vs.push(t)}function V_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Sm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zn(t,r)}function Zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function Nm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function F_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Zn(t,n)}return s=r.interleaved,s===null?(e.next=e,Sm(r)):(e.next=s.next,s.next=e),r.interleaved=e,Zn(t,n)}function Zl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hm(t,n)}}function Xy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;_r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,x=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=t,I=c;switch(g=e,x=n,I.tag){case 1:if(E=I.payload,typeof E=="function"){m=E.call(x,m,g);break e}m=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=I.payload,g=typeof E=="function"?E.call(x,m,g):E,g==null)break e;m=Ae({},m,g);break e;case 2:_r=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else x={eventTime:x,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=x,u=m):f=f.next=x,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ps|=o,t.lanes=o,t.memoizedState=m}}function Jy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Wa={},Cn=es(Wa),Ea=es(Wa),ba=es(Wa);function ws(t){if(t===Wa)throw Error(z(174));return t}function km(t,e){switch(ve(ba,e),ve(Ea,t),ve(Cn,Wa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}Ee(Cn),ve(Cn,e)}function Oi(){Ee(Cn),Ee(Ea),Ee(ba)}function U_(t){ws(ba.current);var e=ws(Cn.current),n=Lh(e,t.type);e!==n&&(ve(Ea,t),ve(Cn,n))}function Am(t){Ea.current===t&&(Ee(Cn),Ee(Ea))}var Ne=es(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xd=[];function Cm(){for(var t=0;t<Xd.length;t++)Xd[t]._workInProgressVersionPrimary=null;Xd.length=0}var ec=ar.ReactCurrentDispatcher,Jd=ar.ReactCurrentBatchConfig,Rs=0,ke=null,qe=null,Xe=null,Oc=!1,ea=!1,Ta=0,K2=0;function at(){throw Error(z(321))}function Rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function Pm(t,e,n,r,s,i){if(Rs=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ec.current=t===null||t.memoizedState===null?J2:Z2,t=n(r,s),ea){i=0;do{if(ea=!1,Ta=0,25<=i)throw Error(z(301));i+=1,Xe=qe=null,e.updateQueue=null,ec.current=eS,t=n(r,s)}while(ea)}if(ec.current=Mc,e=qe!==null&&qe.next!==null,Rs=0,Xe=qe=ke=null,Oc=!1,e)throw Error(z(300));return t}function jm(){var t=Ta!==0;return Ta=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?ke.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function nn(){if(qe===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Xe===null?ke.memoizedState:Xe.next;if(e!==null)Xe=e,qe=t;else{if(t===null)throw Error(z(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Xe===null?ke.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ia(t,e){return typeof e=="function"?e(t):e}function Zd(t){var e=nn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Rs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,ke.lanes|=f,Ps|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,gn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ke.lanes|=i,Ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function eh(t){var e=nn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);gn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function B_(){}function $_(t,e){var n=ke,r=nn(),s=e(),i=!gn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,Dm(q_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Sa(9,H_.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(z(349));Rs&30||z_(n,e,s)}return s}function z_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H_(t,e,n,r){e.value=n,e.getSnapshot=r,W_(e)&&G_(t)}function q_(t,e,n){return n(function(){W_(e)&&G_(t)})}function W_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function G_(t){var e=Zn(t,1);e!==null&&mn(e,t,1,-1)}function Zy(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=X2.bind(null,ke,t),[e.memoizedState,t]}function Sa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K_(){return nn().memoizedState}function tc(t,e,n,r){var s=In();ke.flags|=t,s.memoizedState=Sa(1|e,n,void 0,r===void 0?null:r)}function bu(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Rm(r,o.deps)){s.memoizedState=Sa(e,n,i,r);return}}ke.flags|=t,s.memoizedState=Sa(1|e,n,i,r)}function e0(t,e){return tc(8390656,8,t,e)}function Dm(t,e){return bu(2048,8,t,e)}function Q_(t,e){return bu(4,2,t,e)}function Y_(t,e){return bu(4,4,t,e)}function X_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function J_(t,e,n){return n=n!=null?n.concat([t]):null,bu(4,4,X_.bind(null,e,t),n)}function Lm(){}function Z_(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ex(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tx(t,e,n){return Rs&21?(gn(n,e)||(n=o_(),ke.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function Q2(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=Jd.transition;Jd.transition={};try{t(!1),e()}finally{me=n,Jd.transition=r}}function nx(){return nn().memoizedState}function Y2(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rx(t))sx(e,n);else if(n=V_(t,e,n,r),n!==null){var s=wt();mn(n,t,r,s),ix(n,e,r)}}function X2(t,e,n){var r=Or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rx(t))sx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,gn(c,o)){var u=e.interleaved;u===null?(s.next=s,Sm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=V_(t,e,s,r),n!==null&&(s=wt(),mn(n,t,r,s),ix(n,e,r))}}function rx(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function sx(t,e){ea=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ix(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hm(t,n)}}var Mc={readContext:tn,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},J2={readContext:tn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:e0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tc(4194308,4,X_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tc(4194308,4,t,e)},useInsertionEffect:function(t,e){return tc(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Y2.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:Zy,useDebugValue:Lm,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=Zy(!1),e=t[0];return t=Q2.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,s=In();if(Ie){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));Rs&30||z_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,e0(q_.bind(null,r,i,t),[t]),r.flags|=2048,Sa(9,H_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=In(),e=Ze.identifierPrefix;if(Ie){var n=$n,r=Bn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=K2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Z2={readContext:tn,useCallback:Z_,useContext:tn,useEffect:Dm,useImperativeHandle:J_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:ex,useReducer:Zd,useRef:K_,useState:function(){return Zd(Ia)},useDebugValue:Lm,useDeferredValue:function(t){var e=nn();return tx(e,qe.memoizedState,t)},useTransition:function(){var t=Zd(Ia)[0],e=nn().memoizedState;return[t,e]},useMutableSource:B_,useSyncExternalStore:$_,useId:nx,unstable_isNewReconciler:!1},eS={readContext:tn,useCallback:Z_,useContext:tn,useEffect:Dm,useImperativeHandle:J_,useInsertionEffect:Q_,useLayoutEffect:Y_,useMemo:ex,useReducer:eh,useRef:K_,useState:function(){return eh(Ia)},useDebugValue:Lm,useDeferredValue:function(t){var e=nn();return qe===null?e.memoizedState=t:tx(e,qe.memoizedState,t)},useTransition:function(){var t=eh(Ia)[0],e=nn().memoizedState;return[t,e]},useMutableSource:B_,useSyncExternalStore:$_,useId:nx,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?$s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Or(t),i=Wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Dr(t,i,s),e!==null&&(mn(e,t,s,r),Zl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Or(t),i=Wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Dr(t,i,s),e!==null&&(mn(e,t,s,r),Zl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Or(t),s=Wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Dr(t,s,r),e!==null&&(mn(e,t,r,n),Zl(e,t,r))}};function t0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!va(n,r)||!va(s,i):!0}function ox(t,e,n){var r=!1,s=Hr,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Rt(e)?As:ft.current,r=e.contextTypes,i=(r=r!=null)?ji(t,s):Hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function n0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function rf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Nm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Rt(e)?As:ft.current,s.context=ji(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tu.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Mi(t,e){try{var n="",r=e;do n+=kI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function th(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function ax(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fc||(Fc=!0,pf=r),sf(t,e)},n}function lx(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sf(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function r0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pS.bind(null,t,e,n),e.then(t,t))}function s0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function i0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Dr(n,e,1))),n.lanes|=1),t)}var nS=ar.ReactCurrentOwner,At=!1;function vt(t,e,n,r){e.child=t===null?M_(e,null,n,r):Li(e,t.child,n,r)}function o0(t,e,n,r,s){n=n.render;var i=e.ref;return bi(e,s),r=Pm(t,e,n,r,i,s),n=jm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(Ie&&n&&_m(e),e.flags|=1,vt(t,e,r,s),e.child)}function a0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!zm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cx(t,e,i,r,s)):(t=ic(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(o,r)&&t.ref===e.ref)return er(t,e,s)}return e.flags|=1,t=Mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function cx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(va(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,er(t,e,s)}return of(t,e,n,r,s)}function ux(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(vi,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(vi,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(vi,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(vi,Mt),Mt|=r;return vt(t,e,s,n),e.child}function dx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function of(t,e,n,r,s){var i=Rt(n)?As:ft.current;return i=ji(e,i),bi(e,s),n=Pm(t,e,n,r,i,s),r=jm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,er(t,e,s)):(Ie&&r&&_m(e),e.flags|=1,vt(t,e,n,s),e.child)}function l0(t,e,n,r,s){if(Rt(n)){var i=!0;Ac(e)}else i=!1;if(bi(e,s),e.stateNode===null)nc(t,e),ox(e,n,r),rf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=tn(d):(d=Rt(n)?As:ft.current,d=ji(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&n0(e,o,r,d),_r=!1;var g=e.memoizedState;o.state=g,Dc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Ct.current||_r?(typeof f=="function"&&(nf(e,n,f,r),u=e.memoizedState),(c=_r||t0(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,F_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:ln(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=tn(u):(u=Rt(n)?As:ft.current,u=ji(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&n0(e,o,r,u),_r=!1,g=e.memoizedState,o.state=g,Dc(e,r,o,s);var E=e.memoizedState;c!==m||g!==E||Ct.current||_r?(typeof x=="function"&&(nf(e,n,x,r),E=e.memoizedState),(d=_r||t0(e,n,d,r,g,E,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return af(t,e,n,r,i,s)}function af(t,e,n,r,s,i){dx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Gy(e,n,!1),er(t,e,i);r=e.stateNode,nS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Li(e,t.child,null,i),e.child=Li(e,null,c,i)):vt(t,e,c,i),e.memoizedState=r.state,s&&Gy(e,n,!0),e.child}function hx(t){var e=t.stateNode;e.pendingContext?Wy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wy(t,e.context,!1),km(t,e.containerInfo)}function c0(t,e,n,r,s){return Di(),Em(s),e.flags|=256,vt(t,e,n,r),e.child}var lf={dehydrated:null,treeContext:null,retryLane:0};function cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function fx(t,e,n){var r=e.pendingProps,s=Ne.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Ne,s&1),t===null)return ef(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nu(o,r,0,null),t=Is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cf(n),e.memoizedState=lf,t):Om(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return rS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Mr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Mr(c,i):(i=Is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lf,r}return i=t.child,t=i.sibling,r=Mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Om(t,e){return e=Nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ll(t,e,n,r){return r!==null&&Em(r),Li(e,t.child,null,n),t=Om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=th(Error(z(422))),Ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nu({mode:"visible",children:r.children},s,0,null),i=Is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Li(e,t.child,null,o),e.child.memoizedState=cf(o),e.memoizedState=lf,i);if(!(e.mode&1))return Ll(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=th(i,r,void 0),Ll(t,e,o,r)}if(c=(o&t.childLanes)!==0,At||c){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Zn(t,s),mn(r,t,s,-1))}return $m(),r=th(Error(z(421))),Ll(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=jr(s.nextSibling),$t=e,Ie=!0,dn=null,t!==null&&(Qt[Yt++]=Bn,Qt[Yt++]=$n,Qt[Yt++]=Cs,Bn=t.id,$n=t.overflow,Cs=e),e=Om(e,r.children),e.flags|=4096,e)}function u0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tf(t.return,e,n)}function nh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u0(t,n,e);else if(t.tag===19)u0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nh(e,!0,n,null,i);break;case"together":nh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sS(t,e,n){switch(e.tag){case 3:hx(e),Di();break;case 5:U_(e);break;case 1:Rt(e.type)&&Ac(e);break;case 4:km(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?fx(t,e,n):(ve(Ne,Ne.current&1),t=er(t,e,n),t!==null?t.sibling:null);ve(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,ux(t,e,n)}return er(t,e,n)}var px,uf,gx,yx;px=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uf=function(){};gx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ws(Cn.current);var i=null;switch(n){case"input":s=Rh(t,s),r=Rh(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Dh(t,s),r=Dh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nc)}Oh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(da.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(da.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_e("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};yx=function(t,e,n,r){n!==r&&(e.flags|=4)};function jo(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iS(t,e,n){var r=e.pendingProps;switch(xm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Rt(e.type)&&kc(),lt(e),null;case 3:return r=e.stateNode,Oi(),Ee(Ct),Ee(ft),Cm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(vf(dn),dn=null))),uf(t,e),lt(e),null;case 5:Am(e);var s=ws(ba.current);if(n=e.type,t!==null&&e.stateNode!=null)gx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=ws(Cn.current),jl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nn]=e,r[xa]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Bo.length;s++)_e(Bo[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":wy(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":xy(r,i),_e("invalid",r)}Oh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Pl(r.textContent,c,t),s=["children",""+c]):da.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Tl(r),_y(r,i,!0);break;case"textarea":Tl(r),Ey(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Nc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[xa]=r,px(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mh(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bo.length;s++)_e(Bo[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":wy(t,r),s=Rh(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),_e("invalid",t);break;case"textarea":xy(t,r),s=Dh(t,r),_e("invalid",t);break;default:s=r}Oh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Kw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ww(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ha(t,u):typeof u=="number"&&ha(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(da.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&om(t,i,u,o))}switch(n){case"input":Tl(t),_y(t,r,!1);break;case"textarea":Tl(t),Ey(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wi(t,!!r.multiple,i,!1):r.defaultValue!=null&&wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)yx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ws(ba.current),ws(Cn.current),jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return lt(e),null;case 13:if(Ee(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Ft!==null&&e.mode&1&&!(e.flags&128))L_(),Di(),e.flags|=98560,i=!1;else if(i=jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Nn]=e}else Di(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else dn!==null&&(vf(dn),dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?We===0&&(We=3):$m())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Oi(),uf(t,e),t===null&&wa(e.stateNode.containerInfo),lt(e),null;case 10:return Im(e.type._context),lt(e),null;case 17:return Rt(e.type)&&kc(),lt(e),null;case 19:if(Ee(Ne),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)jo(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,jo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ne,Ne.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Vi&&(e.flags|=128,r=!0,jo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ie)return lt(e),null}else 2*Me()-i.renderingStartTime>Vi&&n!==1073741824&&(e.flags|=128,r=!0,jo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Ne.current,ve(Ne,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Bm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function oS(t,e){switch(xm(e),e.tag){case 1:return Rt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),Ee(Ct),Ee(ft),Cm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if(Ee(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Di()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ne),null;case 4:return Oi(),null;case 10:return Im(e.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var Ol=!1,dt=!1,aS=typeof WeakSet=="function"?WeakSet:Set,Q=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function df(t,e,n){try{n()}catch(r){De(t,e,r)}}var d0=!1;function lS(t,e){if(Gh=Tc,t=E_(),wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kh={focusedElem:t,selectionRange:n},Tc=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var I=E.memoizedProps,A=E.memoizedState,b=e.stateNode,y=b.getSnapshotBeforeUpdate(e.elementType===e.type?I:ln(e.type,I),A);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(C){De(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return E=d0,d0=!1,E}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&df(e,n,i)}s=s.next}while(s!==r)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vx(t){var e=t.alternate;e!==null&&(t.alternate=null,vx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[xa],delete e[Xh],delete e[H2],delete e[q2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wx(t){return t.tag===5||t.tag===3||t.tag===4}function h0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nc));else if(r!==4&&(t=t.child,t!==null))for(ff(t,e,n),t=t.sibling;t!==null;)ff(t,e,n),t=t.sibling}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var et=null,cn=!1;function yr(t,e,n){for(n=n.child;n!==null;)_x(t,e,n),n=n.sibling}function _x(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:dt||yi(n,e);case 6:var r=et,s=cn;et=null,yr(t,e,n),et=r,cn=s,et!==null&&(cn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(cn?(t=et,n=n.stateNode,t.nodeType===8?Qd(t.parentNode,n):t.nodeType===1&&Qd(t,n),ga(t)):Qd(et,n.stateNode));break;case 4:r=et,s=cn,et=n.stateNode.containerInfo,cn=!0,yr(t,e,n),et=r,cn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&df(n,e,o),s=s.next}while(s!==r)}yr(t,e,n);break;case 1:if(!dt&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){De(n,e,c)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,yr(t,e,n),dt=r):yr(t,e,n);break;default:yr(t,e,n)}}function f0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aS),e.forEach(function(r){var s=yS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:et=c.stateNode,cn=!1;break e;case 3:et=c.stateNode.containerInfo,cn=!0;break e;case 4:et=c.stateNode.containerInfo,cn=!0;break e}c=c.return}if(et===null)throw Error(z(160));_x(i,o,s),et=null,cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){De(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xx(e,t),e=e.sibling}function xx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),Tn(t),r&4){try{ta(3,t,t.return),Iu(3,t)}catch(I){De(t,t.return,I)}try{ta(5,t,t.return)}catch(I){De(t,t.return,I)}}break;case 1:an(e,t),Tn(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(an(e,t),Tn(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var s=t.stateNode;try{ha(s,"")}catch(I){De(t,t.return,I)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&zw(s,i),Mh(c,o);var d=Mh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Kw(s,m):f==="dangerouslySetInnerHTML"?Ww(s,m):f==="children"?ha(s,m):om(s,f,m,d)}switch(c){case"input":Ph(s,i);break;case"textarea":Hw(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?wi(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?wi(s,!!i.multiple,i.defaultValue,!0):wi(s,!!i.multiple,i.multiple?[]:"",!1))}s[xa]=i}catch(I){De(t,t.return,I)}}break;case 6:if(an(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(I){De(t,t.return,I)}}break;case 3:if(an(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(I){De(t,t.return,I)}break;case 4:an(e,t),Tn(t);break;case 13:an(e,t),Tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Fm=Me())),r&4&&f0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,an(e,t),dt=d):an(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,x=g.child,g.tag){case 0:case 11:case 14:case 15:ta(4,g,g.return);break;case 1:yi(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(I){De(r,n,I)}}break;case 5:yi(g,g.return);break;case 22:if(g.memoizedState!==null){p0(m);continue}}x!==null?(x.return=g,Q=x):p0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Gw("display",o))}catch(I){De(t,t.return,I)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(I){De(t,t.return,I)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:an(e,t),Tn(t),r&4&&f0(t);break;case 21:break;default:an(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wx(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ha(s,""),r.flags&=-33);var i=h0(t);mf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=h0(t);ff(t,c,o);break;default:throw Error(z(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cS(t,e,n){Q=t,Ex(t)}function Ex(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ol;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||dt;c=Ol;var d=dt;if(Ol=o,(dt=u)&&!d)for(Q=s;Q!==null;)o=Q,u=o.child,o.tag===22&&o.memoizedState!==null?g0(s):u!==null?(u.return=o,Q=u):g0(s);for(;i!==null;)Q=i,Ex(i),i=i.sibling;Q=s,Ol=c,dt=d}m0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):m0(t)}}function m0(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Jy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Jy(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ga(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&hf(e)}catch(g){De(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function p0(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function g0(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var i=e.return;try{hf(e)}catch(u){De(e,i,u)}break;case 5:var o=e.return;try{hf(e)}catch(u){De(e,o,u)}}}catch(u){De(e,e.return,u)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var uS=Math.ceil,Vc=ar.ReactCurrentDispatcher,Mm=ar.ReactCurrentOwner,Zt=ar.ReactCurrentBatchConfig,ue=0,Ze=null,Ue=null,rt=0,Mt=0,vi=es(0),We=0,Na=null,Ps=0,Su=0,Vm=0,na=null,St=null,Fm=0,Vi=1/0,Vn=null,Fc=!1,pf=null,Lr=null,Ml=!1,kr=null,Uc=0,ra=0,gf=null,rc=-1,sc=0;function wt(){return ue&6?Me():rc!==-1?rc:rc=Me()}function Or(t){return t.mode&1?ue&2&&rt!==0?rt&-rt:G2.transition!==null?(sc===0&&(sc=o_()),sc):(t=me,t!==0||(t=window.event,t=t===void 0?16:f_(t.type)),t):1}function mn(t,e,n,r){if(50<ra)throw ra=0,gf=null,Error(z(185));za(t,n,r),(!(ue&2)||t!==Ze)&&(t===Ze&&(!(ue&2)&&(Su|=n),We===4&&Er(t,rt)),Pt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Vi=Me()+500,Eu&&ts()))}function Pt(t,e){var n=t.callbackNode;GI(t,e);var r=bc(t,t===Ze?rt:0);if(r===0)n!==null&&Iy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Iy(n),e===1)t.tag===0?W2(y0.bind(null,t)):P_(y0.bind(null,t)),$2(function(){!(ue&6)&&ts()}),n=null;else{switch(a_(r)){case 1:n=dm;break;case 4:n=s_;break;case 16:n=Ec;break;case 536870912:n=i_;break;default:n=Ec}n=Cx(n,bx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bx(t,e){if(rc=-1,sc=0,ue&6)throw Error(z(327));var n=t.callbackNode;if(Ti()&&t.callbackNode!==n)return null;var r=bc(t,t===Ze?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Bc(t,r);else{e=r;var s=ue;ue|=2;var i=Ix();(Ze!==t||rt!==e)&&(Vn=null,Vi=Me()+500,Ts(t,e));do try{fS();break}catch(c){Tx(t,c)}while(!0);Tm(),Vc.current=i,ue=s,Ue!==null?e=0:(Ze=null,rt=0,e=We)}if(e!==0){if(e===2&&(s=$h(t),s!==0&&(r=s,e=yf(t,s))),e===1)throw n=Na,Ts(t,0),Er(t,r),Pt(t,Me()),n;if(e===6)Er(t,r);else{if(s=t.current.alternate,!(r&30)&&!dS(s)&&(e=Bc(t,r),e===2&&(i=$h(t),i!==0&&(r=i,e=yf(t,i))),e===1))throw n=Na,Ts(t,0),Er(t,r),Pt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ms(t,St,Vn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=Fm+500-Me(),10<e)){if(bc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yh(ms.bind(null,t,St,Vn),e);break}ms(t,St,Vn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-fn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uS(r/1960))-r,10<r){t.timeoutHandle=Yh(ms.bind(null,t,St,Vn),r);break}ms(t,St,Vn);break;case 5:ms(t,St,Vn);break;default:throw Error(z(329))}}}return Pt(t,Me()),t.callbackNode===n?bx.bind(null,t):null}function yf(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=Bc(t,e),t!==2&&(e=St,St=n,e!==null&&vf(e)),t}function vf(t){St===null?St=t:St.push.apply(St,t)}function dS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Vm,e&=~Su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function y0(t){if(ue&6)throw Error(z(327));Ti();var e=bc(t,0);if(!(e&1))return Pt(t,Me()),null;var n=Bc(t,e);if(t.tag!==0&&n===2){var r=$h(t);r!==0&&(e=r,n=yf(t,r))}if(n===1)throw n=Na,Ts(t,0),Er(t,e),Pt(t,Me()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ms(t,St,Vn),Pt(t,Me()),null}function Um(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Vi=Me()+500,Eu&&ts())}}function js(t){kr!==null&&kr.tag===0&&!(ue&6)&&Ti();var e=ue;ue|=1;var n=Zt.transition,r=me;try{if(Zt.transition=null,me=1,t)return t()}finally{me=r,Zt.transition=n,ue=e,!(ue&6)&&ts()}}function Bm(){Mt=vi.current,Ee(vi)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B2(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(xm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:Oi(),Ee(Ct),Ee(ft),Cm();break;case 5:Am(r);break;case 4:Oi();break;case 13:Ee(Ne);break;case 19:Ee(Ne);break;case 10:Im(r.type._context);break;case 22:case 23:Bm()}n=n.return}if(Ze=t,Ue=t=Mr(t.current,null),rt=Mt=e,We=0,Na=null,Vm=Su=Ps=0,St=na=null,vs!==null){for(e=0;e<vs.length;e++)if(n=vs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}vs=null}return t}function Tx(t,e){do{var n=Ue;try{if(Tm(),ec.current=Mc,Oc){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oc=!1}if(Rs=0,Xe=qe=ke=null,ea=!1,Ta=0,Mm.current=null,n===null||n.return===null){We=1,Na=e,Ue=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=rt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=s0(o);if(x!==null){x.flags&=-257,i0(x,o,c,i,e),x.mode&1&&r0(i,d,e),e=x,u=d;var E=e.updateQueue;if(E===null){var I=new Set;I.add(u),e.updateQueue=I}else E.add(u);break e}else{if(!(e&1)){r0(i,d,e),$m();break e}u=Error(z(426))}}else if(Ie&&c.mode&1){var A=s0(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),i0(A,o,c,i,e),Em(Mi(u,c));break e}}i=u=Mi(u,c),We!==4&&(We=2),na===null?na=[i]:na.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=ax(i,u,e);Xy(i,b);break e;case 1:c=u;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Lr===null||!Lr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=lx(i,c,e);Xy(i,C);break e}}i=i.return}while(i!==null)}Nx(n)}catch(L){e=L,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Ix(){var t=Vc.current;return Vc.current=Mc,t===null?Mc:t}function $m(){(We===0||We===3||We===2)&&(We=4),Ze===null||!(Ps&268435455)&&!(Su&268435455)||Er(Ze,rt)}function Bc(t,e){var n=ue;ue|=2;var r=Ix();(Ze!==t||rt!==e)&&(Vn=null,Ts(t,e));do try{hS();break}catch(s){Tx(t,s)}while(!0);if(Tm(),ue=n,Vc.current=r,Ue!==null)throw Error(z(261));return Ze=null,rt=0,We}function hS(){for(;Ue!==null;)Sx(Ue)}function fS(){for(;Ue!==null&&!VI();)Sx(Ue)}function Sx(t){var e=Ax(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Nx(t):Ue=e,Mm.current=null}function Nx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oS(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ue=null;return}}else if(n=iS(n,e,Mt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function ms(t,e,n){var r=me,s=Zt.transition;try{Zt.transition=null,me=1,mS(t,e,n,r)}finally{Zt.transition=s,me=r}return null}function mS(t,e,n,r){do Ti();while(kr!==null);if(ue&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KI(t,i),t===Ze&&(Ue=Ze=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ml||(Ml=!0,Cx(Ec,function(){return Ti(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Zt.transition,Zt.transition=null;var o=me;me=1;var c=ue;ue|=4,Mm.current=null,lS(t,n),xx(n,t),D2(Kh),Tc=!!Gh,Kh=Gh=null,t.current=n,cS(n),FI(),ue=c,me=o,Zt.transition=i}else t.current=n;if(Ml&&(Ml=!1,kr=t,Uc=s),i=t.pendingLanes,i===0&&(Lr=null),$I(n.stateNode),Pt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fc)throw Fc=!1,t=pf,pf=null,t;return Uc&1&&t.tag!==0&&Ti(),i=t.pendingLanes,i&1?t===gf?ra++:(ra=0,gf=t):ra=0,ts(),null}function Ti(){if(kr!==null){var t=a_(Uc),e=Zt.transition,n=me;try{if(Zt.transition=null,me=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,Uc=0,ue&6)throw Error(z(331));var s=ue;for(ue|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:ta(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,x=f.return;if(vx(f),f===d){Q=null;break}if(g!==null){g.return=x,Q=g;break}Q=x}}}var E=i.alternate;if(E!==null){var I=E.child;if(I!==null){E.child=null;do{var A=I.sibling;I.sibling=null,I=A}while(I!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ta(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Q=b;break e}Q=i.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Q=w;else e:for(o=y;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Iu(9,c)}}catch(L){De(c,c.return,L)}if(c===o){Q=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,Q=C;break e}Q=c.return}}if(ue=s,ts(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(yu,t)}catch{}r=!0}return r}finally{me=n,Zt.transition=e}}return!1}function v0(t,e,n){e=Mi(n,e),e=ax(t,e,1),t=Dr(t,e,1),e=wt(),t!==null&&(za(t,1,e),Pt(t,e))}function De(t,e,n){if(t.tag===3)v0(t,t,n);else for(;e!==null;){if(e.tag===3){v0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Mi(n,t),t=lx(e,t,1),e=Dr(e,t,1),t=wt(),e!==null&&(za(e,1,t),Pt(e,t));break}}e=e.return}}function pS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(rt&n)===n&&(We===4||We===3&&(rt&130023424)===rt&&500>Me()-Fm?Ts(t,0):Vm|=n),Pt(t,e)}function kx(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=wt();t=Zn(t,e),t!==null&&(za(t,e,n),Pt(t,n))}function gS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kx(t,n)}function yS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),kx(t,n)}var Ax;Ax=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,sS(t,e,n);At=!!(t.flags&131072)}else At=!1,Ie&&e.flags&1048576&&j_(e,Rc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nc(t,e),t=e.pendingProps;var s=ji(e,ft.current);bi(e,n),s=Pm(null,e,r,t,s,n);var i=jm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,Ac(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nm(e),s.updater=Tu,e.stateNode=s,s._reactInternals=e,rf(e,r,t,n),e=af(null,e,r,!0,i,n)):(e.tag=0,Ie&&i&&_m(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=wS(r),t=ln(r,t),s){case 0:e=of(null,e,r,t,n);break e;case 1:e=l0(null,e,r,t,n);break e;case 11:e=o0(null,e,r,t,n);break e;case 14:e=a0(null,e,r,ln(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),of(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),l0(t,e,r,s,n);case 3:e:{if(hx(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,F_(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Mi(Error(z(423)),e),e=c0(t,e,r,n,s);break e}else if(r!==s){s=Mi(Error(z(424)),e),e=c0(t,e,r,n,s);break e}else for(Ft=jr(e.stateNode.containerInfo.firstChild),$t=e,Ie=!0,dn=null,n=M_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Di(),r===s){e=er(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return U_(e),t===null&&ef(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qh(r,s)?o=null:i!==null&&Qh(r,i)&&(e.flags|=32),dx(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&ef(e),null;case 13:return fx(t,e,n);case 4:return km(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Li(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),o0(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(Pc,r._currentValue),r._currentValue=o,i!==null)if(gn(i.value,o)){if(i.children===s.children&&!Ct.current){e=er(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Wn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),tf(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),tf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bi(e,n),s=tn(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=ln(r,e.pendingProps),s=ln(r.type,s),a0(t,e,r,s,n);case 15:return cx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),nc(t,e),e.tag=1,Rt(r)?(t=!0,Ac(e)):t=!1,bi(e,n),ox(e,r,s),rf(e,r,s,n),af(null,e,r,!0,t,n);case 19:return mx(t,e,n);case 22:return ux(t,e,n)}throw Error(z(156,e.tag))};function Cx(t,e){return r_(t,e)}function vS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new vS(t,e,n,r)}function zm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wS(t){if(typeof t=="function")return zm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lm)return 11;if(t===cm)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ic(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")zm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case li:return Is(n.children,s,i,e);case am:o=8,s|=8;break;case Nh:return t=Jt(12,n,e,s|2),t.elementType=Nh,t.lanes=i,t;case kh:return t=Jt(13,n,e,s),t.elementType=kh,t.lanes=i,t;case Ah:return t=Jt(19,n,e,s),t.elementType=Ah,t.lanes=i,t;case Uw:return Nu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vw:o=10;break e;case Fw:o=9;break e;case lm:o=11;break e;case cm:o=14;break e;case wr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Is(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function Nu(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=Uw,t.lanes=n,t.stateNode={isHidden:!1},t}function rh(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function sh(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _S(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vd(0),this.expirationTimes=Vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hm(t,e,n,r,s,i,o,c,u){return t=new _S(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nm(i),t}function xS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ai,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rx(t){if(!t)return Hr;t=t._reactInternals;e:{if($s(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Rt(n))return R_(t,n,e)}return e}function Px(t,e,n,r,s,i,o,c,u){return t=Hm(n,r,!0,t,s,i,o,c,u),t.context=Rx(null),n=t.current,r=wt(),s=Or(n),i=Wn(r,s),i.callback=e??null,Dr(n,i,s),t.current.lanes=s,za(t,s,r),Pt(t,r),t}function ku(t,e,n,r){var s=e.current,i=wt(),o=Or(s);return n=Rx(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Dr(s,e,o),t!==null&&(mn(t,s,o,i),Zl(t,s,o)),o}function $c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function w0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qm(t,e){w0(t,e),(t=t.alternate)&&w0(t,e)}function ES(){return null}var jx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wm(t){this._internalRoot=t}Au.prototype.render=Wm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));ku(t,e,null,null)};Au.prototype.unmount=Wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){ku(null,t,null,null)}),e[Jn]=null}};function Au(t){this._internalRoot=t}Au.prototype.unstable_scheduleHydration=function(t){if(t){var e=u_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&h_(t)}};function Gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _0(){}function bS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=$c(o);i.call(d)}}var o=Px(e,r,t,0,null,!1,!1,"",_0);return t._reactRootContainer=o,t[Jn]=o.current,wa(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=$c(u);c.call(d)}}var u=Hm(t,0,!1,null,null,!1,!1,"",_0);return t._reactRootContainer=u,t[Jn]=u.current,wa(t.nodeType===8?t.parentNode:t),js(function(){ku(e,u,n,r)}),u}function Ru(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=$c(o);c.call(u)}}ku(e,o,t,s)}else o=bS(n,e,t,s,r);return $c(o)}l_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(hm(e,n|1),Pt(e,Me()),!(ue&6)&&(Vi=Me()+500,ts()))}break;case 13:js(function(){var r=Zn(t,1);if(r!==null){var s=wt();mn(r,t,1,s)}}),qm(t,1)}};fm=function(t){if(t.tag===13){var e=Zn(t,134217728);if(e!==null){var n=wt();mn(e,t,134217728,n)}qm(t,134217728)}};c_=function(t){if(t.tag===13){var e=Or(t),n=Zn(t,e);if(n!==null){var r=wt();mn(n,t,e,r)}qm(t,e)}};u_=function(){return me};d_=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Fh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xu(r);if(!s)throw Error(z(90));$w(r),Ph(r,s)}}}break;case"textarea":Hw(t,n);break;case"select":e=n.value,e!=null&&wi(t,!!n.multiple,e,!1)}};Xw=Um;Jw=js;var TS={usingClientEntryPoint:!1,Events:[qa,hi,xu,Qw,Yw,Um]},Do={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IS={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=t_(t),t===null?null:t.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||ES,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{yu=Vl.inject(IS),An=Vl}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TS;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gm(e))throw Error(z(200));return xS(t,e,null,n)};qt.createRoot=function(t,e){if(!Gm(t))throw Error(z(299));var n=!1,r="",s=jx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hm(t,1,!1,null,null,n,!1,r,s),t[Jn]=e.current,wa(t.nodeType===8?t.parentNode:t),new Wm(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=t_(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return js(t)};qt.hydrate=function(t,e,n){if(!Cu(e))throw Error(z(200));return Ru(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Gm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Px(e,null,t,1,n??null,s,!1,i,o),t[Jn]=e.current,wa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Au(e)};qt.render=function(t,e,n){if(!Cu(e))throw Error(z(200));return Ru(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!Cu(t))throw Error(z(40));return t._reactRootContainer?(js(function(){Ru(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};qt.unstable_batchedUpdates=Um;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Ru(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function Dx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dx)}catch(t){console.error(t)}}Dx(),Dw.exports=qt;var SS=Dw.exports,x0=SS;Ih.createRoot=x0.createRoot,Ih.hydrateRoot=x0.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var E0="popstate";function NS(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return wf("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ka(s)}return AS(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kS(){return Math.random().toString(36).substring(2,10)}function b0(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Xi(e):e,state:n,key:e&&e.key||r||kS()}}function ka({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function AS(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function m(){c="POP";let A=f(),b=A==null?null:A-d;d=A,u&&u({action:c,location:I.location,delta:b})}function g(A,b){c="PUSH";let y=wf(I.location,A,b);d=f()+1;let w=b0(y,d),C=I.createHref(y);try{o.pushState(w,"",C)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(C)}i&&u&&u({action:c,location:I.location,delta:1})}function x(A,b){c="REPLACE";let y=wf(I.location,A,b);d=f();let w=b0(y,d),C=I.createHref(y);o.replaceState(w,"",C),i&&u&&u({action:c,location:I.location,delta:0})}function E(A){return CS(A)}let I={get action(){return c},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(E0,m),u=A,()=>{s.removeEventListener(E0,m),u=null}},createHref(A){return e(s,A)},createURL:E,encodeLocation(A){let b=E(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:x,go(A){return o.go(A)}};return I}function CS(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Se(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ka(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Lx(t,e,n="/"){return RS(t,e,n,!1)}function RS(t,e,n,r){let s=typeof e=="string"?Xi(e):e,i=tr(s.pathname||"/",n);if(i==null)return null;let o=Ox(t);PS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=zS(i);c=BS(o[u],d,r)}return c}function Ox(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Se(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=Gn([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(Se(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Ox(o.children,e,g,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:FS(m,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Mx(o.path))i(o,c,!0,d)}),e}function Mx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Mx(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function PS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:US(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var jS=/^:[\w-]+$/,DS=3,LS=2,OS=1,MS=10,VS=-2,T0=t=>t==="*";function FS(t,e){let n=t.split("/"),r=n.length;return n.some(T0)&&(r+=VS),e&&(r+=LS),n.filter(s=>!T0(s)).reduce((s,i)=>s+(jS.test(i)?DS:i===""?OS:MS),r)}function US(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function BS(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=zc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=zc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Gn([i,m.pathname]),pathnameBase:GS(Gn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Gn([i,m.pathnameBase]))}return o}function zc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$S(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:m},g)=>{if(f==="*"){let E=c[g]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const x=c[g];return m&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function $S(t,e=!1,n=!0){yn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function tr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HS(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:qS(n,e):e,search:KS(r),hash:QS(s)}}function qS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ih(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Km(t){let e=WS(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Qm(t,e,n,r=!1){let s;typeof t=="string"?s=Xi(t):(s={...t},Se(!s.pathname||!s.pathname.includes("?"),ih("?","pathname","search",s)),Se(!s.pathname||!s.pathname.includes("#"),ih("#","pathname","hash",s)),Se(!s.search||!s.search.includes("#"),ih("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=HS(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Gn=t=>t.join("/").replace(/\/\/+/g,"/"),GS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Vx=["POST","PUT","PATCH","DELETE"];new Set(Vx);var XS=["GET",...Vx];new Set(XS);var Ji=P.createContext(null);Ji.displayName="DataRouter";var Pu=P.createContext(null);Pu.displayName="DataRouterState";P.createContext(!1);var Fx=P.createContext({isTransitioning:!1});Fx.displayName="ViewTransition";var JS=P.createContext(new Map);JS.displayName="Fetchers";var ZS=P.createContext(null);ZS.displayName="Await";var _n=P.createContext(null);_n.displayName="Navigation";var Ga=P.createContext(null);Ga.displayName="Location";var xn=P.createContext({outlet:null,matches:[],isDataRoute:!1});xn.displayName="Route";var Ym=P.createContext(null);Ym.displayName="RouteError";function eN(t,{relative:e}={}){Se(Zi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(_n),{hash:s,pathname:i,search:o}=Ka(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Gn([n,i])),r.createHref({pathname:c,search:o,hash:s})}function Zi(){return P.useContext(Ga)!=null}function ns(){return Se(Zi(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ga).location}var Ux="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Bx(t){P.useContext(_n).static||P.useLayoutEffect(t)}function Xm(){let{isDataRoute:t}=P.useContext(xn);return t?pN():tN()}function tN(){Se(Zi(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Ji),{basename:e,navigator:n}=P.useContext(_n),{matches:r}=P.useContext(xn),{pathname:s}=ns(),i=JSON.stringify(Km(r)),o=P.useRef(!1);return Bx(()=>{o.current=!0}),P.useCallback((u,d={})=>{if(yn(o.current,Ux),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Qm(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Gn([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}var nN=P.createContext(null);function rN(t){let e=P.useContext(xn).outlet;return P.useMemo(()=>e&&P.createElement(nN.Provider,{value:t},e),[e,t])}function Ka(t,{relative:e}={}){let{matches:n}=P.useContext(xn),{pathname:r}=ns(),s=JSON.stringify(Km(n));return P.useMemo(()=>Qm(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function sN(t,e){return $x(t,e)}function $x(t,e,n,r,s){var y;Se(Zi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(_n),{matches:o}=P.useContext(xn),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let w=m&&m.path||"";zx(d,!m||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let g=ns(),x;if(e){let w=typeof e=="string"?Xi(e):e;Se(f==="/"||((y=w.pathname)==null?void 0:y.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=g;let E=x.pathname||"/",I=E;if(f!=="/"){let w=f.replace(/^\//,"").split("/");I="/"+E.replace(/^\//,"").split("/").slice(w.length).join("/")}let A=Lx(t,{pathname:I});yn(m||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),yn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=cN(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:Gn([f,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Gn([f,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,s);return e&&b?P.createElement(Ga.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},b):b}function iN(){let t=mN(),e=YS(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:i},"ErrorBoundary")," or"," ",P.createElement("code",{style:i},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,o)}var oN=P.createElement(iN,null),aN=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?P.createElement(xn.Provider,{value:this.props.routeContext},P.createElement(Ym.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lN({routeContext:t,match:e,children:n}){let r=P.useContext(Ji);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(xn.Provider,{value:t},n)}function cN(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Se(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=n,x=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,m)=>{let g,x=!1,E=null,I=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,E=f.route.errorElement||oN,c&&(u<0&&m===0?(zx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,I=null):u===m&&(x=!0,I=f.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,m+1)),b=()=>{let y;return g?y=E:x?y=I:f.route.Component?y=P.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,P.createElement(lN,{match:f,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?P.createElement(aN,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:b(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):b()},null)}function Jm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uN(t){let e=P.useContext(Ji);return Se(e,Jm(t)),e}function dN(t){let e=P.useContext(Pu);return Se(e,Jm(t)),e}function hN(t){let e=P.useContext(xn);return Se(e,Jm(t)),e}function Zm(t){let e=hN(t),n=e.matches[e.matches.length-1];return Se(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fN(){return Zm("useRouteId")}function mN(){var r;let t=P.useContext(Ym),e=dN("useRouteError"),n=Zm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function pN(){let{router:t}=uN("useNavigate"),e=Zm("useNavigate"),n=P.useRef(!1);return Bx(()=>{n.current=!0}),P.useCallback(async(s,i={})=>{yn(n.current,Ux),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var I0={};function zx(t,e,n){!e&&!I0[t]&&(I0[t]=!0,yn(!1,n))}P.memo(gN);function gN({routes:t,future:e,state:n,unstable_onError:r}){return $x(t,void 0,n,r,e)}function ep({to:t,replace:e,state:n,relative:r}){Se(Zi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(_n);yn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=P.useContext(xn),{pathname:o}=ns(),c=Xm(),u=Qm(t,Km(i),o,r==="path"),d=JSON.stringify(u);return P.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function yN(t){return rN(t.context)}function Kt(t){Se(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Se(!Zi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Xi(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:g="default"}=n,x=P.useMemo(()=>{let E=tr(u,o);return E==null?null:{location:{pathname:E,search:d,hash:f,state:m,key:g},navigationType:r}},[o,u,d,f,m,g,r]);return yn(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:P.createElement(_n.Provider,{value:c},P.createElement(Ga.Provider,{children:e,value:x}))}function Hx({children:t,location:e}){return sN(_f(t),e)}function _f(t,e=[]){let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,_f(r.props.children,i));return}Se(r.type===Kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Se(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_f(r.props.children,i)),n.push(o)}),n}var oc="get",ac="application/x-www-form-urlencoded";function ju(t){return t!=null&&typeof t.tagName=="string"}function wN(t){return ju(t)&&t.tagName.toLowerCase()==="button"}function _N(t){return ju(t)&&t.tagName.toLowerCase()==="form"}function xN(t){return ju(t)&&t.tagName.toLowerCase()==="input"}function EN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bN(t,e){return t.button===0&&(!e||e==="_self")&&!EN(t)}var Fl=null;function TN(){if(Fl===null)try{new FormData(document.createElement("form"),0),Fl=!1}catch{Fl=!0}return Fl}var IN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oh(t){return t!=null&&!IN.has(t)?(yn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ac}"`),null):t}function SN(t,e){let n,r,s,i,o;if(_N(t)){let c=t.getAttribute("action");r=c?tr(c,e):null,n=t.getAttribute("method")||oc,s=oh(t.getAttribute("enctype"))||ac,i=new FormData(t)}else if(wN(t)||xN(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?tr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||oc,s=oh(t.getAttribute("formenctype"))||oh(c.getAttribute("enctype"))||ac,i=new FormData(c,t),!TN()){let{name:d,type:f,value:m}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(ju(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=oc,r=null,s=ac,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&tr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function kN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function CN(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await kN(i,n);return o.links?o.links():[]}return[]}));return DN(r.flat(1).filter(AN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function S0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function RN(t,e,{includeHydrateFallback:n}={}){return PN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function PN(t){return[...new Set(t)]}function jN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function DN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(jN(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function qx(){let t=P.useContext(Ji);return tp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LN(){let t=P.useContext(Pu);return tp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var np=P.createContext(void 0);np.displayName="FrameworkContext";function Wx(){let t=P.useContext(np);return tp(t,"You must render this element inside a <HydratedRouter> element"),t}function ON(t,e){let n=P.useContext(np),[r,s]=P.useState(!1),[i,o]=P.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=e,g=P.useRef(null);P.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let I=b=>{b.forEach(y=>{o(y.isIntersecting)})},A=new IntersectionObserver(I,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),P.useEffect(()=>{if(r){let I=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(I)}}},[r]);let x=()=>{s(!0)},E=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Lo(c,x),onBlur:Lo(u,E),onMouseEnter:Lo(d,x),onMouseLeave:Lo(f,E),onTouchStart:Lo(m,x)}]:[!1,g,{}]}function Lo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function MN({page:t,...e}){let{router:n}=qx(),r=P.useMemo(()=>Lx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(FN,{page:t,matches:r,...e}):null}function VN(t){let{manifest:e,routeModules:n}=Wx(),[r,s]=P.useState([]);return P.useEffect(()=>{let i=!1;return CN(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function FN({page:t,matches:e,...n}){let r=ns(),{manifest:s,routeModules:i}=Wx(),{basename:o}=qx(),{loaderData:c,matches:u}=LN(),d=P.useMemo(()=>S0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=P.useMemo(()=>S0(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let E=new Set,I=!1;if(e.forEach(b=>{var w;let y=s.routes[b.route.id];!y||!y.hasLoader||(!d.some(C=>C.route.id===b.route.id)&&b.route.id in c&&((w=i[b.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?I=!0:E.add(b.route.id))}),E.size===0)return[];let A=NN(t,o,"data");return I&&E.size>0&&A.searchParams.set("_routes",e.filter(b=>E.has(b.route.id)).map(b=>b.route.id).join(",")),[A.pathname+A.search]},[o,c,r,s,d,e,t,i]),g=P.useMemo(()=>RN(f,s),[f,s]),x=VN(f);return P.createElement(P.Fragment,null,m.map(E=>P.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),g.map(E=>P.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),x.map(({key:E,link:I})=>P.createElement("link",{key:E,nonce:n.nonce,...I})))}function UN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Gx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gx&&(window.__reactRouterVersion="7.9.5")}catch{}function BN({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=NS({window:n,v5Compat:!0}));let s=r.current,[i,o]=P.useState({action:s.action,location:s.location}),c=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>s.listen(c),[s,c]),P.createElement(vN,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qx=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m,...g},x){let{basename:E}=P.useContext(_n),I=typeof d=="string"&&Kx.test(d),A,b=!1;if(typeof d=="string"&&I&&(A=d,Gx))try{let S=new URL(window.location.href),k=d.startsWith("//")?new URL(S.protocol+d):new URL(d),R=tr(k.pathname,E);k.origin===S.origin&&R!=null?d=R+k.search+k.hash:b=!0}catch{yn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=eN(d,{relative:s}),[w,C,L]=ON(r,g),V=HN(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function T(S){e&&e(S),S.defaultPrevented||V(S)}let v=P.createElement("a",{...g,...L,href:A||y,onClick:b||i?e:T,ref:UN(x,C),target:u,"data-discover":!I&&n==="render"?"true":void 0});return w&&!I?P.createElement(P.Fragment,null,v,P.createElement(MN,{page:y})):v});Qx.displayName="Link";var Yx=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let m=Ka(o,{relative:d.relative}),g=ns(),x=P.useContext(Pu),{navigator:E,basename:I}=P.useContext(_n),A=x!=null&&QN(m)&&c===!0,b=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,y=g.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&I&&(w=tr(w,I)||w);const C=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let L=y===b||!s&&y.startsWith(b)&&y.charAt(C)==="/",V=w!=null&&(w===b||!s&&w.startsWith(b)&&w.charAt(b.length)==="/"),T={isActive:L,isPending:V,isTransitioning:A},v=L?e:void 0,S;typeof r=="function"?S=r(T):S=[r,L?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(T):i;return P.createElement(Qx,{...d,"aria-current":v,className:S,ref:f,style:k,to:o,viewTransition:c},typeof u=="function"?u(T):u)});Yx.displayName="NavLink";var $N=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=oc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...g},x)=>{let E=GN(),I=KN(c,{relative:d}),A=o.toLowerCase()==="get"?"get":"post",b=typeof c=="string"&&Kx.test(c),y=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,L=(C==null?void 0:C.getAttribute("formmethod"))||o;E(C||w.currentTarget,{fetcherKey:e,method:L,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:m})};return P.createElement("form",{ref:x,method:A,action:I,onSubmit:r?u:y,...g,"data-discover":!b&&t==="render"?"true":void 0})});$N.displayName="Form";function zN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xx(t){let e=P.useContext(Ji);return Se(e,zN(t)),e}function HN(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let c=Xm(),u=ns(),d=Ka(t,{relative:i});return P.useCallback(f=>{if(bN(f,e)){f.preventDefault();let m=n!==void 0?n:ka(u)===ka(d);c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,c,d,n,r,e,t,s,i,o])}var qN=0,WN=()=>`__${String(++qN)}__`;function GN(){let{router:t}=Xx("useSubmit"),{basename:e}=P.useContext(_n),n=fN();return P.useCallback(async(r,s={})=>{let{action:i,method:o,encType:c,formData:u,body:d}=SN(r,e);if(s.navigate===!1){let f=s.fetcherKey||WN();await t.fetch(f,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function KN(t,{relative:e}={}){let{basename:n}=P.useContext(_n),r=P.useContext(xn);Se(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ka(t||".",{relative:e})},o=ns();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Gn([n,i.pathname])),ka(i)}function QN(t,{relative:e}={}){let n=P.useContext(Fx);Se(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Xx("useViewTransitionState"),s=Ka(t,{relative:e});if(!n.isTransitioning)return!1;let i=tr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=tr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return zc(s.pathname,o)!=null||zc(s.pathname,i)!=null}const YN=()=>{};var N0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[f],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Jx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new JN;const g=i<<2|c>>4;if(r.push(g),d!==64){const x=c<<4&240|d>>2;if(r.push(x),m!==64){const E=d<<6&192|m;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZN=function(t){const e=Jx(t);return Zx.encodeByteArray(e,!0)},Hc=function(t){return ZN(t).replace(/\./g,"")},eE=function(t){try{return Zx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=()=>ek().__FIREBASE_DEFAULTS__,nk=()=>{if(typeof process>"u"||typeof N0>"u")return;const t=N0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eE(t[1]);return e&&JSON.parse(e)},Du=()=>{try{return YN()||tk()||nk()||rk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tE=t=>{var e,n;return(n=(e=Du())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},nE=t=>{const e=tE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rE=()=>{var t;return(t=Du())==null?void 0:t.config},sE=t=>{var e;return(e=Du())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}const sa={};function ik(){const t={prod:[],emulator:[]};for(const e of Object.keys(sa))sa[e]?t.emulator.push(e):t.prod.push(e);return t}function ok(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let k0=!1;function sp(t,e){if(typeof window>"u"||typeof document>"u"||!rs(window.location.host)||sa[t]===e||sa[t]||k0)return;sa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=ik().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{k0=!0,o()},g}function f(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=ok(r),x=n("text"),E=document.getElementById(x)||document.createElement("span"),I=n("learnmore"),A=document.getElementById(I)||document.createElement("a"),b=n("preprendIcon"),y=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;c(w),f(A,I);const C=d();u(y,b),w.append(y,E,A,C),document.body.appendChild(w)}i?(E.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ak(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function lk(){var e;const t=(e=Du())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ck(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dk(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hk(){return!lk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aE(){try{return typeof indexedDB=="object"}catch{return!1}}function lE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function fk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="FirebaseError";class on extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mk,Object.setPrototypeOf(this,on.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zs.prototype.create)}}class zs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pk(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new on(s,c,r)}}function pk(t,e){return t.replace(gk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gk=/\{\$([^}]+)}/g;function yk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(A0(i)&&A0(o)){if(!qr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function A0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vk(t,e){const n=new wk(t,e);return n.subscribe.bind(n)}class wk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_k(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ah),s.error===void 0&&(s.error=ah),s.complete===void 0&&(s.complete=ah);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _k(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ah(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=1e3,Ek=2,bk=4*60*60*1e3,Tk=.5;function C0(t,e=xk,n=Ek){const r=e*Math.pow(n,t),s=Math.round(Tk*r*(Math.random()-.5)*2);return Math.min(bk,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t){return t&&t._delegate?t._delegate:t}class rn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nk(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sk(t){return t===ps?void 0:t}function Nk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ik(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const Ak={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},Ck=se.INFO,Rk={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},Pk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Rk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lu{constructor(e){this.name=e,this._logLevel=Ck,this._logHandler=Pk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ak[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const jk=(t,e)=>e.some(n=>t instanceof n);let R0,P0;function Dk(){return R0||(R0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lk(){return P0||(P0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cE=new WeakMap,xf=new WeakMap,uE=new WeakMap,lh=new WeakMap,ip=new WeakMap;function Ok(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Vr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cE.set(n,t)}).catch(()=>{}),ip.set(e,t),e}function Mk(t){if(xf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xf.set(t,e)}let Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vk(t){Ef=t(Ef)}function Fk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ch(this),e,...n);return uE.set(r,e.sort?e.sort():[e]),Vr(r)}:Lk().includes(t)?function(...e){return t.apply(ch(this),e),Vr(cE.get(this))}:function(...e){return Vr(t.apply(ch(this),e))}}function Uk(t){return typeof t=="function"?Fk(t):(t instanceof IDBTransaction&&Mk(t),jk(t,Dk())?new Proxy(t,Ef):t)}function Vr(t){if(t instanceof IDBRequest)return Ok(t);if(lh.has(t))return lh.get(t);const e=Uk(t);return e!==t&&(lh.set(t,e),ip.set(e,t)),e}const ch=t=>ip.get(t);function dE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Vr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Vr(o.result),u.oldVersion,u.newVersion,Vr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Bk=["get","getKey","getAll","getAllKeys","count"],$k=["put","add","delete","clear"],uh=new Map;function j0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uh.get(e))return uh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$k.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Bk.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return uh.set(e,i),i}Vk(t=>({...t,get:(e,n,r)=>j0(e,n)||t.get(e,n,r),has:(e,n)=>!!j0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Hk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",D0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Lu("@firebase/app"),qk="@firebase/app-compat",Wk="@firebase/analytics-compat",Gk="@firebase/analytics",Kk="@firebase/app-check-compat",Qk="@firebase/app-check",Yk="@firebase/auth",Xk="@firebase/auth-compat",Jk="@firebase/database",Zk="@firebase/data-connect",eA="@firebase/database-compat",tA="@firebase/functions",nA="@firebase/functions-compat",rA="@firebase/installations",sA="@firebase/installations-compat",iA="@firebase/messaging",oA="@firebase/messaging-compat",aA="@firebase/performance",lA="@firebase/performance-compat",cA="@firebase/remote-config",uA="@firebase/remote-config-compat",dA="@firebase/storage",hA="@firebase/storage-compat",fA="@firebase/firestore",mA="@firebase/ai",pA="@firebase/firestore-compat",gA="firebase",yA="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="[DEFAULT]",vA={[bf]:"fire-core",[qk]:"fire-core-compat",[Gk]:"fire-analytics",[Wk]:"fire-analytics-compat",[Qk]:"fire-app-check",[Kk]:"fire-app-check-compat",[Yk]:"fire-auth",[Xk]:"fire-auth-compat",[Jk]:"fire-rtdb",[Zk]:"fire-data-connect",[eA]:"fire-rtdb-compat",[tA]:"fire-fn",[nA]:"fire-fn-compat",[rA]:"fire-iid",[sA]:"fire-iid-compat",[iA]:"fire-fcm",[oA]:"fire-fcm-compat",[aA]:"fire-perf",[lA]:"fire-perf-compat",[cA]:"fire-rc",[uA]:"fire-rc-compat",[dA]:"fire-gcs",[hA]:"fire-gcs-compat",[fA]:"fire-fst",[pA]:"fire-fst-compat",[mA]:"fire-vertex","fire-js":"fire-js",[gA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Map,wA=new Map,If=new Map;function L0(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vn(t){const e=t.name;if(If.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;If.set(e,t);for(const n of Aa.values())L0(n,t);for(const n of wA.values())L0(n,t);return!0}function ss(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new zs("app","Firebase",_A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=yA;function hE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Tf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Fr.create("bad-app-name",{appName:String(s)});if(n||(n=rE()),!n)throw Fr.create("no-options");const i=Aa.get(s);if(i){if(qr(n,i.options)&&qr(r,i.config))return i;throw Fr.create("duplicate-app",{appName:s})}const o=new kk(s);for(const u of If.values())o.addComponent(u);const c=new xA(n,r,o);return Aa.set(s,c),c}function Ya(t=Tf){const e=Aa.get(t);if(!e&&t===Tf&&rE())return hE();if(!e)throw Fr.create("no-app",{appName:t});return e}function EA(){return Array.from(Aa.values())}function jt(t,e,n){let r=vA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(o.join(" "));return}vn(new rn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebase-heartbeat-database",TA=1,Ca="firebase-heartbeat-store";let dh=null;function fE(){return dh||(dh=dE(bA,TA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),dh}async function IA(t){try{const n=(await fE()).transaction(Ca),r=await n.objectStore(Ca).get(mE(t));return await n.done,r}catch(e){if(e instanceof on)nr.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function O0(t,e){try{const r=(await fE()).transaction(Ca,"readwrite");await r.objectStore(Ca).put(e,mE(t)),await r.done}catch(n){if(n instanceof on)nr.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function mE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1024,NA=30;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=M0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>NA){const o=RA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M0(),{heartbeatsToSend:r,unsentEntries:s}=AA(this._heartbeatsCache.heartbeats),i=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nr.warn(n),""}}}function M0(){return new Date().toISOString().substring(0,10)}function AA(t,e=SA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),V0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),V0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aE()?lE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V0(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}function RA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){vn(new rn("platform-logger",e=>new zk(e),"PRIVATE")),vn(new rn("heartbeat",e=>new kA(e),"PRIVATE")),jt(bf,D0,t),jt(bf,D0,"esm2020"),jt("fire-js","")}PA("");function pE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jA=pE,gE=new zs("auth","Firebase",pE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Lu("@firebase/auth");function DA(t,...e){qc.logLevel<=se.WARN&&qc.warn(`Auth (${Hs}): ${t}`,...e)}function lc(t,...e){qc.logLevel<=se.ERROR&&qc.error(`Auth (${Hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw ap(t,...e)}function pn(t,...e){return ap(t,...e)}function op(t,e,n){const r={...jA(),[e]:n};return new zs("auth","Firebase",r).create(e,{appName:t.name})}function Kn(t){return op(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sn(t,"argument-error"),op(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ap(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gE.create(t,...e)}function J(t,e,...n){if(!t)throw ap(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lc(e),new Error(e)}function rr(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function OA(){return F0()==="http:"||F0()==="https:"}function F0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OA()||oE()||"connection"in navigator)?navigator.onLine:!0}function VA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.shortDelay=e,this.longDelay=n,rr(n>e,"Short delay should be less than long delay!"),this.isMobile=ak()||uk()}get(){return MA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t,e){rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BA=new Xa(3e4,6e4);function lr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Mn(t,e,n,r,s={}){return vE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Qa({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return ck()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&rs(t.emulatorConfig.host)&&(d.credentials="include"),yE.fetch()(await wE(t,t.config.apiHost,n,c),d)})}async function vE(t,e,n){t._canInitEmulator=!1;const r={...FA,...e};try{const s=new zA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ul(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ul(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ul(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ul(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw op(t,f,d);sn(t,f)}}catch(s){if(s instanceof on)throw s;sn(t,"network-request-failed",{message:String(s)})}}async function Ja(t,e,n,r,s={}){const i=await Mn(t,e,n,r,s);return"mfaPendingCredential"in i&&sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wE(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?lp(t.config,s):`${t.config.apiScheme}://${s}`;return UA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function $A(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),BA.get())})}}function Ul(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pn(t,e,r);return s.customData._tokenResponse=n,s}function U0(t){return t!==void 0&&t.enterprise!==void 0}class HA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $A(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qA(t,e){return Mn(t,"GET","/v2/recaptchaConfig",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e){return Mn(t,"POST","/v1/accounts:delete",e)}async function Wc(t,e){return Mn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GA(t,e=!1){const n=pe(t),r=await n.getIdToken(e),s=cp(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ia(hh(s.auth_time)),issuedAtTime:ia(hh(s.iat)),expirationTime:ia(hh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hh(t){return Number(t)*1e3}function cp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lc("JWT malformed, contained fewer than 3 sections"),null;try{const s=eE(n);return s?JSON.parse(s):(lc("Failed to decode base64 JWT payload"),null)}catch(s){return lc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function B0(t){const e=cp(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof on&&KA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Fi(t,Wc(e,{idToken:n}));J(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?_E(s.providerUserInfo):[],o=XA(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function YA(t){const e=pe(t);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _E(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e){const n=await vE(t,{},async()=>{const r=Qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await wE(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&rs(t.emulatorConfig.host)&&(u.credentials="include"),yE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZA(t,e){return Mn(t,"POST","/v2/accounts:revokeToken",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=B0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await JA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ii;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ii,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new QA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fi(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GA(this,e)}reload(){return YA(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nt(this.auth.app))return Promise.reject(Kn(this.auth));const e=await this.getIdToken();return await Fi(this,WA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:x,providerData:E,stsTokenManager:I}=n;J(m&&I,e,"internal-error");const A=Ii.fromJSON(this.name,I);J(typeof m=="string",e,"internal-error"),vr(r,e.name),vr(s,e.name),J(typeof g=="boolean",e,"internal-error"),J(typeof x=="boolean",e,"internal-error"),vr(i,e.name),vr(o,e.name),vr(c,e.name),vr(u,e.name),vr(d,e.name),vr(f,e.name);const b=new hn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:A,createdAt:d,lastLoginAt:f});return E&&Array.isArray(E)&&(b.providerData=E.map(y=>({...y}))),u&&(b._redirectEventId=u),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ii;s.updateFromServerResponse(n);const i=new hn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?_E(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ii;c.updateFromIdToken(r);const u=new hn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;function Hn(t){rr(t instanceof Function,"Expected a class definition");let e=$0.get(t);return e?(rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xE.type="NONE";const z0=xE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t,e,n){return`firebase:${t}:${e}:${n}`}class Si{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cc(this.userKey,s.apiKey,i),this.fullPersistenceKey=cc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wc(this.auth,{idToken:e}).catch(()=>{});return n?hn._fromGetAccountInfoResponse(this.auth,n,e):null}return hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Si(Hn(z0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Hn(z0);const o=cc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Wc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await hn._fromGetAccountInfoResponse(e,g,f)}else m=hn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Si(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Si(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NE(e))return"Blackberry";if(kE(e))return"Webos";if(bE(e))return"Safari";if((e.includes("chrome/")||TE(e))&&!e.includes("edge/"))return"Chrome";if(SE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EE(t=mt()){return/firefox\//i.test(t)}function bE(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TE(t=mt()){return/crios\//i.test(t)}function IE(t=mt()){return/iemobile/i.test(t)}function SE(t=mt()){return/android/i.test(t)}function NE(t=mt()){return/blackberry/i.test(t)}function kE(t=mt()){return/webos/i.test(t)}function up(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eC(t=mt()){var e;return up(t)&&!!((e=window.navigator)!=null&&e.standalone)}function tC(){return dk()&&document.documentMode===10}function AE(t=mt()){return up(t)||SE(t)||kE(t)||NE(t)||/windows phone/i.test(t)||IE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t,e=[]){let n;switch(t){case"Browser":n=H0(mt());break;case"Worker":n=`${H0(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(t,e={}){return Mn(t,"GET","/v2/passwordPolicy",lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=6;class iC{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q0(this),this.idTokenSubscription=new q0(this),this.beforeStateQueue=new nC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Si.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wc(this,{idToken:e}),r=await hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Nt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nt(this.app))return Promise.reject(Kn(this));const n=e?pe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nt(this.app)?Promise.reject(Kn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nt(this.app)?Promise.reject(Kn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rC(this),n=new iC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Si.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&DA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cr(t){return pe(t)}class q0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vk(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ou={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aC(t){Ou=t}function RE(t){return Ou.loadJS(t)}function lC(){return Ou.recaptchaEnterpriseScript}function cC(){return Ou.gapiScript}function uC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class dC{constructor(){this.enterprise=new hC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fC="recaptcha-enterprise",PE="NO_RECAPTCHA";class mC{constructor(e){this.type=fC,this.auth=cr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{qA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new HA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;U0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(PE)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&U0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lC();u.length!==0&&(u+=c),RE(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function W0(t,e,n,r=!1,s=!1){const i=new mC(t);let o;if(s)o=PE;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Kc(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await W0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await W0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t,e){const n=ss(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(qr(i,e??{}))return s;sn(s,"already-initialized")}return n.initialize({options:e})}function gC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yC(t,e,n){const r=cr(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=jE(e),{host:o,port:c}=vC(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(qr(d,r.config.emulator)&&qr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,rs(o)?(rp(`${i}//${o}${u}`),sp("Auth",!0)):wC()}function jE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vC(t){const e=jE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:G0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:G0(o)}}}function G0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function _C(t,e){return Mn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e){return Ja(t,"POST","/v1/accounts:signInWithPassword",lr(t,e))}async function DE(t,e){return Mn(t,"POST","/v1/accounts:sendOobCode",lr(t,e))}async function EC(t,e){return DE(t,e)}async function bC(t,e){return DE(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e){return Ja(t,"POST","/v1/accounts:signInWithEmailLink",lr(t,e))}async function IC(t,e){return Ja(t,"POST","/v1/accounts:signInWithEmailLink",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends dp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ra(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ra(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kc(e,n,"signInWithPassword",xC);case"emailLink":return TC(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kc(e,r,"signUpPassword",_C);case"emailLink":return IC(e,{idToken:n,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e){return Ja(t,"POST","/v1/accounts:signInWithIdp",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="http://localhost";class Ds extends dp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ni(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ni(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ni(e,n)}buildRequest(){const e={requestUri:SC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kC(t){const e=$o(zo(t)).link,n=e?$o(zo(e)).deep_link_id:null,r=$o(zo(t)).deep_link_id;return(r?$o(zo(r)).link:null)||r||n||e||t}class hp{constructor(e){const n=$o(zo(e)),r=n.apiKey??null,s=n.oobCode??null,i=NC(n.mode??null);J(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=kC(e);try{return new hp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.providerId=eo.PROVIDER_ID}static credential(e,n){return Ra._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=hp.parseLink(n);return J(r,"argument-error"),Ra._fromEmailAndCode(e,r.code,r.tenantId)}}eo.PROVIDER_ID="password";eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends fp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Za{constructor(){super("facebook.com")}static credential(e){return Ds._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ds._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.GOOGLE_SIGN_IN_METHOD="google.com";Un.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Za{constructor(){super("github.com")}static credential(e){return Ds._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Za{constructor(){super("twitter.com")}static credential(e,n){return Ds._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,e){return Ja(t,"POST","/v1/accounts:signUp",lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await hn._fromIdTokenResponse(e,r,s),o=K0(r);return new Ls({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=K0(r);return new Ls({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function K0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends on{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Qc(e,n,r,s)}}function LE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(t,i,e,r):i})}async function CC(t,e,n=!1){const r=await Fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e,n=!1){const{auth:r}=t;if(Nt(r.app))return Promise.reject(Kn(r));const s="reauthenticate";try{const i=await Fi(t,LE(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=cp(i.idToken);J(o,r,"internal-error");const{sub:c}=o;return J(t.uid===c,r,"user-mismatch"),Ls._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(t,e,n=!1){if(Nt(t.app))return Promise.reject(Kn(t));const r="signIn",s=await LE(t,r,e),i=await Ls._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function PC(t,e){return OE(cr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t,e,n){var r;J(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),J(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),J(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(J(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(J(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VE(t){const e=cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jC(t,e,n){const r=cr(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&ME(r,s,n),await Kc(r,s,"getOobCode",bC)}async function DC(t,e,n){if(Nt(t.app))return Promise.reject(Kn(t));const r=cr(t),o=await Kc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&VE(t),u}),c=await Ls._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function LC(t,e,n){return Nt(t.app)?Promise.reject(Kn(t)):PC(pe(t),eo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&VE(t),r})}async function OC(t,e){const n=pe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ME(n.auth,s,e);const{email:i}=await EC(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(t,e){return Mn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=pe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Fi(r,MC(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function FC(t,e,n,r){return pe(t).onIdTokenChanged(e,n,r)}function UC(t,e,n){return pe(t).beforeAuthStateChanged(e,n)}function BC(t,e,n,r){return pe(t).onAuthStateChanged(e,n,r)}function $C(t){return pe(t).signOut()}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=1e3,HC=10;class UE extends FE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const qC=UE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends FE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BE.type="SESSION";const $E=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Mu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await WC(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=mp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function KC(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function QC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function XC(){return zE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="firebaseLocalStorageDb",JC=1,Xc="firebaseLocalStorage",qE="fbase_key";class el{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vu(t,e){return t.transaction([Xc],e?"readwrite":"readonly").objectStore(Xc)}function ZC(){const t=indexedDB.deleteDatabase(HE);return new el(t).toPromise()}function kf(){const t=indexedDB.open(HE,JC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Xc,{keyPath:qE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Xc)?e(r):(r.close(),await ZC(),e(await kf()))})})}async function Q0(t,e,n){const r=Vu(t,!0).put({[qE]:e,value:n});return new el(r).toPromise()}async function eR(t,e){const n=Vu(t,!1).get(e),r=await new el(n).toPromise();return r===void 0?null:r.value}function Y0(t,e){const n=Vu(t,!0).delete(e);return new el(n).toPromise()}const tR=800,nR=3;class WE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mu._getInstance(XC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await QC(),!this.activeServiceWorker)return;this.sender=new GC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kf();return await Q0(e,Yc,"1"),await Y0(e,Yc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Y0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Vu(s,!1).getAll();return new el(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WE.type="LOCAL";const rR=WE;new Xa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e){return e?Hn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends dp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ni(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ni(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ni(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sR(t){return OE(t.auth,new pp(t),t.bypassAuthState)}function iR(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),RC(n,new pp(t),t.bypassAuthState)}async function oR(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),CC(n,new pp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sR;case"linkViaPopup":case"linkViaRedirect":return oR;case"reauthViaPopup":case"reauthViaRedirect":return iR;default:sn(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=new Xa(2e3,1e4);async function lR(t,e,n){if(Nt(t.app))return Promise.reject(pn(t,"operation-not-supported-in-this-environment"));const r=cr(t);LA(t,e,fp);const s=GE(r,n);return new _s(r,"signInViaPopup",e,s).executeNotNull()}class _s extends KE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aR.get())};e()}}_s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="pendingRedirect",uc=new Map;class uR extends KE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=uc.get(this.auth._key());if(!e){try{const r=await dR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uc.set(this.auth._key(),e)}return this.bypassAuthState||uc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dR(t,e){const n=mR(e),r=fR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function hR(t,e){uc.set(t._key(),e)}function fR(t){return Hn(t._redirectPersistence)}function mR(t){return cc(cR,t.config.apiKey,t.name)}async function pR(t,e,n=!1){if(Nt(t.app))return Promise.reject(Kn(t));const r=cr(t),s=GE(r,e),o=await new uR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=10*60*1e3;class yR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gR&&this.cachedEventUids.clear(),this.cachedEventUids.has(X0(e))}saveEventToCache(e){this.cachedEventUids.add(X0(e)),this.lastProcessedEventTime=Date.now()}}function X0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e={}){return Mn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xR=/^https?/;async function ER(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wR(t);for(const n of e)try{if(bR(n))return}catch{}sn(t,"unauthorized-domain")}function bR(t){const e=Sf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xR.test(n))return!1;if(_R.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new Xa(3e4,6e4);function J0(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IR(t){return new Promise((e,n)=>{var s,i,o;function r(){J0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J0(),n(pn(t,"network-request-failed"))},timeout:TR.get()})}if((i=(s=Rn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Rn().gapi)!=null&&o.load)r();else{const c=uC("iframefcb");return Rn()[c]=()=>{gapi.load?r():n(pn(t,"network-request-failed"))},RE(`${cC()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw dc=null,e})}let dc=null;function SR(t){return dc=dc||IR(t),dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Xa(5e3,15e3),kR="__/auth/iframe",AR="emulator/auth/iframe",CR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PR(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lp(e,AR):`https://${t.config.authDomain}/${kR}`,r={apiKey:e.apiKey,appName:t.name,v:Hs},s=RR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qa(r).slice(1)}`}async function jR(t){const e=await SR(t),n=Rn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:PR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),c=Rn().setTimeout(()=>{i(o)},NR.get());function u(){Rn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LR=500,OR=600,MR="_blank",VR="http://localhost";class Z0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FR(t,e,n,r=LR,s=OR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...DR,width:r.toString(),height:s.toString(),top:i,left:o},d=mt().toLowerCase();n&&(c=TE(d)?MR:n),EE(d)&&(e=e||VR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[x,E])=>`${g}${x}=${E},`,"");if(eC(d)&&c!=="_self")return UR(e||"",c),new Z0(null);const m=window.open(e||"",c,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new Z0(m)}function UR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="__/auth/handler",$R="emulator/auth/handler",zR=encodeURIComponent("fac");async function ev(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hs,eventId:s};if(e instanceof fp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Za){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${zR}=${encodeURIComponent(u)}`:"";return`${HR(t)}?${Qa(c).slice(1)}${d}`}function HR({config:t}){return t.emulator?lp(t,$R):`https://${t.authDomain}/${BR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="webStorageSupport";class qR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$E,this._completeRedirectFn=pR,this._overrideRedirectResult=hR}async _openPopup(e,n,r,s){var o;rr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await ev(e,n,r,Sf(),s);return FR(e,i,mp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ev(e,n,r,Sf(),s);return KC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(rr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jR(e),r=new yR(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fh,{type:fh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[fh];i!==void 0&&n(!!i),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ER(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AE()||bE()||up()}}const WR=qR;var tv="@firebase/auth",nv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QR(t){vn(new rn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CE(t)},d=new oC(r,s,i,u);return gC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vn(new rn("auth-internal",e=>{const n=cr(e.getProvider("auth").getImmediate());return(r=>new GR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jt(tv,nv,KR(t)),jt(tv,nv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=5*60,XR=sE("authIdTokenMaxAge")||YR;let rv=null;const JR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XR)return;const s=n==null?void 0:n.token;rv!==s&&(rv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZR(t=Ya()){const e=ss(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pC(t,{popupRedirectResolver:WR,persistence:[rR,qC,$E]}),r=sE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=JR(i.toString());UC(n,o,()=>o(n.currentUser)),FC(n,c=>o(c))}}const s=tE("auth");return s&&yC(n,`http://${s}`),n}function eP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}aC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=pn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",eP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QR("Browser");var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,YE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function S(){}S.prototype=v.prototype,T.F=v.prototype,T.prototype=new S,T.prototype.constructor=T,T.D=function(k,R,j){for(var N=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)N[ae-2]=arguments[ae];return v.prototype[R].apply(k,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,S){S||(S=0);const k=Array(16);if(typeof v=="string")for(var R=0;R<16;++R)k[R]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(R=0;R<16;++R)k[R]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=T.g[0],S=T.g[1],R=T.g[2];let j=T.g[3],N;N=v+(j^S&(R^j))+k[0]+3614090360&4294967295,v=S+(N<<7&4294967295|N>>>25),N=j+(R^v&(S^R))+k[1]+3905402710&4294967295,j=v+(N<<12&4294967295|N>>>20),N=R+(S^j&(v^S))+k[2]+606105819&4294967295,R=j+(N<<17&4294967295|N>>>15),N=S+(v^R&(j^v))+k[3]+3250441966&4294967295,S=R+(N<<22&4294967295|N>>>10),N=v+(j^S&(R^j))+k[4]+4118548399&4294967295,v=S+(N<<7&4294967295|N>>>25),N=j+(R^v&(S^R))+k[5]+1200080426&4294967295,j=v+(N<<12&4294967295|N>>>20),N=R+(S^j&(v^S))+k[6]+2821735955&4294967295,R=j+(N<<17&4294967295|N>>>15),N=S+(v^R&(j^v))+k[7]+4249261313&4294967295,S=R+(N<<22&4294967295|N>>>10),N=v+(j^S&(R^j))+k[8]+1770035416&4294967295,v=S+(N<<7&4294967295|N>>>25),N=j+(R^v&(S^R))+k[9]+2336552879&4294967295,j=v+(N<<12&4294967295|N>>>20),N=R+(S^j&(v^S))+k[10]+4294925233&4294967295,R=j+(N<<17&4294967295|N>>>15),N=S+(v^R&(j^v))+k[11]+2304563134&4294967295,S=R+(N<<22&4294967295|N>>>10),N=v+(j^S&(R^j))+k[12]+1804603682&4294967295,v=S+(N<<7&4294967295|N>>>25),N=j+(R^v&(S^R))+k[13]+4254626195&4294967295,j=v+(N<<12&4294967295|N>>>20),N=R+(S^j&(v^S))+k[14]+2792965006&4294967295,R=j+(N<<17&4294967295|N>>>15),N=S+(v^R&(j^v))+k[15]+1236535329&4294967295,S=R+(N<<22&4294967295|N>>>10),N=v+(R^j&(S^R))+k[1]+4129170786&4294967295,v=S+(N<<5&4294967295|N>>>27),N=j+(S^R&(v^S))+k[6]+3225465664&4294967295,j=v+(N<<9&4294967295|N>>>23),N=R+(v^S&(j^v))+k[11]+643717713&4294967295,R=j+(N<<14&4294967295|N>>>18),N=S+(j^v&(R^j))+k[0]+3921069994&4294967295,S=R+(N<<20&4294967295|N>>>12),N=v+(R^j&(S^R))+k[5]+3593408605&4294967295,v=S+(N<<5&4294967295|N>>>27),N=j+(S^R&(v^S))+k[10]+38016083&4294967295,j=v+(N<<9&4294967295|N>>>23),N=R+(v^S&(j^v))+k[15]+3634488961&4294967295,R=j+(N<<14&4294967295|N>>>18),N=S+(j^v&(R^j))+k[4]+3889429448&4294967295,S=R+(N<<20&4294967295|N>>>12),N=v+(R^j&(S^R))+k[9]+568446438&4294967295,v=S+(N<<5&4294967295|N>>>27),N=j+(S^R&(v^S))+k[14]+3275163606&4294967295,j=v+(N<<9&4294967295|N>>>23),N=R+(v^S&(j^v))+k[3]+4107603335&4294967295,R=j+(N<<14&4294967295|N>>>18),N=S+(j^v&(R^j))+k[8]+1163531501&4294967295,S=R+(N<<20&4294967295|N>>>12),N=v+(R^j&(S^R))+k[13]+2850285829&4294967295,v=S+(N<<5&4294967295|N>>>27),N=j+(S^R&(v^S))+k[2]+4243563512&4294967295,j=v+(N<<9&4294967295|N>>>23),N=R+(v^S&(j^v))+k[7]+1735328473&4294967295,R=j+(N<<14&4294967295|N>>>18),N=S+(j^v&(R^j))+k[12]+2368359562&4294967295,S=R+(N<<20&4294967295|N>>>12),N=v+(S^R^j)+k[5]+4294588738&4294967295,v=S+(N<<4&4294967295|N>>>28),N=j+(v^S^R)+k[8]+2272392833&4294967295,j=v+(N<<11&4294967295|N>>>21),N=R+(j^v^S)+k[11]+1839030562&4294967295,R=j+(N<<16&4294967295|N>>>16),N=S+(R^j^v)+k[14]+4259657740&4294967295,S=R+(N<<23&4294967295|N>>>9),N=v+(S^R^j)+k[1]+2763975236&4294967295,v=S+(N<<4&4294967295|N>>>28),N=j+(v^S^R)+k[4]+1272893353&4294967295,j=v+(N<<11&4294967295|N>>>21),N=R+(j^v^S)+k[7]+4139469664&4294967295,R=j+(N<<16&4294967295|N>>>16),N=S+(R^j^v)+k[10]+3200236656&4294967295,S=R+(N<<23&4294967295|N>>>9),N=v+(S^R^j)+k[13]+681279174&4294967295,v=S+(N<<4&4294967295|N>>>28),N=j+(v^S^R)+k[0]+3936430074&4294967295,j=v+(N<<11&4294967295|N>>>21),N=R+(j^v^S)+k[3]+3572445317&4294967295,R=j+(N<<16&4294967295|N>>>16),N=S+(R^j^v)+k[6]+76029189&4294967295,S=R+(N<<23&4294967295|N>>>9),N=v+(S^R^j)+k[9]+3654602809&4294967295,v=S+(N<<4&4294967295|N>>>28),N=j+(v^S^R)+k[12]+3873151461&4294967295,j=v+(N<<11&4294967295|N>>>21),N=R+(j^v^S)+k[15]+530742520&4294967295,R=j+(N<<16&4294967295|N>>>16),N=S+(R^j^v)+k[2]+3299628645&4294967295,S=R+(N<<23&4294967295|N>>>9),N=v+(R^(S|~j))+k[0]+4096336452&4294967295,v=S+(N<<6&4294967295|N>>>26),N=j+(S^(v|~R))+k[7]+1126891415&4294967295,j=v+(N<<10&4294967295|N>>>22),N=R+(v^(j|~S))+k[14]+2878612391&4294967295,R=j+(N<<15&4294967295|N>>>17),N=S+(j^(R|~v))+k[5]+4237533241&4294967295,S=R+(N<<21&4294967295|N>>>11),N=v+(R^(S|~j))+k[12]+1700485571&4294967295,v=S+(N<<6&4294967295|N>>>26),N=j+(S^(v|~R))+k[3]+2399980690&4294967295,j=v+(N<<10&4294967295|N>>>22),N=R+(v^(j|~S))+k[10]+4293915773&4294967295,R=j+(N<<15&4294967295|N>>>17),N=S+(j^(R|~v))+k[1]+2240044497&4294967295,S=R+(N<<21&4294967295|N>>>11),N=v+(R^(S|~j))+k[8]+1873313359&4294967295,v=S+(N<<6&4294967295|N>>>26),N=j+(S^(v|~R))+k[15]+4264355552&4294967295,j=v+(N<<10&4294967295|N>>>22),N=R+(v^(j|~S))+k[6]+2734768916&4294967295,R=j+(N<<15&4294967295|N>>>17),N=S+(j^(R|~v))+k[13]+1309151649&4294967295,S=R+(N<<21&4294967295|N>>>11),N=v+(R^(S|~j))+k[4]+4149444226&4294967295,v=S+(N<<6&4294967295|N>>>26),N=j+(S^(v|~R))+k[11]+3174756917&4294967295,j=v+(N<<10&4294967295|N>>>22),N=R+(v^(j|~S))+k[2]+718787259&4294967295,R=j+(N<<15&4294967295|N>>>17),N=S+(j^(R|~v))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const S=v-this.blockSize,k=this.C;let R=this.h,j=0;for(;j<v;){if(R==0)for(;j<=S;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<v;)if(k[R++]=T.charCodeAt(j++),R==this.blockSize){s(this,k),R=0;break}}else for(;j<v;)if(k[R++]=T[j++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var S=T.length-8;S<T.length;++S)T[S]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,S=0;S<4;++S)for(let k=0;k<32;k+=8)T[v++]=this.g[S]>>>k&255;return T};function i(T,v){var S=c;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=v(T)}function o(T,v){this.h=v;const S=[];let k=!0;for(let R=T.length-1;R>=0;R--){const j=T[R]|0;k&&j==v||(S[R]=j,k=!1)}this.g=S}var c={};function u(T){return-128<=T&&T<128?i(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return A(d(-T));const v=[];let S=1;for(let k=0;T>=S;k++)v[k]=T/S|0,S*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return A(f(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(v,8));let k=m;for(let j=0;j<T.length;j+=8){var R=Math.min(8,T.length-j);const N=parseInt(T.substring(j,j+R),v);R<8?(R=d(Math.pow(v,R)),k=k.j(R).add(d(N))):(k=k.j(S),k=k.add(d(N)))}return k}var m=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(I(this))return-A(this).m();let T=0,v=1;for(let S=0;S<this.g.length;S++){const k=this.i(S);T+=(k>=0?k:4294967296+k)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(I(this))return"-"+A(this).toString(T);const v=d(Math.pow(T,6));var S=this;let k="";for(;;){const R=C(S,v).g;S=b(S,R.j(v));let j=((S.g.length>0?S.g[0]:S.h)>>>0).toString(T);if(S=R,E(S))return j+k;for(;j.length<6;)j="0"+j;k=j+k}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function I(T){return T.h==-1}t.l=function(T){return T=b(this,T),I(T)?-1:E(T)?0:1};function A(T){const v=T.g.length,S=[];for(let k=0;k<v;k++)S[k]=~T.g[k];return new o(S,~T.h).add(g)}t.abs=function(){return I(this)?A(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),S=[];let k=0;for(let R=0;R<=v;R++){let j=k+(this.i(R)&65535)+(T.i(R)&65535),N=(j>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);k=N>>>16,j&=65535,N&=65535,S[R]=N<<16|j}return new o(S,S[S.length-1]&-2147483648?-1:0)};function b(T,v){return T.add(A(v))}t.j=function(T){if(E(this)||E(T))return m;if(I(this))return I(T)?A(this).j(A(T)):A(A(this).j(T));if(I(T))return A(this.j(A(T)));if(this.l(x)<0&&T.l(x)<0)return d(this.m()*T.m());const v=this.g.length+T.g.length,S=[];for(var k=0;k<2*v;k++)S[k]=0;for(k=0;k<this.g.length;k++)for(let R=0;R<T.g.length;R++){const j=this.i(k)>>>16,N=this.i(k)&65535,ae=T.i(R)>>>16,ze=T.i(R)&65535;S[2*k+2*R]+=N*ze,y(S,2*k+2*R),S[2*k+2*R+1]+=j*ze,y(S,2*k+2*R+1),S[2*k+2*R+1]+=N*ae,y(S,2*k+2*R+1),S[2*k+2*R+2]+=j*ae,y(S,2*k+2*R+2)}for(T=0;T<v;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=v;T<2*v;T++)S[T]=0;return new o(S,0)};function y(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function w(T,v){this.g=T,this.h=v}function C(T,v){if(E(v))throw Error("division by zero");if(E(T))return new w(m,m);if(I(T))return v=C(A(T),v),new w(A(v.g),A(v.h));if(I(v))return v=C(T,A(v)),new w(A(v.g),v.h);if(T.g.length>30){if(I(T)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var S=g,k=v;k.l(T)<=0;)S=L(S),k=L(k);var R=V(S,1),j=V(k,1);for(k=V(k,2),S=V(S,2);!E(k);){var N=j.add(k);N.l(T)<=0&&(R=R.add(S),j=N),k=V(k,1),S=V(S,1)}return v=b(T,R.j(v)),new w(R,v)}for(R=m;T.l(v)>=0;){for(S=Math.max(1,Math.floor(T.m()/v.m())),k=Math.ceil(Math.log(S)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),j=d(S),N=j.j(v);I(N)||N.l(T)>0;)S-=k,j=d(S),N=j.j(v);E(j)&&(j=g),R=R.add(j),T=b(T,N)}return new w(R,T)}t.B=function(T){return C(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),S=[];for(let k=0;k<v;k++)S[k]=this.i(k)&T.i(k);return new o(S,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),S=[];for(let k=0;k<v;k++)S[k]=this.i(k)|T.i(k);return new o(S,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),S=[];for(let k=0;k<v;k++)S[k]=this.i(k)^T.i(k);return new o(S,this.h^T.h)};function L(T){const v=T.g.length+1,S=[];for(let k=0;k<v;k++)S[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(S,T.h)}function V(T,v){const S=v>>5;v%=32;const k=T.g.length-S,R=[];for(let j=0;j<k;j++)R[j]=v>0?T.i(j+S)>>>v|T.i(j+S+1)<<32-v:T.i(j+S);return new o(R,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,YE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ur=o}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XE,Ho,JE,hc,Af,ZE,e1,t1;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var D=l[_];if(!(D in p))break e;p=p[D]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var p=[],_;for(_ in h)Object.prototype.hasOwnProperty.call(h,_)&&p.push([_,h[_]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,p){return l.call.apply(l.bind,arguments)}function d(l,h,p){return d=u,d.apply(null,arguments)}function f(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function m(l,h){function p(){}p.prototype=h.prototype,l.Z=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Ob=function(_,D,O){for(var q=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)q[ne-2]=arguments[ne];return h.prototype[D].apply(_,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function x(l){const h=l.length;if(h>0){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function E(l,h){for(let _=1;_<arguments.length;_++){const D=arguments[_];var p=typeof D;if(p=p!="object"?p:D?Array.isArray(D)?"array":p:"null",p=="array"||p=="object"&&typeof D.length=="number"){p=l.length||0;const O=D.length||0;l.length=p+O;for(let q=0;q<O;q++)l[p+q]=D[q]}else l.push(D)}}class I{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(l){o.setTimeout(()=>{throw l},0)}function b(){var l=T;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class y{constructor(){this.h=this.g=null}add(h,p){const _=w.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var w=new I(()=>new C,l=>l.reset());class C{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,T=new y,v=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(S)}};function S(){for(var l;l=b();){try{l.h.call(l.g)}catch(p){A(p)}var h=w;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return l}();function N(l){return/^[\s\xa0]*$/.test(l)}function ae(l,h){R.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(ae,R),ae.prototype.init=function(l,h){const p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),H=0;function $(l,h,p,_,D){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=D,this.key=++H,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function W(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function M(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function Y(l){const h={};for(const p in l)h[p]=l[p];return h}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(l,h){let p,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(p in _)l[p]=_[p];for(let O=0;O<le.length;O++)p=le[O],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function he(l){this.src=l,this.g={},this.h=0}he.prototype.add=function(l,h,p,_,D){const O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);const q=Ke(l,h,_,D);return q>-1?(h=l[q],p||(h.fa=!1)):(h=new $(h,this.src,O,!!_,D),h.fa=p,l.push(h)),h};function Te(l,h){const p=h.type;if(p in l.g){var _=l.g[p],D=Array.prototype.indexOf.call(_,h,void 0),O;(O=D>=0)&&Array.prototype.splice.call(_,D,1),O&&(B(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Ke(l,h,p,_){for(let D=0;D<l.length;++D){const O=l[D];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==_)return D}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),Ys={};function cl(l,h,p,_,D){if(Array.isArray(h)){for(let O=0;O<h.length;O++)cl(l,h[O],p,_,D);return null}return p=vg(p),l&&l[ze]?l.J(h,p,c(_)?!!_.capture:!1,D):as(l,h,p,!1,_,D)}function as(l,h,p,_,D,O){if(!h)throw Error("Invalid event type");const q=c(D)?!!D.capture:!!D;let ne=md(l);if(ne||(l[Lt]=ne=new he(l)),p=ne.add(h,p,_,q,O),p.proxy)return p;if(_=hd(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)j||(D=q),D===void 0&&(D=!1),l.addEventListener(h.toString(),_,D);else if(l.attachEvent)l.attachEvent(yg(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function hd(){function l(p){return h.call(l.src,l.listener,p)}const h=NT;return l}function gg(l,h,p,_,D){if(Array.isArray(h))for(var O=0;O<h.length;O++)gg(l,h[O],p,_,D);else _=c(_)?!!_.capture:!!_,p=vg(p),l&&l[ze]?(l=l.i,O=String(h).toString(),O in l.g&&(h=l.g[O],p=Ke(h,p,_,D),p>-1&&(B(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete l.g[O],l.h--)))):l&&(l=md(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ke(h,p,_,D)),(p=l>-1?h[l]:null)&&fd(p))}function fd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ze])Te(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(yg(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=md(h))?(Te(p,l),p.h==0&&(p.src=null,h[Lt]=null)):B(l)}}}function yg(l){return l in Ys?Ys[l]:Ys[l]="on"+l}function NT(l,h){if(l.da)l=!0;else{h=new ae(h,this);const p=l.listener,_=l.ha||l.src;l.fa&&fd(l),l=p.call(_,h)}return l}function md(l){return l=l[Lt],l instanceof he?l:null}var pd="__closure_events_fn_"+(Math.random()*1e9>>>0);function vg(l){return typeof l=="function"?l:(l[pd]||(l[pd]=function(h){return l.handleEvent(h)}),l[pd])}function ot(){k.call(this),this.i=new he(this),this.M=this,this.G=null}m(ot,k),ot.prototype[ze]=!0,ot.prototype.removeEventListener=function(l,h,p,_){gg(this,l,h,p,_)};function pt(l,h){var p,_=l.G;if(_)for(p=[];_;_=_.G)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new R(h,l);else if(h instanceof R)h.target=h.target||l;else{var D=h;h=new R(_,l),Pe(h,D)}D=!0;let O,q;if(p)for(q=p.length-1;q>=0;q--)O=h.g=p[q],D=ul(O,_,!0,h)&&D;if(O=h.g=l,D=ul(O,_,!0,h)&&D,D=ul(O,_,!1,h)&&D,p)for(q=0;q<p.length;q++)O=h.g=p[q],D=ul(O,_,!1,h)&&D}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const p=l.g[h];for(let _=0;_<p.length;_++)B(p[_]);delete l.g[h],l.h--}}this.G=null},ot.prototype.J=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},ot.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function ul(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let D=!0;for(let O=0;O<h.length;++O){const q=h[O];if(q&&!q.da&&q.capture==p){const ne=q.listener,He=q.ha||q.src;q.fa&&Te(l.i,q),D=ne.call(He,_)!==!1&&D}}return D&&!_.defaultPrevented}function kT(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function wg(l){l.g=kT(()=>{l.g=null,l.i&&(l.i=!1,wg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class AT extends k{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(l){k.call(this),this.h=l,this.g={}}m(uo,k);var _g=[];function xg(l){W(l.g,function(h,p){this.g.hasOwnProperty(p)&&fd(h)},l),l.g={}}uo.prototype.N=function(){uo.Z.N.call(this),xg(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gd=o.JSON.stringify,CT=o.JSON.parse,RT=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Eg(){}function bg(){}var ho={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yd(){R.call(this,"d")}m(yd,R);function vd(){R.call(this,"c")}m(vd,R);var ls={},Tg=null;function dl(){return Tg=Tg||new ot}ls.Ia="serverreachability";function Ig(l){R.call(this,ls.Ia,l)}m(Ig,R);function fo(l){const h=dl();pt(h,new Ig(h))}ls.STAT_EVENT="statevent";function Sg(l,h){R.call(this,ls.STAT_EVENT,l),this.stat=h}m(Sg,R);function gt(l){const h=dl();pt(h,new Sg(h,l))}ls.Ja="timingevent";function Ng(l,h){R.call(this,ls.Ja,l),this.size=h}m(Ng,R);function mo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function po(){this.g=!0}po.prototype.ua=function(){this.g=!1};function PT(l,h,p,_,D,O){l.info(function(){if(l.g)if(O){var q="",ne=O.split("&");for(let ge=0;ge<ne.length;ge++){var He=ne[ge].split("=");if(He.length>1){const Qe=He[0];He=He[1];const bn=Qe.split("_");q=bn.length>=2&&bn[1]=="type"?q+(Qe+"="+He+"&"):q+(Qe+"=redacted&")}}}else q=null;else q=O;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+h+`
`+p+`
`+q})}function jT(l,h,p,_,D,O,q){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+h+`
`+p+`
`+O+" "+q})}function Xs(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+LT(l,p)+(_?" "+_:"")})}function DT(l,h){l.info(function(){return"TIMEOUT: "+h})}po.prototype.info=function(){};function LT(l,h){if(!l.g)return h;if(!h)return null;try{const O=JSON.parse(h);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var p=O[l];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var D=_[0];if(D!="noop"&&D!="stop"&&D!="close")for(let q=1;q<_.length;q++)_[q]=""}}}}return gd(O)}catch{return h}}var hl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ag;function wd(){}m(wd,Eg),wd.prototype.g=function(){return new XMLHttpRequest},Ag=new wd;function go(l){return encodeURIComponent(String(l))}function OT(l){var h=1;l=l.split(":");const p=[];for(;h>0&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function dr(l,h,p,_){this.j=l,this.i=h,this.l=p,this.S=_||1,this.V=new uo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cg}function Cg(){this.i=null,this.g="",this.h=!1}var Rg={},_d={};function xd(l,h,p){l.M=1,l.A=ml(En(h)),l.u=p,l.R=!0,Pg(l,null)}function Pg(l,h){l.F=Date.now(),fl(l),l.B=En(l.A);var p=l.B,_=l.S;Array.isArray(_)||(_=[String(_)]),qg(p.i,"t",_),l.C=0,p=l.j.L,l.h=new Cg,l.g=cy(l.j,p?h:null,!l.u),l.P>0&&(l.O=new AT(d(l.Y,l,l.g),l.P)),h=l.V,p=l.g,_=l.ba;var D="readystatechange";Array.isArray(D)||(D&&(_g[0]=D.toString()),D=_g);for(let O=0;O<D.length;O++){const q=cl(p,D[O],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.J?Y(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),fo(),PT(l.i,l.v,l.B,l.l,l.S,l.u)}dr.prototype.ba=function(l){l=l.target;const h=this.O;h&&mr(l)==3?h.j():this.Y(l)},dr.prototype.Y=function(l){try{if(l==this.g)e:{const ne=mr(this.g),He=this.g.ya(),ge=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||Jg(this.g)))){this.K||ne!=4||He==7||(He==8||ge<=0?fo(3):fo(2)),Ed(this);var h=this.g.ca();this.X=h;var p=MT(this);if(this.o=h==200,jT(this.i,this.v,this.B,this.l,this.S,ne,h),this.o){if(this.U&&!this.L){t:{if(this.g){var _,D=this.g;if((_=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(_)){var O=_;break t}}O=null}if(l=O)Xs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bd(this,l);else{this.o=!1,this.m=3,gt(12),cs(this),yo(this);break e}}if(this.R){l=!0;let Qe;for(;!this.K&&this.C<p.length;)if(Qe=VT(this,p),Qe==_d){ne==4&&(this.m=4,gt(14),l=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==Rg){this.m=4,gt(15),Xs(this.i,this.l,p,"[Invalid Chunk]"),l=!1;break}else Xs(this.i,this.l,Qe,null),bd(this,Qe);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||p.length!=0||this.h.h||(this.m=1,gt(16),l=!1),this.o=this.o&&l,!l)Xs(this.i,this.l,p,"[Invalid Chunked Response]"),cs(this),yo(this);else if(p.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Rd(q),q.P=!0,gt(11))}}else Xs(this.i,this.l,p,null),bd(this,p);ne==4&&cs(this),this.o&&!this.K&&(ne==4?iy(this.j,this):(this.o=!1,fl(this)))}else JT(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),cs(this),yo(this)}}}catch{}finally{}};function MT(l){if(!jg(l))return l.g.la();const h=Jg(l.g);if(h==="")return"";let p="";const _=h.length,D=mr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return cs(l),yo(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<_;O++)l.h.h=!0,p+=l.h.i.decode(h[O],{stream:!(D&&O==_-1)});return h.length=0,l.h.g+=p,l.C=0,l.h.g}function jg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function VT(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?_d:(p=Number(h.substring(p,_)),isNaN(p)?Rg:(_+=1,_+p>h.length?_d:(h=h.slice(_,_+p),l.C=_+p,h)))}dr.prototype.cancel=function(){this.K=!0,cs(this)};function fl(l){l.T=Date.now()+l.H,Dg(l,l.H)}function Dg(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=mo(d(l.aa,l),h)}function Ed(l){l.D&&(o.clearTimeout(l.D),l.D=null)}dr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(DT(this.i,this.B),this.M!=2&&(fo(),gt(17)),cs(this),this.m=2,yo(this)):Dg(this,this.T-l)};function yo(l){l.j.I==0||l.K||iy(l.j,l)}function cs(l){Ed(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,xg(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function bd(l,h){try{var p=l.j;if(p.I!=0&&(p.g==l||Td(p.h,l))){if(!l.L&&Td(p.h,l)&&p.I==3){try{var _=p.Ba.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<l.F)wl(p),yl(p);else break e;Cd(p),gt(18)}}else p.xa=D[1],0<p.xa-p.K&&D[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=mo(d(p.Va,p),6e3));Mg(p.h)<=1&&p.ta&&(p.ta=void 0)}else ds(p,11)}else if((l.L||p.g==l)&&wl(p),!N(h))for(D=p.Ba.g.parse(h),h=0;h<D.length;h++){let ge=D[h];const Qe=ge[0];if(!(Qe<=p.K))if(p.K=Qe,ge=ge[1],p.I==2)if(ge[0]=="c"){p.M=ge[1],p.ba=ge[2];const bn=ge[3];bn!=null&&(p.ka=bn,p.j.info("VER="+p.ka));const hs=ge[4];hs!=null&&(p.za=hs,p.j.info("SVER="+p.za));const pr=ge[5];pr!=null&&typeof pr=="number"&&pr>0&&(_=1.5*pr,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const gr=l.g;if(gr){const xl=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var O=_.h;O.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Id(O,O.h),O.h=null))}if(_.G){const Pd=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pd&&(_.wa=Pd,we(_.J,_.G,Pd))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-l.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var q=l;if(_.na=ly(_,_.L?_.ba:null,_.W),q.L){Vg(_.h,q);var ne=q,He=_.O;He&&(ne.H=He),ne.D&&(Ed(ne),fl(ne)),_.g=q}else ry(_);p.i.length>0&&vl(p)}else ge[0]!="stop"&&ge[0]!="close"||ds(p,7);else p.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ds(p,7):Ad(p):ge[0]!="noop"&&p.l&&p.l.qa(ge),p.A=0)}}fo(4)}catch{}}var FT=class{constructor(l,h){this.g=l,this.map=h}};function Lg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Og(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Mg(l){return l.h?1:l.g?l.g.size:0}function Td(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Id(l,h){l.g?l.g.add(h):l.h=h}function Vg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Lg.prototype.cancel=function(){if(this.i=Fg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Fg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.G);return h}return x(l.i)}var Ug=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UT(l,h){if(l){l=l.split("&");for(let p=0;p<l.length;p++){const _=l[p].indexOf("=");let D,O=null;_>=0?(D=l[p].substring(0,_),O=l[p].substring(_+1)):D=l[p],h(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function hr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof hr?(this.l=l.l,vo(this,l.j),this.o=l.o,this.g=l.g,wo(this,l.u),this.h=l.h,Sd(this,Wg(l.i)),this.m=l.m):l&&(h=String(l).match(Ug))?(this.l=!1,vo(this,h[1]||"",!0),this.o=_o(h[2]||""),this.g=_o(h[3]||"",!0),wo(this,h[4]),this.h=_o(h[5]||"",!0),Sd(this,h[6]||"",!0),this.m=_o(h[7]||"")):(this.l=!1,this.i=new Eo(null,this.l))}hr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(xo(h,Bg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(xo(h,Bg,!0),"@"),l.push(go(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&l.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(xo(p,p.charAt(0)=="/"?zT:$T,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",xo(p,qT)),l.join("")},hr.prototype.resolve=function(l){const h=En(this);let p=!!l.j;p?vo(h,l.j):p=!!l.o,p?h.o=l.o:p=!!l.g,p?h.g=l.g:p=l.u!=null;var _=l.h;if(p)wo(h,l.u);else if(p=!!l.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var D=h.h.lastIndexOf("/");D!=-1&&(_=h.h.slice(0,D+1)+_)}if(D=_,D==".."||D==".")_="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){_=D.lastIndexOf("/",0)==0,D=D.split("/");const O=[];for(let q=0;q<D.length;){const ne=D[q++];ne=="."?_&&q==D.length&&O.push(""):ne==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),_&&q==D.length&&O.push("")):(O.push(ne),_=!0)}_=O.join("/")}else _=D}return p?h.h=_:p=l.i.toString()!=="",p?Sd(h,Wg(l.i)):p=!!l.m,p&&(h.m=l.m),h};function En(l){return new hr(l)}function vo(l,h,p){l.j=p?_o(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function wo(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Sd(l,h,p){h instanceof Eo?(l.i=h,WT(l.i,l.l)):(p||(h=xo(h,HT)),l.i=new Eo(h,l.l))}function we(l,h,p){l.i.set(h,p)}function ml(l){return we(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function _o(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xo(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,BT),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function BT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Bg=/[#\/\?@]/g,$T=/[#\?:]/g,zT=/[#\?]/g,HT=/[#\?@]/g,qT=/#/g;function Eo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function us(l){l.g||(l.g=new Map,l.h=0,l.i&&UT(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Eo.prototype,t.add=function(l,h){us(this),this.i=null,l=Js(this,l);let p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function $g(l,h){us(l),h=Js(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function zg(l,h){return us(l),h=Js(l,h),l.g.has(h)}t.forEach=function(l,h){us(this),this.g.forEach(function(p,_){p.forEach(function(D){l.call(h,D,_,this)},this)},this)};function Hg(l,h){us(l);let p=[];if(typeof h=="string")zg(l,h)&&(p=p.concat(l.g.get(Js(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)p=p.concat(l[h]);return p}t.set=function(l,h){return us(this),this.i=null,l=Js(this,l),zg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Hg(this,l),l.length>0?String(l[0]):h):h};function qg(l,h,p){$g(l,h),p.length>0&&(l.i=null,l.g.set(Js(l,h),x(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let _=0;_<h.length;_++){var p=h[_];const D=go(p);p=Hg(this,p);for(let O=0;O<p.length;O++){let q=D;p[O]!==""&&(q+="="+go(p[O])),l.push(q)}}return this.i=l.join("&")};function Wg(l){const h=new Eo;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Js(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function WT(l,h){h&&!l.j&&(us(l),l.i=null,l.g.forEach(function(p,_){const D=_.toLowerCase();_!=D&&($g(this,_),qg(this,D,p))},l)),l.j=h}function GT(l,h){const p=new po;if(o.Image){const _=new Image;_.onload=f(fr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=f(fr,p,"TestLoadImage: error",!1,h,_),_.onabort=f(fr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=f(fr,p,"TestLoadImage: timeout",!1,h,_),o.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function KT(l,h){const p=new po,_=new AbortController,D=setTimeout(()=>{_.abort(),fr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(O=>{clearTimeout(D),O.ok?fr(p,"TestPingServer: ok",!0,h):fr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),fr(p,"TestPingServer: error",!1,h)})}function fr(l,h,p,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(p)}catch{}}function QT(){this.g=new RT}function Nd(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Nd,Eg),Nd.prototype.g=function(){return new pl(this.i,this.h)};function pl(l,h){ot.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(pl,ot),t=pl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,To(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Gg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Gg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?bo(this):To(this),this.readyState==3&&Gg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,bo(this))},t.Na=function(l){this.g&&(this.response=l,bo(this))},t.ga=function(){this.g&&bo(this)};function bo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,To(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function To(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Kg(l){let h="";return W(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function kd(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Kg(p),typeof l=="string"?p!=null&&go(p):we(l,h,p))}function je(l){ot.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(je,ot);var YT=/^https?$/i,XT=["POST","PUT"];t=je.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ag.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){Qg(this,O);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)p.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const O of _.keys())p.set(O,_.get(O));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(XT,h,void 0)>=0)||_||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,q]of p)this.g.setRequestHeader(O,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){Qg(this,O)}};function Qg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Yg(l),gl(l)}function Yg(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,pt(this,"complete"),pt(this,"abort"),gl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Xg(this):this.Xa())},t.Xa=function(){Xg(this)};function Xg(l){if(l.h&&typeof i<"u"){if(l.v&&mr(l)==4)setTimeout(l.Ca.bind(l),0);else if(pt(l,"readystatechange"),mr(l)==4){l.h=!1;try{const O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=O===0){let q=String(l.D).match(Ug)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),_=!YT.test(q?q.toLowerCase():"")}p=_}if(p)pt(l,"complete"),pt(l,"success");else{l.o=6;try{var D=mr(l)>2?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.ca()+"]",Yg(l)}}finally{gl(l)}}}}function gl(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const p=l.g;l.g=null,h||pt(l,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function mr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return mr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),CT(h)}};function Jg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function JT(l){const h={};l=(l.g&&mr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(N(l[_]))continue;var p=OT(l[_]);const D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[D]||[];h[D]=O,O.push(p)}M(h,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Zg(l){this.za=0,this.i=[],this.j=new po,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Io("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Io("baseRetryDelayMs",5e3,l),this.Za=Io("retryDelaySeedMs",1e4,l),this.Ta=Io("forwardChannelMaxRetries",2,l),this.va=Io("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Lg(l&&l.concurrentRequestLimit),this.Ba=new QT,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Zg.prototype,t.ka=8,t.I=1,t.connect=function(l,h,p,_){gt(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=ly(this,null,this.W),vl(this)};function Ad(l){if(ey(l),l.I==3){var h=l.V++,p=En(l.J);if(we(p,"SID",l.M),we(p,"RID",h),we(p,"TYPE","terminate"),So(l,p),h=new dr(l,l.j,h),h.M=2,h.A=ml(En(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=cy(h.j,null),h.g.ea(h.A)),h.F=Date.now(),fl(h)}ay(l)}function yl(l){l.g&&(Rd(l),l.g.cancel(),l.g=null)}function ey(l){yl(l),l.v&&(o.clearTimeout(l.v),l.v=null),wl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function vl(l){if(!Og(l.h)&&!l.m){l.m=!0;var h=l.Ea;L||v(),V||(L(),V=!0),T.add(h,l),l.D=0}}function ZT(l,h){return Mg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=mo(d(l.Ea,l,h),oy(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const D=new dr(this,this.j,l);let O=this.o;if(this.U&&(O?(O=Y(O),Pe(O,this.U)):O=this.U),this.u!==null||this.R||(D.J=O,O=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ny(this,D,h),p=En(this.J),we(p,"RID",l),we(p,"CVER",22),this.G&&we(p,"X-HTTP-Session-Id",this.G),So(this,p),O&&(this.R?h="headers="+go(Kg(O))+"&"+h:this.u&&kd(p,this.u,O)),Id(this.h,D),this.Ra&&we(p,"TYPE","init"),this.S?(we(p,"$req",h),we(p,"SID","null"),D.U=!0,xd(D,p,null)):xd(D,p,h),this.I=2}}else this.I==3&&(l?ty(this,l):this.i.length==0||Og(this.h)||ty(this))};function ty(l,h){var p;h?p=h.l:p=l.V++;const _=En(l.J);we(_,"SID",l.M),we(_,"RID",p),we(_,"AID",l.K),So(l,_),l.u&&l.o&&kd(_,l.u,l.o),p=new dr(l,l.j,p,l.D+1),l.u===null&&(p.J=l.o),h&&(l.i=h.G.concat(l.i)),h=ny(l,p,1e3),p.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Id(l.h,p),xd(p,_,h)}function So(l,h){l.H&&W(l.H,function(p,_){we(h,_,p)}),l.l&&W({},function(p,_){we(h,_,p)})}function ny(l,h,p){p=Math.min(l.i.length,p);const _=l.l?d(l.l.Ka,l.l,l):null;e:{var D=l.i;let ne=-1;for(;;){const He=["count="+p];ne==-1?p>0?(ne=D[0].g,He.push("ofs="+ne)):ne=0:He.push("ofs="+ne);let ge=!0;for(let Qe=0;Qe<p;Qe++){var O=D[Qe].g;const bn=D[Qe].map;if(O-=ne,O<0)ne=Math.max(0,D[Qe].g-100),ge=!1;else try{O="req"+O+"_"||"";try{var q=bn instanceof Map?bn:Object.entries(bn);for(const[hs,pr]of q){let gr=pr;c(pr)&&(gr=gd(pr)),He.push(O+hs+"="+encodeURIComponent(gr))}}catch(hs){throw He.push(O+"type="+encodeURIComponent("_badmap")),hs}}catch{_&&_(bn)}}if(ge){q=He.join("&");break e}}q=void 0}return l=l.i.splice(0,p),h.G=l,q}function ry(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;L||v(),V||(L(),V=!0),T.add(h,l),l.A=0}}function Cd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=mo(d(l.Da,l),oy(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,sy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=mo(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),yl(this),sy(this))};function Rd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function sy(l){l.g=new dr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=En(l.na);we(h,"RID","rpc"),we(h,"SID",l.M),we(h,"AID",l.K),we(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&we(h,"TO",l.ia),we(h,"TYPE","xmlhttp"),So(l,h),l.u&&l.o&&kd(h,l.u,l.o),l.O&&(l.g.H=l.O);var p=l.g;l=l.ba,p.M=1,p.A=ml(En(h)),p.u=null,p.R=!0,Pg(p,l)}t.Va=function(){this.C!=null&&(this.C=null,yl(this),Cd(this),gt(19))};function wl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function iy(l,h){var p=null;if(l.g==h){wl(l),Rd(l),l.g=null;var _=2}else if(Td(l.h,h))p=h.G,Vg(l.h,h),_=1;else return;if(l.I!=0){if(h.o)if(_==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var D=l.D;_=dl(),pt(_,new Ng(_,p)),vl(l)}else ry(l);else if(D=h.m,D==3||D==0&&h.X>0||!(_==1&&ZT(l,h)||_==2&&Cd(l)))switch(p&&p.length>0&&(h=l.h,h.i=h.i.concat(p)),D){case 1:ds(l,5);break;case 4:ds(l,10);break;case 3:ds(l,6);break;default:ds(l,2)}}}function oy(l,h){let p=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(p*=2),p*h}function ds(l,h){if(l.j.info("Error code "+h),h==2){var p=d(l.bb,l),_=l.Ua;const D=!_;_=new hr(_||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vo(_,"https"),ml(_),D?GT(_.toString(),p):KT(_.toString(),p)}else gt(2);l.I=0,l.l&&l.l.pa(h),ay(l),ey(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ay(l){if(l.I=0,l.ja=[],l.l){const h=Fg(l.h);(h.length!=0||l.i.length!=0)&&(E(l.ja,h),E(l.ja,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.oa()}}function ly(l,h,p){var _=p instanceof hr?En(p):new hr(p);if(_.g!="")h&&(_.g=h+"."+_.g),wo(_,_.u);else{var D=o.location;_=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;const O=new hr(null);_&&vo(O,_),h&&(O.g=h),D&&wo(O,D),p&&(O.h=p),_=O}return p=l.G,h=l.wa,p&&h&&we(_,p,h),we(_,"VER",l.ka),So(l,_),_}function cy(l,h,p){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new je(new Nd({ab:p})):new je(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uy(){}t=uy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _l(){}_l.prototype.g=function(l,h){return new Ot(l,h)};function Ot(l,h){ot.call(this),this.g=new Zg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!N(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Zs(this)}m(Ot,ot),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Ad(this.g)},Ot.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.v&&(p={},p.__data__=gd(l),l=p);h.i.push(new FT(h.Ya++,l)),h.I==3&&vl(h)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,Ot.Z.N.call(this)};function dy(l){yd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(dy,yd);function hy(){vd.call(this),this.status=1}m(hy,vd);function Zs(l){this.g=l}m(Zs,uy),Zs.prototype.ra=function(){pt(this.g,"a")},Zs.prototype.qa=function(l){pt(this.g,new dy(l))},Zs.prototype.pa=function(l){pt(this.g,new hy)},Zs.prototype.oa=function(){pt(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,t1=function(){return new _l},e1=function(){return dl()},ZE=ls,Af={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,hc=hl,kg.COMPLETE="complete",JE=kg,bg.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Ho=bg,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,XE=je}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});const iv="@firebase/firestore",ov="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Lu("@firebase/firestore");function ri(){return Os.logLevel}function K(t,...e){if(Os.logLevel<=se.DEBUG){const n=e.map(gp);Os.debug(`Firestore (${to}): ${t}`,...n)}}function sr(t,...e){if(Os.logLevel<=se.ERROR){const n=e.map(gp);Os.error(`Firestore (${to}): ${t}`,...n)}}function Ui(t,...e){if(Os.logLevel<=se.WARN){const n=e.map(gp);Os.warn(`Firestore (${to}): ${t}`,...n)}}function gp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,n1(t,r,n)}function n1(t,e,n){let r=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw sr(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||n1(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends on{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class nP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rP{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new r1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class sP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new av(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Cf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return mh(s)===mh(i)?ie(s,i):mh(s)?1:-1}return ie(t.length,e.length)}const lP=55296,cP=57343;function mh(t){const e=t.charCodeAt(0);return e>=lP&&e<=cP}function Bi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="__name__";class Sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Sn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=Sn.isNumericId(e),s=Sn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Sn.extractNumericId(e).compare(Sn.extractNumericId(n)):Cf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ur.fromString(e.substring(4,e.length-2))}}class ye extends Sn{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const uP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Sn{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return uP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lv}static keyField(){return new nt([lv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(ye.fromString(e))}static fromName(e){return new X(ye.fromString(e).popFirst(5))}static empty(){return new X(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dP(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cv(t){if(!X.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uv(t){if(X.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Dt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fu(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function tl(t,e){if(!i1(t))throw new G(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-62135596800,hv=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hv);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dv)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tl(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:$e("string",xe._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new xe(0,0))}static max(){return new ee(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=-1;function hP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new Wr(s,X.empty(),e)}function fP(t){return new Wr(t.readTime,t.key,Pa)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(ee.min(),X.empty(),Pa)}static max(){return new Wr(ee.max(),X.empty(),Pa)}}function mP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==pP)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function yP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp=-1;function Bu(t){return t==null}function Jc(t){return t===0&&1/t==-1/0}function vP(t){return typeof t=="number"&&Number.isInteger(t)&&!Jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="";function wP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fv(e)),e=_P(t.get(n),e);return fv(e)}function _P(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case o1:n+="";break;default:n+=i}}return n}function fv(t){return t+o1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Ge(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new l1("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const xP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=xP.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="server_timestamp",u1="__type__",d1="__previous_value__",h1="__local_write_time__";function wp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[u1])==null?void 0:r.stringValue)===c1}function $u(t){const e=t.mapValue.fields[d1];return wp(e)?$u(e):e}function ja(t){const e=Gr(t.mapValue.fields[h1].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Zc="(default)";class Da{constructor(e,n){this.projectId=e,this.database=n||Zc}static empty(){return new Da("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="__type__",bP="__max__",zl={mapValue:{}},m1="__vector__",eu="value";function Qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wp(t)?4:IP(t)?9007199254740991:TP(t)?10:11:Z(28295,{value:t})}function On(t,e){if(t===e)return!0;const n=Qr(t);if(n!==Qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ja(t).isEqual(ja(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Gr(s.timestampValue),c=Gr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Kr(s.bytesValue).isEqual(Kr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),c=Oe(i.doubleValue);return o===c?Jc(o)===Jc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Bi(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(mv(o)!==mv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!On(o[u],c[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function La(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=Qr(t),r=Qr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Oe(i.integerValue||i.doubleValue),u=Oe(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gv(t.timestampValue,e.timestampValue);case 4:return gv(ja(t),ja(e));case 5:return Cf(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Kr(i),u=Kr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ie(c[d],u[d]);if(f!==0)return f}return ie(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ie(Oe(i.latitude),Oe(o.latitude));return c!==0?c:ie(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,E,I;const c=i.fields||{},u=o.fields||{},d=(g=c[eu])==null?void 0:g.arrayValue,f=(x=u[eu])==null?void 0:x.arrayValue,m=ie(((E=d==null?void 0:d.values)==null?void 0:E.length)||0,((I=f==null?void 0:f.values)==null?void 0:I.length)||0);return m!==0?m:yv(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===zl.mapValue&&o===zl.mapValue)return 0;if(i===zl.mapValue)return 1;if(o===zl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Cf(u[m],f[m]);if(g!==0)return g;const x=$i(c[u[m]],d[f[m]]);if(x!==0)return x}return ie(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function gv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Gr(t),r=Gr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function yv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$i(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function zi(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Rf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Rf(n.fields[o])}`;return s+"}"}(t.mapValue):Z(61005,{value:t})}function fc(t){switch(Qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$u(t);return e?16+fc(e):16;case 5:return 2*t.stringValue.length;case 6:return Kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+fc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return is(r.fields,(i,o)=>{s+=i.length+fc(o)}),s}(t.mapValue);default:throw Z(13486,{value:t})}}function vv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pf(t){return!!t&&"integerValue"in t}function _p(t){return!!t&&"arrayValue"in t}function wv(t){return!!t&&"nullValue"in t}function _v(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mc(t){return!!t&&"mapValue"in t}function TP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[f1])==null?void 0:r.stringValue)===m1}function oa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oa(t.arrayValue.values[n]);return e}return{...t}}function IP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===bP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=oa(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];mc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(oa(this.value))}}function p1(t){const e=[];return is(t.fields,(n,r)=>{const s=new nt([n]);if(mc(r)){const i=p1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ht(e,0,ee.min(),ee.min(),ee.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,ee.min(),ee.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ee.min(),ee.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.position=e,this.inclusive=n}}function xv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n="asc"){this.field=e,this.dir=n}}function SP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{}class Be extends g1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kP(e,n,r):n==="array-contains"?new RP(e,r):n==="in"?new PP(e,r):n==="not-in"?new jP(e,r):n==="array-contains-any"?new DP(e,r):new Be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AP(e,r):new CP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($i(n,this.value)):n!==null&&Qr(this.value)===Qr(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends g1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wn(e,n)}matches(e){return y1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y1(t){return t.op==="and"}function v1(t){return NP(t)&&y1(t)}function NP(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function jf(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+zi(t.value);if(v1(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(n=>jf(n)).join(",");return`${t.op}(${e})`}}function w1(t,e){return t instanceof Be?function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&On(r.value,s.value)}(t,e):t instanceof wn?function(r,s){return s instanceof wn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&w1(o,s.filters[c]),!0):!1}(t,e):void Z(19439)}function _1(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${zi(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(_1).join(" ,")+"}"}(t):"Filter"}class kP extends Be{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class AP extends Be{constructor(e,n){super(e,"in",n),this.keys=x1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CP extends Be{constructor(e,n){super(e,"not-in",n),this.keys=x1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class RP extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&La(n.arrayValue,this.value)}}class PP extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class jP extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!La(this.value.arrayValue,n)}}class DP extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function bv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new LP(t,e,n,r,s,i,o)}function xp(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zi(r)).join(",")),e.Te=n}return e.Te}function Ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!w1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ev(t.startAt,e.startAt)&&Ev(t.endAt,e.endAt)}function Df(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OP(t,e,n,r,s,i,o,c){return new so(t,e,n,r,s,i,o,c)}function zu(t){return new so(t)}function Tv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function E1(t){return t.collectionGroup!==null}function aa(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ge(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Oa(i,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Oa(nt.keyField(),r))}return e.Ie}function Pn(t){const e=te(t);return e.Ee||(e.Ee=MP(e,aa(t))),e.Ee}function MP(t,e){if(t.limitType==="F")return bv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Oa(s.field,i)});const n=t.endAt?new tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tu(t.startAt.position,t.startAt.inclusive):null;return bv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lf(t,e){const n=t.filters.concat([e]);return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nu(t,e,n){return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hu(t,e){return Ep(Pn(t),Pn(e))&&t.limitType===e.limitType}function b1(t){return`${xp(Pn(t))}|lt:${t.limitType}`}function si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>_1(s)).join(", ")}]`),Bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zi(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function qu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of aa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=xv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,aa(r),s)||r.endAt&&!function(o,c,u){const d=xv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,aa(r),s))}(t,e)}function VP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function T1(t){return(e,n)=>{let r=!1;for(const s of aa(t)){const i=FP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function FP(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?$i(u,d):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return a1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=new Ce(X.comparator);function ir(){return UP}const I1=new Ce(X.comparator);function qo(...t){let e=I1;for(const n of t)e=e.insert(n.key,n);return e}function S1(t){let e=I1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xs(){return la()}function N1(){return la()}function la(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const BP=new Ce(X.comparator),$P=new Ge(X.comparator);function oe(...t){let e=$P;for(const n of t)e=e.add(n);return e}const zP=new Ge(ie);function HP(){return zP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function k1(t){return{integerValue:""+t}}function qP(t,e){return vP(e)?k1(e):bp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this._=void 0}}function WP(t,e,n){return t instanceof Ma?function(s,i){const o={fields:{[u1]:{stringValue:c1},[h1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&wp(i)&&(i=$u(i)),i&&(o.fields[d1]=i),{mapValue:o}}(n,e):t instanceof Va?C1(t,e):t instanceof Fa?R1(t,e):function(s,i){const o=A1(s,i),c=Iv(o)+Iv(s.Ae);return Pf(o)&&Pf(s.Ae)?k1(c):bp(s.serializer,c)}(t,e)}function GP(t,e,n){return t instanceof Va?C1(t,e):t instanceof Fa?R1(t,e):n}function A1(t,e){return t instanceof ru?function(r){return Pf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ma extends Wu{}class Va extends Wu{constructor(e){super(),this.elements=e}}function C1(t,e){const n=P1(e);for(const r of t.elements)n.some(s=>On(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fa extends Wu{constructor(e){super(),this.elements=e}}function R1(t,e){let n=P1(e);for(const r of t.elements)n=n.filter(s=>!On(s,r));return{arrayValue:{values:n}}}class ru extends Wu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Iv(t){return Oe(t.integerValue||t.doubleValue)}function P1(t){return _p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.field=e,this.transform=n}}function QP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Va&&s instanceof Va||r instanceof Fa&&s instanceof Fa?Bi(r.elements,s.elements,On):r instanceof ru&&s instanceof ru?On(r.Ae,s.Ae):r instanceof Ma&&s instanceof Ma}(t.transform,e.transform)}class YP{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gu{}function j1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tp(t.key,en.none()):new nl(t.key,t.data,en.none());{const n=t.data,r=kt.empty();let s=new Ge(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new os(t.key,r,new Ut(s.toArray()),en.none())}}function XP(t,e,n){t instanceof nl?function(s,i,o){const c=s.value.clone(),u=Nv(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,i,o){if(!pc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Nv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(D1(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof nl?function(i,o,c,u){if(!pc(i.precondition,o))return c;const d=i.value.clone(),f=kv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(i,o,c,u){if(!pc(i.precondition,o))return c;const d=kv(i.fieldTransforms,u,o),f=o.data;return f.setAll(D1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return pc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function JP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=A1(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function Sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Bi(r,s,(i,o)=>QP(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Gu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends Gu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function D1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Nv(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,GP(o,c,n[s]))}return r}function kv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,WP(i,o,e))}return r}class Tp extends Gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZP extends Gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=N1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=j1(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Bi(this.mutations,e.mutations,(n,r)=>Sv(n,r))&&Bi(this.baseMutations,e.baseMutations,(n,r)=>Sv(n,r))}}class Ip{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return BP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ip(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ce;function rj(t){switch(t){case F.OK:return Z(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function L1(t){if(t===void 0)return sr("GRPC error has no .code"),F.UNKNOWN;switch(t){case Fe.OK:return F.OK;case Fe.CANCELLED:return F.CANCELLED;case Fe.UNKNOWN:return F.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return F.INTERNAL;case Fe.UNAVAILABLE:return F.UNAVAILABLE;case Fe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Fe.NOT_FOUND:return F.NOT_FOUND;case Fe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Fe.ABORTED:return F.ABORTED;case Fe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Fe.DATA_LOSS:return F.DATA_LOSS;default:return Z(39323,{code:t})}}(ce=Fe||(Fe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Ur([4294967295,4294967295],0);function Av(t){const e=sj().encode(t),n=new YE;return n.update(e),new Uint8Array(n.digest())}function Cv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ur([n,r],0),new Ur([s,i],0)]}class Sp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ur.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ur.fromNumber(r)));return s.compare(ij)===1&&(s=new Ur([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Av(e),[r,s]=Cv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Sp(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Av(e),[r,s]=Cv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ku(ee.min(),s,new Ce(ie),ir(),oe())}}class rl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class O1{constructor(e,n){this.targetId=e,this.Ce=n}}class M1{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Rv{constructor(){this.ve=0,this.Fe=Pv(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z(38017,{changeType:i})}}),new rl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class oj{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=Hl(),this.He=Hl(),this.Ye=new Ce(ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Df(i))if(r===0){const o=new X(i.path);this.et(n,o,ht.newNoDocument(o,ee.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Kr(r).toUint8Array()}catch(u){if(u instanceof l1)return Ui("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Sp(o,s,i)}catch(u){return Ui(u instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Df(c.target)){const u=new X(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ht.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=oe();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ku(e,n,this.Ye,this.je,r);return this.je=ir(),this.Je=Hl(),this.He=Hl(),this.Ye=new Ce(ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Rv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ge(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ge(ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new Ce(X.comparator)}function Pv(){return new Ce(X.comparator)}const aj={asc:"ASCENDING",desc:"DESCENDING"},lj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cj={and:"AND",or:"OR"};class uj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Of(t,e){return t.useProto3Json||Bu(e)?e:{value:e}}function su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dj(t,e){return su(t,e.toTimestamp())}function jn(t){return fe(!!t,49232),ee.fromTimestamp(function(n){const r=Gr(n);return new xe(r.seconds,r.nanos)}(t))}function Np(t,e){return Mf(t,e).canonicalString()}function Mf(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function F1(t){const e=ye.fromString(t);return fe(H1(e),10190,{key:e.toString()}),e}function Vf(t,e){return Np(t.databaseId,e.path)}function ph(t,e){const n=F1(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(B1(n))}function U1(t,e){return Np(t.databaseId,e)}function hj(t){const e=F1(t);return e.length===4?ye.emptyPath():B1(e)}function Ff(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B1(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jv(t,e,n){return{name:Vf(t,e),fields:n.value.mapValue.fields}}function fj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(fe(f===void 0||typeof f=="string",58123),it.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?F.UNKNOWN:L1(d.code);return new G(f,d.message||"")}(o);n=new M1(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ph(t,r.document.name),i=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ee.min(),c=new kt({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new gc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ph(t,r.document),i=r.readTime?jn(r.readTime):ee.min(),o=ht.newNoDocument(s,i),c=r.removedTargetIds||[];n=new gc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ph(t,r.document),i=r.removedTargetIds||[];n=new gc([],i,s,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new nj(s,i),c=r.targetId;n=new O1(c,o)}}return n}function mj(t,e){let n;if(e instanceof nl)n={update:jv(t,e.key,e.value)};else if(e instanceof Tp)n={delete:Vf(t,e.key)};else if(e instanceof os)n={update:jv(t,e.key,e.data),updateMask:bj(e.fieldMask)};else{if(!(e instanceof ZP))return Z(16599,{Vt:e.type});n={verify:Vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ru)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z(27497)}(t,e.precondition)),n}function pj(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?jn(s.updateTime):jn(i);return o.isEqual(ee.min())&&(o=jn(i)),new YP(o,s.transformResults||[])}(n,e))):[]}function gj(t,e){return{documents:[U1(t,e.path)]}}function yj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=U1(t,s);const i=function(d){if(d.length!==0)return z1(wn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ii(g.field),direction:_j(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Of(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function vj(t){let e=hj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=$1(m);return g instanceof wn&&v1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(E){return new Oa(oi(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Bu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new tu(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new tu(x,g)}(n.endAt)),OP(e,s,o,i,c,"F",u,d)}function wj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oi(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=oi(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=oi(n.unaryFilter.field);return Be.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oi(n.unaryFilter.field);return Be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Be.create(oi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>$1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function _j(t){return aj[t]}function xj(t){return lj[t]}function Ej(t){return cj[t]}function ii(t){return{fieldPath:t.canonicalString()}}function oi(t){return nt.fromServerFormat(t.fieldPath)}function z1(t){return t instanceof Be?function(n){if(n.op==="=="){if(_v(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NAN"}};if(wv(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_v(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NAN"}};if(wv(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ii(n.field),op:xj(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(s=>z1(s));return r.length===1?r[0]:{compositeFilter:{op:Ej(n.op),filters:r}}}(t):Z(54877,{filter:t})}function bj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function H1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r,s,i=ee.min(),o=ee.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.yt=e}}function Ij(t){const e=vj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Cn=new Nj}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Wr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Nj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q1=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(q1,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hi(0)}static cr(){return new Hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="LruGarbageCollector",kj=1048576;function Ov([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class Aj{constructor(e){this.Ir=e,this.buffer=new Ge(Ov),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ov(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Cj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Lv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?K(Lv,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Vr(3e5)})}}class Rj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Uu.ce);const r=new Aj(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Dv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ri()<=se.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Pj(t,e){return new Rj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ca(r.mutation,s,Ut.empty(),xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=ir();const o=la(),c=function(){return la()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof os)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ca(f.mutation,d,f.mutation.getFieldMask(),xe.now())):o.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new Dj(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=la();let s=new Ce((o,c)=>o-c),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ut.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||oe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=N1();f.forEach(g=>{if(!i.has(g)){const x=j1(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(xs());let c=Pa,u=i;return o.next(d=>U.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,oe())).next(f=>({batchId:c,changes:S1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qo();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(m,g){return new so(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ht.newInvalidDocument(f)))});let c=qo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ca(f.mutation,d,Ut.empty(),xe.now()),qu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Ij(s.bundledQuery),readTime:jn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.overlays=new Ce(X.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=xs(),i=n.length+1,o=new X(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ce((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=xs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=xs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tj(n,r));let i=this.qr.get(n);i===void 0&&(i=oe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.Qr=new Ge(Ye.$r),this.Ur=new Ge(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ye(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new X(new ye([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new ye([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=oe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ge(Ye.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ej(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Ye(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?vp:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ie);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new X(i),0);let c=new Ge(ie);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.ri=e,this.docs=function(){return new Ce(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ir();const o=n.path,c=new X(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||mP(fP(f),r)<=0||(s.has(f.key)||qu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Bj(this)}getSize(e){return U.resolve(this.size)}}class Bj extends jj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.persistence=e,this.si=new qs(n=>xp(n),Ep),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new kp,this.targetCount=0,this.ai=Hi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Hi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Uu(0),this.li=!1,this.li=!0,this.hi=new Vj,this.referenceDelegate=e(this),this.Pi=new $j(this),this.indexManager=new Sj,this.remoteDocumentCache=function(s){return new Uj(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Tj(n),this.Ii=new Oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Fj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new zj(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class zj extends gP{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Ri=new kp,this.Vi=null}static mi(e){return new Ap(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=X.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class iu{constructor(e,n){this.persistence=e,this.pi=new qs(r=>wP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Pj(this,n)}static mi(e,n){return new iu(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fc(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Cp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return hk()?8:yP(mt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Hj;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ri()<=se.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(ri()<=se.DEBUG&&K("QueryEngine","Query:",si(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ri()<=se.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):U.resolve())}ys(e,n){if(Tv(n))return U.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nu(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,nu(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Tv(n)||s.isEqual(ee.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(ri()<=se.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),si(n)),this.vs(e,o,n,hP(s,Pa)).next(c=>c))})}Ds(e,n){let r=new Ge(T1(e));return n.forEach((s,i)=>{qu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ri()<=se.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",si(n)),this.ps.getDocumentsMatchingQuery(e,n,Wr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="LocalStore",Wj=3e8;class Gj{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ce(ie),this.xs=new qs(i=>xp(i),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Kj(t,e,n,r){return new Gj(t,e,n,r)}async function G1(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=oe();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function Qj(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let x=U.resolve();return g.forEach(E=>{x=x.next(()=>f.getEntry(u,E)).next(I=>{const A=d.docVersions.get(E);fe(A!==null,48541),I.version.compareTo(A)<0&&(m.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),f.addEntry(I)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function K1(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Yj(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(it.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(m,x),function(I,A,b){return I.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=Wj?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,x,f)&&c.push(n.Pi.updateTargetData(i,x))});let u=ir(),d=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(Xj(i,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(ee.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function Xj(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ir();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):K(Rp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function Jj(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zj(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Uf(t,e,n){const r=te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ro(o))throw o;K(Rp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Mv(t,e,n){const r=te(t);let s=ee.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=te(u),g=m.xs.get(f);return g!==void 0?U.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,Pn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:oe())).next(c=>(e4(r,VP(e),c),{documents:c,Qs:i})))}function e4(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Vv{constructor(){this.activeTargetIds=HP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t4{constructor(){this.Mo=new Vv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Vv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="ConnectivityMonitor";class Uv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(Fv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(Fv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Bf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RestConnection",r4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Bf(),c=this.zo(e,n.toUriEncodedString());K(gh,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),f=rs(d);return this.Jo(e,c,u,r,f).then(m=>(K(gh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ui(gh,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=r4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class o4 extends s4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Bf();return new Promise((c,u)=>{const d=new XE;d.setWithCredentials(!0),d.listenOnce(JE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case hc.NO_ERROR:const m=d.getResponseJson();K(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case hc.TIMEOUT:K(ct,`RPC '${e}' ${o} timed out`),u(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const g=d.getStatus();if(K(ct,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const E=x==null?void 0:x.error;if(E&&E.status&&E.message){const I=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(y)>=0?y:F.UNKNOWN}(E.status);u(new G(I,E.message))}else u(new G(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(F.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{K(ct,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);K(ct,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=Bf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t1(),c=e1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(ct,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,x=!1;const E=new i4({Yo:A=>{x?K(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(K(ct,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(ct,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Zo:()=>m.close()}),I=(A,b,y)=>{A.listen(b,w=>{try{y(w)}catch(C){setTimeout(()=>{throw C},0)}})};return I(m,Ho.EventType.OPEN,()=>{x||(K(ct,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),I(m,Ho.EventType.CLOSE,()=>{x||(x=!0,K(ct,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(m))}),I(m,Ho.EventType.ERROR,A=>{x||(x=!0,Ui(ct,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),E.a_(new G(F.UNAVAILABLE,"The operation could not be completed")))}),I(m,Ho.EventType.MESSAGE,A=>{var b;if(!x){const y=A.data[0];fe(!!y,16349);const w=y,C=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(C){K(ct,`RPC '${e}' stream ${s} received error:`,C);const L=C.status;let V=function(S){const k=Fe[S];if(k!==void 0)return L1(k)}(L),T=C.message;V===void 0&&(V=F.INTERNAL,T="Unknown error status: "+L+" with message "+C.message),x=!0,E.a_(new G(V,T)),m.close()}else K(ct,`RPC '${e}' stream ${s} received:`,y),E.u_(y)}}),I(c,ZE.STAT_EVENT,A=>{A.stat===Af.PROXY?K(ct,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Af.NOPROXY&&K(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){return new uj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="PersistentStream";class Y1{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Q1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(Bv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(Bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a4 extends Y1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=fj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?jn(o.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ff(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Df(u)?{documents:gj(i,u)}:{query:yj(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=V1(i,o.resumeToken);const d=Of(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){c.readTime=su(i,o.snapshotVersion.toTimestamp());const d=Of(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=wj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ff(this.serializer),n.removeTarget=e,this.q_(n)}}class l4 extends Y1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pj(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ff(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mj(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{}class u4 extends c4{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Mf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Mf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class d4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sr(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class h4{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(K(Ms,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await sl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Yu(d)}(this))})}),this.Ra=new d4(r,s)}}async function Yu(t){if(Ws(t))for(const e of t.da)await e(!0)}async function sl(t){for(const e of t.da)await e(!1)}function X1(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Lp(n)?Dp(n):io(n).O_()&&jp(n,e))}function Pp(t,e){const n=te(t),r=io(n);n.Ia.delete(e),r.O_()&&J1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ws(n)&&n.Ra.set("Unknown"))}function jp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}io(t).Y_(e)}function J1(t,e){t.Va.Ue(e),io(t).Z_(e)}function Dp(t){t.Va=new oj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),io(t).start(),t.Ra.ua()}function Lp(t){return Ws(t)&&!io(t).x_()&&t.Ia.size>0}function Ws(t){return te(t).Ea.size===0}function Z1(t){t.Va=void 0}async function f4(t){t.Ra.set("Online")}async function m4(t){t.Ia.forEach((e,n)=>{jp(t,e)})}async function p4(t,e){Z1(t),Lp(t)?(t.Ra.ha(e),Dp(t)):t.Ra.set("Unknown")}async function g4(t,e,n){if(t.Ra.set("Online"),e instanceof M1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){K(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ou(t,r)}else if(e instanceof gc?t.Va.Ze(e):e instanceof O1?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await K1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),J1(i,u);const m=new Ar(f.target,u,d,f.sequenceNumber);jp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){K(Ms,"Failed to raise snapshot:",r),await ou(t,r)}}async function ou(t,e,n){if(!ro(e))throw e;t.Ea.add(1),await sl(t),t.Ra.set("Offline"),n||(n=()=>K1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Ms,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Yu(t)})}function eb(t,e){return e().catch(n=>ou(t,n,e))}async function Xu(t){const e=te(t),n=Yr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vp;for(;y4(e);)try{const s=await Jj(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,v4(e,s)}catch(s){await ou(e,s)}tb(e)&&nb(e)}function y4(t){return Ws(t)&&t.Ta.length<10}function v4(t,e){t.Ta.push(e);const n=Yr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function tb(t){return Ws(t)&&!Yr(t).x_()&&t.Ta.length>0}function nb(t){Yr(t).start()}async function w4(t){Yr(t).ra()}async function _4(t){const e=Yr(t);for(const n of t.Ta)e.ea(n.mutations)}async function x4(t,e,n){const r=t.Ta.shift(),s=Ip.from(r,e,n);await eb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xu(t)}async function E4(t,e){e&&Yr(t).X_&&await async function(r,s){if(function(o){return rj(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();Yr(r).B_(),await eb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Xu(r)}}(t,e),tb(t)&&nb(t)}async function $v(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K(Ms,"RemoteStore received new credentials");const r=Ws(n);n.Ea.add(3),await sl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yu(n)}async function b4(t,e){const n=te(t);e?(n.Ea.delete(2),await Yu(n)):e||(n.Ea.add(2),await sl(n),n.Ra.set("Unknown"))}function io(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new a4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:f4.bind(null,t),t_:m4.bind(null,t),r_:p4.bind(null,t),H_:g4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Lp(t)?Dp(t):t.Ra.set("Unknown")):(await t.ma.stop(),Z1(t))})),t.ma}function Yr(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new l4(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:w4.bind(null,t),r_:E4.bind(null,t),ta:_4.bind(null,t),na:x4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Xu(t)):(await t.fa.stop(),t.Ta.length>0&&(K(Ms,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Op(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mp(t,e){if(sr("AsyncQueue",`${e}: ${t}`),ro(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{static emptySet(e){return new ki(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=qo(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.ga=new Ce(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class qi{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new qi(e,n,ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class I4{constructor(){this.queries=Hv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Hv(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function Hv(){return new qs(t=>b1(t),Hu)}async function Vp(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new T4,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Mp(o,`Initialization of query '${si(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Up(n)}async function Fp(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S4(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Up(n)}function N4(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Up(t){t.Ca.forEach(e=>{e.next()})}var $f,qv;(qv=$f||($f={})).Ma="default",qv.Cache="cache";class Bp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$f.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.key=e}}class sb{constructor(e){this.key=e}}class k4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=T1(e),this.tu=new ki(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),x=qu(this.query,m)?m:null,E=!!g&&this.mutatedKeys.has(g.key),I=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;g&&x?g.data.isEqual(x.data)?E!==I&&(r.track({type:3,doc:x}),A=!0):this.su(g,x)||(r.track({type:2,doc:x}),A=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!g&&x?(r.track({type:0,doc:x}),A=!0):g&&!x&&(r.track({type:1,doc:g}),A=!0,(u||d)&&(c=!0)),A&&(x?(o=o.add(x),i=I?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(x,E){const I=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:A})}};return I(x)-I(E)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new qi(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sb(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new rb(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class A4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class C4{constructor(e){this.key=e,this.hu=!1}}class R4{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qs(c=>b1(c),Hu),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(X.comparator),this.Au=new Map,this.Ru=new kp,this.Vu={},this.mu=new Map,this.fu=Hi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function P4(t,e,n=!0){const r=ub(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ib(r,e,n,!0),s}async function j4(t,e){const n=ub(t);await ib(n,e,!0,!1)}async function ib(t,e,n,r){const s=await Zj(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await D4(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&X1(t.remoteStore,s),c}async function D4(t,e,n,r,s){t.pu=(m,g,x)=>async function(I,A,b,y){let w=A.view.ru(b);w.Cs&&(w=await Mv(I.localStore,A.query,!1).then(({documents:T})=>A.view.ru(T,w)));const C=y&&y.targetChanges.get(A.targetId),L=y&&y.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(w,I.isPrimaryClient,C,L);return Gv(I,A.targetId,V.au),V.snapshot}(t,m,g,x);const i=await Mv(t.localStore,e,!0),o=new k4(e,i.Qs),c=o.ru(i.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Gv(t,n,d.au);const f=new A4(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function L4(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Hu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pp(r.remoteStore,s.targetId),zf(r,s.targetId)}).catch(no)):(zf(r,s.targetId),await Uf(r.localStore,s.targetId,!0))}async function O4(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pp(n.remoteStore,r.targetId))}async function M4(t,e,n){const r=H4(t);try{const s=await function(o,c){const u=te(o),d=xe.now(),f=c.reduce((x,E)=>x.add(E.key),oe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let E=ir(),I=oe();return u.Ns.getEntries(x,f).next(A=>{E=A,E.forEach((b,y)=>{y.isValidDocument()||(I=I.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,E)).next(A=>{m=A;const b=[];for(const y of c){const w=JP(y,m.get(y.key).overlayedDocument);w!=null&&b.push(new os(y.key,w,p1(w.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,b,c)}).next(A=>{g=A;const b=A.applyToLocalDocumentSet(m,I);return u.documentOverlayCache.saveOverlays(x,A.batchId,b)})}).then(()=>({batchId:g.batchId,changes:S1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ce(ie)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await il(r,s.changes),await Xu(r.remoteStore)}catch(s){const i=Mp(s,"Failed to persist write");n.reject(i)}}async function ob(t,e){const n=te(t);try{const r=await Yj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?fe(o.hu,14607):s.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))}),await il(n,r,e)}catch(r){await no(r)}}function Wv(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=te(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&Up(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function V4(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ce(X.comparator);o=o.insert(i,ht.newNoDocument(i,ee.min()));const c=oe().add(i),u=new Ku(ee.min(),new Map,new Ce(ie),o,c);await ob(r,u),r.du=r.du.remove(i),r.Au.delete(e),zp(r)}else await Uf(r.localStore,e,!1).then(()=>zf(r,e,n)).catch(no)}async function F4(t,e){const n=te(t),r=e.batch.batchId;try{const s=await Qj(n.localStore,e);lb(n,r,null),ab(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await il(n,s)}catch(s){await no(s)}}async function U4(t,e,n){const r=te(t);try{const s=await function(o,c){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(fe(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);lb(r,e,n),ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await il(r,s)}catch(s){await no(s)}}function ab(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lb(t,e,n){const r=te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function zf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||cb(t,r)})}function cb(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Pp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zp(t))}function Gv(t,e,n){for(const r of n)r instanceof rb?(t.Ru.addReference(r.key,e),B4(t,r)):r instanceof sb?(K($p,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||cb(t,r.key)):Z(19791,{wu:r})}function B4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K($p,"New document in limbo: "+n),t.Eu.add(r),zp(t))}function zp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new C4(n)),t.du=t.du.insert(n,r),X1(t.remoteStore,new Ar(Pn(zu(n.path)),r,"TargetPurposeLimboResolution",Uu.ce))}}async function il(t,e,n){const r=te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Cp.As(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.Es,x=>f.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>U.forEach(g.ds,x=>f.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!ro(m))throw m;K(Rp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=f.Ms.get(g),E=x.snapshotVersion,I=x.withLastLimboFreeSnapshotVersion(E);f.Ms=f.Ms.insert(g,I)}}}(r.localStore,i))}async function $4(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K($p,"User change. New user:",e.toKey());const r=await G1(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new G(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await il(n,r.Ls)}}function z4(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function ub(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V4.bind(null,e),e.Pu.H_=S4.bind(null,e.eventManager),e.Pu.yu=N4.bind(null,e.eventManager),e}function H4(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U4.bind(null,e),e}class au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Kj(this.persistence,new qj,e.initialUser,this.serializer)}Cu(e){return new W1(Ap.mi,this.serializer)}Du(e){return new t4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}au.provider={build:()=>new au};class q4 extends au{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof iu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Cj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new W1(r=>iu.mi(r,n),this.serializer)}}class Hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await b4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I4}()}createDatastore(e){const n=Qu(e.databaseInfo.databaseId),r=function(i){return new o4(i)}(e.databaseInfo);return function(i,o,c,u){return new u4(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new h4(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Wv(this.syncEngine,n,0),function(){return Uv.v()?new Uv:new n4}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new R4(s,i,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);K(Ms,"RemoteStore shutting down."),i.Ea.add(5),await sl(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hf.provider={build:()=>new Hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class W4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(Xr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(Xr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Mp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vh(t,e){t.asyncQueue.verifyOperationInProgress(),K(Xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await G1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await G4(t);K(Xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$v(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$v(e.remoteStore,s)),t._onlineComponents=e}async function G4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Xr,"Using user provided OfflineComponentProvider");try{await vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ui("Error using user provided cache. Falling back to memory cache: "+n),await vh(t,new au)}}else K(Xr,"Using default OfflineComponentProvider"),await vh(t,new q4(void 0));return t._offlineComponents}async function db(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Xr,"Using user provided OnlineComponentProvider"),await Kv(t,t._uninitializedComponentsProvider._online)):(K(Xr,"Using default OnlineComponentProvider"),await Kv(t,new Hf))),t._onlineComponents}function K4(t){return db(t).then(e=>e.syncEngine)}async function lu(t){const e=await db(t),n=e.eventManager;return n.onListen=P4.bind(null,e.syncEngine),n.onUnlisten=L4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=j4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=O4.bind(null,e.syncEngine),n}function Q4(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Hp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Fp(i,m));const x=g.docs.has(c);!x&&g.fromCache?d.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Bp(zu(c.path),f,{includeMetadataChanges:!0,qa:!0});return Vp(i,m)}(await lu(t),t.asyncQueue,e,n,r)),r.promise}function Y4(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new Hp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Fp(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Bp(c,f,{includeMetadataChanges:!0,qa:!0});return Vp(i,m)}(await lu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fb,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kj)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hb(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ju{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tP;switch(r.type){case"firstParty":return new iP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qv.get(n);r&&(K("ComponentProvider","Removing Datastore"),Qv.delete(n),r.terminate())}(this),Promise.resolve()}}function X4(t,e,n,r={}){var d;t=Dt(t,Ju);const s=rs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(rp(`https://${c}`),sp("Firestore",!0)),i.host!==fb&&i.host!==c&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!qr(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ut.MOCK_USER;else{f=iE(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ut(g)}t._authCredentials=new nP(new r1(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ur(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tl(n,Le._jsonSchema))return new Le(e,r||null,new X(ye.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:$e("string",Le._jsonSchemaVersion),referencePath:$e("string")};class Br extends ur{constructor(e,n,r){super(e,n,zu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new X(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function xt(t,e,...n){if(t=pe(t),s1("collection","path",e),t instanceof Ju){const r=ye.fromString(e,...n);return uv(r),new Br(t,null,r)}{if(!(t instanceof Le||t instanceof Br))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return uv(r),new Br(t.firestore,null,r)}}function Je(t,e,...n){if(t=pe(t),arguments.length===1&&(e=yp.newId()),s1("doc","path",e),t instanceof Ju){const r=ye.fromString(e,...n);return cv(r),new Le(t,null,new X(r))}{if(!(t instanceof Le||t instanceof Br))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return cv(r),new Le(t.firestore,t instanceof Br?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="AsyncQueue";class Zv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Q1(this,"async_queue_retry"),this._c=()=>{const r=yh();r&&K(Jv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ro(e))throw e;K(Jv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,sr("INTERNAL UNHANDLED ERROR: ",ew(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Op.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Z(47125,{Pc:ew(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ew(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class or extends Ju{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zv(e),this._firestoreClient=void 0,await e}}}function J4(t,e){const n=typeof t=="object"?t:Ya(),r=typeof t=="string"?t:Zc,s=ss(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nE("firestore");i&&X4(s,...i)}return s}function Zu(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Z4(t),t._firestoreClient}function Z4(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,f){return new EP(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,hb(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new W4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(it.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tl(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:$e("string",Xt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(tl(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:$e("string",Dn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tl(e,Ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ln(e.vectorValues);throw new G(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:$e("string",Ln._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=/^__.*__$/;class tD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class mb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class qp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pb(this.Ac)&&eD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qu(e)}Cc(e,n,r,s=!1){return new qp({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nd(t){const e=t._freezeSettings(),n=Qu(t._databaseId);return new nD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gb(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Gp("Data must be an object, but it was:",o,r);const c=yb(r,o);let u,d;if(i.merge)u=new Ut(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=qf(e,m,n);if(!o.contains(g))throw new G(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);wb(f,g)||f.push(g)}u=new Ut(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new tD(new kt(c),u,d)}class rd extends td{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rd}}class Wp extends td{_toFieldTransform(e){return new KP(e.path,new Ma)}isEqual(e){return e instanceof Wp}}function rD(t,e,n,r){const s=t.Cc(1,e,n);Gp("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();is(r,(u,d)=>{const f=Kp(e,u,n);d=pe(d);const m=s.yc(f);if(d instanceof rd)i.push(f);else{const g=ol(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new Ut(i);return new mb(o,c,s.fieldTransforms)}function sD(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[qf(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(qf(e,i[g])),u.push(i[g+1]);const d=[],f=kt.empty();for(let g=c.length-1;g>=0;--g)if(!wb(d,c[g])){const x=c[g];let E=u[g];E=pe(E);const I=o.yc(x);if(E instanceof rd)d.push(x);else{const A=ol(E,I);A!=null&&(d.push(x),f.set(x,A))}}const m=new Ut(d);return new mb(f,m,o.fieldTransforms)}function iD(t,e,n,r=!1){return ol(n,t.Cc(r?4:3,e))}function ol(t,e){if(vb(t=pe(t)))return Gp("Unsupported field value:",e,t),yb(t,e);if(t instanceof td)return function(r,s){if(!pb(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=ol(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:su(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,i)}}if(r instanceof Dn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xt)return{bytesValue:V1(s.serializer,r._byteString)};if(r instanceof Le){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Np(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ln)return function(o,c){return{mapValue:{fields:{[f1]:{stringValue:m1},[eu]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return bp(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Fu(r)}`)}(t,e)}function yb(t,e){const n={};return a1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,s)=>{const i=ol(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof Dn||t instanceof Xt||t instanceof Le||t instanceof td||t instanceof Ln)}function Gp(t,e,n){if(!vb(n)||!i1(n)){const r=Fu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function qf(t,e,n){if((e=pe(e))instanceof ed)return e._internalPath;if(typeof e=="string")return Kp(t,e);throw cu("Field path arguments must be of type string or ",t,!1,void 0,n)}const oD=new RegExp("[~\\*/\\[\\]]");function Kp(t,e,n){if(e.search(oD)>=0)throw cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ed(...e.split("."))._internalPath}catch{throw cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,c+t+u)}function wb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aD extends _b{data(){return super.data()}}function sd(t,e){return typeof e=="string"?Kp(t,e):e instanceof ed?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qp{}class Yp extends Qp{}function Gs(t,e,...n){let r=[];e instanceof Qp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Xp).length,c=i.filter(u=>u instanceof id).length;if(o>1||o>0&&c>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class id extends Yp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new id(e,n,r)}_apply(e){const n=this._parse(e);return Eb(e._query,n),new ur(e.firestore,e.converter,Lf(e._query,n))}_parse(e){const n=nd(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){rw(m,f);const E=[];for(const I of m)E.push(nw(u,i,I));g={arrayValue:{values:E}}}else g=nw(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||rw(m,f),g=iD(c,o,m,f==="in"||f==="not-in");return Be.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wi(t,e,n){const r=e,s=sd("where",t);return id._create(s,r,n)}class Xp extends Qp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)Eb(o,u),o=Lf(o,u)}(e._query,n),new ur(e.firestore,e.converter,Lf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jp extends Yp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Jp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oa(i,o)}(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new so(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function oo(t,e="asc"){const n=e,r=sd("orderBy",t);return Jp._create(r,n)}class Zp extends Yp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Zp(e,n,r)}_apply(e){return new ur(e.firestore,e.converter,nu(e._query,this._limit,this._limitType))}}function lD(t){return Zp._create("limit",t,"F")}function nw(t,e,n){if(typeof(n=pe(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E1(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!X.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vv(t,new X(r))}if(n instanceof Le)return vv(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fu(n)}.`)}function rw(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Eb(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cD{convertValue(e,n="none"){switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[eu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Oe(o.doubleValue));return new Ln(n)}convertGeoPoint(e){return new Dn(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$u(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ja(e));default:return null}}convertTimestamp(e){const n=Gr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);fe(H1(r),9688,{name:e});const s=new Da(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||sr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Go{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends _b{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:$e("string",Ss._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class yc extends Ss{data(e={}){return super.data(e)}}class Ns{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Go(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yc(this._firestore,this._userDataWriter,r.key,r,new Go(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new yc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Go(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new yc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Go(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:uD(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ns._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){t=Dt(t,Le);const e=Dt(t.firestore,or);return Q4(Zu(e),t._key).then(n=>Tb(e,t,n))}Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:$e("string",Ns._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};class eg extends cD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function ao(t){t=Dt(t,ur);const e=Dt(t.firestore,or),n=Zu(e),r=new eg(e);return xb(t._query),Y4(n,t._query).then(s=>new Ns(e,r,t,s))}function Wf(t,e,n){t=Dt(t,Le);const r=Dt(t.firestore,or),s=bb(t.converter,e,n);return od(r,[gb(nd(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function Ks(t,e,n,...r){t=Dt(t,Le);const s=Dt(t.firestore,or),i=nd(s);let o;return o=typeof(e=pe(e))=="string"||e instanceof ed?sD(i,"updateDoc",t._key,e,n,r):rD(i,"updateDoc",t._key,e),od(s,[o.toMutation(t._key,en.exists(!0))])}function dD(t){return od(Dt(t.firestore,or),[new Tp(t._key,en.none())])}function Jr(t,e){const n=Dt(t.firestore,or),r=Je(t),s=bb(t.converter,e);return od(n,[gb(nd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function hD(t,...e){var u,d,f;t=pe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tw(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tw(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,c;if(t instanceof Le)o=Dt(t.firestore,or),c=zu(t._key.path),i={next:m=>{e[r]&&e[r](Tb(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Dt(t,ur);o=Dt(m.firestore,or),c=m._query;const g=new eg(o);i={next:x=>{e[r]&&e[r](new Ns(o,g,m,x))},error:e[r+1],complete:e[r+2]},xb(t._query)}return function(g,x,E,I){const A=new Hp(I),b=new Bp(x,A,E);return g.asyncQueue.enqueueAndForget(async()=>Vp(await lu(g),b)),()=>{A.Nu(),g.asyncQueue.enqueueAndForget(async()=>Fp(await lu(g),b))}}(Zu(o),c,s,i)}function od(t,e){return function(r,s){const i=new Qn;return r.asyncQueue.enqueueAndForget(async()=>M4(await K4(r),s,i)),i.promise}(Zu(t),e)}function Tb(t,e,n){const r=n.docs.get(e._key),s=new eg(t);return new Ss(t,s,e._key,r,new Go(n.hasPendingWrites,n.fromCache),e.converter)}function Ve(){return new Wp("serverTimestamp")}(function(e,n=!0){(function(s){to=s})(Hs),vn(new rn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new or(new rP(r.getProvider("auth-internal")),new oP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),jt(iv,ov,e),jt(iv,ov,"esm2020")})();var fD="firebase",mD="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt(fD,mD,"app");const Ib="@firebase/installations",tg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=1e4,Nb=`w:${tg}`,kb="FIS_v2",pD="https://firebaseinstallations.googleapis.com/v1",gD=60*60*1e3,yD="installations",vD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new zs(yD,vD,wD);function Ab(t){return t instanceof on&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb({projectId:t}){return`${pD}/projects/${t}/installations`}function Rb(t){return{token:t.token,requestStatus:2,expiresIn:xD(t.expiresIn),creationTime:Date.now()}}async function Pb(t,e){const r=(await e.json()).error;return Vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function jb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _D(t,{refreshToken:e}){const n=jb(t);return n.append("Authorization",ED(e)),n}async function Db(t){const e=await t();return e.status>=500&&e.status<600?t():e}function xD(t){return Number(t.replace("s","000"))}function ED(t){return`${kb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Cb(t),s=jb(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:kb,appId:t.appId,sdkVersion:Nb},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await Db(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Rb(d.authToken)}}else throw await Pb("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=/^[cdef][\w-]{21}$/,Gf="";function SD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ND(t);return ID.test(n)?n:Gf}catch{return Gf}}function ND(t){return TD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;function Mb(t,e){const n=ad(t);Vb(n,e),kD(n,e)}function Vb(t,e){const n=Ob.get(t);if(n)for(const r of n)r(e)}function kD(t,e){const n=AD();n&&n.postMessage({key:t,fid:e}),CD()}let Es=null;function AD(){return!Es&&"BroadcastChannel"in self&&(Es=new BroadcastChannel("[Firebase] FID Change"),Es.onmessage=t=>{Vb(t.data.key,t.data.fid)}),Es}function CD(){Ob.size===0&&Es&&(Es.close(),Es=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="firebase-installations-database",PD=1,Fs="firebase-installations-store";let wh=null;function ng(){return wh||(wh=dE(RD,PD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fs)}}})),wh}async function uu(t,e){const n=ad(t),s=(await ng()).transaction(Fs,"readwrite"),i=s.objectStore(Fs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Mb(t,e.fid),e}async function Fb(t){const e=ad(t),r=(await ng()).transaction(Fs,"readwrite");await r.objectStore(Fs).delete(e),await r.done}async function ld(t,e){const n=ad(t),s=(await ng()).transaction(Fs,"readwrite"),i=s.objectStore(Fs),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&Mb(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rg(t){let e;const n=await ld(t.appConfig,r=>{const s=jD(r),i=DD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Gf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jD(t){const e=t||{fid:SD(),registrationStatus:0};return Ub(e)}function DD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=LD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OD(t)}:{installationEntry:e}}async function LD(t,e){try{const n=await bD(t,e);return uu(t.appConfig,n)}catch(n){throw Ab(n)&&n.customData.serverCode===409?await Fb(t.appConfig):await uu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function OD(t){let e=await sw(t.appConfig);for(;e.registrationStatus===1;)await Lb(100),e=await sw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await rg(t);return r||n}return e}function sw(t){return ld(t,e=>{if(!e)throw Vs.create("installation-not-found");return Ub(e)})}function Ub(t){return MD(t)?{fid:t.fid,registrationStatus:0}:t}function MD(t){return t.registrationStatus===1&&t.registrationTime+Sb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD({appConfig:t,heartbeatServiceProvider:e},n){const r=FD(t,n),s=_D(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:Nb,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await Db(()=>fetch(r,c));if(u.ok){const d=await u.json();return Rb(d)}else throw await Pb("Generate Auth Token",u)}function FD(t,{fid:e}){return`${Cb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sg(t,e=!1){let n;const r=await ld(t.appConfig,i=>{if(!Bb(i))throw Vs.create("not-registered");const o=i.authToken;if(!e&&$D(o))return i;if(o.requestStatus===1)return n=UD(t,e),i;{if(!navigator.onLine)throw Vs.create("app-offline");const c=HD(i);return n=BD(t,c),c}});return n?await n:r.authToken}async function UD(t,e){let n=await iw(t.appConfig);for(;n.authToken.requestStatus===1;)await Lb(100),n=await iw(t.appConfig);const r=n.authToken;return r.requestStatus===0?sg(t,e):r}function iw(t){return ld(t,e=>{if(!Bb(e))throw Vs.create("not-registered");const n=e.authToken;return qD(n)?{...e,authToken:{requestStatus:0}}:e})}async function BD(t,e){try{const n=await VD(t,e),r={...e,authToken:n};return await uu(t.appConfig,r),n}catch(n){if(Ab(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Fb(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await uu(t.appConfig,r)}throw n}}function Bb(t){return t!==void 0&&t.registrationStatus===2}function $D(t){return t.requestStatus===2&&!zD(t)}function zD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+gD}function HD(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function qD(t){return t.requestStatus===1&&t.requestTime+Sb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t){const e=t,{installationEntry:n,registrationPromise:r}=await rg(e);return r?r.catch(console.error):sg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e=!1){const n=t;return await KD(n),(await sg(n,e)).token}async function KD(t){const{registrationPromise:e}=await rg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){if(!t||!t.options)throw _h("App Configuration");if(!t.name)throw _h("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw _h(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _h(t){return Vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="installations",YD="installations-internal",XD=t=>{const e=t.getProvider("app").getImmediate(),n=QD(e),r=ss(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},JD=t=>{const e=t.getProvider("app").getImmediate(),n=ss(e,$b).getImmediate();return{getId:()=>WD(n),getToken:s=>GD(n,s)}};function ZD(){vn(new rn($b,XD,"PUBLIC")),vn(new rn(YD,JD,"PRIVATE"))}ZD();jt(Ib,tg);jt(Ib,tg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="analytics",eL="firebase_id",tL="origin",nL=60*1e3,rL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ig="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t=new Lu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zt=new zs("analytics","Analytics",sL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){if(!t.startsWith(ig)){const e=zt.create("invalid-gtag-resource",{gtagURL:t});return _t.warn(e.message),""}return t}function zb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function oL(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function aL(t,e){const n=oL("firebase-js-sdk-policy",{createScriptURL:iL}),r=document.createElement("script"),s=`${ig}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function lL(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function cL(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await zb(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){_t.error(c)}t("config",s,i)}async function uL(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await zb(n);for(const u of o){const d=c.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){_t.error(i)}}function dL(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[c,u]=o;await uL(t,e,n,c,u)}else if(i==="config"){const[c,u]=o;await cL(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=o;t("consent",c,u)}else if(i==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(i==="set"){const[c]=o;t("set",c)}else t(i,...o)}catch(c){_t.error(c)}}return s}function hL(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=dL(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function fL(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ig)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=30,pL=1e3;class gL{constructor(e={},n=pL){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Hb=new gL;function yL(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function vL(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:yL(n)},s=rL.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let c="";try{const u=await i.json();(o=u.error)!=null&&o.message&&(c=u.error.message)}catch{}throw zt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:c})}return i.json()}async function wL(t,e=Hb,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw zt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw zt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new EL;return setTimeout(async()=>{c.abort()},nL),qb({appId:r,apiKey:s,measurementId:i},o,c,e)}async function qb(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Hb){var c;const{appId:i,measurementId:o}=t;try{await _L(r,e)}catch(u){if(o)return _t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw u}try{const u=await vL(t);return s.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!xL(d)){if(s.deleteThrottleMetadata(i),o)return _t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:o};throw u}const f=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?C0(n,s.intervalMillis,mL):C0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,m),_t.debug(`Calling attemptFetch again in ${f} millis`),qb(t,m,r,s)}}function _L(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xL(t){if(!(t instanceof on)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class EL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function bL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function TL(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(){if(aE())try{await lE()}catch(t){return _t.warn(zt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return _t.warn(zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function SL(t,e,n,r,s,i,o){const c=wL(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&_t.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>_t.error(g)),e.push(c);const u=IL().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([c,u]);fL(i)||aL(i,d.measurementId),s("js",new Date);const m=(o==null?void 0:o.config)??{};return m[tL]="firebase",m.update=!0,f!=null&&(m[eL]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.app=e}_delete(){return delete Ai[this.app.options.appId],Promise.resolve()}}let Ai={},ow=[];const aw={};let xh="dataLayer",kL="gtag",lw,og,cw=!1;function AL(){const t=[];if(oE()&&t.push("This is a browser extension environment."),fk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=zt.create("invalid-analytics-context",{errorInfo:e});_t.warn(n.message)}}function CL(t,e,n){AL();const r=t.options.appId;if(!r)throw zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)_t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zt.create("no-api-key");if(Ai[r]!=null)throw zt.create("already-exists",{id:r});if(!cw){lL(xh);const{wrappedGtag:i,gtagCore:o}=hL(Ai,ow,aw,xh,kL);og=i,lw=o,cw=!0}return Ai[r]=SL(t,ow,aw,e,lw,xh,n),new NL(t)}function RL(t=Ya()){t=pe(t);const e=ss(t,du);return e.isInitialized()?e.getImmediate():PL(t)}function PL(t,e={}){const n=ss(t,du);if(n.isInitialized()){const s=n.getImmediate();if(qr(e,n.getOptions()))return s;throw zt.create("already-initialized")}return n.initialize({options:e})}function jL(t,e,n){t=pe(t),TL(og,Ai[t.app.options.appId],e,n).catch(r=>_t.error(r))}function DL(t,e,n,r){t=pe(t),bL(og,Ai[t.app.options.appId],e,n,r).catch(s=>_t.error(s))}const uw="@firebase/analytics",dw="0.10.19";function LL(){vn(new rn(du,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return CL(r,s,n)},"PUBLIC")),vn(new rn("analytics-internal",t,"PRIVATE")),jt(uw,dw),jt(uw,dw,"esm2020");function t(e){try{const n=e.getProvider(du).getImmediate();return{logEvent:(r,s,i)=>DL(n,r,s,i),setUserProperties:(r,s)=>jL(n,r,s)}}catch(n){throw zt.create("interop-component-reg-failed",{reason:n})}}}LL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firebasestorage.googleapis.com",Gb="storageBucket",OL=2*60*1e3,ML=10*60*1e3,VL=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re extends on{constructor(e,n,r=0){super(Eh(e),`Firebase Storage: ${n} (${Eh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Re.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Eh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(be||(be={}));function Eh(t){return"storage/"+t}function ag(){const t="An unknown error occurred, please check the error payload for server response.";return new Re(be.UNKNOWN,t)}function FL(t){return new Re(be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function UL(t){return new Re(be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Re(be.UNAUTHENTICATED,t)}function $L(){return new Re(be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zL(t){return new Re(be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Kb(){return new Re(be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qb(){return new Re(be.CANCELED,"User canceled the upload/download.")}function HL(t){return new Re(be.INVALID_URL,"Invalid URL '"+t+"'.")}function qL(t){return new Re(be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WL(){return new Re(be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gb+"' property when initializing the app?")}function Yb(){return new Re(be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function GL(){return new Re(be.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function KL(){return new Re(be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QL(t){return new Re(be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kf(t){return new Re(be.INVALID_ARGUMENT,t)}function Xb(){return new Re(be.APP_DELETED,"The Firebase app was deleted.")}function YL(t){return new Re(be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ua(t,e){return new Re(be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Oo(t){throw new Re(be.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bt.makeFromUrl(e,n)}catch{return new Bt(e,"")}if(r.path==="")return r;throw qL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),E={bucket:1,path:3},I=n===Wb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",b=new RegExp(`^https?://${I}/${s}/${A}`,"i"),w=[{regex:c,indices:u,postModify:i},{regex:x,indices:E,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<w.length;C++){const L=w[C],V=L.regex.exec(e);if(V){const T=V[L.indices.bucket];let v=V[L.indices.path];v||(v=""),r=new Bt(T,v),L.postModify(r);break}}if(r==null)throw HL(e);return r}}class XL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function m(A){s=setTimeout(()=>{s=null,t(x,u())},A)}function g(){i&&clearTimeout(i)}function x(A,...b){if(d){g();return}if(A){g(),f.call(null,A,...b);return}if(u()||o){g(),f.call(null,A,...b);return}r<64&&(r*=2);let w;c===1?(c=2,w=0):w=(r+Math.random())*1e3,m(w)}let E=!1;function I(A){E||(E=!0,g(),!d&&(s!==null?(A||(c=2),clearTimeout(s),m(0)):A||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,I(!0)},n),I}function ZL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t){return t!==void 0}function t3(t){return typeof t=="function"}function n3(t){return typeof t=="object"&&!Array.isArray(t)}function cd(t){return typeof t=="string"||t instanceof String}function hw(t){return lg()&&t instanceof Blob}function lg(){return typeof Blob<"u"}function fw(t,e,n,r){if(r<e)throw Kf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Kf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Jb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ks;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ks||(ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n,r,s,i,o,c,u,d,f,m,g=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,I)=>{this.resolve_=E,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Wl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===ks.NO_ERROR,u=i.getStatus();if(!c||Zb(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ks.ABORT;r(!1,new Wl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Wl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());e3(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=ag();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Xb():Qb();o(u)}else{const u=Kb();o(u)}};this.canceled_?n(!1,new Wl(!1,null,!0)):this.backoffId_=JL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ZL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function s3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function i3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function o3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function a3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function l3(t,e,n,r,s,i,o=!0,c=!1){const u=Jb(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return o3(f,e),s3(f,n),i3(f,i),a3(f,r),new r3(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function u3(...t){const e=c3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(lg())return new Blob(t);throw new Re(be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function d3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t){if(typeof atob>"u")throw QL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bh{constructor(e,n){this.data=e,this.contentType=n||null}}function f3(t,e){switch(t){case kn.RAW:return new bh(eT(e));case kn.BASE64:case kn.BASE64URL:return new bh(tT(t,e));case kn.DATA_URL:return new bh(p3(e),g3(e))}throw ag()}function eT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function m3(t){let e;try{e=decodeURIComponent(t)}catch{throw ua(kn.DATA_URL,"Malformed data URL.")}return eT(e)}function tT(t,e){switch(t){case kn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ua(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case kn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ua(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=h3(e)}catch(s){throw s.message.includes("polyfill")?s:ua(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class nT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ua(kn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=y3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function p3(t){const e=new nT(t);return e.base64?tT(kn.BASE64,e.rest):m3(e.rest)}function g3(t){return new nT(t).contentType}function y3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){let r=0,s="";hw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(hw(this.data_)){const r=this.data_,s=d3(r,e,n);return s===null?null:new Sr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Sr(r,!0)}}static getBlob(...e){if(lg()){const n=e.map(r=>r instanceof Sr?r.data_:r);return new Sr(u3.apply(null,n))}else{const n=e.map(o=>cd(o)?f3(kn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new Sr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t){let e;try{e=JSON.parse(t)}catch{return null}return n3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function w3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function sT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e){return e}class yt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||_3}}let Gl=null;function x3(t){return!cd(t)||t.length<2?t:sT(t)}function iT(){if(Gl)return Gl;const t=[];t.push(new yt("bucket")),t.push(new yt("generation")),t.push(new yt("metageneration")),t.push(new yt("name","fullPath",!0));function e(i,o){return x3(o)}const n=new yt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new yt("size");return s.xform=r,t.push(s),t.push(new yt("timeCreated")),t.push(new yt("updated")),t.push(new yt("md5Hash",null,!0)),t.push(new yt("cacheControl",null,!0)),t.push(new yt("contentDisposition",null,!0)),t.push(new yt("contentEncoding",null,!0)),t.push(new yt("contentLanguage",null,!0)),t.push(new yt("contentType",null,!0)),t.push(new yt("metadata","customMetadata",!0)),Gl=t,Gl}function E3(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Bt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function b3(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return E3(r,t),r}function oT(t,e,n){const r=rT(e);return r===null?null:b3(t,r,n)}function T3(t,e,n,r){const s=rT(e);if(s===null||!cd(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),x=lo(g,n,r),E=Jb({alt:"media",token:d});return x+E})[0]}function aT(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Qs{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t){if(!t)throw ag()}function cg(t,e){function n(r,s){const i=oT(t,s,e);return Yn(i!==null),i}return n}function I3(t,e){function n(r,s){const i=oT(t,s,e);return Yn(i!==null),T3(i,s,t.host,t._protocol)}return n}function al(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=$L():s=BL():n.getStatus()===402?s=UL(t.bucket):n.getStatus()===403?s=zL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ug(t){const e=al(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=FL(t.path)),i.serverResponse=s.serverResponse,i}return n}function S3(t,e,n){const r=e.fullServerUrl(),s=lo(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Qs(s,i,cg(t,n),o);return c.errorHandler=ug(e),c}function N3(t,e,n){const r=e.fullServerUrl(),s=lo(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Qs(s,i,I3(t,n),o);return c.errorHandler=ug(e),c}function k3(t,e){const n=e.fullServerUrl(),r=lo(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const c=new Qs(r,s,o,i);return c.successCodes=[200,204],c.errorHandler=ug(e),c}function A3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lT(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=A3(null,e)),r}function C3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let w="";for(let C=0;C<2;C++)w=w+Math.random().toString().slice(2);return w}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=lT(e,r,s),f=aT(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=Sr.getBlob(m,r,g);if(x===null)throw Yb();const E={name:d.fullPath},I=lo(i,t.host,t._protocol),A="POST",b=t.maxUploadRetryTime,y=new Qs(I,A,cg(t,n),b);return y.urlParams=E,y.headers=o,y.body=x.uploadData(),y.errorHandler=al(e),y}class hu{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function dg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Yn(!1)}return Yn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function R3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=lT(e,r,s),c={name:o.fullPath},u=lo(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=aT(o,n),g=t.maxUploadRetryTime;function x(I){dg(I);let A;try{A=I.getResponseHeader("X-Goog-Upload-URL")}catch{Yn(!1)}return Yn(cd(A)),A}const E=new Qs(u,d,x,g);return E.urlParams=c,E.headers=f,E.body=m,E.errorHandler=al(e),E}function P3(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=dg(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Yn(!1)}m||Yn(!1);const g=Number(m);return Yn(!isNaN(g)),new hu(g,r.size(),f==="final")}const o="POST",c=t.maxUploadRetryTime,u=new Qs(n,o,i,c);return u.headers=s,u.errorHandler=al(e),u}const mw=256*1024;function j3(t,e,n,r,s,i,o,c){const u=new hu(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw GL();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const m=u.current,g=m+f;let x="";f===0?x="finalize":d===f?x="upload, finalize":x="upload";const E={"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":`${u.current}`},I=r.slice(m,g);if(I===null)throw Yb();function A(C,L){const V=dg(C,["active","final"]),T=u.current+f,v=r.size();let S;return V==="final"?S=cg(e,i)(C,L):S=null,new hu(T,v,V==="final",S)}const b="POST",y=e.maxUploadRetryTime,w=new Qs(n,b,A,y);return w.headers=E,w.body=I.uploadData(),w.progressCallback=c||null,w.errorHandler=al(t),w}const It={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Th(t){switch(t){case"running":case"pausing":case"canceling":return It.RUNNING;case"paused":return It.PAUSED;case"success":return It.SUCCESS;case"canceled":return It.CANCELED;case"error":return It.ERROR;default:return It.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n,r){if(t3(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class L3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Oo("cannot .send() more than once");if(rs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class O3 extends L3{initXhr(){this.xhr_.responseType="text"}}function gs(){return new O3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=iT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(be.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(Zb(s.status,[]))if(i)s=Kb();else{this.sleepTime=Math.max(this.sleepTime*2,VL),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(be.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=R3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,gs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=P3(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,gs,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=mw*this._chunkMultiplier,n=new hu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=j3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,gs,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){mw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=S3(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,gs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=C3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,gs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Qb(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Th(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new D3(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Th(this._state)){case It.SUCCESS:ti(this._resolve.bind(null,this.snapshot))();break;case It.CANCELED:case It.ERROR:const n=this._reject;ti(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Th(this._state)){case It.RUNNING:case It.PAUSED:e.next&&ti(e.next.bind(e,this.snapshot))();break;case It.SUCCESS:e.complete&&ti(e.complete.bind(e))();break;case It.CANCELED:case It.ERROR:e.error&&ti(e.error.bind(e,this._error))();break;default:e.error&&ti(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this._service=e,n instanceof Bt?this._location=n:this._location=Bt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Us(e,n)}get root(){const e=new Bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sT(this._location.path)}get storage(){return this._service}get parent(){const e=v3(this._location.path);if(e===null)return null;const n=new Bt(this._location.bucket,e);return new Us(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YL(e)}}function V3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new M3(t,new Sr(e),n)}function F3(t){t._throwIfRoot("getDownloadURL");const e=N3(t.storage,t._location,iT());return t.storage.makeRequestWithTokens(e,gs).then(n=>{if(n===null)throw KL();return n})}function U3(t){t._throwIfRoot("deleteObject");const e=k3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gs)}function B3(t,e){const n=w3(t._location.path,e),r=new Bt(t._location.bucket,n);return new Us(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){return/^[A-Za-z]+:\/\//.test(t)}function z3(t,e){return new Us(t,e)}function cT(t,e){if(t instanceof hg){const n=t;if(n._bucket==null)throw WL();const r=new Us(n,n._bucket);return e!=null?cT(r,e):r}else return e!==void 0?B3(t,e):t}function H3(t,e){if(e&&$3(e)){if(t instanceof hg)return z3(t,e);throw Kf("To use ref(service, url), the first argument must be a Storage instance.")}else return cT(t,e)}function pw(t,e){const n=e==null?void 0:e[Gb];return n==null?null:Bt.makeFromBucketSpec(n,t)}function q3(t,e,n,r={}){t.host=`${e}:${n}`;const s=rs(e);s&&(rp(`https://${t.host}/b`),sp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:iE(i,t.app.options.projectId))}class hg{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Wb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=OL,this._maxUploadRetryTime=ML,this._requests=new Set,s!=null?this._bucket=Bt.makeFromBucketSpec(s,this._host):this._bucket=pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bt.makeFromBucketSpec(this._url,e):this._bucket=pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Nt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Us(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new XL(Xb());{const o=l3(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const gw="@firebase/storage",yw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="storage";function W3(t,e,n){return t=pe(t),V3(t,e,n)}function G3(t){return t=pe(t),F3(t)}function K3(t){return t=pe(t),U3(t)}function dT(t,e){return t=pe(t),H3(t,e)}function Q3(t=Ya(),e){t=pe(t);const r=ss(t,uT).getImmediate({identifier:e}),s=nE("storage");return s&&Y3(r,...s),r}function Y3(t,e,n,r={}){q3(t,e,n,r)}function X3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new hg(n,r,s,e,Hs)}function J3(){vn(new rn(uT,X3,"PUBLIC").setMultipleInstances(!0)),jt(gw,yw,""),jt(gw,yw,"esm2020")}J3();const Z3={apiKey:"AIzaSyBHyhsDtZABqCEgmPdVHsA8r4vqTQIBJSs",authDomain:"dermaglareapp.firebaseapp.com",projectId:"dermaglareapp",storageBucket:"dermaglareapp.firebasestorage.app",messagingSenderId:"462818904186",appId:"1:462818904186:web:2040dcd437664d563bd3c3",measurementId:"G-3XLGD4G27R"},ud=EA().length?Ya():hE(Z3),co=ZR(ud),de=J4(ud),hT=Q3(ud);RL(ud);const fT=new Un;fT.setCustomParameters({prompt:"select_account"});const Ua=t=>{if(!t||t.trim()==="")return{isValid:!1,error:"Email is required."};if(!t.includes("@"))return{isValid:!1,error:"Email must contain @ symbol."};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return{isValid:!1,error:"Please enter a valid email address."};if(!/\.(com|net|org|edu|gov|co\.za|za|io|me|info|biz)$/i.test(t))return{isValid:!1,error:"Email must have a valid domain (.com, .net, .org, .co.za, etc.)."};const r=t.split("@")[1].toLowerCase(),s={"gmial.com":"gmail.com","gmai.com":"gmail.com","yahooo.com":"yahoo.com","yaho.com":"yahoo.com","outlok.com":"outlook.com","hotmial.com":"hotmail.com"};return s[r]?{isValid:!1,error:`Did you mean ${s[r]}?`}:{isValid:!0}},mT=t=>t.length<8?{isValid:!1,error:"Password must be at least 8 characters long."}:/[A-Z]/.test(t)?/[a-z]/.test(t)?/[0-9]/.test(t)?{isValid:!0}:{isValid:!1,error:"Password must contain at least one number."}:{isValid:!1,error:"Password must contain at least one lowercase letter."}:{isValid:!1,error:"Password must contain at least one uppercase letter."},eO=(t,e)=>t!==e?{isValid:!1,error:"Passwords do not match."}:{isValid:!0},tO=async(t,e)=>{try{const n=Ua(t);if(!n.isValid)throw new Error(n.error);const r=await LC(co,t,e),s=await Gi(Je(de,"patients",r.user.uid));if(!s.exists())throw new Error("Patient record not found. Please contact support.");return{user:r.user,patientData:s.data()}}catch(n){throw console.error("Login error:",n),new Error(dd(n.code))}},nO=async(t,e,n,r)=>{try{console.log("Starting signup process for:",t);const s=Ua(t);if(!s.isValid)throw new Error(s.error);const i=mT(e);if(!i.isValid)throw new Error(i.error);console.log("Creating user account...");const o=await DC(co,t,e);console.log("User account created with UID:",o.user.uid),console.log("Sending verification email..."),await OC(o.user,{url:window.location.origin+"/dashboard",handleCodeInApp:!1}),console.log("Verification email sent successfully"),console.log("Updating user profile..."),await VC(o.user,{displayName:n}),console.log("Profile updated successfully"),console.log("Creating patient record in Firestore...");const c={name:n,email:t,createdAt:Ve(),lastVisit:Ve(),role:"patient",status:"active",emailVerified:!1,...r};if(await Wf(Je(de,"patients",o.user.uid),c),console.log("Patient record created successfully"),!(await Gi(Je(de,"patients",o.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),o.user}catch(s){throw console.error("Signup error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(dd(s.code))}},rO=async()=>{try{console.log("Starting Google sign-in...");const t=await lR(co,fT);console.log("Google sign-in successful, UID:",t.user.uid);const e=await Gi(Je(de,"patients",t.user.uid));if(console.log("Patient document exists:",e.exists()),e.exists())return console.log("Updating last visit for existing user..."),await Wf(Je(de,"patients",t.user.uid),{lastVisit:Ve()},{merge:!0}),console.log("Last visit updated"),{user:t.user,patientData:e.data()};{console.log("Creating new patient record for Google user...");const n={name:t.user.displayName||"Google User",email:t.user.email,photoURL:t.user.photoURL,createdAt:Ve(),lastVisit:Ve(),role:"patient",status:"active"};if(await Wf(Je(de,"patients",t.user.uid),n),console.log("New patient record created"),!(await Gi(Je(de,"patients",t.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),{user:t.user,patientData:n}}}catch(t){throw console.error("Google login error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),t.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(dd(t.code))}},sO=async()=>{try{await $C(co)}catch(t){throw console.error("Logout error:",t),new Error("Failed to logout. Please try again.")}},iO=async t=>{try{const e=Ua(t);if(!e.isValid)throw new Error(e.error);return await jC(co,t,{url:window.location.origin+"/login",handleCodeInApp:!1}),{success:!0,message:`Password reset email sent to ${t}. Please check your inbox.`}}catch(e){throw console.error("Password reset error:",e),new Error(dd(e.code))}},oO=t=>BC(co,t),dd=t=>({"auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters.","auth/invalid-email":"Invalid email address.","auth/user-disabled":"This account has been disabled.","auth/too-many-requests":"Too many attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/popup-closed-by-user":"Sign-in popup was closed.","auth/cancelled-popup-request":"Only one popup request is allowed at a time.","auth/operation-not-allowed":"This sign-in method is not enabled. Please contact support.","permission-denied":"Database permission error. Please contact support."})[t]||"An error occurred. Please try again.",fu=async t=>{try{const e=Gs(xt(de,"appointments"),Wi("patientId","==",t),oo("date","desc"));return(await ao(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching appointments:",e),e}},aO=async t=>{try{return(await Jr(xt(de,"appointments"),{...t,createdAt:Ve()})).id}catch(e){throw console.error("Error booking appointment:",e),e}},lO=async t=>{try{await Ks(Je(de,"appointments",t),{status:"Cancelled"})}catch(e){throw console.error("Error cancelling appointment:",e),e}},Qf=async t=>{try{const e=Gs(xt(de,"documents"),Wi("patientId","==",t),oo("date","desc"));return(await ao(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching documents:",e),e}},cO=async(t,e,n)=>{try{const r=Date.now(),s=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`${r}_${s}`,o=dT(hT,`documents/${t}/${i}`),c=W3(o,e);return new Promise((u,d)=>{c.on("state_changed",f=>{const m=f.bytesTransferred/f.totalBytes*100;n&&n(Math.round(m))},f=>{console.error("Upload error:",f),d(new Error("Upload failed: "+f.message))},async()=>{var f;try{const m=await G3(c.snapshot.ref),g=((f=e.name.split(".").pop())==null?void 0:f.toLowerCase())||"";let x="PDF";["jpg","jpeg","png","gif","webp"].includes(g)?x="Image":["doc","docx"].includes(g)&&(x="Document");const E=Math.round(e.size/1024),I=E<1024?`${E} KB`:`${(E/1024).toFixed(2)} MB`,A=dO(e.name),b=await Jr(xt(de,"documents"),{patientId:t,name:e.name,type:x,size:I,sizeBytes:e.size,fileUrl:m,url:m,storagePath:`documents/${t}/${i}`,date:new Date().toISOString().split("T")[0],uploadedAt:Ve(),category:A});console.log("Document uploaded successfully:",b.id),u(b.id)}catch(m){console.error("Error saving document metadata:",m),d(new Error("Failed to save document: "+m.message))}})})}catch(r){throw console.error("Upload initialization error:",r),new Error("Failed to initialize upload: "+r.message)}},uO=async(t,e)=>{try{const n=dT(hT,e);await K3(n),await dD(Je(de,"documents",t)),console.log("Document deleted successfully")}catch(n){throw console.error("Error deleting document:",n),new Error("Failed to delete document: "+n.message)}},dO=t=>{const e=t.toLowerCase();return e.includes("report")?"Report":e.includes("lab")||e.includes("test")?"Lab Result":e.includes("prescription")||e.includes("rx")?"Prescription":e.includes("imaging")||e.includes("scan")||e.includes("xray")?"Imaging":"General"},hO=async(t,e)=>{try{const n=Gs(xt(de,"chats"),Wi("patientId","==",t),lD(1)),r=await ao(n);return r.empty?(await Jr(xt(de,"chats"),{patientId:t,patientName:e,lastMessageText:"",lastMessageTimestamp:Ve(),unreadByPatient:0,unreadByAdmin:!1})).id:r.docs[0].id}catch(n){throw console.error("Error getting/creating chat:",n),n}},fO=async t=>{try{const e=Gs(xt(de,`chats/${t}/messages`),oo("timestamp","asc"));return(await ao(e)).docs.map(r=>({id:r.id,chatId:t,...r.data()}))}catch(e){throw console.error("Error fetching messages:",e),e}},mO=async(t,e,n)=>{try{const r=await Jr(xt(de,`chats/${t}/messages`),{senderId:e,text:n,timestamp:Ve(),read:!1});return await Ks(Je(de,"chats",t),{lastMessageText:n,lastMessageTimestamp:Ve(),unreadByAdmin:e!=="admin"}),r.id}catch(r){throw console.error("Error sending message:",r),r}},pO=async t=>{try{await Ks(Je(de,"chats",t),{unreadByPatient:0})}catch(e){throw console.error("Error marking messages as read:",e),e}},gO=(t,e)=>{const n=Gs(xt(de,`chats/${t}/messages`),oo("timestamp","asc"));return hD(n,r=>{const s=r.docs.map(i=>({id:i.id,chatId:t,...i.data()}));e(s)})},fg=async t=>{try{const e=await Gi(Je(de,"patients",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error fetching patient profile:",e),e}},pT=async(t,e)=>{try{await Ks(Je(de,"patients",t),e)}catch(n){throw console.error("Error updating patient profile:",n),n}},gT=P.createContext(void 0),Gt=()=>{const t=P.useContext(gT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},yO=({children:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(!0),[i,o]=P.useState([]);P.useEffect(()=>oO(async E=>{if(E)try{const I=await fg(E.uid);n({...E,displayName:(I==null?void 0:I.name)||E.displayName||"Patient",photoURL:(I==null?void 0:I.photoURL)||E.photoURL||`https://ui-avatars.com/api/?name=${(I==null?void 0:I.name)||"P"}&background=F4E48E&color=3A565B`})}catch(I){console.error("Failed to fetch patient profile",I),n({...E,displayName:E.displayName||"Patient",photoURL:E.photoURL||`https://ui-avatars.com/api/?name=${E.displayName||"P"}&background=F4E48E&color=3A565B`})}else n(null);s(!1)}),[]);const c=async(x,E)=>{await tO(x,E)},u=async(x,E,I)=>{await nO(x,E,I)},d=async()=>{await sO()},f=P.useCallback((x,E="info")=>{const I=Math.random().toString(36).substr(2,9);o(A=>[...A,{id:I,message:x,type:E}]),setTimeout(()=>m(I),5e3)},[]),m=x=>{o(E=>E.filter(I=>I.id!==x))},g={user:e,loading:r,login:c,signup:u,logout:d,showToast:f,toasts:i,removeToast:m};return a.jsx(gT.Provider,{value:g,children:t})},mu=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Vt=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),a.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),a.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),un=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),a.jsx("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),Yf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),vO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),wO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"9 18 15 12 9 6"})}),_O=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"15 18 9 12 15 6"})}),Ci=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),yT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),a.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),bs=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),mg=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),xO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18"}),a.jsx("path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"}),a.jsx("path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M10 6h4"}),a.jsx("path",{d:"M10 10h4"}),a.jsx("path",{d:"M10 14h4"}),a.jsx("path",{d:"M10 18h4"})]}),EO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"}),a.jsx("path",{d:"M6 12h.01"}),a.jsx("path",{d:"M18 12h.01"})]}),Ri=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Xf=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),a.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),vc=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),a.jsx("polyline",{points:"22 6 12 13 2 6"})]}),qn=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),pu=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.jsx("polyline",{points:"12 5 19 12 12 19"})]}),bO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),ll=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),TO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),vT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),IO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),a.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]}),Jf=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),SO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a.jsx("polyline",{points:"17 6 23 6 23 12"})]}),wT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),_T=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),xT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),ET=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),bT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.35-4.35"})]}),TT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),IT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),NO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),kO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),AO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),a.jsx("path",{d:"M22 2 11 13"})]}),CO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),RO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 8-6 4 6 4V8Z"}),a.jsx("rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2"})]}),PO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),jO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),a.jsx("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),a.jsx("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]}),vw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]}),DO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),a.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),ww=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),_w=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),xw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),LO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),$r=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),ni=t=>`R${t.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}`,OO=async t=>{try{const e=xt(de,"invoices"),n=Gs(e,Wi("patientId","==",t),oo("createdAt","desc"));return(await ao(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error fetching patient invoices:",e),[]}},MO=async t=>{try{const e=xt(de,"invoices"),n=Gs(e,Wi("patientId","==",t),Wi("status","==","pending"),oo("dueDate","asc"));return(await ao(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error fetching pending invoices:",e),[]}},Ba=async t=>{try{const e=Je(de,"invoices",t),n=await Gi(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error fetching invoice:",e),null}},ST=(t=2e3)=>new Promise(e=>setTimeout(e,t)),pg=()=>{const t=Date.now(),e=Math.floor(Math.random()*1e5);return`TXN-${t}-${e}`},VO=t=>{const e=t.replace(/\s+/g,"");if(!/^\d{13,19}$/.test(e))return!1;let n=0,r=!1;for(let s=e.length-1;s>=0;s--){let i=parseInt(e[s]);r&&(i*=2,i>9&&(i-=9)),n+=i,r=!r}return n%10===0},FO=async(t,e)=>{try{if(!VO(e.cardNumber))return{success:!1,message:"Invalid card number"};const n=new Date;if(new Date(parseInt(`20${e.expiryYear}`),parseInt(e.expiryMonth)-1)<n)return{success:!1,message:"Card has expired"};if(!/^\d{3,4}$/.test(e.cvv))return{success:!1,message:"Invalid CVV"};const s=await Ba(t);if(!s)return{success:!1,message:"Invoice not found"};if(s.status==="paid")return{success:!1,message:"Invoice already paid"};if(await ST(2e3),Math.random()<.1){const f={invoiceId:t,amount:s.amount,currency:"ZAR",status:"failed",paymentMethod:"card",createdAt:Ve(),updatedAt:Ve()};return await Jr(xt(de,"payment_intents"),f),{success:!1,message:"Payment declined by bank. Please try again or use a different card."}}const o=pg(),c={invoiceId:t,amount:s.amount,currency:"ZAR",status:"succeeded",paymentMethod:"card",createdAt:Ve(),updatedAt:Ve()};await Jr(xt(de,"payment_intents"),c);const u=Je(de,"invoices",t);await Ks(u,{status:"paid",paymentMethod:"card",transactionId:o,paidAt:new Date().toISOString(),updatedAt:Ve()});const d=await Ba(t);return{success:!0,transactionId:o,message:"Payment processed successfully",invoice:d}}catch(n){return console.error("Error processing card payment:",n),{success:!1,message:"Payment processing failed. Please try again."}}},UO=async(t,e)=>{try{const n=await Ba(t);if(!n)return{success:!1,message:"Invoice not found"};if(n.status==="paid")return{success:!1,message:"Invoice already paid"};await ST(1500);const r=pg(),s={invoiceId:t,amount:n.amount,currency:"ZAR",status:"processing",paymentMethod:"eft",createdAt:Ve(),updatedAt:Ve()};await Jr(xt(de,"payment_intents"),s);const i=Je(de,"invoices",t);return await Ks(i,{status:"pending",paymentMethod:"eft",transactionId:r,updatedAt:Ve()}),{success:!0,transactionId:r,message:"EFT payment initiated. Please allow 1-3 business days for processing."}}catch(n){return console.error("Error processing EFT payment:",n),{success:!1,message:"EFT payment failed. Please try again."}}},BO=async(t,e)=>{try{const n=await Ba(t);if(!n)return{success:!1,message:"Invoice not found"};if(n.status==="paid")return{success:!1,message:"Invoice already paid"};if(e<n.amount)return{success:!1,message:"Insufficient payment amount"};const r=pg(),s={invoiceId:t,amount:n.amount,currency:"ZAR",status:"succeeded",paymentMethod:"cash",createdAt:Ve(),updatedAt:Ve()};await Jr(xt(de,"payment_intents"),s);const i=Je(de,"invoices",t);await Ks(i,{status:"paid",paymentMethod:"cash",transactionId:r,paidAt:new Date().toISOString(),updatedAt:Ve()});const o=await Ba(t);return{success:!0,transactionId:r,message:"Cash payment recorded successfully",invoice:o}}catch(n){return console.error("Error processing cash payment:",n),{success:!1,message:"Cash payment recording failed"}}},$O=t=>{const e=[],n=["paid","pending","paid","overdue"],r=[{serviceId:"consultation",serviceName:"Standard Consultation",price:999,quantity:1,total:999},{serviceId:"laser_treatment",serviceName:"Laser Treatment",price:1500,quantity:1,total:1500},{serviceId:"acne_treatment",serviceName:"Acne Treatment",price:650,quantity:1,total:650},{serviceId:"mole_removal",serviceName:"Mole Removal",price:800,quantity:1,total:800}];for(let s=0;s<4;s++){const i=new Date;i.setMonth(i.getMonth()-s);const o=new Date(i);o.setDate(o.getDate()+30),e.push({id:`INV-20240${7-s}-00${s+1}`,patientId:t,patientName:"Mock Patient",amount:r[s].total,status:n[s],date:i.toISOString().split("T")[0],dueDate:o.toISOString().split("T")[0],services:[r[s]],description:r[s].serviceName,createdAt:i.toISOString(),updatedAt:i.toISOString()})}return e},zO=({patientId:t})=>{const{user:e}=Gt(),[n,r]=P.useState([]),[s,i]=P.useState([]),[o,c]=P.useState(!0),[u,d]=P.useState(null),[f,m]=P.useState(!1),[g,x]=P.useState("card"),[E,I]=P.useState(!1),[A,b]=P.useState(null),[y,w]=P.useState({cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:""}),[C,L]=P.useState({accountHolder:"",accountNumber:"",bankName:"",branchCode:""}),[V,T]=P.useState("");P.useEffect(()=>{v()},[t]);const v=async(H=!1)=>{if(!e){c(!1);return}c(!0);try{const $=e.uid;if(H){const B=$O($),W=B,M=B.filter(Y=>Y.status==="pending"||Y.status==="overdue");r(W),i(M)}else{const[B,W]=await Promise.all([OO($),MO($)]);r(B),i(W)}}catch($){console.error("Error loading invoices:",$)}finally{c(!1)}},S=H=>{d(H),m(!0),b(null)},k=async()=>{if(u){I(!0),b(null);try{let H;switch(g){case"card":H=await FO(u.id,y);break;case"eft":H=await UO(u.id,C);break;case"cash":H=await BO(u.id,parseFloat(V));break;default:throw new Error("Invalid payment method")}b(H),H.success&&setTimeout(()=>{v(),m(!1),R()},3e3)}catch(H){console.error("Payment error:",H),b({success:!1,message:"An unexpected error occurred. Please try again."})}finally{I(!1)}}},R=()=>{w({cardNumber:"",expiryMonth:"",expiryYear:"",cvv:"",cardholderName:""}),L({accountHolder:"",accountNumber:"",bankName:"",branchCode:""}),T(""),b(null)},j=H=>{const $=H.replace(/\s+/g,""),B=$.match(/.{1,4}/g);return B?B.join(" "):$},N=H=>{const $=H.target.value.replace(/\s+/g,"");/^\d{0,16}$/.test($)&&w({...y,cardNumber:$})},ae=H=>{switch(H){case"paid":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"overdue":return"text-red-600 bg-red-50";case"cancelled":return"text-gray-600 bg-gray-50";default:return"text-gray-600 bg-gray-50"}},ze=H=>{switch(H){case"paid":return a.jsx($r,{className:"w-4 h-4"});case"pending":return a.jsx(Ri,{className:"w-4 h-4"});case"overdue":return a.jsx(Xf,{className:"w-4 h-4"});case"cancelled":return a.jsx(Ci,{className:"w-4 h-4"});default:return a.jsx(Ri,{className:"w-4 h-4"})}};return s.reduce((H,$)=>H+$.amount,0),s.length>0&&s[0].dueDate,n.filter(H=>H.status==="paid"),o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(mu,{className:"w-8 h-8 animate-spin text-[#4E747B]"})}):a.jsxs("div",{className:"container mx-auto p-4 md:p-8 bg-gray-50",children:[a.jsxs("header",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Billing & Payments"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"View your invoices, manage payments, and see your transaction history."}),a.jsx("button",{onClick:()=>v(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Load Mock Data"})]}),a.jsxs("section",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Outstanding"}),a.jsx("p",{className:"text-2xl font-bold text-[#3A565B] mt-1",children:ni(s.reduce((H,$)=>H+$.amount,0))})]}),a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 flex items-center justify-center",children:a.jsx(Xf,{className:"w-6 h-6 text-red-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Pending Invoices"}),a.jsx("p",{className:"text-2xl font-bold text-[#3A565B] mt-1",children:s.length})]}),a.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-50 flex items-center justify-center",children:a.jsx(Ri,{className:"w-6 h-6 text-yellow-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Paid"}),a.jsx("p",{className:"text-2xl font-bold text-[#3A565B] mt-1",children:ni(n.filter(H=>H.status==="paid").reduce((H,$)=>H+$.amount,0))})]}),a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-50 flex items-center justify-center",children:a.jsx($r,{className:"w-6 h-6 text-green-600"})})]})})]}),s.length>0&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"Outstanding Payments"}),a.jsx("div",{className:"space-y-3",children:s.map(H=>a.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:H.description}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",H.dueDate]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("p",{className:"text-lg font-bold text-[#3A565B]",children:ni(H.amount)}),a.jsx("button",{onClick:()=>S(H),className:"px-6 py-2 bg-[#4E747B] text-white rounded-lg hover:bg-[#3A565B] transition-colors",children:"Pay Now"})]})]},H.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsx("h2",{className:"text-xl font-semibold text-[#3A565B]",children:"Invoice History"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(H=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["#",H.id.slice(0,8)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:H.date})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:H.description}),H.services.length>0&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:H.services.map($=>$.serviceName).join(", ")})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm font-semibold text-gray-900",children:ni(H.amount)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${ae(H.status)}`,children:[ze(H.status),H.status.charAt(0).toUpperCase()+H.status.slice(1)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:H.status==="pending"||H.status==="overdue"?a.jsx("button",{onClick:()=>S(H),className:"text-[#4E747B] hover:text-[#3A565B] font-medium",children:"Pay Now"}):a.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:a.jsx(mg,{className:"w-4 h-4"})})})]},H.id))})]})})]}),f&&u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-[#3A565B]",children:"Payment"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Invoice #",u.id.slice(0,8)]})]}),a.jsx("button",{onClick:()=>{m(!1),R()},className:"text-gray-400 hover:text-gray-600",disabled:E,children:a.jsx(Ci,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("span",{className:"text-gray-600",children:"Amount Due:"}),a.jsx("span",{className:"text-3xl font-bold text-[#3A565B]",children:ni(u.amount)})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("p",{children:u.description}),a.jsxs("p",{children:["Due Date: ",u.dueDate]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>x("card"),disabled:E,className:`p-4 rounded-xl border-2 transition-all ${g==="card"?"border-[#4E747B] bg-[#4E747B]/5":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx(yT,{className:"w-6 h-6 mx-auto mb-2 text-[#4E747B]"}),a.jsx("p",{className:"text-sm font-medium",children:"Card"})]}),a.jsxs("button",{onClick:()=>x("eft"),disabled:E,className:`p-4 rounded-xl border-2 transition-all ${g==="eft"?"border-[#4E747B] bg-[#4E747B]/5":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx(xO,{className:"w-6 h-6 mx-auto mb-2 text-[#4E747B]"}),a.jsx("p",{className:"text-sm font-medium",children:"EFT"})]}),a.jsxs("button",{onClick:()=>x("cash"),disabled:E,className:`p-4 rounded-xl border-2 transition-all ${g==="cash"?"border-[#4E747B] bg-[#4E747B]/5":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx(EO,{className:"w-6 h-6 mx-auto mb-2 text-[#4E747B]"}),a.jsx("p",{className:"text-sm font-medium",children:"Cash"})]})]})]}),g==="card"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name"}),a.jsx("input",{type:"text",value:y.cardholderName,onChange:H=>w({...y,cardholderName:H.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"John Doe",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),a.jsx("input",{type:"text",value:j(y.cardNumber),onChange:N,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"1234 5678 9012 3456",maxLength:19,disabled:E})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),a.jsx("input",{type:"text",value:y.expiryMonth,onChange:H=>{const $=H.target.value.replace(/\D/g,"");($===""||parseInt($)>=1&&parseInt($)<=12)&&w({...y,expiryMonth:$})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"MM",maxLength:2,disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),a.jsx("input",{type:"text",value:y.expiryYear,onChange:H=>{const $=H.target.value.replace(/\D/g,"");w({...y,expiryYear:$})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"YY",maxLength:2,disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),a.jsx("input",{type:"text",value:y.cvv,onChange:H=>{const $=H.target.value.replace(/\D/g,"");w({...y,cvv:$})},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"123",maxLength:4,disabled:E})]})]})]}),g==="eft"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder"}),a.jsx("input",{type:"text",value:C.accountHolder,onChange:H=>L({...C,accountHolder:H.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"John Doe",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number"}),a.jsx("input",{type:"text",value:C.accountNumber,onChange:H=>L({...C,accountNumber:H.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"1234567890",disabled:E})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name"}),a.jsx("input",{type:"text",value:C.bankName,onChange:H=>L({...C,bankName:H.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"First National Bank",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch Code"}),a.jsx("input",{type:"text",value:C.branchCode,onChange:H=>L({...C,branchCode:H.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:"250655",disabled:E})]})]})]}),g==="cash"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-blue-800",children:"Please pay cash at the clinic reception. Amount will be confirmed upon payment."})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cash Amount"}),a.jsx("input",{type:"number",value:V,onChange:H=>T(H.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4E747B] focus:border-transparent",placeholder:u.amount.toString(),min:u.amount,disabled:E})]})]}),A&&a.jsx("div",{className:`rounded-xl p-4 ${A.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[A.success?a.jsx($r,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}):a.jsx(Ci,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`font-medium ${A.success?"text-green-900":"text-red-900"}`,children:A.success?"Payment Successful!":"Payment Failed"}),a.jsx("p",{className:`text-sm mt-1 ${A.success?"text-green-700":"text-red-700"}`,children:A.message}),A.transactionId&&a.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Transaction ID: ",A.transactionId]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{m(!1),R()},className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",disabled:E,children:"Cancel"}),a.jsx("button",{onClick:k,disabled:!!(E||A&&A.success),className:"flex-1 px-6 py-3 bg-[#4E747B] text-white rounded-xl hover:bg-[#3A565B] transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx(mu,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:["Pay ",ni(u.amount)]})})]}),g==="card"&&!A&&a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-xs text-gray-600",children:[a.jsx("strong",{children:"Test Mode:"})," Use any 16-digit number (e.g., 4532 1234 5678 9010). 10% of payments will randomly fail for testing."]})})]})]})})]})},Ko=({children:t,variant:e="primary",size:n="md",className:r="",onClick:s,disabled:i,type:o="button"})=>{const c="relative overflow-hidden font-medium rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",u={primary:"bg-brand-teal text-white hover:bg-brand-dark shadow-lg hover:shadow-xl hover:shadow-brand-teal/30",secondary:"bg-brand-yellow text-brand-dark hover:bg-yellow-400 shadow-lg hover:shadow-xl hover:shadow-brand-yellow/30",ghost:"bg-transparent text-brand-dark hover:bg-brand-teal/10 hover:text-brand-teal",danger:"bg-red-600 text-white hover:bg-red-700 shadow-lg hover:shadow-xl hover:shadow-red-600/30"},d={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},f=m=>{const g=m.currentTarget,x=document.createElement("span"),E=g.getBoundingClientRect(),I=Math.max(E.width,E.height),A=m.clientX-E.left-I/2,b=m.clientY-E.top-I/2;x.style.width=x.style.height=`${I}px`,x.style.left=`${A}px`,x.style.top=`${b}px`,x.classList.add("absolute","bg-white/30","rounded-full","pointer-events-none","animate-ping"),g.appendChild(x),setTimeout(()=>{x.remove()},600),s&&s(m)};return a.jsx("button",{type:o,disabled:i,onClick:f,className:`${c} ${u[e]} ${d[n]} ${r}`,children:a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:t})})},Mo=({id:t,label:e,type:n="text",placeholder:r,value:s,onChange:i,icon:o,disabled:c,defaultValue:u,error:d,required:f=!1})=>{const[m,g]=P.useState(!1);return a.jsxs("div",{className:"relative group",children:[a.jsx("label",{htmlFor:t,className:`
          block text-sm font-medium mb-2 transition-all duration-300
          ${m?"text-brand-teal":"text-gray-700"}
        `,children:e}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 transition-all duration-300 group-focus-within:text-brand-teal",children:Pw.cloneElement(o,{className:"w-5 h-5"})}),a.jsx("input",{id:t,type:n,placeholder:r,value:s,defaultValue:u,onChange:i,disabled:c,required:f,"aria-invalid":!!d,onFocus:()=>g(!0),onBlur:()=>g(!1),className:`
            w-full px-4 py-3 border-2 rounded-lg
            ${o?"pl-11":""}
            transition-all duration-300
            focus:outline-none focus:border-brand-teal focus:ring-4 focus:ring-brand-teal/20
            disabled:bg-gray-100 disabled:cursor-not-allowed
            hover:border-brand-teal/50
            ${m?"shadow-lg scale-[1.02]":""}
            ${d?"border-red-400 focus:ring-red-200":""}
          `})]}),d&&a.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:d})]})},HO=()=>{const t=Array.from({length:20});return a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map((e,n)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},n))})},qO=({className:t="w-5 h-5"})=>a.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),WO=()=>{const{login:t,signup:e,showToast:n}=Gt(),[r,s]=P.useState(!0),[i,o]=P.useState(""),[c,u]=P.useState(""),[d,f]=P.useState(""),[m,g]=P.useState(""),[x,E]=P.useState(!1),[I,A]=P.useState(!1),[b,y]=P.useState(!1),[w,C]=P.useState(""),[L,V]=P.useState(!1),[T,v]=P.useState({}),S=async N=>{N.preventDefault(),v({}),E(!0);try{const ae=Ua(i);if(!ae.isValid){v({email:ae.error}),E(!1),n(ae.error||"Invalid email","error");return}if(r)await t(i,c),n("Welcome back! ","success");else{const ze=mT(c);if(!ze.isValid){v({password:ze.error}),E(!1);return}const H=eO(c,d);if(!H.isValid){v({confirmPassword:H.error}),E(!1);return}await e(i,c,m),n("Account created successfully!  Please check your email to verify your account.","success")}}catch(ae){console.error("Login/Signup Error:",ae),v({general:ae.message||"Authentication failed"}),n(ae.message||"Authentication failed","error")}finally{E(!1)}},k=async()=>{try{n("Connecting to Google... ","info"),await rO(),n("Google login successful! ","success")}catch(N){console.error("Google Login Error:",N),n(N.message||"Google login failed","error")}},R=async()=>{if(!w){n("Please enter your email address","error");return}const N=Ua(w);if(!N.isValid){n(N.error||"Invalid email","error");return}try{V(!0);const ae=await iO(w);n(ae.message||"Password reset email sent! ","success"),y(!1),C("")}catch(ae){n(ae.message||"Failed to send reset email","error")}finally{V(!1)}},j=()=>{A(!I),v({}),setTimeout(()=>{s(!r)},300)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsx(HO,{}),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/10 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/5 to-brand-yellow/5 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"w-full max-w-md relative z-10",style:{perspective:"1000px"},children:a.jsx("div",{className:`relative w-full transition-transform duration-700 transform-style-3d ${I?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:a.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl p-8 border border-white/50 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-brand-teal/20 via-brand-yellow/20 to-brand-teal/20 animate-shimmer",style:{backgroundSize:"200% 100%",filter:"blur(20px)",zIndex:-1}}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"relative inline-block mb-6 animate-slide-up",children:[a.jsx("div",{className:"relative p-4 bg-white rounded-3xl shadow-2xl animate-pulse-glow",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain"})}),a.jsx("div",{className:"absolute inset-0 border-4 border-brand-yellow/30 rounded-3xl animate-ping"}),a.jsx("div",{className:"absolute inset-0 border-2 border-brand-teal/20 rounded-3xl animate-pulse",style:{animationDelay:"0.5s"}})]}),a.jsx("h1",{className:"text-4xl font-bold text-brand-dark mb-2 animate-slide-up",style:{animationDelay:"100ms"},children:r?"Welcome Back!":"Join Dermaglare"}),a.jsx("p",{className:"text-gray-600 animate-slide-up",style:{animationDelay:"200ms"},children:r?"Continue your skincare journey":"Begin your transformation today"})]}),T.general&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg animate-slide-up",children:a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx(Xf,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium",children:T.general})]})}),a.jsxs("form",{onSubmit:S,className:"space-y-5",children:[!r&&a.jsx("div",{className:"animate-slide-up",children:a.jsx(Mo,{id:"displayName",label:"Full Name",placeholder:"Jane Doe",value:m,onChange:N=>g(N.target.value),icon:a.jsx(ll,{})})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"100ms"},children:a.jsx(Mo,{id:"email",label:"Email Address",type:"email",placeholder:"jane@example.com",value:i,onChange:N=>o(N.target.value),icon:a.jsx(vc,{}),error:T.email})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"200ms"},children:a.jsx(Mo,{id:"password",label:"Password",type:"password",placeholder:"",value:c,onChange:N=>u(N.target.value),icon:a.jsx(bs,{}),error:T.password,required:!0})}),!r&&a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"250ms"},children:a.jsx(Mo,{id:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"",value:d,onChange:N=>f(N.target.value),icon:a.jsx(bs,{}),error:T.confirmPassword,required:!0})}),!r&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 animate-slide-up",style:{animationDelay:"300ms"},children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password must contain:"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"w-3 h-3"}),"At least 8 characters"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"w-3 h-3"}),"One uppercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"w-3 h-3"}),"One lowercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"w-3 h-3"}),"One number"]})]})]}),r&&a.jsxs("div",{className:"flex items-center justify-between text-sm animate-slide-up",style:{animationDelay:"250ms"},children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-2 border-brand-teal text-brand-teal focus:ring-2 focus:ring-brand-teal/20 transition-all group-hover:scale-110"}),a.jsx("span",{className:"text-gray-600 group-hover:text-brand-teal transition-colors",children:"Remember me"})]}),a.jsx("button",{type:"button",className:"text-brand-teal hover:text-brand-dark font-medium hover:underline transition-all hover:scale-105",onClick:()=>y(!0),children:"Forgot Password?"})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"300ms"},children:a.jsxs(Ko,{type:"submit",size:"lg",className:"w-full relative overflow-hidden group",disabled:x,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-dark via-brand-teal to-brand-dark opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer",style:{backgroundSize:"200% 100%"}}),a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:x?a.jsx(mu,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[r?"Log In":"Create Account",a.jsx(pu,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})})]}),a.jsxs("div",{className:"relative my-6 animate-slide-up",style:{animationDelay:"350ms"},children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white/70 text-gray-500 font-medium",children:"Or continue with"})})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"400ms"},children:a.jsxs("button",{type:"button",onClick:k,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg hover:border-brand-teal hover:shadow-lg transition-all duration-300 group hover:scale-105 active:scale-95",children:[a.jsx(qO,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"font-medium text-gray-700 group-hover:text-brand-teal transition-colors",children:"Continue with Google"})]})}),a.jsx("div",{className:"mt-6 text-center animate-slide-up",style:{animationDelay:"450ms"},children:a.jsxs("p",{className:"text-gray-600",children:[r?"Don't have an account?":"Already have an account?",a.jsxs("button",{onClick:j,className:"ml-2 text-brand-teal font-semibold hover:text-brand-dark transition-all hover:scale-105 inline-block relative group",children:[r?"Sign Up":"Log In",a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-brand-teal group-hover:w-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"mt-8 flex items-center justify-center gap-6 text-xs text-gray-500 animate-slide-up",style:{animationDelay:"500ms"},children:[a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(bs,{className:"w-3 h-3"}),a.jsx("span",{children:"Secure"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx($r,{className:"w-3 h-3"}),a.jsx("span",{children:"HIPAA Compliant"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx($r,{className:"w-3 h-3"}),a.jsx("span",{children:"Encrypted"})]})]})]})})}),a.jsx("div",{className:"absolute bottom-10 left-10 animate-bounce-subtle opacity-50",children:a.jsx($r,{className:"w-12 h-12 text-brand-teal"})}),a.jsx("div",{className:"absolute top-10 right-10 animate-float opacity-50",style:{animationDelay:"1s"},children:a.jsx(bs,{className:"w-10 h-10 text-brand-yellow"})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(vc,{className:"w-8 h-8 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"Reset Password"}),a.jsx("p",{className:"text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Mo,{id:"resetEmail",label:"Email Address",type:"email",placeholder:"jane@example.com",value:w,onChange:N=>C(N.target.value),icon:a.jsx(vc,{})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{y(!1),C("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:L,children:"Cancel"}),a.jsx("button",{type:"button",onClick:R,disabled:L||!w,className:"flex-1 px-4 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:L?a.jsxs(a.Fragment,{children:[a.jsx(mu,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Sending..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(pu,{className:"w-5 h-5"}),a.jsx("span",{children:"Send Reset Link"})]})})]})]})]})})]})},GO=({children:t})=>{const[e,n]=P.useState(!0),{logout:r,user:s}=Gt(),i=[{to:"/dashboard",icon:a.jsx(bO,{className:"w-6 h-6"}),label:"Dashboard",color:"from-brand-teal to-brand-dark"},{to:"/appointments",icon:a.jsx(Vt,{className:"w-6 h-6"}),label:"Appointments",color:"from-brand-yellow to-brand-teal"},{to:"/documents",icon:a.jsx(un,{className:"w-6 h-6"}),label:"Documents",color:"from-brand-teal to-brand-yellow"},{to:"/chat",icon:a.jsx(Yf,{className:"w-6 h-6"}),label:"Chat",color:"from-brand-dark to-brand-teal"},{to:"/billing",icon:a.jsx(yT,{className:"w-6 h-6"}),label:"Billing",color:"from-brand-yellow to-brand-dark"},{to:"/profile",icon:a.jsx(ll,{className:"w-6 h-6"}),label:"Profile",color:"from-brand-teal to-brand-yellow"},{to:"/settings",icon:a.jsx(TO,{className:"w-6 h-6"}),label:"Settings",color:"from-brand-dark to-brand-teal"}],o=()=>{var u;return a.jsxs("div",{className:`fixed top-0 left-0 h-full bg-gradient-to-b from-brand-dark via-brand-teal to-brand-dark text-white transition-all duration-500 ease-in-out shadow-2xl z-50 ${e?"w-72":"w-20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 h-28 border-b border-white/10 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-yellow/10 to-transparent animate-gradient-x"}),a.jsx("div",{className:`flex items-center justify-center overflow-hidden transition-all duration-500 relative z-10 ${e?"w-full":"w-0"}`,children:a.jsx("div",{className:"bg-white/95 px-4 py-2 rounded-xl shadow-lg",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain",onError:d=>{const f=d.target;f.style.display="none";const m=f.parentElement;m&&(m.innerHTML='<span class="text-2xl font-bold text-brand-teal">DERMAGLARE</span>')}})})}),a.jsx("button",{onClick:()=>n(!e),className:"p-2.5 text-brand-yellow hover:text-white focus:outline-none rounded-xl hover:bg-white/10 transition-all duration-300 relative z-10 group",children:a.jsx(IO,{className:"w-6 h-6 transform group-hover:rotate-180 transition-transform duration-300"})})]}),a.jsx("nav",{className:"mt-6 px-3",children:a.jsx("ul",{className:"space-y-2",children:i.map((d,f)=>a.jsx("li",{className:"animate-slide-in-left",style:{animationDelay:`${f*.05}s`},children:a.jsx(Yx,{to:d.to,className:({isActive:m})=>`flex items-center p-3.5 rounded-xl transition-all duration-300 group relative overflow-hidden ${m?"bg-gradient-to-r "+d.color+" text-white shadow-2xl shadow-brand-yellow/20 scale-105":"text-white/70 hover:bg-white/10 hover:text-white hover:scale-105"}`,children:({isActive:m})=>a.jsxs(a.Fragment,{children:[m&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 animate-shimmer"}),a.jsx("div",{className:`relative transition-transform duration-300 ${m?"animate-bounce-subtle":"group-hover:scale-110"}`,children:d.icon}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:d.label}),m&&a.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-brand-yellow rounded-l-full animate-pulse"})]})})},d.to))})}),a.jsxs("div",{className:"absolute bottom-0 w-full p-4 border-t border-white/10 bg-gradient-to-t from-black/20 to-transparent",children:[e&&s&&a.jsx("div",{className:"mb-3 p-3 rounded-xl bg-white/5 backdrop-blur-sm animate-fade-in-up",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:((u=s.email)==null?void 0:u.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.displayName||"Patient"}),a.jsx("p",{className:"text-xs text-white/60 truncate",children:s.email})]})]})}),a.jsxs("button",{onClick:r,className:"flex items-center p-3.5 w-full text-white/70 hover:bg-red-500/20 hover:text-red-300 rounded-xl transition-all duration-300 group relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/10 to-red-500/0 opacity-0 group-hover:opacity-100 animate-shimmer"}),a.jsx(vT,{className:"w-6 h-6 relative z-10 transform group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative z-10 ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:"Logout"})]})]})]})},c=()=>{var u;return a.jsx("header",{className:`fixed top-0 right-0 h-20 bg-white/80 backdrop-blur-xl border-b border-gray-200/50 z-40 transition-all duration-500 ease-in-out shadow-lg ${e?"left-72":"left-20"}`,children:a.jsxs("div",{className:"flex items-center justify-between h-full px-8",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent",children:"Welcome Back!"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("button",{className:"relative p-2.5 text-brand-dark hover:text-brand-teal transition-colors rounded-xl hover:bg-brand-teal/10 group",children:[a.jsx(Jf,{className:"w-6 h-6"}),a.jsx("span",{className:"absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse border-2 border-white"})]}),a.jsxs("div",{className:"flex items-center space-x-3 p-2 pr-4 rounded-full bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 hover:from-brand-teal/20 hover:to-brand-yellow/20 transition-all duration-300 cursor-pointer",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:s!=null&&s.email?s.email.charAt(0).toUpperCase():"G"}),a.jsx("span",{className:"text-sm font-semibold text-brand-dark",children:((u=s==null?void 0:s.email)==null?void 0:u.split("@")[0])||"Guest"})]})]})]})})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/10",children:[a.jsx(o,{}),a.jsx(c,{}),a.jsx("main",{className:`transition-all duration-500 ease-in-out pt-20 ${e?"ml-72":"ml-20"}`,children:a.jsx("div",{className:"p-8 animate-fade-in-up",children:t})})]})},Zf=({children:t,className:e="",hover:n=!0,style:r})=>a.jsx("div",{className:`
        bg-white rounded-xl shadow-md p-6 
        transition-all duration-300
        ${n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":""}
        ${e}
        animate-scale-in
      `,style:r,children:t}),KO=({icon:t,label:e,value:n,trend:r,color:s,delay:i,onClick:o})=>{const[c,u]=P.useState(0),d=typeof n=="number"?n:0;return P.useEffect(()=>{if(typeof n=="number"){const g=d/60;let x=0;const E=setInterval(()=>{x+=g,x>=d?(u(d),clearInterval(E)):u(Math.floor(x))},2e3/60);return()=>clearInterval(E)}},[d]),a.jsx("div",{className:"group animate-scale-in",style:{animationDelay:`${i}ms`},onClick:o,children:a.jsxs(Zf,{className:"relative overflow-hidden hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 cursor-pointer border-2 border-transparent hover:border-brand-yellow/50",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s} opacity-5 group-hover:opacity-10 transition-opacity duration-500`}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${s} group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:a.jsx("div",{className:"text-white",children:t})}),r&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 text-sm font-semibold",children:[a.jsx(SO,{className:"w-4 h-4"}),a.jsx("span",{children:r})]})]}),a.jsx("h3",{className:"text-4xl font-bold text-brand-dark mb-2 group-hover:scale-105 transition-transform duration-300",children:typeof n=="number"?c:n}),a.jsx("p",{className:"text-gray-600 font-medium",children:e})]})]})})},QO=()=>{var w;const{user:t}=Gt(),e=Xm(),[n,r]=P.useState(""),[s,i]=P.useState([]),[o,c]=P.useState([]),[u,d]=P.useState(0),[f,m]=P.useState(!0),[g,x]=P.useState([]);P.useEffect(()=>{const C=new Date().getHours();C<12?r("Good Morning"):C<18?r("Good Afternoon"):r("Good Evening")},[]),P.useEffect(()=>{(async()=>{if(t)try{m(!0);const L=await fu(t.uid);i(L);const V=await Qf(t.uid);c(V),d(V.length);const T=[];V.slice(0,2).forEach(v=>{const S=v.uploadedAt?new Date(v.uploadedAt):new Date;T.push({id:v.id||"",action:"New document uploaded",detail:v.name,time:E(S),icon:a.jsx(un,{className:"w-5 h-5"}),color:"bg-brand-yellow",onClick:()=>e("/documents"),timestamp:S})}),L.filter(v=>v.status==="Confirmed").slice(0,2).forEach(v=>{const S=v.createdAt?new Date(v.createdAt):new Date;T.push({id:v.id||"",action:"Appointment confirmed",detail:`${v.type} - ${new Date(v.date).toLocaleDateString()}`,time:E(S),icon:a.jsx($r,{className:"w-5 h-5"}),color:"bg-green-500",onClick:()=>e("/appointments"),timestamp:S})}),T.sort((v,S)=>S.timestamp.getTime()-v.timestamp.getTime()),x(T.slice(0,3))}catch(L){console.error("Error fetching dashboard data:",L)}finally{m(!1)}})()},[t,e]);const E=C=>{const L=Math.floor((new Date().getTime()-C.getTime())/1e3);if(L<60)return"Just now";const V=Math.floor(L/60);if(V<60)return`${V} ${V===1?"minute":"minutes"} ago`;const T=Math.floor(V/60);if(T<24)return`${T} ${T===1?"hour":"hours"} ago`;const v=Math.floor(T/24);if(v<7)return`${v} ${v===1?"day":"days"} ago`;const S=Math.floor(v/7);if(S<4)return`${S} ${S===1?"week":"weeks"} ago`;const k=Math.floor(v/30);return`${k} ${k===1?"month":"months"} ago`},I=s.filter(C=>C.status==="Pending"||C.status==="Confirmed"),A=s.filter(C=>C.status==="Completed").length,b=[{icon:a.jsx(Vt,{className:"w-8 h-8"}),label:"Upcoming Appointments",value:I.length,trend:I.length>0?`+${I.length}`:void 0,color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{icon:a.jsx(un,{className:"w-8 h-8"}),label:"Documents",value:u,color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{icon:a.jsx(Yf,{className:"w-8 h-8"}),label:"Unread Messages",value:0,color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{icon:a.jsx($r,{className:"w-8 h-8"}),label:"Completed Visits",value:A,color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}],y=I.slice(0,3).map(C=>{const L=new Date(C.date),V=new Date,T=new Date(V);T.setDate(T.getDate()+1);let v="";return L.toDateString()===V.toDateString()?v="Today":L.toDateString()===T.toDateString()?v="Tomorrow":v=L.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),{id:C.id||"",title:C.type,doctor:C.doctorName||"Dr. Jabu Nkehli",date:v,time:C.time,type:"In-Person",color:"from-brand-teal to-brand-dark"}});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-teal via-brand-dark to-brand-teal p-8 md:p-12 shadow-2xl animate-fade-in-down",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-yellow/20 rounded-full filter blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-teal/30 rounded-full filter blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"bg-white/95 p-4 rounded-2xl shadow-2xl backdrop-blur-sm",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Logo",className:"h-20 w-auto object-contain",onError:C=>{const L=C.target;L.style.display="none";const V=L.parentElement;V&&(V.innerHTML='<span class="text-4xl font-bold text-brand-teal px-4">DERMAGLARE</span>')}})}),a.jsxs("div",{className:"border-l-2 border-brand-yellow/50 pl-6",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-3 animate-slide-in-left flex items-center gap-3",children:[n,","," ",(t==null?void 0:t.displayName)||((w=t==null?void 0:t.email)==null?void 0:w.split("@")[0])||"there","!",a.jsx("span",{className:"text-brand-yellow",children:""})]}),a.jsxs("p",{className:"text-brand-yellow text-lg animate-slide-in-left",style:{animationDelay:"0.1s"},children:["Your skin health journey continues."," ",I.length>0?`You have ${I.length} upcoming ${I.length===1?"appointment":"appointments"}.`:"Book your next appointment today."]})]})]}),a.jsx("div",{className:"animate-scale-in",style:{animationDelay:"0.2s"},children:a.jsxs(Ko,{onClick:()=>e("/appointments"),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark font-bold shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[a.jsx(Vt,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map((C,L)=>a.jsx(KO,{...C,delay:L*100},C.label))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent animate-slide-in-right",children:"Upcoming Appointments"}),a.jsxs(Ko,{onClick:()=>e("/appointments"),variant:"ghost",className:"text-brand-teal hover:text-brand-dark",children:["View All ",a.jsx(pu,{className:"w-4 h-4 ml-2"})]})]}),a.jsx("div",{className:"space-y-4",children:y.length>0?y.map((C,L)=>a.jsx("div",{className:"group animate-slide-in-up",style:{animationDelay:`${L*100}ms`},children:a.jsx(Zf,{className:"hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 cursor-pointer border-2 border-transparent hover:border-brand-yellow/30",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${C.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:a.jsx(Vt,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:C.title}),a.jsx("p",{className:"text-gray-600",children:C.doctor})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-brand-teal/10 text-brand-teal",children:C.type})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vt,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:C.date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ri,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:C.time})]})]})]}),a.jsx(Ko,{onClick:()=>e("/appointments"),size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-brand-teal to-brand-dark text-white",children:"View Details"})]})})},C.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming appointments"})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent mb-6 animate-slide-in-left",children:"Recent Activity"}),a.jsxs(Zf,{className:"bg-gradient-to-br from-white to-brand-light/50 backdrop-blur-sm animate-scale-in",children:[a.jsx("div",{className:"space-y-4",children:g.length>0?g.map((C,L)=>a.jsxs("div",{onClick:C.onClick,className:"flex items-start gap-4 p-3 rounded-xl hover:bg-white/60 transition-all duration-300 cursor-pointer group animate-slide-in-right",style:{animationDelay:`${L*100}ms`},children:[a.jsx("div",{className:`${C.color} p-2.5 rounded-xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300`,children:C.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:C.action}),a.jsx("p",{className:"text-sm text-gray-600",children:C.detail}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:C.time})]})]},C.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})}),a.jsxs(Ko,{onClick:()=>e("/appointments"),variant:"ghost",className:"w-full mt-4 text-brand-teal hover:text-brand-dark",children:["View All Activity ",a.jsx(pu,{className:"w-4 h-4 ml-2"})]})]}),a.jsxs("div",{className:"mt-6 animate-scale-in",style:{animationDelay:"0.4s"},children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-4",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Book",icon:a.jsx(Vt,{className:"w-5 h-5"}),color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{label:"Upload",icon:a.jsx(un,{className:"w-5 h-5"}),color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{label:"Message",icon:a.jsx(Yf,{className:"w-5 h-5"}),color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{label:"History",icon:a.jsx(wT,{className:"w-5 h-5"}),color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}].map((C,L)=>a.jsxs("button",{onClick:C.onClick,className:`p-4 rounded-xl bg-gradient-to-br ${C.color} text-white font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 animate-scale-in`,style:{animationDelay:`${.5+L*.1}s`},children:[C.icon,a.jsx("span",{className:"block mt-2 text-sm",children:C.label})]},C.label))})]})]})]})]})},YO=()=>{const{user:t,showToast:e}=Gt(),[n,r]=P.useState(!1),[s,i]=P.useState(!0),[o,c]=P.useState({name:"",email:"",phone:"",address:"",dateOfBirth:"",bloodType:"",height:"",weight:"",allergies:"",emergencyContact:""}),[u,d]=P.useState(0),[f,m]=P.useState(0);P.useEffect(()=>{(async()=>{var I,A,b,y;if(t)try{i(!0);const w=await fg(t.uid),C=await fu(t.uid);c(w?{name:w.name||t.displayName||"",email:w.email||t.email||"",phone:w.phone||"",address:w.address||"",dateOfBirth:w.dob||"",bloodType:w.bloodType||"O+",height:((A=(I=w.vitals)==null?void 0:I.heightCm)==null?void 0:A.toString())||"",weight:((y=(b=w.vitals)==null?void 0:b.weightKg)==null?void 0:y.toString())||"",allergies:Array.isArray(w.allergies)?w.allergies.join(", "):"",emergencyContact:w.emergencyContact||""}:L=>({...L,name:t.displayName||"",email:t.email||""})),d(C.length),m(C.filter(L=>L.status==="Completed").length)}catch(w){console.error("Error fetching profile:",w),e("Failed to load profile data","error")}finally{i(!1)}})()},[t,e]);const g=async()=>{if(t)try{const E={name:o.name,email:o.email,phone:o.phone,address:o.address,dob:o.dateOfBirth,allergies:o.allergies?o.allergies.split(",").map(I=>I.trim()):[],vitals:{heightCm:o.height?parseFloat(o.height):void 0,weightKg:o.weight?parseFloat(o.weight):void 0},bloodType:o.bloodType,emergencyContact:o.emergencyContact};await pT(t.uid,E),r(!1),e("Profile updated successfully","success")}catch(E){console.error("Error saving profile:",E),e("Failed to update profile","error")}},x=[{label:"Appointments",value:u.toString(),change:`${u} total`,icon:Vt,color:"from-blue-500 to-cyan-600"},{label:"Health Score",value:"92%",change:"Excellent",icon:ww,color:"from-green-500 to-emerald-600"},{label:"Completed Visits",value:f.toString(),change:"All time",icon:wT,color:"from-purple-500 to-violet-600"}];return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading profile..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"My Profile"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your personal information and health records"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden animate-slide-in-left",children:[a.jsx("div",{className:"h-32 bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal relative",children:a.jsx("div",{className:"absolute inset-0 bg-black/10"})}),a.jsxs("div",{className:"px-6 pb-6",children:[a.jsxs("div",{className:"relative -mt-16 mb-4",children:[a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center text-brand-dark font-bold text-5xl border-4 border-white shadow-xl mx-auto animate-scale-in",children:o.name.charAt(0).toUpperCase()}),a.jsx("button",{className:"absolute bottom-0 right-1/2 translate-x-16 w-10 h-10 bg-gradient-to-r from-brand-teal to-brand-dark rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300",children:a.jsx(DO,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:o.name}),a.jsx("p",{className:"text-gray-600",children:o.email}),a.jsx("div",{className:"mt-4 inline-block px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-sm font-semibold",children:"Active Patient"})]}),a.jsx("div",{className:"space-y-3",children:x.map((E,I)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-br from-brand-light to-white rounded-xl animate-fade-in",style:{animationDelay:`${I*.1}s`},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${E.color} flex items-center justify-center`,children:a.jsx(E.icon,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:E.label}),a.jsx("p",{className:"font-bold text-gray-800",children:E.value})]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:E.change})]},E.label))}),a.jsx("button",{onClick:()=>r(!n),className:"w-full mt-6 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(qn,{className:"w-5 h-5"}),"Save Changes"]}):a.jsxs(a.Fragment,{children:[a.jsx(vw,{className:"w-5 h-5"}),"Edit Profile"]})})]})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(ll,{className:"w-5 h-5 text-white"})}),"Personal Information"]}),!n&&a.jsx("button",{onClick:()=>r(!0),className:"text-brand-teal hover:text-brand-dark transition-colors duration-300",children:a.jsx(vw,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),n?a.jsx("input",{type:"text",value:o.name,onChange:E=>c({...o,name:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.name})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),n?a.jsx("input",{type:"email",value:o.email,onChange:E=>c({...o,email:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4 text-brand-teal"}),o.email]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),n?a.jsx("input",{type:"tel",value:o.phone,onChange:E=>c({...o,phone:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(_T,{className:"w-4 h-4 text-brand-teal"}),o.phone]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date of Birth"}),n?a.jsx("input",{type:"date",value:o.dateOfBirth,onChange:E=>c({...o,dateOfBirth:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(Vt,{className:"w-4 h-4 text-brand-teal"}),new Date(o.dateOfBirth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Address"}),n?a.jsx("input",{type:"text",value:o.address,onChange:E=>c({...o,address:E.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(xT,{className:"w-4 h-4 text-brand-teal"}),o.address]})]})]}),n&&a.jsxs("div",{className:"mt-6 flex gap-4 animate-fade-in",children:[a.jsx("button",{onClick:g,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Save Changes"}),a.jsx("button",{onClick:()=>r(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-up",style:{animationDelay:"0.3s"},children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(ww,{className:"w-5 h-5 text-white"})}),"Medical Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Blood Type"}),a.jsx("div",{className:"px-4 py-3 bg-red-50 rounded-xl text-red-800 font-bold",children:o.bloodType})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Allergies"}),a.jsx("div",{className:"px-4 py-3 bg-orange-50 rounded-xl text-orange-800 font-medium",children:o.allergies})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Height"}),a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.height})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Weight"}),a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.weight})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Emergency Contact"}),a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.emergencyContact})]})]})]})]})]})]})},XO=()=>{const{user:t,showToast:e,logout:n}=Gt(),[r,s]=P.useState(!1),[i,o]=P.useState([{id:"email_notifications",label:"Email Notifications",description:"Receive email updates about appointments and health reminders",enabled:!0},{id:"sms_notifications",label:"SMS Notifications",description:"Get text messages for appointment reminders",enabled:!1},{id:"push_notifications",label:"Push Notifications",description:"Receive push notifications on your devices",enabled:!0},{id:"marketing_emails",label:"Marketing Emails",description:"Receive newsletters and promotional content",enabled:!1}]),[c,u]=P.useState([{id:"profile_visibility",label:"Profile Visibility",description:"Make your profile visible to healthcare providers",enabled:!0},{id:"share_data",label:"Share Anonymous Data",description:"Help improve our services with anonymous usage data",enabled:!1},{id:"two_factor",label:"Two-Factor Authentication",description:"Add an extra layer of security to your account",enabled:!0}]),[d,f]=P.useState({theme:"light",language:"English",fontSize:"medium"});P.useEffect(()=>{(async()=>{var A,b,y;if(t!=null&&t.uid)try{const w=await fg(t.uid);(A=w==null?void 0:w.settings)!=null&&A.notifications&&o(w.settings.notifications),(b=w==null?void 0:w.settings)!=null&&b.privacy&&u(w.settings.privacy),(y=w==null?void 0:w.settings)!=null&&y.appearance&&f(w.settings.appearance)}catch(w){console.error("Error loading settings:",w)}})()},[t]);const m=async()=>{if(t!=null&&t.uid)try{s(!0),await pT(t.uid,{settings:{notifications:i,privacy:c,appearance:d}}),e("Settings saved successfully!","success"),s(!1)}catch(I){console.error("Error saving settings:",I),e("Failed to save settings","error"),s(!1)}},g=I=>{o(i.map(A=>A.id===I?{...A,enabled:!A.enabled}:A)),setTimeout(m,500)},x=I=>{u(c.map(A=>A.id===I?{...A,enabled:!A.enabled}:A)),setTimeout(m,500)},E=({enabled:I,onToggle:A})=>a.jsx("button",{onClick:A,className:`relative w-14 h-7 rounded-full transition-all duration-300 ${I?"bg-gradient-to-r from-brand-teal to-brand-dark":"bg-gray-300"}`,children:a.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 ${I?"transform translate-x-7":""}`})});return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Settings"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your account preferences and settings"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8 animate-slide-in-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Navigation"}),a.jsx("nav",{className:"space-y-2",children:[{icon:Jf,label:"Notifications",href:"#notifications"},{icon:_w,label:"Privacy & Security",href:"#privacy"},{icon:xw,label:"Appearance",href:"#appearance"},{icon:LO,label:"Language & Region",href:"#language"},{icon:bs,label:"Account",href:"#account"}].map((I,A)=>a.jsxs("a",{href:I.href,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-brand-light transition-all duration-300 group animate-fade-in",style:{animationDelay:`${A*.1}s`},children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:a.jsx(I.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"font-semibold text-gray-700 group-hover:text-brand-teal transition-colors duration-300",children:I.label})]},I.label))})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{id:"notifications",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:a.jsx(Jf,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage how you receive notifications"})]})]}),a.jsx("div",{className:"space-y-4",children:i.map((I,A)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${A*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:I.label}),a.jsx("p",{className:"text-sm text-gray-600",children:I.description})]}),a.jsx(E,{enabled:I.enabled,onToggle:()=>g(I.id)})]},I.id))})]}),a.jsxs("div",{id:"privacy",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(_w,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Privacy & Security"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Control your privacy and security settings"})]})]}),a.jsx("div",{className:"space-y-4 mb-6",children:c.map((I,A)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${.3+A*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:I.label}),a.jsx("p",{className:"text-sm text-gray-600",children:I.description})]}),a.jsx(E,{enabled:I.enabled,onToggle:()=>x(I.id)})]},I.id))}),a.jsx("div",{className:"pt-6 border-t border-gray-200",children:a.jsxs("button",{className:"w-full bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(bs,{className:"w-5 h-5"}),"Change Password"]})})]}),a.jsxs("div",{id:"appearance",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.4s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(xw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Appearance"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Customize how the app looks"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Theme"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(I=>a.jsx("button",{onClick:()=>f({...d,theme:I}),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${d.theme===I?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Font Size"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["small","medium","large"].map(I=>a.jsx("button",{onClick:()=>f({...d,fontSize:I}),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${d.fontSize===I?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})]})]})]}),a.jsxs("div",{id:"account",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.6s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center",children:a.jsx(bs,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Account Actions"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your account data"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(mg,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Download Your Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Export all your health records and data"})]})]}),a.jsx("div",{className:"text-blue-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-yellow-50 hover:bg-yellow-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(TT,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Privacy Policy"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review how we protect your data"})]})]}),a.jsx("div",{className:"text-yellow-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.9s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(IT,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Delete Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and data"})]})]}),a.jsx("div",{className:"text-red-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 p-4 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 animate-fade-in",style:{animationDelay:"1s"},children:[a.jsx(vT,{className:"w-5 h-5"}),"Sign Out"]})]})]})]})]})]})},JO=()=>{const{user:t,showToast:e}=Gt(),[n,r]=P.useState("all"),[s,i]=P.useState(!1),[o,c]=P.useState([]),[u,d]=P.useState(!0),[f,m]=P.useState(!1),[g,x]=P.useState("list"),[E,I]=P.useState(new Date),[A,b]=P.useState(null),[y,w]=P.useState({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"});P.useEffect(()=>{(async()=>{if(t)try{d(!0);const le=(await fu(t.uid)).map(Pe=>{let he="upcoming";return Pe.status==="Completed"?he="completed":Pe.status==="Cancelled"?he="cancelled":he="upcoming",{id:Pe.id||"",title:Pe.type,doctor:Pe.doctorName||"Dr. Jabu Nkehli",date:Pe.date,time:Pe.time,location:"Dermaglare Clinic - Main Branch",type:Pe.type,status:he}});c(le)}catch(Y){console.error("Error fetching appointments:",Y),e("Failed to load appointments","error")}finally{d(!1)}})()},[t,e]);const C=async M=>{try{await lO(String(M)),c(o.map(Y=>Y.id===M?{...Y,status:"cancelled"}:Y)),e("Appointment cancelled successfully","success")}catch(Y){console.error("Error cancelling appointment:",Y),e("Failed to cancel appointment","error")}},L=async M=>{if(M.preventDefault(),!t){e("Please login to book an appointment","error");return}if(!y.date||!y.time||!y.type){e("Please fill in all required fields","error");return}try{m(!0);const Y={patientId:t.uid,patientName:t.displayName||t.email||"Patient",date:y.date,time:y.time,type:y.type,status:"Pending",doctorName:y.doctorName,notes:y.notes};await aO(Y);const Pe=(await fu(t.uid)).map(he=>{let Te="upcoming";return he.status==="Completed"?Te="completed":he.status==="Cancelled"?Te="cancelled":Te="upcoming",{id:he.id||"",title:he.type,doctor:he.doctorName||"Dr. Jabu Nkehli",date:he.date,time:he.time,location:"Dermaglare Clinic - Main Branch",type:he.type,status:Te}});c(Pe),w({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"}),i(!1),m(!1),e("Appointment booked successfully! ","success")}catch(Y){console.error("Error booking appointment:",Y),e("Failed to book appointment","error"),m(!1)}},V=n==="all"?o:o.filter(M=>M.status===n),T=o.filter(M=>M.status==="upcoming").length,v=o.filter(M=>M.status==="completed").length,S=new Date().getMonth(),k=new Date().getFullYear(),R=o.filter(M=>{const Y=new Date(M.date);return Y.getMonth()===S&&Y.getFullYear()===k}).length,j=M=>{const Y=M.getFullYear(),le=M.getMonth(),Pe=new Date(Y,le,1),Te=new Date(Y,le+1,0).getDate(),Ke=Pe.getDay();return{daysInMonth:Te,startingDayOfWeek:Ke,year:Y,month:le}},N=M=>o.filter(Y=>{const le=new Date(Y.date);return le.getDate()===M.getDate()&&le.getMonth()===M.getMonth()&&le.getFullYear()===M.getFullYear()}),ae=()=>{I(new Date(E.getFullYear(),E.getMonth()-1,1))},ze=()=>{I(new Date(E.getFullYear(),E.getMonth()+1,1))},H=M=>{const Y=new Date;return M.getDate()===Y.getDate()&&M.getMonth()===Y.getMonth()&&M.getFullYear()===Y.getFullYear()},$=(M,Y)=>M?M.getDate()===Y.getDate()&&M.getMonth()===Y.getMonth()&&M.getFullYear()===Y.getFullYear():!1,B=M=>{switch(M){case"upcoming":return"from-green-500 to-emerald-600";case"completed":return"from-blue-500 to-cyan-600";case"cancelled":return"from-red-500 to-rose-600";default:return"from-gray-500 to-slate-600"}},W=M=>{switch(M){case"upcoming":return a.jsx(Ri,{className:"w-5 h-5"});case"completed":return a.jsx(qn,{className:"w-5 h-5"});case"cancelled":return a.jsx(Ci,{className:"w-5 h-5"});default:return null}};return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading appointments..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Appointments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your healthcare appointments"})]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(vO,{className:"w-5 h-5"}),"Book Appointment"]})]}),a.jsxs("div",{className:"flex gap-4 items-center animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("div",{className:"flex gap-2",children:["all","upcoming","completed","cancelled"].map(M=>a.jsx("button",{onClick:()=>r(M),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 ${n===M?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))}),a.jsxs("div",{className:"ml-auto flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(ET,{className:"w-5 h-5 text-brand-teal"})}),a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(bT,{className:"w-5 h-5 text-brand-teal"})})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{label:"Upcoming",count:T,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Completed",count:v,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"This Month",count:R,color:"from-purple-500 to-violet-600",delay:"0.4s"}].map(M=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:M.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${M.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(Vt,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:M.count}),a.jsx("div",{className:"text-gray-600 font-medium",children:M.label})]},M.label))}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-1 shadow-md",children:[a.jsx("button",{onClick:()=>x("list"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="list"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"List View"}),a.jsx("button",{onClick:()=>x("calendar"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="calendar"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"Calendar View"})]})}),g==="calendar"&&a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:E.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ae,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(_O,{className:"w-6 h-6 text-brand-teal"})}),a.jsx("button",{onClick:ze,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(wO,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(M=>a.jsx("div",{className:"text-center font-bold text-gray-600 py-2",children:M},M)),(()=>{const{daysInMonth:M,startingDayOfWeek:Y,year:le,month:Pe}=j(E),he=[];for(let Te=0;Te<Y;Te++)he.push(a.jsx("div",{className:"aspect-square"},`empty-${Te}`));for(let Te=1;Te<=M;Te++){const Ke=new Date(le,Pe,Te),Lt=N(Ke),Ys=H(Ke),cl=$(A,Ke);he.push(a.jsx("div",{onClick:()=>b(Ke),className:`aspect-square p-2 rounded-lg border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${Ys?"border-brand-yellow bg-brand-yellow/10 ring-2 ring-brand-yellow ring-offset-2":cl?"border-brand-teal bg-brand-teal/10":"border-gray-200 hover:border-brand-teal/50"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("span",{className:`text-sm font-semibold ${Ys?"text-brand-teal":"text-gray-700"}`,children:Te}),Lt.length>0&&a.jsxs("div",{className:"flex-1 flex flex-col gap-1 mt-1",children:[Lt.slice(0,2).map((as,hd)=>a.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${as.status==="upcoming"?"bg-green-100 text-green-700":as.status==="completed"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,title:`${as.time} - ${as.title}`,children:as.time},hd)),Lt.length>2&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",Lt.length-2," more"]})]})]})},Te))}return he})()]}),A&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:["Appointments on"," ",A.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),N(A).length>0?a.jsx("div",{className:"space-y-3",children:N(A).map(M=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${M.status==="upcoming"?"bg-green-500":M.status==="completed"?"bg-blue-500":"bg-red-500"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:M.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[M.time,"  ",M.doctor]})]})]}),M.status==="upcoming"&&a.jsx("button",{onClick:()=>C(M.id),className:"text-red-600 hover:text-red-700 text-sm font-semibold hover:underline transition-colors",children:"Cancel"})]},M.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments on this date"})]})]}),g==="list"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:V.map((M,Y)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.5+Y*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${B(M.status)} animate-shimmer`}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1 group-hover:text-brand-teal transition-colors duration-300",children:M.title}),a.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-brand-light text-brand-teal",children:M.type})]}),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${B(M.status)} text-white text-sm font-semibold`,children:[W(M.status),M.status]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(ll,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Doctor"}),a.jsx("p",{className:"font-semibold",children:M.doctor})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center",children:a.jsx(Vt,{className:"w-5 h-5 text-brand-dark"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),a.jsxs("p",{className:"font-semibold",children:[new Date(M.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})," ","at ",M.time]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(xT,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),a.jsx("p",{className:"font-semibold",children:M.location})]})]})]}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[M.status==="upcoming"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Reschedule"}),a.jsx("button",{onClick:()=>C(M.id),className:"px-6 bg-red-50 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-100 transform hover:scale-105 transition-all duration-300",children:"Cancel"})]}),M.status==="completed"&&a.jsx("button",{className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"View Details"})]})]})]},M.id))}),V.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(Vt,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:n==="all"?"You don't have any appointments scheduled yet.":`No ${n} appointments.`}),a.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Book Your First Appointment"})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full mx-4 shadow-2xl animate-scale-in max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-1",children:"Book New Appointment"}),a.jsx("p",{className:"text-brand-yellow",children:"Schedule your visit with us"})]}),a.jsx("button",{onClick:()=>i(!1),className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(Ci,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:L,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Appointment Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:y.type,onChange:M=>w({...y,type:M.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select appointment type"}),a.jsx("option",{value:"General Consultation",children:"General Consultation"}),a.jsx("option",{value:"Skin Checkup",children:"Skin Checkup"}),a.jsx("option",{value:"Acne Treatment",children:"Acne Treatment"}),a.jsx("option",{value:"Laser Treatment",children:"Laser Treatment"}),a.jsx("option",{value:"Chemical Peel",children:"Chemical Peel"}),a.jsx("option",{value:"Botox/Fillers",children:"Botox/Fillers"}),a.jsx("option",{value:"Mole Removal",children:"Mole Removal"}),a.jsx("option",{value:"Follow-up",children:"Follow-up Visit"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Doctor ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:y.doctorName,onChange:M=>w({...y,doctorName:M.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"Dr. Jabu Nkehli",children:"Dr. Jabu Nkehli - Dermatologist"}),a.jsx("option",{value:"Dr. Sarah Johnson",children:"Dr. Sarah Johnson - Specialist"}),a.jsx("option",{value:"Dr. Michael Chen",children:"Dr. Michael Chen - Cosmetic Dermatology"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"date",value:y.date,onChange:M=>w({...y,date:M.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsxs("select",{value:y.time,onChange:M=>w({...y,time:M.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select time"}),a.jsx("option",{value:"08:00 AM",children:"08:00 AM"}),a.jsx("option",{value:"09:00 AM",children:"09:00 AM"}),a.jsx("option",{value:"10:00 AM",children:"10:00 AM"}),a.jsx("option",{value:"11:00 AM",children:"11:00 AM"}),a.jsx("option",{value:"12:00 PM",children:"12:00 PM"}),a.jsx("option",{value:"01:00 PM",children:"01:00 PM"}),a.jsx("option",{value:"02:00 PM",children:"02:00 PM"}),a.jsx("option",{value:"03:00 PM",children:"03:00 PM"}),a.jsx("option",{value:"04:00 PM",children:"04:00 PM"}),a.jsx("option",{value:"05:00 PM",children:"05:00 PM"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:y.notes,onChange:M=>w({...y,notes:M.target.value}),rows:4,placeholder:"Please provide any additional information about your condition or concerns...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors resize-none text-gray-700"})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Vt,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important Information:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Appointments are subject to availability and confirmation"}),a.jsx("li",{children:"You will receive a confirmation email within 24 hours"}),a.jsx("li",{children:"Please arrive 10 minutes before your appointment"})]})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Booking..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(qn,{className:"w-5 h-5"}),a.jsx("span",{children:"Confirm Booking"})]})})]})]})]})})]})},ZO=()=>{const{user:t,showToast:e}=Gt(),[n,r]=P.useState("all"),[s,i]=P.useState(""),[o,c]=P.useState([]),[u,d]=P.useState(!0),[f,m]=P.useState(!1),[g,x]=P.useState(!1),[E,I]=P.useState(0),[A,b]=P.useState(null),y=P.useRef(null);P.useEffect(()=>{(async()=>{if(t)try{d(!0);const W=(await Qf(t.uid)).map(M=>({id:M.id||"",name:M.name,type:M.type||"PDF",category:M.category||"General",size:M.size||"Unknown",date:M.date,url:M.fileUrl||M.url,storagePath:M.storagePath}));c(W)}catch(B){console.error("Error fetching documents:",B),e("Failed to load documents","error")}finally{d(!1)}})()},[t,e]);const w=async $=>{if(confirm("Are you sure you want to delete this document?"))try{const B=o.find(W=>W.id===$);if(!B||!B.storagePath){e("Cannot delete document: storage path not found","error");return}await uO(String($),B.storagePath),c(o.filter(W=>W.id!==$)),e("Document deleted successfully","success")}catch(B){console.error("Error deleting document:",B),e("Failed to delete document","error")}},C=$=>{$.url?window.open($.url,"_blank"):e("Document URL not available","error")},L=$=>{var W;const B=(W=$.target.files)==null?void 0:W[0];if(B){if(B.size>10*1024*1024){e("File size must be less than 10MB","error");return}b(B),m(!0)}},V=async()=>{if(!(!A||!t))try{x(!0),I(0),await cO(t.uid,A,W=>{I(W)});const B=(await Qf(t.uid)).map(W=>({id:W.id||"",name:W.name,type:W.type||"PDF",category:W.category||"General",size:W.size||"Unknown",date:W.date,url:W.fileUrl||W.url,storagePath:W.storagePath}));c(B),m(!1),b(null),I(0),e("Document uploaded successfully! ","success")}catch($){console.error("Error uploading document:",$),e("Failed to upload document","error")}finally{x(!1)}},T=()=>{m(!1),b(null),I(0),y.current&&(y.current.value="")},v=["all",...Array.from(new Set(o.map($=>$.category)))],S=v.length>1?v:["all","Lab Results","Prescriptions","Treatment Plans","Insurance","Forms","Reports"],k=o.filter($=>{const B=n==="all"||$.category===n,W=$.name.toLowerCase().includes(s.toLowerCase());return B&&W}),R=o.filter($=>$.category==="Lab Results").length,j=o.filter($=>$.category==="Prescriptions").length,N=o.reduce(($,B)=>{const W=B.size.match(/([\d.]+)\s*(KB|MB)/i);if(W){const M=parseFloat(W[1]),Y=W[2].toUpperCase();return $+(Y==="MB"?M:M/1024)}return $},0),ae=N<1?`${(N*1024).toFixed(1)} KB`:`${N.toFixed(1)} MB`,ze=$=>({"Lab Results":"from-blue-500 to-cyan-600",Prescriptions:"from-green-500 to-emerald-600","Treatment Plans":"from-purple-500 to-violet-600",Insurance:"from-orange-500 to-amber-600",Forms:"from-pink-500 to-rose-600",Reports:"from-indigo-500 to-blue-600"})[$]||"from-gray-500 to-slate-600",H=$=>a.jsx(un,{className:"w-8 h-8 text-white"});return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading documents..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Documents"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Access and manage your medical documents"})]}),a.jsxs("button",{onClick:()=>{var $;return($=y.current)==null?void 0:$.click()},className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(NO,{className:"w-5 h-5"}),"Upload Document"]}),a.jsx("input",{ref:y,type:"file",onChange:L,className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"})]}),a.jsxs("div",{className:"flex gap-4 animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(bT,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search documents...",value:s,onChange:$=>i($.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300 shadow-sm hover:shadow-md"})]}),a.jsx("button",{className:"p-3 bg-white rounded-xl shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105 border-2 border-gray-200",children:a.jsx(ET,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsx("div",{className:"mb-8 overflow-x-auto animate-slide-in-up",style:{animationDelay:"0.2s"},children:a.jsx("div",{className:"flex gap-3 min-w-max pb-2",children:S.map($=>a.jsx("button",{onClick:()=>r($),className:`px-5 py-2 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 whitespace-nowrap ${n===$?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:$==="all"?"All Documents":$},$))})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{label:"Total Documents",count:o.length,icon:un,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"Lab Results",count:R,icon:un,color:"from-green-500 to-emerald-600",delay:"0.4s"},{label:"Prescriptions",count:j,icon:un,color:"from-purple-500 to-violet-600",delay:"0.5s"},{label:"Storage Used",count:ae,icon:kO,color:"from-orange-500 to-amber-600",delay:"0.6s"}].map($=>a.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:$.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${$.color} flex items-center justify-center mb-3 animate-pulse-glow`,children:a.jsx($.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:(typeof $.count=="number",$.count)}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:$.label})]},$.label))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(($,B)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.7+B*.1}s`},children:[a.jsxs("div",{className:`h-48 bg-gradient-to-br ${ze($.category)} flex items-center justify-center relative overflow-hidden`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-all duration-300"}),H($.type),a.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-semibold text-gray-800",children:$.type})]}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 group-hover:text-brand-teal transition-colors duration-300 line-clamp-2",children:$.name}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:`px-2 py-1 rounded-lg bg-gradient-to-r ${ze($.category)} text-white text-xs font-semibold`,children:$.category}),a.jsx("span",{children:$.size})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:new Date($.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>C($),className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-2 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(TT,{className:"w-4 h-4"}),"View"]}),a.jsx("button",{onClick:()=>C($),className:"p-2 bg-brand-light text-brand-teal rounded-lg hover:bg-brand-teal hover:text-white transform hover:scale-110 transition-all duration-300",children:a.jsx(mg,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>w($.id),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transform hover:scale-110 transition-all duration-300",children:a.jsx(IT,{className:"w-5 h-5"})})]})]})]},$.id))}),k.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(un,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No documents found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:s?`No documents match "${s}"`:n==="all"?"Upload your first document to get started.":`No documents in ${n}.`}),a.jsx("button",{onClick:()=>{var $;return($=y.current)==null?void 0:$.click()},className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Upload Document"})]}),f&&A&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full mx-4 shadow-2xl animate-scale-in",children:[a.jsx("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Upload Document"}),a.jsx("p",{className:"text-brand-yellow text-sm",children:"Uploading to your medical records"})]}),!g&&a.jsx("button",{onClick:T,className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(Ci,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 p-4 bg-brand-light rounded-xl",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center flex-shrink-0",children:a.jsx(un,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-gray-800 truncate",children:A.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[(A.size/1024).toFixed(2)," KB"]})]})]})}),g&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Uploading..."}),a.jsxs("span",{className:"text-sm font-semibold text-brand-teal",children:[E,"%"]})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal to-brand-dark transition-all duration-300 rounded-full",style:{width:`${E}%`}})})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(un,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside text-xs",children:[a.jsx("li",{children:"Maximum file size: 10MB"}),a.jsx("li",{children:"Supported formats: PDF, DOC, DOCX, JPG, PNG"}),a.jsx("li",{children:"Documents are securely encrypted"})]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:T,disabled:g,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:V,disabled:g,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Uploading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(qn,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload"})]})})]})]})]})})]})},eM=()=>{const{user:t,showToast:e}=Gt(),[n,r]=P.useState(""),[s,i]=P.useState(null),[o,c]=P.useState([]),[u,d]=P.useState(null),[f,m]=P.useState(!0),g=P.useRef(null),x=[{id:1,name:"Dr. Jabu Nkehli",role:"Dermatologist",avatar:"JN",online:!0,lastMessage:"Your lab results are ready",unread:2},{id:2,name:"Support Team",role:"Customer Support",avatar:"ST",online:!0,lastMessage:"How can we help you today?",unread:0},{id:3,name:"Dr. Michael Chen",role:"Specialist",avatar:"MC",online:!1,lastMessage:"See you at your next appointment",unread:0}];P.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{m(!0);const w=await hO(t.uid,t.displayName||t.email||"Patient");d(w);const L=(await fO(w)).map(V=>({id:V.id||"",sender:V.senderId===t.uid?"user":"support",text:V.text,timestamp:E(V.timestamp),read:V.read||!1}));c(L),await pO(w),m(!1)}catch(w){console.error("Error initializing chat:",w),e("Failed to load chat","error"),m(!1)}})()},[t]),P.useEffect(()=>{if(!u||!(t!=null&&t.uid))return;const y=gO(u,w=>{const C=w.map(L=>({id:L.id||"",sender:L.senderId===t.uid?"user":"support",text:L.text,timestamp:E(L.timestamp),read:L.read||!1}));c(C)});return()=>y()},[u,t]);const E=y=>{if(!y)return"";let w;return y.toDate?w=y.toDate():y.seconds?w=new Date(y.seconds*1e3):w=new Date(y),w.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},[I]=P.useState([{id:"1",sender:"support",text:"Hello! Welcome to Dermaglare. How can I assist you today?",timestamp:"10:00 AM",read:!0},{id:"2",sender:"user",text:"Hi! I have a question about my upcoming appointment.",timestamp:"10:05 AM",read:!0},{id:"3",sender:"support",text:"Of course! I'd be happy to help. What would you like to know?",timestamp:"10:06 AM",read:!0},{id:"4",sender:"user",text:"Can I reschedule my appointment for next week?",timestamp:"10:07 AM",read:!0},{id:"5",sender:"support",text:"Absolutely! Let me check the available slots for you. One moment please.",timestamp:"10:08 AM",read:!0}]);P.useEffect(()=>{x.length>0&&!s&&i(x[0])},[]);const A=()=>{var y;(y=g.current)==null||y.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{A()},[o]);const b=async y=>{if(y.preventDefault(),!(!n.trim()||!u||!(t!=null&&t.uid)))try{await mO(u,t.uid,n.trim()),r(""),A()}catch(w){console.error("Error sending message:",w),e("Failed to send message","error")}};return a.jsxs("div",{className:"h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex flex-col",children:[a.jsxs("div",{className:"mb-6 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Messages"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Connect with your healthcare providers"})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 overflow-hidden animate-slide-in-up",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("input",{type:"text",placeholder:"Search conversations...",className:"w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:x.map((y,w)=>a.jsx("div",{onClick:()=>i(y),className:`p-4 border-b border-gray-100 cursor-pointer transition-all duration-300 hover:bg-brand-light animate-fade-in ${(s==null?void 0:s.id)===y.id?"bg-brand-light border-l-4 border-l-brand-teal":""}`,style:{animationDelay:`${w*.1}s`},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center text-white font-bold",children:y.avatar}),y.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:y.name}),y.unread>0&&a.jsx("span",{className:"bg-gradient-to-r from-brand-yellow to-orange-400 text-brand-dark text-xs font-bold px-2 py-1 rounded-full animate-pulse-glow",children:y.unread})]}),a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:y.role}),a.jsx("p",{className:"text-sm text-gray-600 truncate",children:y.lastMessage})]})]})},y.id))})]}),a.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-4 flex items-center justify-between animate-slide-in-down",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-brand-teal font-bold",children:s.avatar}),s.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white",children:s.name}),a.jsx("p",{className:"text-xs text-brand-yellow",children:s.online?"Online":"Offline"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(_T,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(RO,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(PO,{className:"w-5 h-5 text-white"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-brand-light/20 to-white",children:[f?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]})}):o.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-gray-500",children:"No messages yet. Start the conversation!"})}):o.map((y,w)=>a.jsx("div",{className:`flex ${y.sender==="user"?"justify-end":"justify-start"} animate-slide-in-up`,style:{animationDelay:`${w*.05}s`},children:a.jsxs("div",{className:`max-w-[70%] ${y.sender==="user"?"bg-gradient-to-br from-brand-teal to-brand-dark text-white":"bg-white shadow-md"} rounded-2xl p-4 transform hover:scale-[1.02] transition-all duration-300`,children:[a.jsx("p",{className:`mb-2 ${y.sender==="user"?"text-white":"text-gray-800"}`,children:y.text}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-xs ${y.sender==="user"?"text-brand-yellow":"text-gray-500"}`,children:y.timestamp}),y.sender==="user"&&a.jsx(qn,{className:`w-4 h-4 ${y.read?"text-brand-yellow":"text-white/50"}`})]})]})},y.id)),a.jsx("div",{ref:g})]}),a.jsx("form",{onSubmit:b,className:"p-4 border-t border-gray-200 bg-white",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(CO,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(jO,{className:"w-5 h-5"})}),a.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}),a.jsx("button",{type:"submit",disabled:!n.trim(),className:"bg-gradient-to-r from-brand-teal to-brand-dark text-white p-3 rounded-xl hover:shadow-lg transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:a.jsx(AO,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(ll,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-600",children:"Choose a contact to start messaging"})]})})})]})]})},tM=({onLoadingComplete:t})=>{const[e,n]=P.useState(0),[r,s]=P.useState(!1);return P.useEffect(()=>{const i=setInterval(()=>{n(c=>c>=100?(clearInterval(i),100):c+2)},100),o=setTimeout(()=>{s(!0),setTimeout(()=>{t()},500)},5e3);return()=>{clearInterval(i),clearTimeout(o)}},[t]),a.jsxs("div",{className:`fixed inset-0 bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center z-[9999] transition-opacity duration-500 ${r?"opacity-0":"opacity-100"}`,children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[[...Array(20)].map((i,o)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},o)),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/20 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/30 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[a.jsxs("div",{className:"relative mb-12 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 -m-8",children:a.jsx("div",{className:"w-full h-full border-4 border-brand-teal/30 rounded-full animate-ping"})}),a.jsx("div",{className:"absolute inset-0 -m-12",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-yellow/30 rounded-full animate-pulse",style:{animationDelay:"0.5s"}})}),a.jsx("div",{className:"absolute inset-0 -m-16",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-teal/20 rounded-full animate-ping",style:{animationDelay:"1s"}})}),a.jsx("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare",className:"h-24 w-auto object-contain animate-pulse-glow"})}),a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-brand-yellow rounded-full animate-bounce opacity-75"}),a.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-brand-teal rounded-full animate-bounce opacity-75",style:{animationDelay:"0.3s"}})]}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-4 animate-gradient-x",children:"Welcome to Dermaglare"}),a.jsx("p",{className:"text-gray-600 text-lg mb-8 animate-fade-in",children:"Preparing your skincare journey..."}),a.jsx("div",{className:"w-80 h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal via-brand-yellow to-brand-teal rounded-full transition-all duration-300 ease-out animate-shimmer",style:{width:`${e}%`,backgroundSize:"200% 100%"}})}),a.jsxs("p",{className:"text-brand-teal font-semibold mt-3 text-sm",children:[e,"% Complete"]}),a.jsxs("div",{className:"flex gap-2 mt-8",children:[a.jsx("div",{className:"w-3 h-3 bg-brand-teal rounded-full animate-bounce"}),a.jsx("div",{className:"w-3 h-3 bg-brand-yellow rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-3 h-3 bg-brand-dark rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-500 text-sm italic animate-fade-in",children:[e<20&&" Loading your personalized dashboard...",e>=20&&e<40&&" Securing your data...",e>=40&&e<60&&" Syncing appointments...",e>=60&&e<80&&" Preparing documents...",e>=80&&e<100&&" Almost there...",e>=100&&" Ready!"]})})]}),a.jsx("div",{className:"absolute bottom-10 left-10 w-16 h-16 border-4 border-brand-teal/20 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute top-10 right-10 w-12 h-12 border-4 border-brand-yellow/20 rounded-full animate-spin-slow",style:{animationDelay:"1s"}})]})},nM=()=>{const{user:t}=Gt();return t?a.jsx(GO,{children:a.jsxs(Hx,{children:[a.jsx(Kt,{path:"dashboard",element:a.jsx(QO,{})}),a.jsx(Kt,{path:"appointments",element:a.jsx(JO,{})}),a.jsx(Kt,{path:"documents",element:a.jsx(ZO,{})}),a.jsx(Kt,{path:"chat",element:a.jsx(eM,{})}),a.jsx(Kt,{path:"billing",element:a.jsx(zO,{patientId:t.uid})}),a.jsx(Kt,{path:"profile",element:a.jsx(YO,{})}),a.jsx(Kt,{path:"settings",element:a.jsx(XO,{})}),a.jsx(Kt,{path:"*",element:a.jsx(ep,{to:"/dashboard",replace:!0})})]})}):null},rM=()=>{const{user:t}=Gt();return t?a.jsx(nM,{}):a.jsx(ep,{to:"/login",replace:!0})},sM=()=>{const{user:t}=Gt();return t?a.jsx(ep,{to:"/dashboard",replace:!0}):a.jsx(yN,{})};function iM(){const{loading:t}=Gt(),[e,n]=P.useState(!0);P.useEffect(()=>{sessionStorage.getItem("hasShownLoading")&&n(!1)},[]);const r=()=>{n(!1),sessionStorage.setItem("hasShownLoading","true")};return e?a.jsx(tM,{onLoadingComplete:r}):t?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:a.jsx("div",{className:"text-xl font-semibold animate-pulse",children:"Loading Patient Portal..."})}):a.jsxs(Hx,{children:[a.jsx(Kt,{element:a.jsx(sM,{}),children:a.jsx(Kt,{path:"/login",element:a.jsx(WO,{})})}),a.jsx(Kt,{path:"/*",element:a.jsx(rM,{})})]})}Ih.createRoot(document.getElementById("root")).render(a.jsx(Pw.StrictMode,{children:a.jsx(BN,{children:a.jsx(yO,{children:a.jsx(iM,{})})})}));
