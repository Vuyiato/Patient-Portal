(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function fI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nw={exports:{}},mu={},kw={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),mI=Symbol.for("react.portal"),pI=Symbol.for("react.fragment"),gI=Symbol.for("react.strict_mode"),yI=Symbol.for("react.profiler"),vI=Symbol.for("react.provider"),wI=Symbol.for("react.context"),_I=Symbol.for("react.forward_ref"),xI=Symbol.for("react.suspense"),bI=Symbol.for("react.memo"),EI=Symbol.for("react.lazy"),gy=Symbol.iterator;function TI(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var Cw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Aw=Object.assign,Rw={};function zi(t,e,n){this.props=t,this.context=e,this.refs=Rw,this.updater=n||Cw}zi.prototype.isReactComponent={};zi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pw(){}Pw.prototype=zi.prototype;function tm(t,e,n){this.props=t,this.context=e,this.refs=Rw,this.updater=n||Cw}var nm=tm.prototype=new Pw;nm.constructor=tm;Aw(nm,zi.prototype);nm.isPureReactComponent=!0;var yy=Array.isArray,jw=Object.prototype.hasOwnProperty,rm={current:null},Dw={key:!0,ref:!0,__self:!0,__source:!0};function Lw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jw.call(e,r)&&!Dw.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ma,type:t,key:i,ref:o,props:s,_owner:rm.current}}function II(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function SI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vy=/\/+/g;function Pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?SI(""+t.key):e.toString(36)}function ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ma:case mI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pd(o,0):r,yy(s)?(n="",t!=null&&(n=t.replace(vy,"$&/")+"/"),ql(s,e,n,"",function(d){return d})):s!=null&&(sm(s)&&(s=II(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",yy(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Pd(i,c);o+=ql(i,e,n,u,s)}else if(u=TI(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Pd(i,c++),o+=ql(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,n){if(t==null)return t;var r=[],s=0;return ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function NI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Wl={transition:null},kI={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:rm};function Ow(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:wl,forEach:function(t,e,n){wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!sm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=zi;ie.Fragment=pI;ie.Profiler=yI;ie.PureComponent=tm;ie.StrictMode=gI;ie.Suspense=xI;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kI;ie.act=Ow;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Aw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)jw.call(e,u)&&!Dw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ma,type:t.type,key:s,ref:i,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:wI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vI,_context:t},t.Consumer=t};ie.createElement=Lw;ie.createFactory=function(t){var e=Lw.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:_I,render:t}};ie.isValidElement=sm;ie.lazy=function(t){return{$$typeof:EI,_payload:{_status:-1,_result:t},_init:NI}};ie.memo=function(t,e){return{$$typeof:bI,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};ie.unstable_act=Ow;ie.useCallback=function(t,e){return bt.current.useCallback(t,e)};ie.useContext=function(t){return bt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return bt.current.useEffect(t,e)};ie.useId=function(){return bt.current.useId()};ie.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return bt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};ie.useRef=function(t){return bt.current.useRef(t)};ie.useState=function(t){return bt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return bt.current.useTransition()};ie.version="18.3.1";kw.exports=ie;var R=kw.exports;const Mw=fI(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=R,AI=Symbol.for("react.element"),RI=Symbol.for("react.fragment"),PI=Object.prototype.hasOwnProperty,jI=CI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DI={key:!0,ref:!0,__self:!0,__source:!0};function Vw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PI.call(e,r)&&!DI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AI,type:t,key:i,ref:o,props:s,_owner:jI.current}}mu.Fragment=RI;mu.jsx=Vw;mu.jsxs=Vw;Nw.exports=mu;var a=Nw.exports,Ih={},Fw={exports:{}},Kt={},Uw={exports:{}},$w={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,F){var D=B.length;B.push(F);e:for(;0<D;){var Q=D-1>>>1,se=B[Q];if(0<s(se,F))B[Q]=F,B[D]=se,D=Q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var F=B[0],D=B.pop();if(D!==F){B[0]=D;e:for(var Q=0,se=B.length,xe=se>>>1;Q<xe;){var he=2*(Q+1)-1,ye=B[he],Ce=he+1,Mt=B[Ce];if(0>s(ye,D))Ce<se&&0>s(Mt,ye)?(B[Q]=Mt,B[Ce]=D,Q=Ce):(B[Q]=ye,B[he]=D,Q=he);else if(Ce<se&&0>s(Mt,D))B[Q]=Mt,B[Ce]=D,Q=Ce;else break e}}return F}function s(B,F){var D=B.sortIndex-F.sortIndex;return D!==0?D:B.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,x=!1,N=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var F=n(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=B)r(d),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(d)}}function _(B){if(y=!1,E(B),!N)if(n(u)!==null)N=!0,me(L);else{var F=n(d);F!==null&&H(_,F.startTime-B)}}function L(B,F){N=!1,y&&(y=!1,I(v),v=-1),x=!0;var D=g;try{for(E(F),m=n(u);m!==null&&(!(m.expirationTime>F)||B&&!P());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,g=m.priorityLevel;var se=Q(m.expirationTime<=F);F=t.unstable_now(),typeof se=="function"?m.callback=se:m===n(u)&&r(u),E(F)}else r(u);m=n(u)}if(m!==null)var xe=!0;else{var he=n(d);he!==null&&H(_,he.startTime-F),xe=!1}return xe}finally{m=null,g=D,x=!1}}var V=!1,T=null,v=-1,S=5,A=-1;function P(){return!(t.unstable_now()-A<S)}function j(){if(T!==null){var B=t.unstable_now();A=B;var F=!0;try{F=T(!0,B)}finally{F?k():(V=!1,T=null)}}else V=!1}var k;if(typeof w=="function")k=function(){w(j)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,W=re.port2;re.port1.onmessage=j,k=function(){W.postMessage(null)}}else k=function(){C(j,0)};function me(B){T=B,V||(V=!0,k())}function H(B,F){v=C(function(){B(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){N||x||(N=!0,me(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var F=3;break;default:F=g}var D=g;g=F;try{return B()}finally{g=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,F){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var D=g;g=B;try{return F()}finally{g=D}},t.unstable_scheduleCallback=function(B,F,D){var Q=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?Q+D:Q):D=Q,B){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=D+se,B={id:f++,callback:F,priorityLevel:B,startTime:D,expirationTime:se,sortIndex:-1},D>Q?(B.sortIndex=D,e(d,B),n(u)===null&&B===n(d)&&(y?(I(v),v=-1):y=!0,H(_,D-Q))):(B.sortIndex=se,e(u,B),N||x||(N=!0,me(L))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var F=g;return function(){var D=g;g=F;try{return B.apply(this,arguments)}finally{g=D}}}})($w);Uw.exports=$w;var LI=Uw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OI=R,Gt=LI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bw=new Set,oa={};function Bs(t,e){Ci(t,e),Ci(t+"Capture",e)}function Ci(t,e){for(oa[t]=e,t=0;t<e.length;t++)Bw.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,MI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wy={},_y={};function VI(t){return Sh.call(_y,t)?!0:Sh.call(wy,t)?!1:MI.test(t)?_y[t]=!0:(wy[t]=!0,!1)}function FI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UI(t,e,n,r){if(e===null||typeof e>"u"||FI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var im=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(im,om);it[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(im,om);it[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(im,om);it[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,r){var s=it.hasOwnProperty(e)?it[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UI(e,n,s,r)&&(n=null),r||s===null?VI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=OI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),oi=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Nh=Symbol.for("react.profiler"),zw=Symbol.for("react.provider"),Hw=Symbol.for("react.context"),cm=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Ch=Symbol.for("react.suspense_list"),um=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),qw=Symbol.for("react.offscreen"),xy=Symbol.iterator;function xo(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,jd;function Po(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Dd=!1;function Ld(t,e){if(!t||Dd)return"";Dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Dd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Po(t):""}function $I(t){switch(t.tag){case 5:return Po(t.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case oi:return"Portal";case Nh:return"Profiler";case lm:return"StrictMode";case kh:return"Suspense";case Ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hw:return(t.displayName||"Context")+".Consumer";case zw:return(t._context.displayName||"Context")+".Provider";case cm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case um:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function BI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ww(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zI(t){var e=Ww(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=zI(t))}function Gw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ww(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function by(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kw(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function Ph(t,e){Kw(t,e);var n=Wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&jh(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ey(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jh(t,e,n){(e!=="number"||yc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jo=Array.isArray;function vi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ty(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(jo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function Qw(t,e){var n=Wr(e.value),r=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Iy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bl,Xw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bl=bl||document.createElement("div"),bl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HI=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){HI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function Jw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function Zw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qI=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oh(t,e){if(e){if(qI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Mh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vh=null;function dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,wi=null,_i=null;function Sy(t){if(t=Ua(t)){if(typeof Fh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=wu(e),Fh(t.stateNode,t.type,e))}}function e_(t){wi?_i?_i.push(t):_i=[t]:wi=t}function t_(){if(wi){var t=wi,e=_i;if(_i=wi=null,Sy(t),e)for(t=0;t<e.length;t++)Sy(e[t])}}function n_(t,e){return t(e)}function r_(){}var Od=!1;function s_(t,e,n){if(Od)return t(e,n);Od=!0;try{return n_(t,e,n)}finally{Od=!1,(wi!==null||_i!==null)&&(r_(),t_())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Uh=!1;if(er)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{Uh=!1}function WI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ho=!1,vc=null,wc=!1,$h=null,GI={onError:function(t){Ho=!0,vc=t}};function KI(t,e,n,r,s,i,o,c,u){Ho=!1,vc=null,WI.apply(GI,arguments)}function QI(t,e,n,r,s,i,o,c,u){if(KI.apply(this,arguments),Ho){if(Ho){var d=vc;Ho=!1,vc=null}else throw Error(z(198));wc||(wc=!0,$h=d)}}function zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function i_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ny(t){if(zs(t)!==t)throw Error(z(188))}function YI(t){var e=t.alternate;if(!e){if(e=zs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ny(s),t;if(i===r)return Ny(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function o_(t){return t=YI(t),t!==null?a_(t):null}function a_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a_(t);if(e!==null)return e;t=t.sibling}return null}var l_=Gt.unstable_scheduleCallback,ky=Gt.unstable_cancelCallback,XI=Gt.unstable_shouldYield,JI=Gt.unstable_requestPaint,Ue=Gt.unstable_now,ZI=Gt.unstable_getCurrentPriorityLevel,hm=Gt.unstable_ImmediatePriority,c_=Gt.unstable_UserBlockingPriority,_c=Gt.unstable_NormalPriority,e2=Gt.unstable_LowPriority,u_=Gt.unstable_IdlePriority,pu=null,Pn=null;function t2(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(pu,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:s2,n2=Math.log,r2=Math.LN2;function s2(t){return t>>>=0,t===0?32:31-(n2(t)/r2|0)|0}var El=64,Tl=4194304;function Do(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Do(c):(i&=o,i!==0&&(r=Do(i)))}else o=n&~s,o!==0?r=Do(o):i!==0&&(r=Do(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pn(e),s=1<<n,r|=t[n],e&=~s;return r}function i2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=i2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d_(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function Md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function a2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ge=0;function h_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,mm,m_,p_,g_,zh=!1,Il=[],Dr=null,Lr=null,Or=null,ca=new Map,ua=new Map,Ir=[],l2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cy(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function Eo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&mm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function c2(t,e,n,r,s){switch(e){case"focusin":return Dr=Eo(Dr,t,e,n,r,s),!0;case"dragenter":return Lr=Eo(Lr,t,e,n,r,s),!0;case"mouseover":return Or=Eo(Or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ca.set(i,Eo(ca.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ua.set(i,Eo(ua.get(i)||null,t,e,n,r,s)),!0}return!1}function y_(t){var e=vs(t.target);if(e!==null){var n=zs(e);if(n!==null){if(e=n.tag,e===13){if(e=i_(n),e!==null){t.blockedOn=e,g_(t.priority,function(){m_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vh=r,n.target.dispatchEvent(r),Vh=null}else return e=Ua(n),e!==null&&mm(e),t.blockedOn=n,!1;e.shift()}return!0}function Ay(t,e,n){Gl(t)&&n.delete(e)}function u2(){zh=!1,Dr!==null&&Gl(Dr)&&(Dr=null),Lr!==null&&Gl(Lr)&&(Lr=null),Or!==null&&Gl(Or)&&(Or=null),ca.forEach(Ay),ua.forEach(Ay)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,zh||(zh=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,u2)))}function da(t){function e(s){return To(s,t)}if(0<Il.length){To(Il[0],t);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&To(Dr,t),Lr!==null&&To(Lr,t),Or!==null&&To(Or,t),ca.forEach(e),ua.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)y_(n),n.blockedOn===null&&Ir.shift()}var xi=dr.ReactCurrentBatchConfig,bc=!0;function d2(t,e,n,r){var s=ge,i=xi.transition;xi.transition=null;try{ge=1,pm(t,e,n,r)}finally{ge=s,xi.transition=i}}function h2(t,e,n,r){var s=ge,i=xi.transition;xi.transition=null;try{ge=4,pm(t,e,n,r)}finally{ge=s,xi.transition=i}}function pm(t,e,n,r){if(bc){var s=Hh(t,e,n,r);if(s===null)Gd(t,e,r,Ec,n),Cy(t,r);else if(c2(s,t,e,n,r))r.stopPropagation();else if(Cy(t,r),e&4&&-1<l2.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&f_(i),i=Hh(t,e,n,r),i===null&&Gd(t,e,r,Ec,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gd(t,e,r,null,n)}}var Ec=null;function Hh(t,e,n,r){if(Ec=null,t=dm(r),t=vs(t),t!==null)if(e=zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=i_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ec=t,null}function v_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZI()){case hm:return 1;case c_:return 4;case _c:case e2:return 16;case u_:return 536870912;default:return 16}default:return 16}}var Rr=null,gm=null,Kl=null;function w_(){if(Kl)return Kl;var t,e=gm,n=e.length,r,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function Ry(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sl:Ry,this.isPropagationStopped=Ry,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ym=Qt(Hi),Fa=je({},Hi,{view:0,detail:0}),f2=Qt(Fa),Vd,Fd,Io,gu=je({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Io&&(Io&&t.type==="mousemove"?(Vd=t.screenX-Io.screenX,Fd=t.screenY-Io.screenY):Fd=Vd=0,Io=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Fd}}),Py=Qt(gu),m2=je({},gu,{dataTransfer:0}),p2=Qt(m2),g2=je({},Fa,{relatedTarget:0}),Ud=Qt(g2),y2=je({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),v2=Qt(y2),w2=je({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_2=Qt(w2),x2=je({},Hi,{data:0}),jy=Qt(x2),b2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=T2[t])?!!e[t]:!1}function vm(){return I2}var S2=je({},Fa,{key:function(t){if(t.key){var e=b2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?E2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vm,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),N2=Qt(S2),k2=je({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dy=Qt(k2),C2=je({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vm}),A2=Qt(C2),R2=je({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),P2=Qt(R2),j2=je({},gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D2=Qt(j2),L2=[9,13,27,32],wm=er&&"CompositionEvent"in window,qo=null;er&&"documentMode"in document&&(qo=document.documentMode);var O2=er&&"TextEvent"in window&&!qo,__=er&&(!wm||qo&&8<qo&&11>=qo),Ly=" ",Oy=!1;function x_(t,e){switch(t){case"keyup":return L2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function M2(t,e){switch(t){case"compositionend":return b_(e);case"keypress":return e.which!==32?null:(Oy=!0,Ly);case"textInput":return t=e.data,t===Ly&&Oy?null:t;default:return null}}function V2(t,e){if(li)return t==="compositionend"||!wm&&x_(t,e)?(t=w_(),Kl=gm=Rr=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return __&&e.locale!=="ko"?null:e.data;default:return null}}var F2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!F2[t.type]:e==="textarea"}function E_(t,e,n,r){e_(r),e=Tc(e,"onChange"),0<e.length&&(n=new ym("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wo=null,ha=null;function U2(t){D_(t,0)}function yu(t){var e=di(t);if(Gw(e))return t}function $2(t,e){if(t==="change")return e}var T_=!1;if(er){var $d;if(er){var Bd="oninput"in document;if(!Bd){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Bd=typeof Vy.oninput=="function"}$d=Bd}else $d=!1;T_=$d&&(!document.documentMode||9<document.documentMode)}function Fy(){Wo&&(Wo.detachEvent("onpropertychange",I_),ha=Wo=null)}function I_(t){if(t.propertyName==="value"&&yu(ha)){var e=[];E_(e,ha,t,dm(t)),s_(U2,e)}}function B2(t,e,n){t==="focusin"?(Fy(),Wo=e,ha=n,Wo.attachEvent("onpropertychange",I_)):t==="focusout"&&Fy()}function z2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(ha)}function H2(t,e){if(t==="click")return yu(e)}function q2(t,e){if(t==="input"||t==="change")return yu(e)}function W2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:W2;function fa(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sh.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function Uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $y(t,e){var n=Uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uy(n)}}function S_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N_(){for(var t=window,e=yc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yc(t.document)}return e}function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G2(t){var e=N_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S_(n.ownerDocument.documentElement,n)){if(r!==null&&_m(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$y(n,i);var o=$y(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K2=er&&"documentMode"in document&&11>=document.documentMode,ci=null,qh=null,Go=null,Wh=!1;function By(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wh||ci==null||ci!==yc(r)||(r=ci,"selectionStart"in r&&_m(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Go&&fa(Go,r)||(Go=r,r=Tc(qh,"onSelect"),0<r.length&&(e=new ym("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ci)))}function Nl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},zd={},k_={};er&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function vu(t){if(zd[t])return zd[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k_)return zd[t]=e[n];return t}var C_=vu("animationend"),A_=vu("animationiteration"),R_=vu("animationstart"),P_=vu("transitionend"),j_=new Map,zy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){j_.set(t,e),Bs(e,[t])}for(var Hd=0;Hd<zy.length;Hd++){var qd=zy[Hd],Q2=qd.toLowerCase(),Y2=qd[0].toUpperCase()+qd.slice(1);ts(Q2,"on"+Y2)}ts(C_,"onAnimationEnd");ts(A_,"onAnimationIteration");ts(R_,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(P_,"onTransitionEnd");Ci("onMouseEnter",["mouseout","mouseover"]);Ci("onMouseLeave",["mouseout","mouseover"]);Ci("onPointerEnter",["pointerout","pointerover"]);Ci("onPointerLeave",["pointerout","pointerover"]);Bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function Hy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QI(r,e,void 0,t),t.currentTarget=null}function D_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Hy(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Hy(s,c,d),i=u}}}if(wc)throw t=$h,wc=!1,$h=null,t}function Ee(t,e){var n=e[Xh];n===void 0&&(n=e[Xh]=new Set);var r=t+"__bubble";n.has(r)||(L_(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),L_(n,t,r,e)}var kl="_reactListening"+Math.random().toString(36).slice(2);function ma(t){if(!t[kl]){t[kl]=!0,Bw.forEach(function(n){n!=="selectionchange"&&(X2.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kl]||(e[kl]=!0,Wd("selectionchange",!1,e))}}function L_(t,e,n,r){switch(v_(e)){case 1:var s=d2;break;case 4:s=h2;break;default:s=pm}n=s.bind(null,e,n,t),s=void 0,!Uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=vs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}s_(function(){var d=i,f=dm(n),m=[];e:{var g=j_.get(t);if(g!==void 0){var x=ym,N=t;switch(t){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":x=N2;break;case"focusin":N="focus",x=Ud;break;case"focusout":N="blur",x=Ud;break;case"beforeblur":case"afterblur":x=Ud;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=p2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=A2;break;case C_:case A_:case R_:x=v2;break;case P_:x=P2;break;case"scroll":x=f2;break;case"wheel":x=D2;break;case"copy":case"cut":case"paste":x=_2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Dy}var y=(e&4)!==0,C=!y&&t==="scroll",I=y?g!==null?g+"Capture":null:g;y=[];for(var w=d,E;w!==null;){E=w;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,I!==null&&(_=la(w,I),_!=null&&y.push(pa(w,_,E)))),C)break;w=w.return}0<y.length&&(g=new x(g,N,null,n,f),m.push({event:g,listeners:y}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==Vh&&(N=n.relatedTarget||n.fromElement)&&(vs(N)||N[tr]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(N=n.relatedTarget||n.toElement,x=d,N=N?vs(N):null,N!==null&&(C=zs(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(x=null,N=d),x!==N)){if(y=Py,_="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Dy,_="onPointerLeave",I="onPointerEnter",w="pointer"),C=x==null?g:di(x),E=N==null?g:di(N),g=new y(_,w+"leave",x,n,f),g.target=C,g.relatedTarget=E,_=null,vs(f)===d&&(y=new y(I,w+"enter",N,n,f),y.target=E,y.relatedTarget=C,_=y),C=_,x&&N)t:{for(y=x,I=N,w=0,E=y;E;E=ei(E))w++;for(E=0,_=I;_;_=ei(_))E++;for(;0<w-E;)y=ei(y),w--;for(;0<E-w;)I=ei(I),E--;for(;w--;){if(y===I||I!==null&&y===I.alternate)break t;y=ei(y),I=ei(I)}y=null}else y=null;x!==null&&qy(m,g,x,y,!1),N!==null&&C!==null&&qy(m,C,N,y,!0)}}e:{if(g=d?di(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var L=$2;else if(My(g))if(T_)L=q2;else{L=z2;var V=B2}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=H2);if(L&&(L=L(t,d))){E_(m,L,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&jh(g,"number",g.value)}switch(V=d?di(d):window,t){case"focusin":(My(V)||V.contentEditable==="true")&&(ci=V,qh=d,Go=null);break;case"focusout":Go=qh=ci=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,By(m,n,f);break;case"selectionchange":if(K2)break;case"keydown":case"keyup":By(m,n,f)}var T;if(wm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else li?x_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(__&&n.locale!=="ko"&&(li||v!=="onCompositionStart"?v==="onCompositionEnd"&&li&&(T=w_()):(Rr=f,gm="value"in Rr?Rr.value:Rr.textContent,li=!0)),V=Tc(d,v),0<V.length&&(v=new jy(v,t,null,n,f),m.push({event:v,listeners:V}),T?v.data=T:(T=b_(n),T!==null&&(v.data=T)))),(T=O2?M2(t,n):V2(t,n))&&(d=Tc(d,"onBeforeInput"),0<d.length&&(f=new jy("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=T))}D_(m,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Tc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=la(t,n),i!=null&&r.unshift(pa(t,i,s)),i=la(t,e),i!=null&&r.push(pa(t,i,s))),t=t.return}return r}function ei(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=la(n,i),u!=null&&o.unshift(pa(n,u,c))):s||(u=la(n,i),u!=null&&o.push(pa(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var J2=/\r\n?/g,Z2=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(J2,`
`).replace(Z2,"")}function Cl(t,e,n){if(e=Wy(e),Wy(t)!==e&&n)throw Error(z(425))}function Ic(){}var Gh=null,Kh=null;function Qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yh=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(t){return Gy.resolve(null).then(t).catch(nS)}:Yh;function nS(t){setTimeout(function(){throw t})}function Kd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);da(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ky(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),An="__reactFiber$"+qi,ga="__reactProps$"+qi,tr="__reactContainer$"+qi,Xh="__reactEvents$"+qi,rS="__reactListeners$"+qi,sS="__reactHandles$"+qi;function vs(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ky(t);t!==null;){if(n=t[An])return n;t=Ky(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[An]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function wu(t){return t[ga]||null}var Jh=[],hi=-1;function ns(t){return{current:t}}function Ie(t){0>hi||(t.current=Jh[hi],Jh[hi]=null,hi--)}function _e(t,e){hi++,Jh[hi]=t.current,t.current=e}var Gr={},mt=ns(Gr),Rt=ns(!1),Cs=Gr;function Ai(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Sc(){Ie(Rt),Ie(mt)}function Qy(t,e,n){if(mt.current!==Gr)throw Error(z(168));_e(mt,e),_e(Rt,n)}function O_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,BI(t)||"Unknown",s));return je({},n,r)}function Nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,Cs=mt.current,_e(mt,t),_e(Rt,Rt.current),!0}function Yy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=O_(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,Ie(Rt),Ie(mt),_e(mt,t)):Ie(Rt),_e(Rt,n)}var $n=null,_u=!1,Qd=!1;function M_(t){$n===null?$n=[t]:$n.push(t)}function iS(t){_u=!0,M_(t)}function rs(){if(!Qd&&$n!==null){Qd=!0;var t=0,e=ge;try{var n=$n;for(ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,_u=!1}catch(s){throw $n!==null&&($n=$n.slice(t+1)),l_(hm,rs),s}finally{ge=e,Qd=!1}}return null}var fi=[],mi=0,kc=null,Cc=0,Xt=[],Jt=0,As=null,Hn=1,qn="";function ps(t,e){fi[mi++]=Cc,fi[mi++]=kc,kc=t,Cc=e}function V_(t,e,n){Xt[Jt++]=Hn,Xt[Jt++]=qn,Xt[Jt++]=As,As=t;var r=Hn;t=qn;var s=32-pn(r)-1;r&=~(1<<s),n+=1;var i=32-pn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-pn(e)+s|n<<s|r,qn=i+t}else Hn=1<<i|n<<s|r,qn=t}function xm(t){t.return!==null&&(ps(t,1),V_(t,1,0))}function bm(t){for(;t===kc;)kc=fi[--mi],fi[mi]=null,Cc=fi[--mi],fi[mi]=null;for(;t===As;)As=Xt[--Jt],Xt[Jt]=null,qn=Xt[--Jt],Xt[Jt]=null,Hn=Xt[--Jt],Xt[Jt]=null}var qt=null,$t=null,Ne=!1,fn=null;function F_(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,$t=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:Hn,overflow:qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,$t=null,!0):!1;default:return!1}}function Zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ef(t){if(Ne){var e=$t;if(e){var n=e;if(!Xy(t,e)){if(Zh(t))throw Error(z(418));e=Mr(n.nextSibling);var r=qt;e&&Xy(t,e)?F_(r,n):(t.flags=t.flags&-4097|2,Ne=!1,qt=t)}}else{if(Zh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ne=!1,qt=t}}}function Jy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Al(t){if(t!==qt)return!1;if(!Ne)return Jy(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qh(t.type,t.memoizedProps)),e&&(e=$t)){if(Zh(t))throw U_(),Error(z(418));for(;e;)F_(t,e),e=Mr(e.nextSibling)}if(Jy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=qt?Mr(t.stateNode.nextSibling):null;return!0}function U_(){for(var t=$t;t;)t=Mr(t.nextSibling)}function Ri(){$t=qt=null,Ne=!1}function Em(t){fn===null?fn=[t]:fn.push(t)}var oS=dr.ReactCurrentBatchConfig;function So(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Rl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zy(t){var e=t._init;return e(t._payload)}function $_(t){function e(I,w){if(t){var E=I.deletions;E===null?(I.deletions=[w],I.flags|=16):E.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=$r(I,w),I.index=0,I.sibling=null,I}function i(I,w,E){return I.index=E,t?(E=I.alternate,E!==null?(E=E.index,E<w?(I.flags|=2,w):E):(I.flags|=2,w)):(I.flags|=1048576,w)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function c(I,w,E,_){return w===null||w.tag!==6?(w=nh(E,I.mode,_),w.return=I,w):(w=s(w,E),w.return=I,w)}function u(I,w,E,_){var L=E.type;return L===ai?f(I,w,E.props.children,_,E.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Er&&Zy(L)===w.type)?(_=s(w,E.props),_.ref=So(I,w,E),_.return=I,_):(_=nc(E.type,E.key,E.props,null,I.mode,_),_.ref=So(I,w,E),_.return=I,_)}function d(I,w,E,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=rh(E,I.mode,_),w.return=I,w):(w=s(w,E.children||[]),w.return=I,w)}function f(I,w,E,_,L){return w===null||w.tag!==7?(w=Is(E,I.mode,_,L),w.return=I,w):(w=s(w,E),w.return=I,w)}function m(I,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=nh(""+w,I.mode,E),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _l:return E=nc(w.type,w.key,w.props,null,I.mode,E),E.ref=So(I,null,w),E.return=I,E;case oi:return w=rh(w,I.mode,E),w.return=I,w;case Er:var _=w._init;return m(I,_(w._payload),E)}if(jo(w)||xo(w))return w=Is(w,I.mode,E,null),w.return=I,w;Rl(I,w)}return null}function g(I,w,E,_){var L=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:c(I,w,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case _l:return E.key===L?u(I,w,E,_):null;case oi:return E.key===L?d(I,w,E,_):null;case Er:return L=E._init,g(I,w,L(E._payload),_)}if(jo(E)||xo(E))return L!==null?null:f(I,w,E,_,null);Rl(I,E)}return null}function x(I,w,E,_,L){if(typeof _=="string"&&_!==""||typeof _=="number")return I=I.get(E)||null,c(w,I,""+_,L);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case _l:return I=I.get(_.key===null?E:_.key)||null,u(w,I,_,L);case oi:return I=I.get(_.key===null?E:_.key)||null,d(w,I,_,L);case Er:var V=_._init;return x(I,w,E,V(_._payload),L)}if(jo(_)||xo(_))return I=I.get(E)||null,f(w,I,_,L,null);Rl(w,_)}return null}function N(I,w,E,_){for(var L=null,V=null,T=w,v=w=0,S=null;T!==null&&v<E.length;v++){T.index>v?(S=T,T=null):S=T.sibling;var A=g(I,T,E[v],_);if(A===null){T===null&&(T=S);break}t&&T&&A.alternate===null&&e(I,T),w=i(A,w,v),V===null?L=A:V.sibling=A,V=A,T=S}if(v===E.length)return n(I,T),Ne&&ps(I,v),L;if(T===null){for(;v<E.length;v++)T=m(I,E[v],_),T!==null&&(w=i(T,w,v),V===null?L=T:V.sibling=T,V=T);return Ne&&ps(I,v),L}for(T=r(I,T);v<E.length;v++)S=x(T,I,v,E[v],_),S!==null&&(t&&S.alternate!==null&&T.delete(S.key===null?v:S.key),w=i(S,w,v),V===null?L=S:V.sibling=S,V=S);return t&&T.forEach(function(P){return e(I,P)}),Ne&&ps(I,v),L}function y(I,w,E,_){var L=xo(E);if(typeof L!="function")throw Error(z(150));if(E=L.call(E),E==null)throw Error(z(151));for(var V=L=null,T=w,v=w=0,S=null,A=E.next();T!==null&&!A.done;v++,A=E.next()){T.index>v?(S=T,T=null):S=T.sibling;var P=g(I,T,A.value,_);if(P===null){T===null&&(T=S);break}t&&T&&P.alternate===null&&e(I,T),w=i(P,w,v),V===null?L=P:V.sibling=P,V=P,T=S}if(A.done)return n(I,T),Ne&&ps(I,v),L;if(T===null){for(;!A.done;v++,A=E.next())A=m(I,A.value,_),A!==null&&(w=i(A,w,v),V===null?L=A:V.sibling=A,V=A);return Ne&&ps(I,v),L}for(T=r(I,T);!A.done;v++,A=E.next())A=x(T,I,v,A.value,_),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?v:A.key),w=i(A,w,v),V===null?L=A:V.sibling=A,V=A);return t&&T.forEach(function(j){return e(I,j)}),Ne&&ps(I,v),L}function C(I,w,E,_){if(typeof E=="object"&&E!==null&&E.type===ai&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case _l:e:{for(var L=E.key,V=w;V!==null;){if(V.key===L){if(L=E.type,L===ai){if(V.tag===7){n(I,V.sibling),w=s(V,E.props.children),w.return=I,I=w;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Er&&Zy(L)===V.type){n(I,V.sibling),w=s(V,E.props),w.ref=So(I,V,E),w.return=I,I=w;break e}n(I,V);break}else e(I,V);V=V.sibling}E.type===ai?(w=Is(E.props.children,I.mode,_,E.key),w.return=I,I=w):(_=nc(E.type,E.key,E.props,null,I.mode,_),_.ref=So(I,w,E),_.return=I,I=_)}return o(I);case oi:e:{for(V=E.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(I,w.sibling),w=s(w,E.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=rh(E,I.mode,_),w.return=I,I=w}return o(I);case Er:return V=E._init,C(I,w,V(E._payload),_)}if(jo(E))return N(I,w,E,_);if(xo(E))return y(I,w,E,_);Rl(I,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,E),w.return=I,I=w):(n(I,w),w=nh(E,I.mode,_),w.return=I,I=w),o(I)):n(I,w)}return C}var Pi=$_(!0),B_=$_(!1),Ac=ns(null),Rc=null,pi=null,Tm=null;function Im(){Tm=pi=Rc=null}function Sm(t){var e=Ac.current;Ie(Ac),t._currentValue=e}function tf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bi(t,e){Rc=t,Tm=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(Tm!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(Rc===null)throw Error(z(308));pi=t,Rc.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var ws=null;function Nm(t){ws===null?ws=[t]:ws.push(t)}function z_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nm(e)):(n.next=s.next,s.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function km(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nr(t,n)}return s=r.interleaved,s===null?(e.next=e,Nm(r)):(e.next=s.next,s.next=e),r.interleaved=e,nr(t,n)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}function e0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pc(t,e,n,r){var s=t.updateQueue;Tr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,x=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=t,y=c;switch(g=e,x=n,y.tag){case 1:if(N=y.payload,typeof N=="function"){m=N.call(x,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=y.payload,g=typeof N=="function"?N.call(x,m,g):N,g==null)break e;m=je({},m,g);break e;case 2:Tr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else x={eventTime:x,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=x,u=m):f=f.next=x,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ps|=o,t.lanes=o,t.memoizedState=m}}function t0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var $a={},jn=ns($a),ya=ns($a),va=ns($a);function _s(t){if(t===$a)throw Error(z(174));return t}function Cm(t,e){switch(_e(va,e),_e(ya,t),_e(jn,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}Ie(jn),_e(jn,e)}function ji(){Ie(jn),Ie(ya),Ie(va)}function q_(t){_s(va.current);var e=_s(jn.current),n=Lh(e,t.type);e!==n&&(_e(ya,t),_e(jn,n))}function Am(t){ya.current===t&&(Ie(jn),Ie(ya))}var Ae=ns(0);function jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yd=[];function Rm(){for(var t=0;t<Yd.length;t++)Yd[t]._workInProgressVersionPrimary=null;Yd.length=0}var Xl=dr.ReactCurrentDispatcher,Xd=dr.ReactCurrentBatchConfig,Rs=0,Pe=null,We=null,Xe=null,Dc=!1,Ko=!1,wa=0,aS=0;function lt(){throw Error(z(321))}function Pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function jm(t,e,n,r,s,i){if(Rs=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xl.current=t===null||t.memoizedState===null?dS:hS,t=n(r,s),Ko){i=0;do{if(Ko=!1,wa=0,25<=i)throw Error(z(301));i+=1,Xe=We=null,e.updateQueue=null,Xl.current=fS,t=n(r,s)}while(Ko)}if(Xl.current=Lc,e=We!==null&&We.next!==null,Rs=0,Xe=We=Pe=null,Dc=!1,e)throw Error(z(300));return t}function Dm(){var t=wa!==0;return wa=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function sn(){if(We===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Xe===null?Pe.memoizedState:Xe.next;if(e!==null)Xe=e,We=t;else{if(t===null)throw Error(z(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Xe===null?Pe.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function _a(t,e){return typeof e=="function"?e(t):e}function Jd(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Rs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Pe.lanes|=f,Ps|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,vn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,Ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zd(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function W_(){}function G_(t,e){var n=Pe,r=sn(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,Lm(Y_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,xa(9,Q_.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(z(349));Rs&30||K_(n,e,s)}return s}function K_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,X_(e)&&J_(t)}function Y_(t,e,n){return n(function(){X_(e)&&J_(t)})}function X_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function J_(t){var e=nr(t,1);e!==null&&gn(e,t,1,-1)}function n0(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},e.queue=t,t=t.dispatch=uS.bind(null,Pe,t),[e.memoizedState,t]}function xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z_(){return sn().memoizedState}function Jl(t,e,n,r){var s=kn();Pe.flags|=t,s.memoizedState=xa(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&Pm(r,o.deps)){s.memoizedState=xa(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=xa(1|e,n,i,r)}function r0(t,e){return Jl(8390656,8,t,e)}function Lm(t,e){return xu(2048,8,t,e)}function ex(t,e){return xu(4,2,t,e)}function tx(t,e){return xu(4,4,t,e)}function nx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rx(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,nx.bind(null,e,t),n)}function Om(){}function sx(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ix(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ox(t,e,n){return Rs&21?(vn(n,e)||(n=d_(),Pe.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function lS(t,e){var n=ge;ge=n!==0&&4>n?n:4,t(!0);var r=Xd.transition;Xd.transition={};try{t(!1),e()}finally{ge=n,Xd.transition=r}}function ax(){return sn().memoizedState}function cS(t,e,n){var r=Ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lx(t))cx(e,n);else if(n=z_(t,e,n,r),n!==null){var s=_t();gn(n,t,r,s),ux(n,e,r)}}function uS(t,e,n){var r=Ur(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lx(t))cx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,vn(c,o)){var u=e.interleaved;u===null?(s.next=s,Nm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=z_(t,e,s,r),n!==null&&(s=_t(),gn(n,t,r,s),ux(n,e,r))}}function lx(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function cx(t,e){Ko=Dc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ux(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}var Lc={readContext:rn,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},dS={readContext:rn,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:r0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jl(4194308,4,nx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jl(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cS.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:n0,useDebugValue:Om,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=n0(!1),e=t[0];return t=lS.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=kn();if(Ne){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ze===null)throw Error(z(349));Rs&30||K_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,r0(Y_.bind(null,r,i,t),[t]),r.flags|=2048,xa(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=kn(),e=Ze.identifierPrefix;if(Ne){var n=qn,r=Hn;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hS={readContext:rn,useCallback:sx,useContext:rn,useEffect:Lm,useImperativeHandle:rx,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Jd,useRef:Z_,useState:function(){return Jd(_a)},useDebugValue:Om,useDeferredValue:function(t){var e=sn();return ox(e,We.memoizedState,t)},useTransition:function(){var t=Jd(_a)[0],e=sn().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:ax,unstable_isNewReconciler:!1},fS={readContext:rn,useCallback:sx,useContext:rn,useEffect:Lm,useImperativeHandle:rx,useInsertionEffect:ex,useLayoutEffect:tx,useMemo:ix,useReducer:Zd,useRef:Z_,useState:function(){return Zd(_a)},useDebugValue:Om,useDeferredValue:function(t){var e=sn();return We===null?e.memoizedState=t:ox(e,We.memoizedState,t)},useTransition:function(){var t=Zd(_a)[0],e=sn().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:ax,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bu={isMounted:function(t){return(t=t._reactInternals)?zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Ur(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(gn(e,t,s,r),Yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Ur(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vr(t,i,s),e!==null&&(gn(e,t,s,r),Yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Ur(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vr(t,s,r),e!==null&&(gn(e,t,r,n),Yl(e,t,r))}};function s0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(s,i):!0}function dx(t,e,n){var r=!1,s=Gr,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=Pt(e)?Cs:mt.current,r=e.contextTypes,i=(r=r!=null)?Ai(t,s):Gr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function i0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bu.enqueueReplaceState(e,e.state,null)}function rf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},km(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=Pt(e)?Cs:mt.current,s.context=Ai(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(nf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bu.enqueueReplaceState(s,s.state,null),Pc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Di(t,e){try{var n="",r=e;do n+=$I(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mS=typeof WeakMap=="function"?WeakMap:Map;function hx(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mc||(Mc=!0,pf=r),sf(t,e)},n}function fx(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sf(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function o0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kS.bind(null,t,e,n),e.then(t,t))}function a0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var pS=dr.ReactCurrentOwner,At=!1;function wt(t,e,n,r){e.child=t===null?B_(e,null,n,r):Pi(e,t.child,n,r)}function c0(t,e,n,r,s){n=n.render;var i=e.ref;return bi(e,s),r=jm(t,e,n,r,i,s),n=Dm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Ne&&n&&xm(e),e.flags|=1,wt(t,e,r,s),e.child)}function u0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mx(t,e,i,r,s)):(t=nc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return rr(t,e,s)}return e.flags|=1,t=$r(i,r),t.ref=e.ref,t.return=e,e.child=t}function mx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fa(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,rr(t,e,s)}return of(t,e,n,r,s)}function px(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(yi,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(yi,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(yi,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(yi,Ft),Ft|=r;return wt(t,e,s,n),e.child}function gx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function of(t,e,n,r,s){var i=Pt(n)?Cs:mt.current;return i=Ai(e,i),bi(e,s),n=jm(t,e,n,r,i,s),r=Dm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(Ne&&r&&xm(e),e.flags|=1,wt(t,e,n,s),e.child)}function d0(t,e,n,r,s){if(Pt(n)){var i=!0;Nc(e)}else i=!1;if(bi(e,s),e.stateNode===null)Zl(t,e),dx(e,n,r),rf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=rn(d):(d=Pt(n)?Cs:mt.current,d=Ai(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&i0(e,o,r,d),Tr=!1;var g=e.memoizedState;o.state=g,Pc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Rt.current||Tr?(typeof f=="function"&&(nf(e,n,f,r),u=e.memoizedState),(c=Tr||s0(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,H_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:dn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Pt(n)?Cs:mt.current,u=Ai(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&i0(e,o,r,u),Tr=!1,g=e.memoizedState,o.state=g,Pc(e,r,o,s);var N=e.memoizedState;c!==m||g!==N||Rt.current||Tr?(typeof x=="function"&&(nf(e,n,x,r),N=e.memoizedState),(d=Tr||s0(e,n,d,r,g,N,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return af(t,e,n,r,i,s)}function af(t,e,n,r,s,i){gx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yy(e,n,!1),rr(t,e,i);r=e.stateNode,pS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Pi(e,t.child,null,i),e.child=Pi(e,null,c,i)):wt(t,e,c,i),e.memoizedState=r.state,s&&Yy(e,n,!0),e.child}function yx(t){var e=t.stateNode;e.pendingContext?Qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qy(t,e.context,!1),Cm(t,e.containerInfo)}function h0(t,e,n,r,s){return Ri(),Em(s),e.flags|=256,wt(t,e,n,r),e.child}var lf={dehydrated:null,treeContext:null,retryLane:0};function cf(t){return{baseLanes:t,cachePool:null,transitions:null}}function vx(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ae,s&1),t===null)return ef(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Iu(o,r,0,null),t=Is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cf(n),e.memoizedState=lf,t):Mm(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return gS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$r(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=$r(c,i):(i=Is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lf,r}return i=t.child,t=i.sibling,r=$r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mm(t,e){return e=Iu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,r){return r!==null&&Em(r),Pi(e,t.child,null,n),t=Mm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=eh(Error(z(422))),Pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Iu({mode:"visible",children:r.children},s,0,null),i=Is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pi(e,t.child,null,o),e.child.memoizedState=cf(o),e.memoizedState=lf,i);if(!(e.mode&1))return Pl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=eh(i,r,void 0),Pl(t,e,o,r)}if(c=(o&t.childLanes)!==0,At||c){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nr(t,s),gn(r,t,s,-1))}return zm(),r=eh(Error(z(421))),Pl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Mr(s.nextSibling),qt=e,Ne=!0,fn=null,t!==null&&(Xt[Jt++]=Hn,Xt[Jt++]=qn,Xt[Jt++]=As,Hn=t.id,qn=t.overflow,As=e),e=Mm(e,r.children),e.flags|=4096,e)}function f0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tf(t.return,e,n)}function th(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function wx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,n,e);else if(t.tag===19)f0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),th(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}th(e,!0,n,null,i);break;case"together":th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yS(t,e,n){switch(e.tag){case 3:yx(e),Ri();break;case 5:q_(e);break;case 1:Pt(e.type)&&Nc(e);break;case 4:Cm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(Ac,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?vx(t,e,n):(_e(Ae,Ae.current&1),t=rr(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,px(t,e,n)}return rr(t,e,n)}var _x,uf,xx,bx;_x=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uf=function(){};xx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_s(jn.current);var i=null;switch(n){case"input":s=Rh(t,s),r=Rh(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=Dh(t,s),r=Dh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ic)}Oh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ee("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};bx=function(t,e,n,r){n!==r&&(e.flags|=4)};function No(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vS(t,e,n){var r=e.pendingProps;switch(bm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Pt(e.type)&&Sc(),ct(e),null;case 3:return r=e.stateNode,ji(),Ie(Rt),Ie(mt),Rm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(vf(fn),fn=null))),uf(t,e),ct(e),null;case 5:Am(e);var s=_s(va.current);if(n=e.type,t!==null&&e.stateNode!=null)xx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ct(e),null}if(t=_s(jn.current),Al(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[ga]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Lo.length;s++)Ee(Lo[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":by(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Ty(r,i),Ee("invalid",r)}Oh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Cl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Cl(r.textContent,c,t),s=["children",""+c]):oa.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":xl(r),Ey(r,i,!0);break;case"textarea":xl(r),Iy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ic)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[ga]=r,_x(t,e,!1,!1),e.stateNode=t;e:{switch(o=Mh(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lo.length;s++)Ee(Lo[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":by(t,r),s=Rh(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Ty(t,r),s=Dh(t,r),Ee("invalid",t);break;default:s=r}Oh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Zw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&aa(t,u):typeof u=="number"&&aa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&am(t,i,u,o))}switch(n){case"input":xl(t),Ey(t,r,!1);break;case"textarea":xl(t),Iy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?vi(t,!!r.multiple,i,!1):r.defaultValue!=null&&vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)bx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=_s(va.current),_s(jn.current),Al(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return ct(e),null;case 13:if(Ie(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&$t!==null&&e.mode&1&&!(e.flags&128))U_(),Ri(),e.flags|=98560,i=!1;else if(i=Al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[An]=e}else Ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),i=!1}else fn!==null&&(vf(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ge===0&&(Ge=3):zm())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return ji(),uf(t,e),t===null&&ma(e.stateNode.containerInfo),ct(e),null;case 10:return Sm(e.type._context),ct(e),null;case 17:return Pt(e.type)&&Sc(),ct(e),null;case 19:if(Ie(Ae),i=e.memoizedState,i===null)return ct(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)No(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jc(t),o!==null){for(e.flags|=128,No(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ue()>Li&&(e.flags|=128,r=!0,No(i,!1),e.lanes=4194304)}else{if(!r)if(t=jc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ne)return ct(e),null}else 2*Ue()-i.renderingStartTime>Li&&n!==1073741824&&(e.flags|=128,r=!0,No(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ue(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return Bm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function wS(t,e){switch(bm(e),e.tag){case 1:return Pt(e.type)&&Sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ji(),Ie(Rt),Ie(mt),Rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if(Ie(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ae),null;case 4:return ji(),null;case 10:return Sm(e.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var jl=!1,ht=!1,_S=typeof WeakSet=="function"?WeakSet:Set,Y=null;function gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function df(t,e,n){try{n()}catch(r){Me(t,e,r)}}var m0=!1;function xS(t,e){if(Gh=bc,t=N_(),_m(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var x;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)g=m,m=x;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(x=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=x}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kh={focusedElem:t,selectionRange:n},bc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var y=N.memoizedProps,C=N.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?y:dn(e.type,y),C);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(_){Me(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return N=m0,m0=!1,N}function Qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&df(e,n,i)}s=s.next}while(s!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ex(t){var e=t.alternate;e!==null&&(t.alternate=null,Ex(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[ga],delete e[Xh],delete e[rS],delete e[sS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tx(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ic));else if(r!==4&&(t=t.child,t!==null))for(ff(t,e,n),t=t.sibling;t!==null;)ff(t,e,n),t=t.sibling}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var tt=null,hn=!1;function xr(t,e,n){for(n=n.child;n!==null;)Ix(t,e,n),n=n.sibling}function Ix(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(pu,n)}catch{}switch(n.tag){case 5:ht||gi(n,e);case 6:var r=tt,s=hn;tt=null,xr(t,e,n),tt=r,hn=s,tt!==null&&(hn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(hn?(t=tt,n=n.stateNode,t.nodeType===8?Kd(t.parentNode,n):t.nodeType===1&&Kd(t,n),da(t)):Kd(tt,n.stateNode));break;case 4:r=tt,s=hn,tt=n.stateNode.containerInfo,hn=!0,xr(t,e,n),tt=r,hn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&df(n,e,o),s=s.next}while(s!==r)}xr(t,e,n);break;case 1:if(!ht&&(gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Me(n,e,c)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,xr(t,e,n),ht=r):xr(t,e,n);break;default:xr(t,e,n)}}function g0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _S),e.forEach(function(r){var s=AS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:tt=c.stateNode,hn=!1;break e;case 3:tt=c.stateNode.containerInfo,hn=!0;break e;case 4:tt=c.stateNode.containerInfo,hn=!0;break e}c=c.return}if(tt===null)throw Error(z(160));Ix(i,o,s),tt=null,hn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sx(e,t),e=e.sibling}function Sx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),Nn(t),r&4){try{Qo(3,t,t.return),Eu(3,t)}catch(y){Me(t,t.return,y)}try{Qo(5,t,t.return)}catch(y){Me(t,t.return,y)}}break;case 1:un(e,t),Nn(t),r&512&&n!==null&&gi(n,n.return);break;case 5:if(un(e,t),Nn(t),r&512&&n!==null&&gi(n,n.return),t.flags&32){var s=t.stateNode;try{aa(s,"")}catch(y){Me(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Kw(s,i),Mh(c,o);var d=Mh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Zw(s,m):f==="dangerouslySetInnerHTML"?Xw(s,m):f==="children"?aa(s,m):am(s,f,m,d)}switch(c){case"input":Ph(s,i);break;case"textarea":Qw(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?vi(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?vi(s,!!i.multiple,i.defaultValue,!0):vi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ga]=i}catch(y){Me(t,t.return,y)}}break;case 6:if(un(e,t),Nn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Me(t,t.return,y)}}break;case 3:if(un(e,t),Nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(y){Me(t,t.return,y)}break;case 4:un(e,t),Nn(t);break;case 13:un(e,t),Nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Um=Ue())),r&4&&g0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,un(e,t),ht=d):un(e,t),Nn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(m=Y=f;Y!==null;){switch(g=Y,x=g.child,g.tag){case 0:case 11:case 14:case 15:Qo(4,g,g.return);break;case 1:gi(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(y){Me(r,n,y)}}break;case 5:gi(g,g.return);break;case 22:if(g.memoizedState!==null){v0(m);continue}}x!==null?(x.return=g,Y=x):v0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Jw("display",o))}catch(y){Me(t,t.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){Me(t,t.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:un(e,t),Nn(t),r&4&&g0(t);break;case 21:break;default:un(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tx(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(aa(s,""),r.flags&=-33);var i=p0(t);mf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=p0(t);ff(t,c,o);break;default:throw Error(z(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bS(t,e,n){Y=t,Nx(t)}function Nx(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ht;c=jl;var d=ht;if(jl=o,(ht=u)&&!d)for(Y=s;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?w0(s):u!==null?(u.return=o,Y=u):w0(s);for(;i!==null;)Y=i,Nx(i),i=i.sibling;Y=s,jl=c,ht=d}y0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):y0(t)}}function y0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&t0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t0(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&da(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ht||e.flags&512&&hf(e)}catch(g){Me(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function v0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function w0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{hf(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{hf(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var ES=Math.ceil,Oc=dr.ReactCurrentDispatcher,Vm=dr.ReactCurrentOwner,tn=dr.ReactCurrentBatchConfig,de=0,Ze=null,Be=null,st=0,Ft=0,yi=ns(0),Ge=0,ba=null,Ps=0,Tu=0,Fm=0,Yo=null,Nt=null,Um=0,Li=1/0,Un=null,Mc=!1,pf=null,Fr=null,Dl=!1,Pr=null,Vc=0,Xo=0,gf=null,ec=-1,tc=0;function _t(){return de&6?Ue():ec!==-1?ec:ec=Ue()}function Ur(t){return t.mode&1?de&2&&st!==0?st&-st:oS.transition!==null?(tc===0&&(tc=d_()),tc):(t=ge,t!==0||(t=window.event,t=t===void 0?16:v_(t.type)),t):1}function gn(t,e,n,r){if(50<Xo)throw Xo=0,gf=null,Error(z(185));Va(t,n,r),(!(de&2)||t!==Ze)&&(t===Ze&&(!(de&2)&&(Tu|=n),Ge===4&&Sr(t,st)),jt(t,r),n===1&&de===0&&!(e.mode&1)&&(Li=Ue()+500,_u&&rs()))}function jt(t,e){var n=t.callbackNode;o2(t,e);var r=xc(t,t===Ze?st:0);if(r===0)n!==null&&ky(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ky(n),e===1)t.tag===0?iS(_0.bind(null,t)):M_(_0.bind(null,t)),tS(function(){!(de&6)&&rs()}),n=null;else{switch(h_(r)){case 1:n=hm;break;case 4:n=c_;break;case 16:n=_c;break;case 536870912:n=u_;break;default:n=_c}n=Lx(n,kx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kx(t,e){if(ec=-1,tc=0,de&6)throw Error(z(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=xc(t,t===Ze?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fc(t,r);else{e=r;var s=de;de|=2;var i=Ax();(Ze!==t||st!==e)&&(Un=null,Li=Ue()+500,Ts(t,e));do try{SS();break}catch(c){Cx(t,c)}while(!0);Im(),Oc.current=i,de=s,Be!==null?e=0:(Ze=null,st=0,e=Ge)}if(e!==0){if(e===2&&(s=Bh(t),s!==0&&(r=s,e=yf(t,s))),e===1)throw n=ba,Ts(t,0),Sr(t,r),jt(t,Ue()),n;if(e===6)Sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!TS(s)&&(e=Fc(t,r),e===2&&(i=Bh(t),i!==0&&(r=i,e=yf(t,i))),e===1))throw n=ba,Ts(t,0),Sr(t,r),jt(t,Ue()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:gs(t,Nt,Un);break;case 3:if(Sr(t,r),(r&130023424)===r&&(e=Um+500-Ue(),10<e)){if(xc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yh(gs.bind(null,t,Nt,Un),e);break}gs(t,Nt,Un);break;case 4:if(Sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ES(r/1960))-r,10<r){t.timeoutHandle=Yh(gs.bind(null,t,Nt,Un),r);break}gs(t,Nt,Un);break;case 5:gs(t,Nt,Un);break;default:throw Error(z(329))}}}return jt(t,Ue()),t.callbackNode===n?kx.bind(null,t):null}function yf(t,e){var n=Yo;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=Fc(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&vf(e)),t}function vf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function TS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~Fm,e&=~Tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),r=1<<n;t[n]=-1,e&=~r}}function _0(t){if(de&6)throw Error(z(327));Ei();var e=xc(t,0);if(!(e&1))return jt(t,Ue()),null;var n=Fc(t,e);if(t.tag!==0&&n===2){var r=Bh(t);r!==0&&(e=r,n=yf(t,r))}if(n===1)throw n=ba,Ts(t,0),Sr(t,e),jt(t,Ue()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,Nt,Un),jt(t,Ue()),null}function $m(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Li=Ue()+500,_u&&rs())}}function js(t){Pr!==null&&Pr.tag===0&&!(de&6)&&Ei();var e=de;de|=1;var n=tn.transition,r=ge;try{if(tn.transition=null,ge=1,t)return t()}finally{ge=r,tn.transition=n,de=e,!(de&6)&&rs()}}function Bm(){Ft=yi.current,Ie(yi)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eS(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(bm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sc();break;case 3:ji(),Ie(Rt),Ie(mt),Rm();break;case 5:Am(r);break;case 4:ji();break;case 13:Ie(Ae);break;case 19:Ie(Ae);break;case 10:Sm(r.type._context);break;case 22:case 23:Bm()}n=n.return}if(Ze=t,Be=t=$r(t.current,null),st=Ft=e,Ge=0,ba=null,Fm=Tu=Ps=0,Nt=Yo=null,ws!==null){for(e=0;e<ws.length;e++)if(n=ws[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ws=null}return t}function Cx(t,e){do{var n=Be;try{if(Im(),Xl.current=Lc,Dc){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dc=!1}if(Rs=0,Xe=We=Pe=null,Ko=!1,wa=0,Vm.current=null,n===null||n.return===null){Ge=1,ba=e,Be=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=st,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=a0(o);if(x!==null){x.flags&=-257,l0(x,o,c,i,e),x.mode&1&&o0(i,d,e),e=x,u=d;var N=e.updateQueue;if(N===null){var y=new Set;y.add(u),e.updateQueue=y}else N.add(u);break e}else{if(!(e&1)){o0(i,d,e),zm();break e}u=Error(z(426))}}else if(Ne&&c.mode&1){var C=a0(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),l0(C,o,c,i,e),Em(Di(u,c));break e}}i=u=Di(u,c),Ge!==4&&(Ge=2),Yo===null?Yo=[i]:Yo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=hx(i,u,e);e0(i,I);break e;case 1:c=u;var w=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Fr===null||!Fr.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=fx(i,c,e);e0(i,_);break e}}i=i.return}while(i!==null)}Px(n)}catch(L){e=L,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Ax(){var t=Oc.current;return Oc.current=Lc,t===null?Lc:t}function zm(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Ze===null||!(Ps&268435455)&&!(Tu&268435455)||Sr(Ze,st)}function Fc(t,e){var n=de;de|=2;var r=Ax();(Ze!==t||st!==e)&&(Un=null,Ts(t,e));do try{IS();break}catch(s){Cx(t,s)}while(!0);if(Im(),de=n,Oc.current=r,Be!==null)throw Error(z(261));return Ze=null,st=0,Ge}function IS(){for(;Be!==null;)Rx(Be)}function SS(){for(;Be!==null&&!XI();)Rx(Be)}function Rx(t){var e=Dx(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?Px(t):Be=e,Vm.current=null}function Px(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wS(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Be=null;return}}else if(n=vS(n,e,Ft),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ge===0&&(Ge=5)}function gs(t,e,n){var r=ge,s=tn.transition;try{tn.transition=null,ge=1,NS(t,e,n,r)}finally{tn.transition=s,ge=r}return null}function NS(t,e,n,r){do Ei();while(Pr!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(a2(t,i),t===Ze&&(Be=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,Lx(_c,function(){return Ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=ge;ge=1;var c=de;de|=4,Vm.current=null,xS(t,n),Sx(n,t),G2(Kh),bc=!!Gh,Kh=Gh=null,t.current=n,bS(n),JI(),de=c,ge=o,tn.transition=i}else t.current=n;if(Dl&&(Dl=!1,Pr=t,Vc=s),i=t.pendingLanes,i===0&&(Fr=null),t2(n.stateNode),jt(t,Ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mc)throw Mc=!1,t=pf,pf=null,t;return Vc&1&&t.tag!==0&&Ei(),i=t.pendingLanes,i&1?t===gf?Xo++:(Xo=0,gf=t):Xo=0,rs(),null}function Ei(){if(Pr!==null){var t=h_(Vc),e=tn.transition,n=ge;try{if(tn.transition=null,ge=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Vc=0,de&6)throw Error(z(331));var s=de;for(de|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Y=d;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:Qo(8,f,i)}var m=f.child;if(m!==null)m.return=f,Y=m;else for(;Y!==null;){f=Y;var g=f.sibling,x=f.return;if(Ex(f),f===d){Y=null;break}if(g!==null){g.return=x,Y=g;break}Y=x}}}var N=i.alternate;if(N!==null){var y=N.child;if(y!==null){N.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qo(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,Y=I;break e}Y=i.return}}var w=t.current;for(Y=w;Y!==null;){o=Y;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Y=E;else e:for(o=w;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Eu(9,c)}}catch(L){Me(c,c.return,L)}if(c===o){Y=null;break e}var _=c.sibling;if(_!==null){_.return=c.return,Y=_;break e}Y=c.return}}if(de=s,rs(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(pu,t)}catch{}r=!0}return r}finally{ge=n,tn.transition=e}}return!1}function x0(t,e,n){e=Di(n,e),e=hx(t,e,1),t=Vr(t,e,1),e=_t(),t!==null&&(Va(t,1,e),jt(t,e))}function Me(t,e,n){if(t.tag===3)x0(t,t,n);else for(;e!==null;){if(e.tag===3){x0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Di(n,t),t=fx(e,t,1),e=Vr(e,t,1),t=_t(),e!==null&&(Va(e,1,t),jt(e,t));break}}e=e.return}}function kS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(Ge===4||Ge===3&&(st&130023424)===st&&500>Ue()-Um?Ts(t,0):Fm|=n),jt(t,e)}function jx(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=_t();t=nr(t,e),t!==null&&(Va(t,e,n),jt(t,n))}function CS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jx(t,n)}function AS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),jx(t,n)}var Dx;Dx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,yS(t,e,n);At=!!(t.flags&131072)}else At=!1,Ne&&e.flags&1048576&&V_(e,Cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zl(t,e),t=e.pendingProps;var s=Ai(e,mt.current);bi(e,n),s=jm(null,e,r,t,s,n);var i=Dm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,km(e),s.updater=bu,e.stateNode=s,s._reactInternals=e,rf(e,r,t,n),e=af(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&xm(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=PS(r),t=dn(r,t),s){case 0:e=of(null,e,r,t,n);break e;case 1:e=d0(null,e,r,t,n);break e;case 11:e=c0(null,e,r,t,n);break e;case 14:e=u0(null,e,r,dn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),of(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),d0(t,e,r,s,n);case 3:e:{if(yx(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,H_(t,e),Pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Di(Error(z(423)),e),e=h0(t,e,r,n,s);break e}else if(r!==s){s=Di(Error(z(424)),e),e=h0(t,e,r,n,s);break e}else for($t=Mr(e.stateNode.containerInfo.firstChild),qt=e,Ne=!0,fn=null,n=B_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ri(),r===s){e=rr(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return q_(e),t===null&&ef(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qh(r,s)?o=null:i!==null&&Qh(r,i)&&(e.flags|=32),gx(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&ef(e),null;case 13:return vx(t,e,n);case 4:return Cm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),c0(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Ac,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!Rt.current){e=rr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),tf(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),tf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bi(e,n),s=rn(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=dn(r,e.pendingProps),s=dn(r.type,s),u0(t,e,r,s,n);case 15:return mx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Zl(t,e),e.tag=1,Pt(r)?(t=!0,Nc(e)):t=!1,bi(e,n),dx(e,r,s),rf(e,r,s,n),af(null,e,r,!0,t,n);case 19:return wx(t,e,n);case 22:return px(t,e,n)}throw Error(z(156,e.tag))};function Lx(t,e){return l_(t,e)}function RS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new RS(t,e,n,r)}function Hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PS(t){if(typeof t=="function")return Hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cm)return 11;if(t===um)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ai:return Is(n.children,s,i,e);case lm:o=8,s|=8;break;case Nh:return t=en(12,n,e,s|2),t.elementType=Nh,t.lanes=i,t;case kh:return t=en(13,n,e,s),t.elementType=kh,t.lanes=i,t;case Ch:return t=en(19,n,e,s),t.elementType=Ch,t.lanes=i,t;case qw:return Iu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zw:o=10;break e;case Hw:o=9;break e;case cm:o=11;break e;case um:o=14;break e;case Er:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=en(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Is(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Iu(t,e,n,r){return t=en(22,t,r,e),t.elementType=qw,t.lanes=n,t.stateNode={isHidden:!1},t}function nh(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function rh(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qm(t,e,n,r,s,i,o,c,u){return t=new jS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},km(i),t}function DS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ox(t){if(!t)return Gr;t=t._reactInternals;e:{if(zs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Pt(n))return O_(t,n,e)}return e}function Mx(t,e,n,r,s,i,o,c,u){return t=qm(n,r,!0,t,s,i,o,c,u),t.context=Ox(null),n=t.current,r=_t(),s=Ur(n),i=Qn(r,s),i.callback=e??null,Vr(n,i,s),t.current.lanes=s,Va(t,s,r),jt(t,r),t}function Su(t,e,n,r){var s=e.current,i=_t(),o=Ur(s);return n=Ox(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(s,e,o),t!==null&&(gn(t,s,o,i),Yl(t,s,o)),o}function Uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wm(t,e){b0(t,e),(t=t.alternate)&&b0(t,e)}function LS(){return null}var Vx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gm(t){this._internalRoot=t}Nu.prototype.render=Gm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Su(t,e,null,null)};Nu.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){Su(null,t,null,null)}),e[tr]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=p_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&y_(t)}};function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E0(){}function OS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Uc(o);i.call(d)}}var o=Mx(e,r,t,0,null,!1,!1,"",E0);return t._reactRootContainer=o,t[tr]=o.current,ma(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Uc(u);c.call(d)}}var u=qm(t,0,!1,null,null,!1,!1,"",E0);return t._reactRootContainer=u,t[tr]=u.current,ma(t.nodeType===8?t.parentNode:t),js(function(){Su(e,u,n,r)}),u}function Cu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Uc(o);c.call(u)}}Su(e,o,t,s)}else o=OS(n,e,t,s,r);return Uc(o)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Do(e.pendingLanes);n!==0&&(fm(e,n|1),jt(e,Ue()),!(de&6)&&(Li=Ue()+500,rs()))}break;case 13:js(function(){var r=nr(t,1);if(r!==null){var s=_t();gn(r,t,1,s)}}),Wm(t,1)}};mm=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=_t();gn(e,t,134217728,n)}Wm(t,134217728)}};m_=function(t){if(t.tag===13){var e=Ur(t),n=nr(t,e);if(n!==null){var r=_t();gn(n,t,e,r)}Wm(t,e)}};p_=function(){return ge};g_=function(t,e){var n=ge;try{return ge=t,e()}finally{ge=n}};Fh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wu(r);if(!s)throw Error(z(90));Gw(r),Ph(r,s)}}}break;case"textarea":Qw(t,n);break;case"select":e=n.value,e!=null&&vi(t,!!n.multiple,e,!1)}};n_=$m;r_=js;var MS={usingClientEntryPoint:!1,Events:[Ua,di,wu,e_,t_,$m]},ko={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VS={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=o_(t),t===null?null:t.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{pu=Ll.inject(VS),Pn=Ll}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MS;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(e))throw Error(z(200));return DS(t,e,null,n)};Kt.createRoot=function(t,e){if(!Km(t))throw Error(z(299));var n=!1,r="",s=Vx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qm(t,1,!1,null,null,n,!1,r,s),t[tr]=e.current,ma(t.nodeType===8?t.parentNode:t),new Gm(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=o_(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return js(t)};Kt.hydrate=function(t,e,n){if(!ku(e))throw Error(z(200));return Cu(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Km(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Vx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Mx(e,null,t,1,n??null,s,!1,i,o),t[tr]=e.current,ma(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nu(e)};Kt.render=function(t,e,n){if(!ku(e))throw Error(z(200));return Cu(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!ku(t))throw Error(z(40));return t._reactRootContainer?(js(function(){Cu(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};Kt.unstable_batchedUpdates=$m;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Cu(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function Fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fx)}catch(t){console.error(t)}}Fx(),Fw.exports=Kt;var FS=Fw.exports,T0=FS;Ih.createRoot=T0.createRoot,Ih.hydrateRoot=T0.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var I0="popstate";function US(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return wf("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ea(s)}return BS(e,n,null,t)}function ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $S(){return Math.random().toString(36).substring(2,10)}function S0(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Wi(e):e,state:n,key:e&&e.key||r||$S()}}function Ea({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Wi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function BS(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function m(){c="POP";let C=f(),I=C==null?null:C-d;d=C,u&&u({action:c,location:y.location,delta:I})}function g(C,I){c="PUSH";let w=wf(y.location,C,I);d=f()+1;let E=S0(w,d),_=y.createHref(w);try{o.pushState(E,"",_)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(_)}i&&u&&u({action:c,location:y.location,delta:1})}function x(C,I){c="REPLACE";let w=wf(y.location,C,I);d=f();let E=S0(w,d),_=y.createHref(w);o.replaceState(E,"",_),i&&u&&u({action:c,location:y.location,delta:0})}function N(C){return zS(C)}let y={get action(){return c},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(I0,m),u=C,()=>{s.removeEventListener(I0,m),u=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let I=N(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:g,replace:x,go(C){return o.go(C)}};return y}function zS(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ke(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ea(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Ux(t,e,n="/"){return HS(t,e,n,!1)}function HS(t,e,n,r){let s=typeof e=="string"?Wi(e):e,i=sr(s.pathname||"/",n);if(i==null)return null;let o=$x(t);qS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=nN(i);c=eN(o[u],d,r)}return c}function $x(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;ke(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=Yn([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(ke(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),$x(o.children,e,g,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:JS(m,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Bx(o.path))i(o,c,!0,d)}),e}function Bx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Bx(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function qS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ZS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var WS=/^:[\w-]+$/,GS=3,KS=2,QS=1,YS=10,XS=-2,N0=t=>t==="*";function JS(t,e){let n=t.split("/"),r=n.length;return n.some(N0)&&(r+=XS),e&&(r+=KS),n.filter(s=>!N0(s)).reduce((s,i)=>s+(WS.test(i)?GS:i===""?QS:YS),r)}function ZS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function eN(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=$c({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=$c({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Yn([i,m.pathname]),pathnameBase:oN(Yn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Yn([i,m.pathnameBase]))}return o}function $c(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:m},g)=>{if(f==="*"){let N=c[g]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const x=c[g];return m&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function tN(t,e=!1,n=!0){wn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function sr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function rN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Wi(t):t;return{pathname:n?n.startsWith("/")?n:sN(n,e):e,search:aN(r),hash:lN(s)}}function sN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qm(t){let e=iN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Ym(t,e,n,r=!1){let s;typeof t=="string"?s=Wi(t):(s={...t},ke(!s.pathname||!s.pathname.includes("?"),sh("?","pathname","search",s)),ke(!s.pathname||!s.pathname.includes("#"),sh("#","pathname","hash",s)),ke(!s.search||!s.search.includes("#"),sh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=rN(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Yn=t=>t.join("/").replace(/\/\/+/g,"/"),oN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zx=["POST","PUT","PATCH","DELETE"];new Set(zx);var uN=["GET",...zx];new Set(uN);var Gi=R.createContext(null);Gi.displayName="DataRouter";var Au=R.createContext(null);Au.displayName="DataRouterState";R.createContext(!1);var Hx=R.createContext({isTransitioning:!1});Hx.displayName="ViewTransition";var dN=R.createContext(new Map);dN.displayName="Fetchers";var hN=R.createContext(null);hN.displayName="Await";var bn=R.createContext(null);bn.displayName="Navigation";var Ba=R.createContext(null);Ba.displayName="Location";var En=R.createContext({outlet:null,matches:[],isDataRoute:!1});En.displayName="Route";var Xm=R.createContext(null);Xm.displayName="RouteError";function fN(t,{relative:e}={}){ke(Ki(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(bn),{hash:s,pathname:i,search:o}=za(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Yn([n,i])),r.createHref({pathname:c,search:o,hash:s})}function Ki(){return R.useContext(Ba)!=null}function ss(){return ke(Ki(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ba).location}var qx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Wx(t){R.useContext(bn).static||R.useLayoutEffect(t)}function Jm(){let{isDataRoute:t}=R.useContext(En);return t?kN():mN()}function mN(){ke(Ki(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Gi),{basename:e,navigator:n}=R.useContext(bn),{matches:r}=R.useContext(En),{pathname:s}=ss(),i=JSON.stringify(Qm(r)),o=R.useRef(!1);return Wx(()=>{o.current=!0}),R.useCallback((u,d={})=>{if(wn(o.current,qx),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Ym(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Yn([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}var pN=R.createContext(null);function gN(t){let e=R.useContext(En).outlet;return R.useMemo(()=>e&&R.createElement(pN.Provider,{value:t},e),[e,t])}function za(t,{relative:e}={}){let{matches:n}=R.useContext(En),{pathname:r}=ss(),s=JSON.stringify(Qm(n));return R.useMemo(()=>Ym(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function yN(t,e){return Gx(t,e)}function Gx(t,e,n,r,s){var w;ke(Ki(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=R.useContext(bn),{matches:o}=R.useContext(En),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let E=m&&m.path||"";Kx(d,!m||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let g=ss(),x;if(e){let E=typeof e=="string"?Wi(e):e;ke(f==="/"||((w=E.pathname)==null?void 0:w.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),x=E}else x=g;let N=x.pathname||"/",y=N;if(f!=="/"){let E=f.replace(/^\//,"").split("/");y="/"+N.replace(/^\//,"").split("/").slice(E.length).join("/")}let C=Ux(t,{pathname:y});wn(m||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),wn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=bN(C&&C.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:Yn([f,i.encodeLocation?i.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Yn([f,i.encodeLocation?i.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,n,r,s);return e&&I?R.createElement(Ba.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},I):I}function vN(){let t=NN(),e=cN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:i},"ErrorBoundary")," or"," ",R.createElement("code",{style:i},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,o)}var wN=R.createElement(vN,null),_N=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(En.Provider,{value:this.props.routeContext},R.createElement(Xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xN({routeContext:t,match:e,children:n}){let r=R.useContext(Gi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(En.Provider,{value:t},n)}function bN(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);ke(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=n,x=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,m)=>{let g,x=!1,N=null,y=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||wN,c&&(u<0&&m===0?(Kx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,y=null):u===m&&(x=!0,y=f.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,m+1)),I=()=>{let w;return g?w=N:x?w=y:f.route.Component?w=R.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,R.createElement(xN,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(_N,{location:n.location,revalidation:n.revalidation,component:N,error:g,children:I(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:r}):I()},null)}function Zm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function EN(t){let e=R.useContext(Gi);return ke(e,Zm(t)),e}function TN(t){let e=R.useContext(Au);return ke(e,Zm(t)),e}function IN(t){let e=R.useContext(En);return ke(e,Zm(t)),e}function ep(t){let e=IN(t),n=e.matches[e.matches.length-1];return ke(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function SN(){return ep("useRouteId")}function NN(){var r;let t=R.useContext(Xm),e=TN("useRouteError"),n=ep("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function kN(){let{router:t}=EN("useNavigate"),e=ep("useNavigate"),n=R.useRef(!1);return Wx(()=>{n.current=!0}),R.useCallback(async(s,i={})=>{wn(n.current,qx),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var k0={};function Kx(t,e,n){!e&&!k0[t]&&(k0[t]=!0,wn(!1,n))}R.memo(CN);function CN({routes:t,future:e,state:n,unstable_onError:r}){return Gx(t,void 0,n,r,e)}function tp({to:t,replace:e,state:n,relative:r}){ke(Ki(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(bn);wn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=R.useContext(En),{pathname:o}=ss(),c=Jm(),u=Ym(t,Qm(i),o,r==="path"),d=JSON.stringify(u);return R.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function AN(t){return gN(t.context)}function Yt(t){ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){ke(!Ki(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Wi(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:g="default"}=n,x=R.useMemo(()=>{let N=sr(u,o);return N==null?null:{location:{pathname:N,search:d,hash:f,state:m,key:g},navigationType:r}},[o,u,d,f,m,g,r]);return wn(x!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:R.createElement(bn.Provider,{value:c},R.createElement(Ba.Provider,{children:e,value:x}))}function Qx({children:t,location:e}){return yN(_f(t),e)}function _f(t,e=[]){let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,_f(r.props.children,i));return}ke(r.type===Yt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ke(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_f(r.props.children,i)),n.push(o)}),n}var rc="get",sc="application/x-www-form-urlencoded";function Ru(t){return t!=null&&typeof t.tagName=="string"}function PN(t){return Ru(t)&&t.tagName.toLowerCase()==="button"}function jN(t){return Ru(t)&&t.tagName.toLowerCase()==="form"}function DN(t){return Ru(t)&&t.tagName.toLowerCase()==="input"}function LN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ON(t,e){return t.button===0&&(!e||e==="_self")&&!LN(t)}var Ol=null;function MN(){if(Ol===null)try{new FormData(document.createElement("form"),0),Ol=!1}catch{Ol=!0}return Ol}var VN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ih(t){return t!=null&&!VN.has(t)?(wn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sc}"`),null):t}function FN(t,e){let n,r,s,i,o;if(jN(t)){let c=t.getAttribute("action");r=c?sr(c,e):null,n=t.getAttribute("method")||rc,s=ih(t.getAttribute("enctype"))||sc,i=new FormData(t)}else if(PN(t)||DN(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?sr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||rc,s=ih(t.getAttribute("formenctype"))||ih(c.getAttribute("enctype"))||sc,i=new FormData(c,t),!MN()){let{name:d,type:f,value:m}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(Ru(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rc,r=null,s=sc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function np(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&sr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function $N(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function zN(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await $N(i,n);return o.links?o.links():[]}return[]}));return GN(r.flat(1).filter(BN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function C0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function HN(t,e,{includeHydrateFallback:n}={}){return qN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function qN(t){return[...new Set(t)]}function WN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function GN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(WN(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Yx(){let t=R.useContext(Gi);return np(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function KN(){let t=R.useContext(Au);return np(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var rp=R.createContext(void 0);rp.displayName="FrameworkContext";function Xx(){let t=R.useContext(rp);return np(t,"You must render this element inside a <HydratedRouter> element"),t}function QN(t,e){let n=R.useContext(rp),[r,s]=R.useState(!1),[i,o]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=e,g=R.useRef(null);R.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=I=>{I.forEach(w=>{o(w.isIntersecting)})},C=new IntersectionObserver(y,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[t]),R.useEffect(()=>{if(r){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[r]);let x=()=>{s(!0)},N=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:Co(c,x),onBlur:Co(u,N),onMouseEnter:Co(d,x),onMouseLeave:Co(f,N),onTouchStart:Co(m,x)}]:[!1,g,{}]}function Co(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function YN({page:t,...e}){let{router:n}=Yx(),r=R.useMemo(()=>Ux(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(JN,{page:t,matches:r,...e}):null}function XN(t){let{manifest:e,routeModules:n}=Xx(),[r,s]=R.useState([]);return R.useEffect(()=>{let i=!1;return zN(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function JN({page:t,matches:e,...n}){let r=ss(),{manifest:s,routeModules:i}=Xx(),{basename:o}=Yx(),{loaderData:c,matches:u}=KN(),d=R.useMemo(()=>C0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=R.useMemo(()=>C0(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,y=!1;if(e.forEach(I=>{var E;let w=s.routes[I.route.id];!w||!w.hasLoader||(!d.some(_=>_.route.id===I.route.id)&&I.route.id in c&&((E=i[I.route.id])!=null&&E.shouldRevalidate)||w.hasClientLoader?y=!0:N.add(I.route.id))}),N.size===0)return[];let C=UN(t,o,"data");return y&&N.size>0&&C.searchParams.set("_routes",e.filter(I=>N.has(I.route.id)).map(I=>I.route.id).join(",")),[C.pathname+C.search]},[o,c,r,s,d,e,t,i]),g=R.useMemo(()=>HN(f,s),[f,s]),x=XN(f);return R.createElement(R.Fragment,null,m.map(N=>R.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),g.map(N=>R.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),x.map(({key:N,link:y})=>R.createElement("link",{key:N,nonce:n.nonce,...y})))}function ZN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jx&&(window.__reactRouterVersion="7.9.5")}catch{}function ek({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=US({window:n,v5Compat:!0}));let s=r.current,[i,o]=R.useState({action:s.action,location:s.location}),c=R.useCallback(u=>{R.startTransition(()=>o(u))},[o]);return R.useLayoutEffect(()=>s.listen(c),[s,c]),R.createElement(RN,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Zx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eb=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m,...g},x){let{basename:N}=R.useContext(bn),y=typeof d=="string"&&Zx.test(d),C,I=!1;if(typeof d=="string"&&y&&(C=d,Jx))try{let S=new URL(window.location.href),A=d.startsWith("//")?new URL(S.protocol+d):new URL(d),P=sr(A.pathname,N);A.origin===S.origin&&P!=null?d=P+A.search+A.hash:I=!0}catch{wn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=fN(d,{relative:s}),[E,_,L]=QN(r,g),V=rk(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function T(S){e&&e(S),S.defaultPrevented||V(S)}let v=R.createElement("a",{...g,...L,href:C||w,onClick:I||i?e:T,ref:ZN(x,_),target:u,"data-discover":!y&&n==="render"?"true":void 0});return E&&!y?R.createElement(R.Fragment,null,v,R.createElement(YN,{page:w})):v});eb.displayName="Link";var tb=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let m=za(o,{relative:d.relative}),g=ss(),x=R.useContext(Au),{navigator:N,basename:y}=R.useContext(bn),C=x!=null&&lk(m)&&c===!0,I=N.encodeLocation?N.encodeLocation(m).pathname:m.pathname,w=g.pathname,E=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(w=w.toLowerCase(),E=E?E.toLowerCase():null,I=I.toLowerCase()),E&&y&&(E=sr(E,y)||E);const _=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let L=w===I||!s&&w.startsWith(I)&&w.charAt(_)==="/",V=E!=null&&(E===I||!s&&E.startsWith(I)&&E.charAt(I.length)==="/"),T={isActive:L,isPending:V,isTransitioning:C},v=L?e:void 0,S;typeof r=="function"?S=r(T):S=[r,L?"active":null,V?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(T):i;return R.createElement(eb,{...d,"aria-current":v,className:S,ref:f,style:A,to:o,viewTransition:c},typeof u=="function"?u(T):u)});tb.displayName="NavLink";var tk=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=rc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...g},x)=>{let N=ok(),y=ak(c,{relative:d}),C=o.toLowerCase()==="get"?"get":"post",I=typeof c=="string"&&Zx.test(c),w=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let _=E.nativeEvent.submitter,L=(_==null?void 0:_.getAttribute("formmethod"))||o;N(_||E.currentTarget,{fetcherKey:e,method:L,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:m})};return R.createElement("form",{ref:x,method:C,action:y,onSubmit:r?u:w,...g,"data-discover":!I&&t==="render"?"true":void 0})});tk.displayName="Form";function nk(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nb(t){let e=R.useContext(Gi);return ke(e,nk(t)),e}function rk(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let c=Jm(),u=ss(),d=za(t,{relative:i});return R.useCallback(f=>{if(ON(f,e)){f.preventDefault();let m=n!==void 0?n:Ea(u)===Ea(d);c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,c,d,n,r,e,t,s,i,o])}var sk=0,ik=()=>`__${String(++sk)}__`;function ok(){let{router:t}=nb("useSubmit"),{basename:e}=R.useContext(bn),n=SN();return R.useCallback(async(r,s={})=>{let{action:i,method:o,encType:c,formData:u,body:d}=FN(r,e);if(s.navigate===!1){let f=s.fetcherKey||ik();await t.fetch(f,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function ak(t,{relative:e}={}){let{basename:n}=R.useContext(bn),r=R.useContext(En);ke(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...za(t||".",{relative:e})},o=ss();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Yn([n,i.pathname])),Ea(i)}function lk(t,{relative:e}={}){let n=R.useContext(Hx);ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nb("useViewTransitionState"),s=za(t,{relative:e});if(!n.isTransitioning)return!1;let i=sr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=sr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $c(s.pathname,o)!=null||$c(s.pathname,i)!=null}const ck=()=>{};var A0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[f],n[m],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new dk;const g=i<<2|c>>4;if(r.push(g),d!==64){const x=c<<4&240|d>>2;if(r.push(x),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hk=function(t){const e=rb(t);return sb.encodeByteArray(e,!0)},Bc=function(t){return hk(t).replace(/\./g,"")},ib=function(t){try{return sb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=()=>fk().__FIREBASE_DEFAULTS__,pk=()=>{if(typeof process>"u"||typeof A0>"u")return;const t=A0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ib(t[1]);return e&&JSON.parse(e)},Pu=()=>{try{return ck()||mk()||pk()||gk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ob=t=>{var e,n;return(n=(e=Pu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ab=t=>{const e=ob(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lb=()=>{var t;return(t=Pu())==null?void 0:t.config},cb=t=>{var e;return(e=Pu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}const Jo={};function vk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?t.emulator.push(e):t.prod.push(e);return t}function wk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let R0=!1;function ip(t,e){if(typeof window>"u"||typeof document>"u"||!is(window.location.host)||Jo[t]===e||Jo[t]||R0)return;Jo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=vk().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{R0=!0,o()},g}function f(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=wk(r),x=n("text"),N=document.getElementById(x)||document.createElement("span"),y=n("learnmore"),C=document.getElementById(y)||document.createElement("a"),I=n("preprendIcon"),w=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;c(E),f(C,y);const _=d();u(w,I),E.append(w,N,C,_),document.body.appendChild(E)}i?(N.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function xk(){var e;const t=(e=Pu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function db(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ek(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tk(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ik(){return!xk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hb(){try{return typeof indexedDB=="object"}catch{return!1}}function fb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function Sk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="FirebaseError";class cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Nk,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hs.prototype.create)}}class Hs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?kk(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new cn(s,c,r)}}function kk(t,e){return t.replace(Ck,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ck=/\{\$([^}]+)}/g;function Ak(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(P0(i)&&P0(o)){if(!Kr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function P0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Mo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Rk(t,e){const n=new Pk(t,e);return n.subscribe.bind(n)}class Pk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jk(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=oh),s.error===void 0&&(s.error=oh),s.complete===void 0&&(s.complete=oh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jk(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function oh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3,Lk=2,Ok=4*60*60*1e3,Mk=.5;function j0(t,e=Dk,n=Lk){const r=e*Math.pow(n,t),s=Math.round(Mk*r*(Math.random()-.5)*2);return Math.min(Ok,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class on{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uk(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fk(t){return t===ys?void 0:t}function Uk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Vk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const Bk={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},zk=oe.INFO,Hk={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},qk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Hk[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ju{constructor(e){this.name=e,this._logLevel=zk,this._logHandler=qk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const Wk=(t,e)=>e.some(n=>t instanceof n);let D0,L0;function Gk(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return L0||(L0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mb=new WeakMap,xf=new WeakMap,pb=new WeakMap,ah=new WeakMap,op=new WeakMap;function Qk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mb.set(n,t)}).catch(()=>{}),op.set(e,t),e}function Yk(t){if(xf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});xf.set(t,e)}let bf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Xk(t){bf=t(bf)}function Jk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lh(this),e,...n);return pb.set(r,e.sort?e.sort():[e]),Br(r)}:Kk().includes(t)?function(...e){return t.apply(lh(this),e),Br(mb.get(this))}:function(...e){return Br(t.apply(lh(this),e))}}function Zk(t){return typeof t=="function"?Jk(t):(t instanceof IDBTransaction&&Yk(t),Wk(t,Gk())?new Proxy(t,bf):t)}function Br(t){if(t instanceof IDBRequest)return Qk(t);if(ah.has(t))return ah.get(t);const e=Zk(t);return e!==t&&(ah.set(t,e),op.set(e,t)),e}const lh=t=>op.get(t);function gb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Br(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Br(o.result),u.oldVersion,u.newVersion,Br(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const eC=["get","getKey","getAll","getAllKeys","count"],tC=["put","add","delete","clear"],ch=new Map;function O0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eC.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return ch.set(e,i),i}Xk(t=>({...t,get:(e,n,r)=>O0(e,n)||t.get(e,n,r),has:(e,n)=>!!O0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ef="@firebase/app",M0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new ju("@firebase/app"),sC="@firebase/app-compat",iC="@firebase/analytics-compat",oC="@firebase/analytics",aC="@firebase/app-check-compat",lC="@firebase/app-check",cC="@firebase/auth",uC="@firebase/auth-compat",dC="@firebase/database",hC="@firebase/data-connect",fC="@firebase/database-compat",mC="@firebase/functions",pC="@firebase/functions-compat",gC="@firebase/installations",yC="@firebase/installations-compat",vC="@firebase/messaging",wC="@firebase/messaging-compat",_C="@firebase/performance",xC="@firebase/performance-compat",bC="@firebase/remote-config",EC="@firebase/remote-config-compat",TC="@firebase/storage",IC="@firebase/storage-compat",SC="@firebase/firestore",NC="@firebase/ai",kC="@firebase/firestore-compat",CC="firebase",AC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="[DEFAULT]",RC={[Ef]:"fire-core",[sC]:"fire-core-compat",[oC]:"fire-analytics",[iC]:"fire-analytics-compat",[lC]:"fire-app-check",[aC]:"fire-app-check-compat",[cC]:"fire-auth",[uC]:"fire-auth-compat",[dC]:"fire-rtdb",[hC]:"fire-data-connect",[fC]:"fire-rtdb-compat",[mC]:"fire-fn",[pC]:"fire-fn-compat",[gC]:"fire-iid",[yC]:"fire-iid-compat",[vC]:"fire-fcm",[wC]:"fire-fcm-compat",[_C]:"fire-perf",[xC]:"fire-perf-compat",[bC]:"fire-rc",[EC]:"fire-rc-compat",[TC]:"fire-gcs",[IC]:"fire-gcs-compat",[SC]:"fire-fst",[kC]:"fire-fst-compat",[NC]:"fire-vertex","fire-js":"fire-js",[CC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new Map,PC=new Map,If=new Map;function V0(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _n(t){const e=t.name;if(If.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;If.set(e,t);for(const n of Ta.values())V0(n,t);for(const n of PC.values())V0(n,t);return!0}function os(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Hs("app","Firebase",jC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new on("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=AC;function yb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Tf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw zr.create("bad-app-name",{appName:String(s)});if(n||(n=lb()),!n)throw zr.create("no-options");const i=Ta.get(s);if(i){if(Kr(n,i.options)&&Kr(r,i.config))return i;throw zr.create("duplicate-app",{appName:s})}const o=new $k(s);for(const u of If.values())o.addComponent(u);const c=new DC(n,r,o);return Ta.set(s,c),c}function qa(t=Tf){const e=Ta.get(t);if(!e&&t===Tf&&lb())return yb();if(!e)throw zr.create("no-app",{appName:t});return e}function LC(){return Array.from(Ta.values())}function Dt(t,e,n){let r=RC[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(o.join(" "));return}_n(new on(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firebase-heartbeat-database",MC=1,Ia="firebase-heartbeat-store";let uh=null;function vb(){return uh||(uh=gb(OC,MC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),uh}async function VC(t){try{const n=(await vb()).transaction(Ia),r=await n.objectStore(Ia).get(wb(t));return await n.done,r}catch(e){if(e instanceof cn)ir.warn(e.message);else{const n=zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function F0(t,e){try{const r=(await vb()).transaction(Ia,"readwrite");await r.objectStore(Ia).put(e,wb(t)),await r.done}catch(n){if(n instanceof cn)ir.warn(n.message);else{const r=zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function wb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=1024,UC=30;class $C{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=U0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>UC){const o=HC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=U0(),{heartbeatsToSend:r,unsentEntries:s}=BC(this._heartbeatsCache.heartbeats),i=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ir.warn(n),""}}}function U0(){return new Date().toISOString().substring(0,10)}function BC(t,e=FC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hb()?fb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $0(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function HC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(t){_n(new on("platform-logger",e=>new nC(e),"PRIVATE")),_n(new on("heartbeat",e=>new $C(e),"PRIVATE")),Dt(Ef,M0,t),Dt(Ef,M0,"esm2020"),Dt("fire-js","")}qC("");function _b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WC=_b,xb=new Hs("auth","Firebase",_b());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new ju("@firebase/auth");function GC(t,...e){zc.logLevel<=oe.WARN&&zc.warn(`Auth (${qs}): ${t}`,...e)}function ic(t,...e){zc.logLevel<=oe.ERROR&&zc.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw lp(t,...e)}function yn(t,...e){return lp(t,...e)}function ap(t,e,n){const r={...WC(),[e]:n};return new Hs("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return ap(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&an(t,"argument-error"),ap(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xb.create(t,...e)}function J(t,e,...n){if(!t)throw lp(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ic(e),new Error(e)}function or(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function QC(){return B0()==="http:"||B0()==="https:"}function B0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QC()||db()||"connection"in navigator)?navigator.onLine:!0}function XC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=_k()||Ek()}get(){return YC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eA=new Wa(3e4,6e4);function hr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Tn(t,e,n,r,s={}){return Eb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ha({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return bk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&is(t.emulatorConfig.host)&&(d.credentials="include"),bb.fetch()(await Tb(t,t.config.apiHost,n,c),d)})}async function Eb(t,e,n){t._canInitEmulator=!1;const r={...JC,...e};try{const s=new nA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ml(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ap(t,f,d);an(t,f)}}catch(s){if(s instanceof cn)throw s;an(t,"network-request-failed",{message:String(s)})}}async function Ga(t,e,n,r,s={}){const i=await Tn(t,e,n,r,s);return"mfaPendingCredential"in i&&an(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Tb(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?cp(t.config,s):`${t.config.apiScheme}://${s}`;return ZC.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function tA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),eA.get())})}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function z0(t){return t!==void 0&&t.enterprise!==void 0}class rA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sA(t,e){return Tn(t,"GET","/v2/recaptchaConfig",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e){return Tn(t,"POST","/v1/accounts:delete",e)}async function Hc(t,e){return Tn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oA(t,e=!1){const n=fe(t),r=await n.getIdToken(e),s=up(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zo(dh(s.auth_time)),issuedAtTime:Zo(dh(s.iat)),expirationTime:Zo(dh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dh(t){return Number(t)*1e3}function up(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{const s=ib(n);return s?JSON.parse(s):(ic("Failed to decode base64 JWT payload"),null)}catch(s){return ic("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function H0(t){const e=up(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cn&&aA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Ds(t,Hc(e,{idToken:n}));J(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?Ib(s.providerUserInfo):[],o=uA(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function cA(t){const e=fe(t);await qc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ib(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e){const n=await Eb(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Tb(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&is(t.emulatorConfig.host)&&(u.credentials="include"),bb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hA(t,e){return Tn(t,"POST","/v2/accounts:revokeToken",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=H0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await dA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ti;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ti,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ds(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oA(this,e)}reload(){return cA(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await Ds(this,iA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:x,providerData:N,stsTokenManager:y}=n;J(m&&y,e,"internal-error");const C=Ti.fromJSON(this.name,y);J(typeof m=="string",e,"internal-error"),br(r,e.name),br(s,e.name),J(typeof g=="boolean",e,"internal-error"),J(typeof x=="boolean",e,"internal-error"),br(i,e.name),br(o,e.name),br(c,e.name),br(u,e.name),br(d,e.name),br(f,e.name);const I=new mn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:C,createdAt:d,lastLoginAt:f});return N&&Array.isArray(N)&&(I.providerData=N.map(w=>({...w}))),u&&(I._redirectEventId=u),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ti;s.updateFromServerResponse(n);const i=new mn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ib(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ti;c.updateFromIdToken(r);const u=new mn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;function Gn(t){or(t instanceof Function,"Expected a class definition");let e=q0.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,q0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sb.type="NONE";const W0=Sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ii{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=oc(this.userKey,s.apiKey,i),this.fullPersistenceKey=oc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hc(this.auth,{idToken:e}).catch(()=>{});return n?mn._fromGetAccountInfoResponse(this.auth,n,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ii(Gn(W0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Gn(W0);const o=oc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await Hc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await mn._fromGetAccountInfoResponse(e,g,f)}else m=mn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ii(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ii(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ab(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pb(e))return"Blackberry";if(jb(e))return"Webos";if(kb(e))return"Safari";if((e.includes("chrome/")||Cb(e))&&!e.includes("edge/"))return"Chrome";if(Rb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Nb(t=pt()){return/firefox\//i.test(t)}function kb(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cb(t=pt()){return/crios\//i.test(t)}function Ab(t=pt()){return/iemobile/i.test(t)}function Rb(t=pt()){return/android/i.test(t)}function Pb(t=pt()){return/blackberry/i.test(t)}function jb(t=pt()){return/webos/i.test(t)}function dp(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fA(t=pt()){var e;return dp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mA(){return Tk()&&document.documentMode===10}function Db(t=pt()){return dp(t)||Rb(t)||jb(t)||Pb(t)||/windows phone/i.test(t)||Ab(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t,e=[]){let n;switch(t){case"Browser":n=G0(pt());break;case"Worker":n=`${G0(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e={}){return Tn(t,"GET","/v2/passwordPolicy",hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=6;class vA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K0(this),this.idTokenSubscription=new K0(this),this.beforeStateQueue=new pA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ii.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hc(this,{idToken:e}),r=await mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(kt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(Xn(this));const n=e?fe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gA(this),n=new vA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ii.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&GC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function fr(t){return fe(t)}class K0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rk(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _A(t){Du=t}function Ob(t){return Du.loadJS(t)}function xA(){return Du.recaptchaEnterpriseScript}function bA(){return Du.gapiScript}function EA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class TA{constructor(){this.enterprise=new IA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SA="recaptcha-enterprise",Mb="NO_RECAPTCHA";class NA{constructor(e){this.type=SA,this.auth=fr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{sA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new rA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;z0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Mb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&z0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=xA();u.length!==0&&(u+=c),Ob(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Q0(t,e,n,r=!1,s=!1){const i=new NA(t);let o;if(s)o=Mb;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Wc(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Q0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Q0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){const n=os(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kr(i,e??{}))return s;an(s,"already-initialized")}return n.initialize({options:e})}function CA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AA(t,e,n){const r=fr(t);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Vb(e),{host:o,port:c}=RA(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Kr(d,r.config.emulator)&&Kr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,is(o)?(sp(`${i}//${o}${u}`),ip("Auth",!0)):PA()}function Vb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RA(t){const e=Vb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Y0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Y0(o)}}}function Y0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function jA(t,e){return Tn(t,"POST","/v1/accounts:update",e)}async function DA(t,e){return Tn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){return Ga(t,"POST","/v1/accounts:signInWithPassword",hr(t,e))}async function Fb(t,e){return Tn(t,"POST","/v1/accounts:sendOobCode",hr(t,e))}async function OA(t,e){return Fb(t,e)}async function MA(t,e){return Fb(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e){return Ga(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,e))}async function FA(t,e){return Ga(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends hp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wc(e,n,"signInWithPassword",LA);case"emailLink":return VA(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wc(e,r,"signUpPassword",DA);case"emailLink":return FA(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(t,e){return Ga(t,"POST","/v1/accounts:signInWithIdp",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="http://localhost";class Ls extends hp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ls(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Si(e,n)}buildRequest(){const e={requestUri:UA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BA(t){const e=Oo(Mo(t)).link,n=e?Oo(Mo(e)).deep_link_id:null,r=Oo(Mo(t)).deep_link_id;return(r?Oo(Mo(r)).link:null)||r||n||e||t}class fp{constructor(e){const n=Oo(Mo(e)),r=n.apiKey??null,s=n.oobCode??null,i=$A(n.mode??null);J(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BA(e);try{return new fp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.providerId=Ws.PROVIDER_ID}static credential(e,n){return Sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fp.parseLink(n);return J(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}Ws.PROVIDER_ID="password";Ws.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ws.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends mp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Ka{constructor(){super("facebook.com")}static credential(e){return Ls._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ls._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ka{constructor(){super("github.com")}static credential(e){return Ls._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ka{constructor(){super("twitter.com")}static credential(e,n){return Ls._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zA(t,e){return Ga(t,"POST","/v1/accounts:signUp",hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mn._fromIdTokenResponse(e,r,s),o=X0(r);return new Os({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=X0(r);return new Os({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function X0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends cn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gc(e,n,r,s)}}function Ub(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(t,i,e,r):i})}async function HA(t,e,n=!1){const r=await Ds(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Os._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(t,e,n=!1){const{auth:r}=t;if(kt(r.app))return Promise.reject(Xn(r));const s="reauthenticate";try{const i=await Ds(t,Ub(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=up(i.idToken);J(o,r,"internal-error");const{sub:c}=o;return J(t.uid===c,r,"user-mismatch"),Os._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&an(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(t,e,n=!1){if(kt(t.app))return Promise.reject(Xn(t));const r="signIn",s=await Ub(t,r,e),i=await Os._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function qA(t,e){return Bb(fr(t),e)}async function WA(t,e){return $b(fe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e,n){var r;J(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),J(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),J(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(J(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(J(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(t){const e=fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GA(t,e,n){const r=fr(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&zb(r,s,n),await Wc(r,s,"getOobCode",MA)}async function KA(t,e,n){if(kt(t.app))return Promise.reject(Xn(t));const r=fr(t),o=await Wc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Hb(t),u}),c=await Os._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function QA(t,e,n){return kt(t.app)?Promise.reject(Xn(t)):qA(fe(t),Ws.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Hb(t),r})}async function YA(t,e){const n=fe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&zb(n.auth,s,e);const{email:i}=await OA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(t,e){return Tn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=fe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ds(r,XA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function ZA(t,e){return eR(fe(t),null,e)}async function eR(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Ds(t,jA(r,i));await t._updateTokensIfNecessary(o,!0)}function tR(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function nR(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function rR(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}function sR(t){return fe(t).signOut()}const Kc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kc,"1"),this.storage.removeItem(Kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=1e3,oR=10;class Wb extends qb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Db(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,oR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wb.type="LOCAL";const aR=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends qb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gb.type="SESSION";const Kb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Lu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await lR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=pp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function uR(t){Dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function dR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function fR(){return Qb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebaseLocalStorageDb",mR=1,Qc="firebaseLocalStorage",Xb="fbase_key";class Qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([Qc],e?"readwrite":"readonly").objectStore(Qc)}function pR(){const t=indexedDB.deleteDatabase(Yb);return new Qa(t).toPromise()}function kf(){const t=indexedDB.open(Yb,mR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qc,{keyPath:Xb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qc)?e(r):(r.close(),await pR(),e(await kf()))})})}async function J0(t,e,n){const r=Ou(t,!0).put({[Xb]:e,value:n});return new Qa(r).toPromise()}async function gR(t,e){const n=Ou(t,!1).get(e),r=await new Qa(n).toPromise();return r===void 0?null:r.value}function Z0(t,e){const n=Ou(t,!0).delete(e);return new Qa(n).toPromise()}const yR=800,vR=3;class Jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lu._getInstance(fR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await dR(),!this.activeServiceWorker)return;this.sender=new cR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kf();return await J0(e,Kc,"1"),await Z0(e,Kc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>J0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new Qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jb.type="LOCAL";const wR=Jb;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t,e){return e?Gn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends hp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _R(t){return Bb(t.auth,new gp(t),t.bypassAuthState)}function xR(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),$b(n,new gp(t),t.bypassAuthState)}async function bR(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),HA(n,new gp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _R;case"linkViaPopup":case"linkViaRedirect":return bR;case"reauthViaPopup":case"reauthViaRedirect":return xR;default:an(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new Wa(2e3,1e4);async function TR(t,e,n){if(kt(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=fr(t);KC(t,e,mp);const s=Zb(r,n);return new xs(r,"signInViaPopup",e,s).executeNotNull()}class xs extends eE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xs.currentPopupAction&&xs.currentPopupAction.cancel(),xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ER.get())};e()}}xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR="pendingRedirect",ac=new Map;class SR extends eE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const r=await NR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NR(t,e){const n=AR(e),r=CR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function kR(t,e){ac.set(t._key(),e)}function CR(t){return Gn(t._redirectPersistence)}function AR(t){return oc(IR,t.config.apiKey,t.name)}async function RR(t,e,n=!1){if(kt(t.app))return Promise.reject(Xn(t));const r=fr(t),s=Zb(r,e),o=await new SR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=10*60*1e3;class jR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tE(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ev(e))}saveEventToCache(e){this.cachedEventUids.add(ev(e)),this.lastProcessedEventTime=Date.now()}}function ev(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e={}){return Tn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MR=/^https?/;async function VR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LR(t);for(const n of e)try{if(FR(n))return}catch{}an(t,"unauthorized-domain")}function FR(t){const e=Sf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!MR.test(n))return!1;if(OR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new Wa(3e4,6e4);function tv(){const t=Dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $R(t){return new Promise((e,n)=>{var s,i,o;function r(){tv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tv(),n(yn(t,"network-request-failed"))},timeout:UR.get()})}if((i=(s=Dn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Dn().gapi)!=null&&o.load)r();else{const c=EA("iframefcb");return Dn()[c]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},Ob(`${bA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw lc=null,e})}let lc=null;function BR(t){return lc=lc||$R(t),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new Wa(5e3,15e3),HR="__/auth/iframe",qR="emulator/auth/iframe",WR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KR(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cp(e,qR):`https://${t.config.authDomain}/${HR}`,r={apiKey:e.apiKey,appName:t.name,v:qs},s=GR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ha(r).slice(1)}`}async function QR(t){const e=await BR(t),n=Dn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:KR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),c=Dn().setTimeout(()=>{i(o)},zR.get());function u(){Dn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XR=500,JR=600,ZR="_blank",eP="http://localhost";class nv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tP(t,e,n,r=XR,s=JR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...YR,width:r.toString(),height:s.toString(),top:i,left:o},d=pt().toLowerCase();n&&(c=Cb(d)?ZR:n),Nb(d)&&(e=e||eP,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[x,N])=>`${g}${x}=${N},`,"");if(fA(d)&&c!=="_self")return nP(e||"",c),new nv(null);const m=window.open(e||"",c,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new nv(m)}function nP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="__/auth/handler",sP="emulator/auth/handler",iP=encodeURIComponent("fac");async function rv(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:s};if(e instanceof mp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ak(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ka){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${iP}=${encodeURIComponent(u)}`:"";return`${oP(t)}?${Ha(c).slice(1)}${d}`}function oP({config:t}){return t.emulator?cp(t,sP):`https://${t.authDomain}/${rP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="webStorageSupport";class aP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kb,this._completeRedirectFn=RR,this._overrideRedirectResult=kR}async _openPopup(e,n,r,s){var o;or((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await rv(e,n,r,Sf(),s);return tP(e,i,pp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await rv(e,n,r,Sf(),s);return uR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(or(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QR(e),r=new jR(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hh,{type:hh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[hh];i!==void 0&&n(!!i),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Db()||kb()||dp()}}const lP=aP;var sv="@firebase/auth",iv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dP(t){_n(new on("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lb(t)},d=new wA(r,s,i,u);return CA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_n(new on("auth-internal",e=>{const n=fr(e.getProvider("auth").getImmediate());return(r=>new cP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dt(sv,iv,uP(t)),Dt(sv,iv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=5*60,fP=cb("authIdTokenMaxAge")||hP;let ov=null;const mP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fP)return;const s=n==null?void 0:n.token;ov!==s&&(ov=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function pP(t=qa()){const e=os(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kA(t,{popupRedirectResolver:lP,persistence:[wR,aR,Kb]}),r=cb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=mP(i.toString());nR(n,o,()=>o(n.currentUser)),tR(n,c=>o(c))}}const s=ob("auth");return s&&AA(n,`http://${s}`),n}function gP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_A({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",gP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dP("Browser");var av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,nE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function S(){}S.prototype=v.prototype,T.F=v.prototype,T.prototype=new S,T.prototype.constructor=T,T.D=function(A,P,j){for(var k=Array(arguments.length-2),re=2;re<arguments.length;re++)k[re-2]=arguments[re];return v.prototype[P].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,S){S||(S=0);const A=Array(16);if(typeof v=="string")for(var P=0;P<16;++P)A[P]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(P=0;P<16;++P)A[P]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=T.g[0],S=T.g[1],P=T.g[2];let j=T.g[3],k;k=v+(j^S&(P^j))+A[0]+3614090360&4294967295,v=S+(k<<7&4294967295|k>>>25),k=j+(P^v&(S^P))+A[1]+3905402710&4294967295,j=v+(k<<12&4294967295|k>>>20),k=P+(S^j&(v^S))+A[2]+606105819&4294967295,P=j+(k<<17&4294967295|k>>>15),k=S+(v^P&(j^v))+A[3]+3250441966&4294967295,S=P+(k<<22&4294967295|k>>>10),k=v+(j^S&(P^j))+A[4]+4118548399&4294967295,v=S+(k<<7&4294967295|k>>>25),k=j+(P^v&(S^P))+A[5]+1200080426&4294967295,j=v+(k<<12&4294967295|k>>>20),k=P+(S^j&(v^S))+A[6]+2821735955&4294967295,P=j+(k<<17&4294967295|k>>>15),k=S+(v^P&(j^v))+A[7]+4249261313&4294967295,S=P+(k<<22&4294967295|k>>>10),k=v+(j^S&(P^j))+A[8]+1770035416&4294967295,v=S+(k<<7&4294967295|k>>>25),k=j+(P^v&(S^P))+A[9]+2336552879&4294967295,j=v+(k<<12&4294967295|k>>>20),k=P+(S^j&(v^S))+A[10]+4294925233&4294967295,P=j+(k<<17&4294967295|k>>>15),k=S+(v^P&(j^v))+A[11]+2304563134&4294967295,S=P+(k<<22&4294967295|k>>>10),k=v+(j^S&(P^j))+A[12]+1804603682&4294967295,v=S+(k<<7&4294967295|k>>>25),k=j+(P^v&(S^P))+A[13]+4254626195&4294967295,j=v+(k<<12&4294967295|k>>>20),k=P+(S^j&(v^S))+A[14]+2792965006&4294967295,P=j+(k<<17&4294967295|k>>>15),k=S+(v^P&(j^v))+A[15]+1236535329&4294967295,S=P+(k<<22&4294967295|k>>>10),k=v+(P^j&(S^P))+A[1]+4129170786&4294967295,v=S+(k<<5&4294967295|k>>>27),k=j+(S^P&(v^S))+A[6]+3225465664&4294967295,j=v+(k<<9&4294967295|k>>>23),k=P+(v^S&(j^v))+A[11]+643717713&4294967295,P=j+(k<<14&4294967295|k>>>18),k=S+(j^v&(P^j))+A[0]+3921069994&4294967295,S=P+(k<<20&4294967295|k>>>12),k=v+(P^j&(S^P))+A[5]+3593408605&4294967295,v=S+(k<<5&4294967295|k>>>27),k=j+(S^P&(v^S))+A[10]+38016083&4294967295,j=v+(k<<9&4294967295|k>>>23),k=P+(v^S&(j^v))+A[15]+3634488961&4294967295,P=j+(k<<14&4294967295|k>>>18),k=S+(j^v&(P^j))+A[4]+3889429448&4294967295,S=P+(k<<20&4294967295|k>>>12),k=v+(P^j&(S^P))+A[9]+568446438&4294967295,v=S+(k<<5&4294967295|k>>>27),k=j+(S^P&(v^S))+A[14]+3275163606&4294967295,j=v+(k<<9&4294967295|k>>>23),k=P+(v^S&(j^v))+A[3]+4107603335&4294967295,P=j+(k<<14&4294967295|k>>>18),k=S+(j^v&(P^j))+A[8]+1163531501&4294967295,S=P+(k<<20&4294967295|k>>>12),k=v+(P^j&(S^P))+A[13]+2850285829&4294967295,v=S+(k<<5&4294967295|k>>>27),k=j+(S^P&(v^S))+A[2]+4243563512&4294967295,j=v+(k<<9&4294967295|k>>>23),k=P+(v^S&(j^v))+A[7]+1735328473&4294967295,P=j+(k<<14&4294967295|k>>>18),k=S+(j^v&(P^j))+A[12]+2368359562&4294967295,S=P+(k<<20&4294967295|k>>>12),k=v+(S^P^j)+A[5]+4294588738&4294967295,v=S+(k<<4&4294967295|k>>>28),k=j+(v^S^P)+A[8]+2272392833&4294967295,j=v+(k<<11&4294967295|k>>>21),k=P+(j^v^S)+A[11]+1839030562&4294967295,P=j+(k<<16&4294967295|k>>>16),k=S+(P^j^v)+A[14]+4259657740&4294967295,S=P+(k<<23&4294967295|k>>>9),k=v+(S^P^j)+A[1]+2763975236&4294967295,v=S+(k<<4&4294967295|k>>>28),k=j+(v^S^P)+A[4]+1272893353&4294967295,j=v+(k<<11&4294967295|k>>>21),k=P+(j^v^S)+A[7]+4139469664&4294967295,P=j+(k<<16&4294967295|k>>>16),k=S+(P^j^v)+A[10]+3200236656&4294967295,S=P+(k<<23&4294967295|k>>>9),k=v+(S^P^j)+A[13]+681279174&4294967295,v=S+(k<<4&4294967295|k>>>28),k=j+(v^S^P)+A[0]+3936430074&4294967295,j=v+(k<<11&4294967295|k>>>21),k=P+(j^v^S)+A[3]+3572445317&4294967295,P=j+(k<<16&4294967295|k>>>16),k=S+(P^j^v)+A[6]+76029189&4294967295,S=P+(k<<23&4294967295|k>>>9),k=v+(S^P^j)+A[9]+3654602809&4294967295,v=S+(k<<4&4294967295|k>>>28),k=j+(v^S^P)+A[12]+3873151461&4294967295,j=v+(k<<11&4294967295|k>>>21),k=P+(j^v^S)+A[15]+530742520&4294967295,P=j+(k<<16&4294967295|k>>>16),k=S+(P^j^v)+A[2]+3299628645&4294967295,S=P+(k<<23&4294967295|k>>>9),k=v+(P^(S|~j))+A[0]+4096336452&4294967295,v=S+(k<<6&4294967295|k>>>26),k=j+(S^(v|~P))+A[7]+1126891415&4294967295,j=v+(k<<10&4294967295|k>>>22),k=P+(v^(j|~S))+A[14]+2878612391&4294967295,P=j+(k<<15&4294967295|k>>>17),k=S+(j^(P|~v))+A[5]+4237533241&4294967295,S=P+(k<<21&4294967295|k>>>11),k=v+(P^(S|~j))+A[12]+1700485571&4294967295,v=S+(k<<6&4294967295|k>>>26),k=j+(S^(v|~P))+A[3]+2399980690&4294967295,j=v+(k<<10&4294967295|k>>>22),k=P+(v^(j|~S))+A[10]+4293915773&4294967295,P=j+(k<<15&4294967295|k>>>17),k=S+(j^(P|~v))+A[1]+2240044497&4294967295,S=P+(k<<21&4294967295|k>>>11),k=v+(P^(S|~j))+A[8]+1873313359&4294967295,v=S+(k<<6&4294967295|k>>>26),k=j+(S^(v|~P))+A[15]+4264355552&4294967295,j=v+(k<<10&4294967295|k>>>22),k=P+(v^(j|~S))+A[6]+2734768916&4294967295,P=j+(k<<15&4294967295|k>>>17),k=S+(j^(P|~v))+A[13]+1309151649&4294967295,S=P+(k<<21&4294967295|k>>>11),k=v+(P^(S|~j))+A[4]+4149444226&4294967295,v=S+(k<<6&4294967295|k>>>26),k=j+(S^(v|~P))+A[11]+3174756917&4294967295,j=v+(k<<10&4294967295|k>>>22),k=P+(v^(j|~S))+A[2]+718787259&4294967295,P=j+(k<<15&4294967295|k>>>17),k=S+(j^(P|~v))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const S=v-this.blockSize,A=this.C;let P=this.h,j=0;for(;j<v;){if(P==0)for(;j<=S;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<v;)if(A[P++]=T.charCodeAt(j++),P==this.blockSize){s(this,A),P=0;break}}else for(;j<v;)if(A[P++]=T[j++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var S=T.length-8;S<T.length;++S)T[S]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,S=0;S<4;++S)for(let A=0;A<32;A+=8)T[v++]=this.g[S]>>>A&255;return T};function i(T,v){var S=c;return Object.prototype.hasOwnProperty.call(S,T)?S[T]:S[T]=v(T)}function o(T,v){this.h=v;const S=[];let A=!0;for(let P=T.length-1;P>=0;P--){const j=T[P]|0;A&&j==v||(S[P]=j,A=!1)}this.g=S}var c={};function u(T){return-128<=T&&T<128?i(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return C(d(-T));const v=[];let S=1;for(let A=0;T>=S;A++)v[A]=T/S|0,S*=4294967296;return new o(v,0)}function f(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return C(f(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=d(Math.pow(v,8));let A=m;for(let j=0;j<T.length;j+=8){var P=Math.min(8,T.length-j);const k=parseInt(T.substring(j,j+P),v);P<8?(P=d(Math.pow(v,P)),A=A.j(P).add(d(k))):(A=A.j(S),A=A.add(d(k)))}return A}var m=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(y(this))return-C(this).m();let T=0,v=1;for(let S=0;S<this.g.length;S++){const A=this.i(S);T+=(A>=0?A:4294967296+A)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(N(this))return"0";if(y(this))return"-"+C(this).toString(T);const v=d(Math.pow(T,6));var S=this;let A="";for(;;){const P=_(S,v).g;S=I(S,P.j(v));let j=((S.g.length>0?S.g[0]:S.h)>>>0).toString(T);if(S=P,N(S))return j+A;for(;j.length<6;)j="0"+j;A=j+A}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function N(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=I(this,T),y(T)?-1:N(T)?0:1};function C(T){const v=T.g.length,S=[];for(let A=0;A<v;A++)S[A]=~T.g[A];return new o(S,~T.h).add(g)}t.abs=function(){return y(this)?C(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),S=[];let A=0;for(let P=0;P<=v;P++){let j=A+(this.i(P)&65535)+(T.i(P)&65535),k=(j>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);A=k>>>16,j&=65535,k&=65535,S[P]=k<<16|j}return new o(S,S[S.length-1]&-2147483648?-1:0)};function I(T,v){return T.add(C(v))}t.j=function(T){if(N(this)||N(T))return m;if(y(this))return y(T)?C(this).j(C(T)):C(C(this).j(T));if(y(T))return C(this.j(C(T)));if(this.l(x)<0&&T.l(x)<0)return d(this.m()*T.m());const v=this.g.length+T.g.length,S=[];for(var A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<T.g.length;P++){const j=this.i(A)>>>16,k=this.i(A)&65535,re=T.i(P)>>>16,W=T.i(P)&65535;S[2*A+2*P]+=k*W,w(S,2*A+2*P),S[2*A+2*P+1]+=j*W,w(S,2*A+2*P+1),S[2*A+2*P+1]+=k*re,w(S,2*A+2*P+1),S[2*A+2*P+2]+=j*re,w(S,2*A+2*P+2)}for(T=0;T<v;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=v;T<2*v;T++)S[T]=0;return new o(S,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function E(T,v){this.g=T,this.h=v}function _(T,v){if(N(v))throw Error("division by zero");if(N(T))return new E(m,m);if(y(T))return v=_(C(T),v),new E(C(v.g),C(v.h));if(y(v))return v=_(T,C(v)),new E(C(v.g),v.h);if(T.g.length>30){if(y(T)||y(v))throw Error("slowDivide_ only works with positive integers.");for(var S=g,A=v;A.l(T)<=0;)S=L(S),A=L(A);var P=V(S,1),j=V(A,1);for(A=V(A,2),S=V(S,2);!N(A);){var k=j.add(A);k.l(T)<=0&&(P=P.add(S),j=k),A=V(A,1),S=V(S,1)}return v=I(T,P.j(v)),new E(P,v)}for(P=m;T.l(v)>=0;){for(S=Math.max(1,Math.floor(T.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),j=d(S),k=j.j(v);y(k)||k.l(T)>0;)S-=A,j=d(S),k=j.j(v);N(j)&&(j=g),P=P.add(j),T=I(T,k)}return new E(P,T)}t.B=function(T){return _(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),S=[];for(let A=0;A<v;A++)S[A]=this.i(A)&T.i(A);return new o(S,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),S=[];for(let A=0;A<v;A++)S[A]=this.i(A)|T.i(A);return new o(S,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),S=[];for(let A=0;A<v;A++)S[A]=this.i(A)^T.i(A);return new o(S,this.h^T.h)};function L(T){const v=T.g.length+1,S=[];for(let A=0;A<v;A++)S[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(S,T.h)}function V(T,v){const S=v>>5;v%=32;const A=T.g.length-S,P=[];for(let j=0;j<A;j++)P[j]=v>0?T.i(j+S)>>>v|T.i(j+S+1)<<32-v:T.i(j+S);return new o(P,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,nE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Hr=o}).apply(typeof av<"u"?av:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rE,Vo,sE,cc,Cf,iE,oE,aE;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var b=0;b<l.length-1;b++){var O=l[b];if(!(O in p))break e;p=p[O]}l=l[l.length-1],b=p[l],h=h(b),h!=b&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var p=[],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&p.push([b,h[b]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,p){return l.call.apply(l.bind,arguments)}function d(l,h,p){return d=u,d.apply(null,arguments)}function f(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function m(l,h){function p(){}p.prototype=h.prototype,l.Z=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Ob=function(b,O,M){for(var q=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)q[ne-2]=arguments[ne];return h.prototype[O].apply(b,q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function x(l){const h=l.length;if(h>0){const p=Array(h);for(let b=0;b<h;b++)p[b]=l[b];return p}return[]}function N(l,h){for(let b=1;b<arguments.length;b++){const O=arguments[b];var p=typeof O;if(p=p!="object"?p:O?Array.isArray(O)?"array":p:"null",p=="array"||p=="object"&&typeof O.length=="number"){p=l.length||0;const M=O.length||0;l.length=p+M;for(let q=0;q<M;q++)l[p+q]=O[q]}else l.push(O)}}class y{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(l){o.setTimeout(()=>{throw l},0)}function I(){var l=T;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class w{constructor(){this.h=this.g=null}add(h,p){const b=E.get();b.set(h,p),this.h?this.h.next=b:this.g=b,this.h=b}}var E=new y(()=>new _,l=>l.reset());class _{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,T=new w,v=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(S)}};function S(){for(var l;l=I();){try{l.h.call(l.g)}catch(p){C(p)}var h=E;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}V=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return l}();function k(l){return/^[\s\xa0]*$/.test(l)}function re(l,h){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(re,P),re.prototype.init=function(l,h){const p=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&re.Z.h.call(this)},re.prototype.h=function(){re.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var W="closure_listenable_"+(Math.random()*1e6|0),me=0;function H(l,h,p,b,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!b,this.ha=O,this.key=++me,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function F(l,h,p){for(const b in l)h.call(p,l[b],b,l)}function D(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function Q(l){const h={};for(const p in l)h[p]=l[p];return h}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(l,h){let p,b;for(let O=1;O<arguments.length;O++){b=arguments[O];for(p in b)l[p]=b[p];for(let M=0;M<se.length;M++)p=se[M],Object.prototype.hasOwnProperty.call(b,p)&&(l[p]=b[p])}}function he(l){this.src=l,this.g={},this.h=0}he.prototype.add=function(l,h,p,b,O){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const q=Ce(l,h,b,O);return q>-1?(h=l[q],p||(h.fa=!1)):(h=new H(h,this.src,M,!!b,O),h.fa=p,l.push(h)),h};function ye(l,h){const p=h.type;if(p in l.g){var b=l.g[p],O=Array.prototype.indexOf.call(b,h,void 0),M;(M=O>=0)&&Array.prototype.splice.call(b,O,1),M&&(B(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Ce(l,h,p,b){for(let O=0;O<l.length;++O){const M=l[O];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==b)return O}return-1}var Mt="closure_lm_"+(Math.random()*1e6|0),Ys={};function ol(l,h,p,b,O){if(Array.isArray(h)){for(let M=0;M<h.length;M++)ol(l,h[M],p,b,O);return null}return p=xg(p),l&&l[W]?l.J(h,p,c(b)?!!b.capture:!1,O):cs(l,h,p,!1,b,O)}function cs(l,h,p,b,O,M){if(!h)throw Error("Invalid event type");const q=c(O)?!!O.capture:!!O;let ne=fd(l);if(ne||(l[Mt]=ne=new he(l)),p=ne.add(h,p,b,q,M),p.proxy)return p;if(b=dd(),p.proxy=b,b.src=l,b.listener=p,l.addEventListener)j||(O=q),O===void 0&&(O=!1),l.addEventListener(h.toString(),b,O);else if(l.attachEvent)l.attachEvent(_g(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function dd(){function l(p){return h.call(l.src,l.listener,p)}const h=UT;return l}function wg(l,h,p,b,O){if(Array.isArray(h))for(var M=0;M<h.length;M++)wg(l,h[M],p,b,O);else b=c(b)?!!b.capture:!!b,p=xg(p),l&&l[W]?(l=l.i,M=String(h).toString(),M in l.g&&(h=l.g[M],p=Ce(h,p,b,O),p>-1&&(B(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete l.g[M],l.h--)))):l&&(l=fd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ce(h,p,b,O)),(p=l>-1?h[l]:null)&&hd(p))}function hd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[W])ye(h.i,l);else{var p=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(p,b,l.capture):h.detachEvent?h.detachEvent(_g(p),b):h.addListener&&h.removeListener&&h.removeListener(b),(p=fd(h))?(ye(p,l),p.h==0&&(p.src=null,h[Mt]=null)):B(l)}}}function _g(l){return l in Ys?Ys[l]:Ys[l]="on"+l}function UT(l,h){if(l.da)l=!0;else{h=new re(h,this);const p=l.listener,b=l.ha||l.src;l.fa&&hd(l),l=p.call(b,h)}return l}function fd(l){return l=l[Mt],l instanceof he?l:null}var md="__closure_events_fn_"+(Math.random()*1e9>>>0);function xg(l){return typeof l=="function"?l:(l[md]||(l[md]=function(h){return l.handleEvent(h)}),l[md])}function at(){A.call(this),this.i=new he(this),this.M=this,this.G=null}m(at,A),at.prototype[W]=!0,at.prototype.removeEventListener=function(l,h,p,b){wg(this,l,h,p,b)};function gt(l,h){var p,b=l.G;if(b)for(p=[];b;b=b.G)p.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new P(h,l);else if(h instanceof P)h.target=h.target||l;else{var O=h;h=new P(b,l),xe(h,O)}O=!0;let M,q;if(p)for(q=p.length-1;q>=0;q--)M=h.g=p[q],O=al(M,b,!0,h)&&O;if(M=h.g=l,O=al(M,b,!0,h)&&O,O=al(M,b,!1,h)&&O,p)for(q=0;q<p.length;q++)M=h.g=p[q],O=al(M,b,!1,h)&&O}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const p=l.g[h];for(let b=0;b<p.length;b++)B(p[b]);delete l.g[h],l.h--}}this.G=null},at.prototype.J=function(l,h,p,b){return this.i.add(String(l),h,!1,p,b)},at.prototype.K=function(l,h,p,b){return this.i.add(String(l),h,!0,p,b)};function al(l,h,p,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let O=!0;for(let M=0;M<h.length;++M){const q=h[M];if(q&&!q.da&&q.capture==p){const ne=q.listener,qe=q.ha||q.src;q.fa&&ye(l.i,q),O=ne.call(qe,b)!==!1&&O}}return O&&!b.defaultPrevented}function $T(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function bg(l){l.g=$T(()=>{l.g=null,l.i&&(l.i=!1,bg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class BT extends A{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:bg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(l){A.call(this),this.h=l,this.g={}}m(so,A);var Eg=[];function Tg(l){F(l.g,function(h,p){this.g.hasOwnProperty(p)&&hd(h)},l),l.g={}}so.prototype.N=function(){so.Z.N.call(this),Tg(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pd=o.JSON.stringify,zT=o.JSON.parse,HT=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Ig(){}function Sg(){}var io={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gd(){P.call(this,"d")}m(gd,P);function yd(){P.call(this,"c")}m(yd,P);var us={},Ng=null;function ll(){return Ng=Ng||new at}us.Ia="serverreachability";function kg(l){P.call(this,us.Ia,l)}m(kg,P);function oo(l){const h=ll();gt(h,new kg(h))}us.STAT_EVENT="statevent";function Cg(l,h){P.call(this,us.STAT_EVENT,l),this.stat=h}m(Cg,P);function yt(l){const h=ll();gt(h,new Cg(h,l))}us.Ja="timingevent";function Ag(l,h){P.call(this,us.Ja,l),this.size=h}m(Ag,P);function ao(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function lo(){this.g=!0}lo.prototype.ua=function(){this.g=!1};function qT(l,h,p,b,O,M){l.info(function(){if(l.g)if(M){var q="",ne=M.split("&");for(let ve=0;ve<ne.length;ve++){var qe=ne[ve].split("=");if(qe.length>1){const Qe=qe[0];qe=qe[1];const Sn=Qe.split("_");q=Sn.length>=2&&Sn[1]=="type"?q+(Qe+"="+qe+"&"):q+(Qe+"=redacted&")}}}else q=null;else q=M;return"XMLHTTP REQ ("+b+") [attempt "+O+"]: "+h+`
`+p+`
`+q})}function WT(l,h,p,b,O,M,q){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+O+"]: "+h+`
`+p+`
`+M+" "+q})}function Xs(l,h,p,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+KT(l,p)+(b?" "+b:"")})}function GT(l,h){l.info(function(){return"TIMEOUT: "+h})}lo.prototype.info=function(){};function KT(l,h){if(!l.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var p=M[l];if(!(p.length<2)){var b=p[1];if(Array.isArray(b)&&!(b.length<1)){var O=b[0];if(O!="noop"&&O!="stop"&&O!="close")for(let q=1;q<b.length;q++)b[q]=""}}}}return pd(M)}catch{return h}}var cl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pg;function vd(){}m(vd,Ig),vd.prototype.g=function(){return new XMLHttpRequest},Pg=new vd;function co(l){return encodeURIComponent(String(l))}function QT(l){var h=1;l=l.split(":");const p=[];for(;h>0&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function pr(l,h,p,b){this.j=l,this.i=h,this.l=p,this.S=b||1,this.V=new so(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new jg}function jg(){this.i=null,this.g="",this.h=!1}var Dg={},wd={};function _d(l,h,p){l.M=1,l.A=dl(In(h)),l.u=p,l.R=!0,Lg(l,null)}function Lg(l,h){l.F=Date.now(),ul(l),l.B=In(l.A);var p=l.B,b=l.S;Array.isArray(b)||(b=[String(b)]),Kg(p.i,"t",b),l.C=0,p=l.j.L,l.h=new jg,l.g=hy(l.j,p?h:null,!l.u),l.P>0&&(l.O=new BT(d(l.Y,l,l.g),l.P)),h=l.V,p=l.g,b=l.ba;var O="readystatechange";Array.isArray(O)||(O&&(Eg[0]=O.toString()),O=Eg);for(let M=0;M<O.length;M++){const q=ol(p,O[M],b||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.J?Q(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),oo(),qT(l.i,l.v,l.B,l.l,l.S,l.u)}pr.prototype.ba=function(l){l=l.target;const h=this.O;h&&vr(l)==3?h.j():this.Y(l)},pr.prototype.Y=function(l){try{if(l==this.g)e:{const ne=vr(this.g),qe=this.g.ya(),ve=this.g.ca();if(!(ne<3)&&(ne!=3||this.g&&(this.h.h||this.g.la()||ty(this.g)))){this.K||ne!=4||qe==7||(qe==8||ve<=0?oo(3):oo(2)),xd(this);var h=this.g.ca();this.X=h;var p=YT(this);if(this.o=h==200,WT(this.i,this.v,this.B,this.l,this.S,ne,h),this.o){if(this.U&&!this.L){t:{if(this.g){var b,O=this.g;if((b=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(b)){var M=b;break t}}M=null}if(l=M)Xs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bd(this,l);else{this.o=!1,this.m=3,yt(12),ds(this),uo(this);break e}}if(this.R){l=!0;let Qe;for(;!this.K&&this.C<p.length;)if(Qe=XT(this,p),Qe==wd){ne==4&&(this.m=4,yt(14),l=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==Dg){this.m=4,yt(15),Xs(this.i,this.l,p,"[Invalid Chunk]"),l=!1;break}else Xs(this.i,this.l,Qe,null),bd(this,Qe);if(Og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||p.length!=0||this.h.h||(this.m=1,yt(16),l=!1),this.o=this.o&&l,!l)Xs(this.i,this.l,p,"[Invalid Chunked Response]"),ds(this),uo(this);else if(p.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Ad(q),q.P=!0,yt(11))}}else Xs(this.i,this.l,p,null),bd(this,p);ne==4&&ds(this),this.o&&!this.K&&(ne==4?ly(this.j,this):(this.o=!1,ul(this)))}else dI(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),ds(this),uo(this)}}}catch{}finally{}};function YT(l){if(!Og(l))return l.g.la();const h=ty(l.g);if(h==="")return"";let p="";const b=h.length,O=vr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return ds(l),uo(l),"";l.h.i=new o.TextDecoder}for(let M=0;M<b;M++)l.h.h=!0,p+=l.h.i.decode(h[M],{stream:!(O&&M==b-1)});return h.length=0,l.h.g+=p,l.C=0,l.h.g}function Og(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function XT(l,h){var p=l.C,b=h.indexOf(`
`,p);return b==-1?wd:(p=Number(h.substring(p,b)),isNaN(p)?Dg:(b+=1,b+p>h.length?wd:(h=h.slice(b,b+p),l.C=b+p,h)))}pr.prototype.cancel=function(){this.K=!0,ds(this)};function ul(l){l.T=Date.now()+l.H,Mg(l,l.H)}function Mg(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=ao(d(l.aa,l),h)}function xd(l){l.D&&(o.clearTimeout(l.D),l.D=null)}pr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(GT(this.i,this.B),this.M!=2&&(oo(),yt(17)),ds(this),this.m=2,uo(this)):Mg(this,this.T-l)};function uo(l){l.j.I==0||l.K||ly(l.j,l)}function ds(l){xd(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,Tg(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function bd(l,h){try{var p=l.j;if(p.I!=0&&(p.g==l||Ed(p.h,l))){if(!l.L&&Ed(p.h,l)&&p.I==3){try{var b=p.Ba.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var O=b;if(O[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<l.F)gl(p),ml(p);else break e;Cd(p),yt(18)}}else p.xa=O[1],0<p.xa-p.K&&O[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=ao(d(p.Va,p),6e3));Ug(p.h)<=1&&p.ta&&(p.ta=void 0)}else fs(p,11)}else if((l.L||p.g==l)&&gl(p),!k(h))for(O=p.Ba.g.parse(h),h=0;h<O.length;h++){let ve=O[h];const Qe=ve[0];if(!(Qe<=p.K))if(p.K=Qe,ve=ve[1],p.I==2)if(ve[0]=="c"){p.M=ve[1],p.ba=ve[2];const Sn=ve[3];Sn!=null&&(p.ka=Sn,p.j.info("VER="+p.ka));const ms=ve[4];ms!=null&&(p.za=ms,p.j.info("SVER="+p.za));const wr=ve[5];wr!=null&&typeof wr=="number"&&wr>0&&(b=1.5*wr,p.O=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const _r=l.g;if(_r){const vl=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var M=b.h;M.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Td(M,M.h),M.h=null))}if(b.G){const Rd=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;Rd&&(b.wa=Rd,be(b.J,b.G,Rd))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-l.F,p.j.info("Handshake RTT: "+p.T+"ms")),b=p;var q=l;if(b.na=dy(b,b.L?b.ba:null,b.W),q.L){$g(b.h,q);var ne=q,qe=b.O;qe&&(ne.H=qe),ne.D&&(xd(ne),ul(ne)),b.g=q}else oy(b);p.i.length>0&&pl(p)}else ve[0]!="stop"&&ve[0]!="close"||fs(p,7);else p.I==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?fs(p,7):kd(p):ve[0]!="noop"&&p.l&&p.l.qa(ve),p.A=0)}}oo(4)}catch{}}var JT=class{constructor(l,h){this.g=l,this.map=h}};function Vg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ug(l){return l.h?1:l.g?l.g.size:0}function Ed(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Td(l,h){l.g?l.g.add(h):l.h=h}function $g(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Vg.prototype.cancel=function(){if(this.i=Bg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Bg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.G);return h}return x(l.i)}var zg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZT(l,h){if(l){l=l.split("&");for(let p=0;p<l.length;p++){const b=l[p].indexOf("=");let O,M=null;b>=0?(O=l[p].substring(0,b),M=l[p].substring(b+1)):O=l[p],h(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function gr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof gr?(this.l=l.l,ho(this,l.j),this.o=l.o,this.g=l.g,fo(this,l.u),this.h=l.h,Id(this,Qg(l.i)),this.m=l.m):l&&(h=String(l).match(zg))?(this.l=!1,ho(this,h[1]||"",!0),this.o=mo(h[2]||""),this.g=mo(h[3]||"",!0),fo(this,h[4]),this.h=mo(h[5]||"",!0),Id(this,h[6]||"",!0),this.m=mo(h[7]||"")):(this.l=!1,this.i=new go(null,this.l))}gr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(po(h,Hg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(po(h,Hg,!0),"@"),l.push(co(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&l.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(po(p,p.charAt(0)=="/"?nI:tI,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",po(p,sI)),l.join("")},gr.prototype.resolve=function(l){const h=In(this);let p=!!l.j;p?ho(h,l.j):p=!!l.o,p?h.o=l.o:p=!!l.g,p?h.g=l.g:p=l.u!=null;var b=l.h;if(p)fo(h,l.u);else if(p=!!l.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var O=h.h.lastIndexOf("/");O!=-1&&(b=h.h.slice(0,O+1)+b)}if(O=b,O==".."||O==".")b="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){b=O.lastIndexOf("/",0)==0,O=O.split("/");const M=[];for(let q=0;q<O.length;){const ne=O[q++];ne=="."?b&&q==O.length&&M.push(""):ne==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),b&&q==O.length&&M.push("")):(M.push(ne),b=!0)}b=M.join("/")}else b=O}return p?h.h=b:p=l.i.toString()!=="",p?Id(h,Qg(l.i)):p=!!l.m,p&&(h.m=l.m),h};function In(l){return new gr(l)}function ho(l,h,p){l.j=p?mo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function fo(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Id(l,h,p){h instanceof go?(l.i=h,iI(l.i,l.l)):(p||(h=po(h,rI)),l.i=new go(h,l.l))}function be(l,h,p){l.i.set(h,p)}function dl(l){return be(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function mo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function po(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,eI),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function eI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Hg=/[#\/\?@]/g,tI=/[#\?:]/g,nI=/[#\?]/g,rI=/[#\?@]/g,sI=/#/g;function go(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function hs(l){l.g||(l.g=new Map,l.h=0,l.i&&ZT(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=go.prototype,t.add=function(l,h){hs(this),this.i=null,l=Js(this,l);let p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function qg(l,h){hs(l),h=Js(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Wg(l,h){return hs(l),h=Js(l,h),l.g.has(h)}t.forEach=function(l,h){hs(this),this.g.forEach(function(p,b){p.forEach(function(O){l.call(h,O,b,this)},this)},this)};function Gg(l,h){hs(l);let p=[];if(typeof h=="string")Wg(l,h)&&(p=p.concat(l.g.get(Js(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)p=p.concat(l[h]);return p}t.set=function(l,h){return hs(this),this.i=null,l=Js(this,l),Wg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Gg(this,l),l.length>0?String(l[0]):h):h};function Kg(l,h,p){qg(l,h),p.length>0&&(l.i=null,l.g.set(Js(l,h),x(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let b=0;b<h.length;b++){var p=h[b];const O=co(p);p=Gg(this,p);for(let M=0;M<p.length;M++){let q=O;p[M]!==""&&(q+="="+co(p[M])),l.push(q)}}return this.i=l.join("&")};function Qg(l){const h=new go;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Js(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function iI(l,h){h&&!l.j&&(hs(l),l.i=null,l.g.forEach(function(p,b){const O=b.toLowerCase();b!=O&&(qg(this,b),Kg(this,O,p))},l)),l.j=h}function oI(l,h){const p=new lo;if(o.Image){const b=new Image;b.onload=f(yr,p,"TestLoadImage: loaded",!0,h,b),b.onerror=f(yr,p,"TestLoadImage: error",!1,h,b),b.onabort=f(yr,p,"TestLoadImage: abort",!1,h,b),b.ontimeout=f(yr,p,"TestLoadImage: timeout",!1,h,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function aI(l,h){const p=new lo,b=new AbortController,O=setTimeout(()=>{b.abort(),yr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(M=>{clearTimeout(O),M.ok?yr(p,"TestPingServer: ok",!0,h):yr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),yr(p,"TestPingServer: error",!1,h)})}function yr(l,h,p,b,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),b(p)}catch{}}function lI(){this.g=new HT}function Sd(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Sd,Ig),Sd.prototype.g=function(){return new hl(this.i,this.h)};function hl(l,h){at.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(hl,at),t=hl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,vo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,vo(this)),this.g&&(this.readyState=3,vo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?yo(this):vo(this),this.readyState==3&&Yg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,yo(this))},t.Na=function(l){this.g&&(this.response=l,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,vo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function vo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Xg(l){let h="";return F(l,function(p,b){h+=b,h+=":",h+=p,h+=`\r
`}),h}function Nd(l,h,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=Xg(p),typeof l=="string"?p!=null&&co(p):be(l,h,p))}function Oe(l){at.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Oe,at);var cI=/^https?$/i,uI=["POST","PUT"];t=Oe.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pg.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){Jg(this,M);return}if(l=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var O in b)p.set(O,b[O]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const M of b.keys())p.set(M,b.get(M));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),O=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(uI,h,void 0)>=0)||b||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of p)this.g.setRequestHeader(M,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){Jg(this,M)}};function Jg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Zg(l),fl(l)}function Zg(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,gt(this,"complete"),gt(this,"abort"),fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fl(this,!0)),Oe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ey(this):this.Xa())},t.Xa=function(){ey(this)};function ey(l){if(l.h&&typeof i<"u"){if(l.v&&vr(l)==4)setTimeout(l.Ca.bind(l),0);else if(gt(l,"readystatechange"),vr(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var b;if(b=M===0){let q=String(l.D).match(zg)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),b=!cI.test(q?q.toLowerCase():"")}p=b}if(p)gt(l,"complete"),gt(l,"success");else{l.o=6;try{var O=vr(l)>2?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.ca()+"]",Zg(l)}}finally{fl(l)}}}}function fl(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const p=l.g;l.g=null,h||gt(l,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),zT(h)}};function ty(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function dI(l){const h={};l=(l.g&&vr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(k(l[b]))continue;var p=QT(l[b]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[O]||[];h[O]=M,M.push(p)}D(h,function(b){return b.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wo(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function ny(l){this.za=0,this.i=[],this.j=new lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wo("baseRetryDelayMs",5e3,l),this.Za=wo("retryDelaySeedMs",1e4,l),this.Ta=wo("forwardChannelMaxRetries",2,l),this.va=wo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Vg(l&&l.concurrentRequestLimit),this.Ba=new lI,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ny.prototype,t.ka=8,t.I=1,t.connect=function(l,h,p,b){yt(0),this.W=l,this.H=h||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.J=dy(this,null,this.W),pl(this)};function kd(l){if(ry(l),l.I==3){var h=l.V++,p=In(l.J);if(be(p,"SID",l.M),be(p,"RID",h),be(p,"TYPE","terminate"),_o(l,p),h=new pr(l,l.j,h),h.M=2,h.A=dl(In(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=hy(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ul(h)}uy(l)}function ml(l){l.g&&(Ad(l),l.g.cancel(),l.g=null)}function ry(l){ml(l),l.v&&(o.clearTimeout(l.v),l.v=null),gl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function pl(l){if(!Fg(l.h)&&!l.m){l.m=!0;var h=l.Ea;L||v(),V||(L(),V=!0),T.add(h,l),l.D=0}}function hI(l,h){return Ug(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=ao(d(l.Ea,l,h),cy(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const O=new pr(this,this.j,l);let M=this.o;if(this.U&&(M?(M=Q(M),xe(M,this.U)):M=this.U),this.u!==null||this.R||(O.J=M,M=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=iy(this,O,h),p=In(this.J),be(p,"RID",l),be(p,"CVER",22),this.G&&be(p,"X-HTTP-Session-Id",this.G),_o(this,p),M&&(this.R?h="headers="+co(Xg(M))+"&"+h:this.u&&Nd(p,this.u,M)),Td(this.h,O),this.Ra&&be(p,"TYPE","init"),this.S?(be(p,"$req",h),be(p,"SID","null"),O.U=!0,_d(O,p,null)):_d(O,p,h),this.I=2}}else this.I==3&&(l?sy(this,l):this.i.length==0||Fg(this.h)||sy(this))};function sy(l,h){var p;h?p=h.l:p=l.V++;const b=In(l.J);be(b,"SID",l.M),be(b,"RID",p),be(b,"AID",l.K),_o(l,b),l.u&&l.o&&Nd(b,l.u,l.o),p=new pr(l,l.j,p,l.D+1),l.u===null&&(p.J=l.o),h&&(l.i=h.G.concat(l.i)),h=iy(l,p,1e3),p.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Td(l.h,p),_d(p,b,h)}function _o(l,h){l.H&&F(l.H,function(p,b){be(h,b,p)}),l.l&&F({},function(p,b){be(h,b,p)})}function iy(l,h,p){p=Math.min(l.i.length,p);const b=l.l?d(l.l.Ka,l.l,l):null;e:{var O=l.i;let ne=-1;for(;;){const qe=["count="+p];ne==-1?p>0?(ne=O[0].g,qe.push("ofs="+ne)):ne=0:qe.push("ofs="+ne);let ve=!0;for(let Qe=0;Qe<p;Qe++){var M=O[Qe].g;const Sn=O[Qe].map;if(M-=ne,M<0)ne=Math.max(0,O[Qe].g-100),ve=!1;else try{M="req"+M+"_"||"";try{var q=Sn instanceof Map?Sn:Object.entries(Sn);for(const[ms,wr]of q){let _r=wr;c(wr)&&(_r=pd(wr)),qe.push(M+ms+"="+encodeURIComponent(_r))}}catch(ms){throw qe.push(M+"type="+encodeURIComponent("_badmap")),ms}}catch{b&&b(Sn)}}if(ve){q=qe.join("&");break e}}q=void 0}return l=l.i.splice(0,p),h.G=l,q}function oy(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;L||v(),V||(L(),V=!0),T.add(h,l),l.A=0}}function Cd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=ao(d(l.Da,l),cy(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,ay(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=ao(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),ml(this),ay(this))};function Ad(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function ay(l){l.g=new pr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=In(l.na);be(h,"RID","rpc"),be(h,"SID",l.M),be(h,"AID",l.K),be(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&be(h,"TO",l.ia),be(h,"TYPE","xmlhttp"),_o(l,h),l.u&&l.o&&Nd(h,l.u,l.o),l.O&&(l.g.H=l.O);var p=l.g;l=l.ba,p.M=1,p.A=dl(In(h)),p.u=null,p.R=!0,Lg(p,l)}t.Va=function(){this.C!=null&&(this.C=null,ml(this),Cd(this),yt(19))};function gl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function ly(l,h){var p=null;if(l.g==h){gl(l),Ad(l),l.g=null;var b=2}else if(Ed(l.h,h))p=h.G,$g(l.h,h),b=1;else return;if(l.I!=0){if(h.o)if(b==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var O=l.D;b=ll(),gt(b,new Ag(b,p)),pl(l)}else oy(l);else if(O=h.m,O==3||O==0&&h.X>0||!(b==1&&hI(l,h)||b==2&&Cd(l)))switch(p&&p.length>0&&(h=l.h,h.i=h.i.concat(p)),O){case 1:fs(l,5);break;case 4:fs(l,10);break;case 3:fs(l,6);break;default:fs(l,2)}}}function cy(l,h){let p=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(p*=2),p*h}function fs(l,h){if(l.j.info("Error code "+h),h==2){var p=d(l.bb,l),b=l.Ua;const O=!b;b=new gr(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ho(b,"https"),dl(b),O?oI(b.toString(),p):aI(b.toString(),p)}else yt(2);l.I=0,l.l&&l.l.pa(h),uy(l),ry(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function uy(l){if(l.I=0,l.ja=[],l.l){const h=Bg(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ja,h),N(l.ja,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.oa()}}function dy(l,h,p){var b=p instanceof gr?In(p):new gr(p);if(b.g!="")h&&(b.g=h+"."+b.g),fo(b,b.u);else{var O=o.location;b=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;const M=new gr(null);b&&ho(M,b),h&&(M.g=h),O&&fo(M,O),p&&(M.h=p),b=M}return p=l.G,h=l.wa,p&&h&&be(b,p,h),be(b,"VER",l.ka),_o(l,b),b}function hy(l,h,p){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new Oe(new Sd({ab:p})):new Oe(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fy(){}t=fy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yl(){}yl.prototype.g=function(l,h){return new Vt(l,h)};function Vt(l,h){at.call(this),this.g=new ny(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!k(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Zs(this)}m(Vt,at),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){kd(this.g)},Vt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.v&&(p={},p.__data__=pd(l),l=p);h.i.push(new JT(h.Ya++,l)),h.I==3&&pl(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,Vt.Z.N.call(this)};function my(l){gd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(my,gd);function py(){yd.call(this),this.status=1}m(py,yd);function Zs(l){this.g=l}m(Zs,fy),Zs.prototype.ra=function(){gt(this.g,"a")},Zs.prototype.qa=function(l){gt(this.g,new my(l))},Zs.prototype.pa=function(l){gt(this.g,new py)},Zs.prototype.oa=function(){gt(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,aE=function(){return new yl},oE=function(){return ll()},iE=us,Cf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,cc=cl,Rg.COMPLETE="complete",sE=Rg,Sg.EventType=io,io.OPEN="a",io.CLOSE="b",io.ERROR="c",io.MESSAGE="d",at.prototype.listen=at.prototype.J,Vo=Sg,Oe.prototype.listenOnce=Oe.prototype.K,Oe.prototype.getLastError=Oe.prototype.Ha,Oe.prototype.getLastErrorCode=Oe.prototype.ya,Oe.prototype.getStatus=Oe.prototype.ca,Oe.prototype.getResponseJson=Oe.prototype.La,Oe.prototype.getResponseText=Oe.prototype.la,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Fa,rE=Oe}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});const lv="@firebase/firestore",cv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new ju("@firebase/firestore");function ni(){return Ms.logLevel}function K(t,...e){if(Ms.logLevel<=oe.DEBUG){const n=e.map(yp);Ms.debug(`Firestore (${Qi}): ${t}`,...n)}}function ar(t,...e){if(Ms.logLevel<=oe.ERROR){const n=e.map(yp);Ms.error(`Firestore (${Qi}): ${t}`,...n)}}function Oi(t,...e){if(Ms.logLevel<=oe.WARN){const n=e.map(yp);Ms.warn(`Firestore (${Qi}): ${t}`,...n)}}function yp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lE(t,r,n)}function lE(t,e,n){let r=`FIRESTORE (${Qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ar(r),new Error(r)}function pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||lE(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class vP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wP{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new cE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class _P{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _P(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new uv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Af(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fh(s)===fh(i)?ae(s,i):fh(s)?1:-1}return ae(t.length,e.length)}const TP=55296,IP=57343;function fh(t){const e=t.charCodeAt(0);return e>=TP&&e<=IP}function Mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Cn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),s=Cn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):Af(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class we extends Cn{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const SP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Cn{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return SP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dv}static keyField(){return new rt([dv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new G(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(we.fromString(e))}static fromName(e){return new X(we.fromString(e).popFirst(5))}static empty(){return new X(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e,n){if(!n)throw new G(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NP(t,e,n,r){if(e===!0&&r===!0)throw new G(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hv(t){if(!X.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fv(t){if(X.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mu(t);throw new G(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ya(t,e){if(!dE(t))throw new G(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=-62135596800,pv=1e6;class Te{static now(){return Te.fromMillis(Date.now())}static fromDate(e){return Te.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*pv);return new Te(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<mv)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pv}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Te._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ya(e,Te._jsonSchema))return new Te(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Te._jsonSchemaVersion="firestore/timestamp/1.0",Te._jsonSchema={type:He("string",Te._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Te(0,0))}static max(){return new ee(new Te(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=-1;function kP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Te(n+1,0):new Te(n,r));return new Qr(s,X.empty(),e)}function CP(t){return new Qr(t.readTime,t.key,Na)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(ee.min(),X.empty(),Na)}static max(){return new Qr(ee.max(),X.empty(),Na)}}function AP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==RP)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function jP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=-1;function Fu(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function DP(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="";function LP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=gv(e)),e=OP(t.get(n),e);return gv(e)}function OP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case hE:n+="";break;default:n+=i}}return n}function gv(t){return t+hE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function as(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fl(this.root,e,this.comparator,!0)}}class Fl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??nt.RED,this.left=s??nt.EMPTY,this.right=i??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vv(this.data.getIterator())}getIteratorFrom(e){return new vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new Ke(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mE("Invalid base64 string: "+i):i}}(e);return new ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const MP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const n=MP.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="server_timestamp",gE="__type__",yE="__previous_value__",vE="__local_write_time__";function _p(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gE])==null?void 0:r.stringValue)===pE}function Uu(t){const e=t.mapValue.fields[yE];return _p(e)?Uu(e):e}function ka(t){const e=Yr(t.mapValue.fields[vE].timestampValue);return new Te(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Xc="(default)";class Ca{constructor(e,n){this.projectId=e,this.database=n||Xc}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database===Xc}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="__type__",FP="__max__",Ul={mapValue:{}},_E="__vector__",Jc="value";function Jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_p(t)?4:$P(t)?9007199254740991:UP(t)?10:11:Z(28295,{value:t})}function Fn(t,e){if(t===e)return!0;const n=Jr(t);if(n!==Jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ka(t).isEqual(ka(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),c=Yr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Xr(s.bytesValue).isEqual(Xr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),c=Fe(i.doubleValue);return o===c?Yc(o)===Yc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(yv(o)!==yv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Fn(o[u],c[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function Aa(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function Vi(t,e){if(t===e)return 0;const n=Jr(t),r=Jr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return wv(t.timestampValue,e.timestampValue);case 4:return wv(ka(t),ka(e));case 5:return Af(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Xr(i),u=Xr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ae(c[d],u[d]);if(f!==0)return f}return ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ae(Fe(i.latitude),Fe(o.latitude));return c!==0?c:ae(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _v(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,x,N,y;const c=i.fields||{},u=o.fields||{},d=(g=c[Jc])==null?void 0:g.arrayValue,f=(x=u[Jc])==null?void 0:x.arrayValue,m=ae(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((y=f==null?void 0:f.values)==null?void 0:y.length)||0);return m!==0?m:_v(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ul.mapValue&&o===Ul.mapValue)return 0;if(i===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Af(u[m],f[m]);if(g!==0)return g;const x=Vi(c[u[m]],d[f[m]]);if(x!==0)return x}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function wv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Yr(t),r=Yr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function _v(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vi(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Fi(t){return Rf(t)}function Rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Rf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Rf(n.fields[o])}`;return s+"}"}(t.mapValue):Z(61005,{value:t})}function uc(t){switch(Jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uu(t);return e?16+uc(e):16;case 5:return 2*t.stringValue.length;case 6:return Xr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+uc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return as(r.fields,(i,o)=>{s+=i.length+uc(o)}),s}(t.mapValue);default:throw Z(13486,{value:t})}}function xv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pf(t){return!!t&&"integerValue"in t}function xp(t){return!!t&&"arrayValue"in t}function bv(t){return!!t&&"nullValue"in t}function Ev(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function UP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[wE])==null?void 0:r.stringValue)===_E}function ea(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return as(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ea(t.arrayValue.values[n]);return e}return{...t}}function $P(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===FP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(n)}setAll(e){let n=rt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ea(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){as(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(ea(this.value))}}function xE(t){const e=[];return as(t.fields,(n,r)=>{const s=new rt([n]);if(dc(r)){const i=xE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ft(e,0,ee.min(),ee.min(),ee.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ee.min(),ee.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ee.min(),ee.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function Tv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Vi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n="asc"){this.field=e,this.dir=n}}function BP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{}class ze extends bE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HP(e,n,r):n==="array-contains"?new GP(e,r):n==="in"?new KP(e,r):n==="not-in"?new QP(e,r):n==="array-contains-any"?new YP(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qP(e,r):new WP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vi(n,this.value)):n!==null&&Jr(this.value)===Jr(n)&&this.matchesComparison(Vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends bE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xn(e,n)}matches(e){return EE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function EE(t){return t.op==="and"}function TE(t){return zP(t)&&EE(t)}function zP(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function jf(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(TE(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(n=>jf(n)).join(",");return`${t.op}(${e})`}}function IE(t,e){return t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&Fn(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&IE(o,s.filters[c]),!0):!1}(t,e):void Z(19439)}function SE(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"}(t):"Filter"}class HP extends ze{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class qP extends ze{constructor(e,n){super(e,"in",n),this.keys=NE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WP extends ze{constructor(e,n){super(e,"not-in",n),this.keys=NE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class GP extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xp(n)&&Aa(n.arrayValue,this.value)}}class KP extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class QP extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Aa(this.value.arrayValue,n)}}class YP extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Sv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new XP(t,e,n,r,s,i,o)}function bp(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Fu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.Te=n}return e.Te}function Ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iv(t.startAt,e.startAt)&&Iv(t.endAt,e.endAt)}function Df(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JP(t,e,n,r,s,i,o,c){return new Ji(t,e,n,r,s,i,o,c)}function $u(t){return new Ji(t)}function Nv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kE(t){return t.collectionGroup!==null}function ta(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ke(rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ra(i,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Ra(rt.keyField(),r))}return e.Ie}function Ln(t){const e=te(t);return e.Ee||(e.Ee=ZP(e,ta(t))),e.Ee}function ZP(t,e){if(t.limitType==="F")return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ra(s.field,i)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lf(t,e){const n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function eu(t,e,n){return new Ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bu(t,e){return Ep(Ln(t),Ln(e))&&t.limitType===e.limitType}function CE(t){return`${bp(Ln(t))}|lt:${t.limitType}`}function ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>SE(s)).join(", ")}]`),Fu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fi(s)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ta(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Tv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ta(r),s)||r.endAt&&!function(o,c,u){const d=Tv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ta(r),s))}(t,e)}function ej(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AE(t){return(e,n)=>{let r=!1;for(const s of ta(t)){const i=tj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function tj(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Vi(u,d):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=new De(X.comparator);function lr(){return nj}const RE=new De(X.comparator);function Fo(...t){let e=RE;for(const n of t)e=e.insert(n.key,n);return e}function PE(t){let e=RE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bs(){return na()}function jE(){return na()}function na(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const rj=new De(X.comparator),sj=new Ke(X.comparator);function le(...t){let e=sj;for(const n of t)e=e.add(n);return e}const ij=new Ke(ae);function oj(){return ij}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function DE(t){return{integerValue:""+t}}function aj(t,e){return DP(e)?DE(e):Tp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function lj(t,e,n){return t instanceof Pa?function(s,i){const o={fields:{[gE]:{stringValue:pE},[vE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_p(i)&&(i=Uu(i)),i&&(o.fields[yE]=i),{mapValue:o}}(n,e):t instanceof ja?OE(t,e):t instanceof Da?ME(t,e):function(s,i){const o=LE(s,i),c=kv(o)+kv(s.Ae);return Pf(o)&&Pf(s.Ae)?DE(c):Tp(s.serializer,c)}(t,e)}function cj(t,e,n){return t instanceof ja?OE(t,e):t instanceof Da?ME(t,e):n}function LE(t,e){return t instanceof tu?function(r){return Pf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pa extends Hu{}class ja extends Hu{constructor(e){super(),this.elements=e}}function OE(t,e){const n=VE(e);for(const r of t.elements)n.some(s=>Fn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Da extends Hu{constructor(e){super(),this.elements=e}}function ME(t,e){let n=VE(e);for(const r of t.elements)n=n.filter(s=>!Fn(s,r));return{arrayValue:{values:n}}}class tu extends Hu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kv(t){return Fe(t.integerValue||t.doubleValue)}function VE(t){return xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.field=e,this.transform=n}}function dj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ja&&s instanceof ja||r instanceof Da&&s instanceof Da?Mi(r.elements,s.elements,Fn):r instanceof tu&&s instanceof tu?Fn(r.Ae,s.Ae):r instanceof Pa&&s instanceof Pa}(t.transform,e.transform)}class hj{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qu{}function FE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ip(t.key,nn.none()):new Xa(t.key,t.data,nn.none());{const n=t.data,r=Ct.empty();let s=new Ke(rt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ls(t.key,r,new Bt(s.toArray()),nn.none())}}function fj(t,e,n){t instanceof Xa?function(s,i,o){const c=s.value.clone(),u=Av(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ls?function(s,i,o){if(!hc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Av(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(UE(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,r){return t instanceof Xa?function(i,o,c,u){if(!hc(i.precondition,o))return c;const d=i.value.clone(),f=Rv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ls?function(i,o,c,u){if(!hc(i.precondition,o))return c;const d=Rv(i.fieldTransforms,u,o),f=o.data;return f.setAll(UE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return hc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function mj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=LE(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function Cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mi(r,s,(i,o)=>dj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends qu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ls extends qu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Av(t,e,n){const r=new Map;pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,cj(o,c,n[s]))}return r}function Rv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,lj(i,o,e))}return r}class Ip extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pj extends qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ra(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=FE(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(n,r)=>Cv(n,r))&&Mi(this.baseMutations,e.baseMutations,(n,r)=>Cv(n,r))}}class Sp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return rj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Sp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ue;function wj(t){switch(t){case U.OK:return Z(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function $E(t){if(t===void 0)return ar("GRPC error has no .code"),U.UNKNOWN;switch(t){case $e.OK:return U.OK;case $e.CANCELLED:return U.CANCELLED;case $e.UNKNOWN:return U.UNKNOWN;case $e.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case $e.INTERNAL:return U.INTERNAL;case $e.UNAVAILABLE:return U.UNAVAILABLE;case $e.UNAUTHENTICATED:return U.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case $e.NOT_FOUND:return U.NOT_FOUND;case $e.ALREADY_EXISTS:return U.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return U.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case $e.ABORTED:return U.ABORTED;case $e.OUT_OF_RANGE:return U.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return U.UNIMPLEMENTED;case $e.DATA_LOSS:return U.DATA_LOSS;default:return Z(39323,{code:t})}}(ue=$e||($e={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new Hr([4294967295,4294967295],0);function Pv(t){const e=_j().encode(t),n=new nE;return n.update(e),new Uint8Array(n.digest())}function jv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([s,i],0)]}class Np{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Uo(`Invalid padding: ${n}`);if(r<0)throw new Uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Uo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hr.fromNumber(r)));return s.compare(xj)===1&&(s=new Hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Pv(e),[r,s]=jv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Np(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Pv(e),[r,s]=jv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wu(ee.min(),s,new De(ae),lr(),le())}}class Ja{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ja(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class BE{constructor(e,n){this.targetId=e,this.Ce=n}}class zE{constructor(e,n,r=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Dv{constructor(){this.ve=0,this.Fe=Lv(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z(38017,{changeType:i})}}),new Ja(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Lv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bj{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.Je=$l(),this.He=$l(),this.Ye=new De(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Df(i))if(r===0){const o=new X(i.path);this.et(n,o,ft.newNoDocument(o,ee.min()))}else pe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Xr(r).toUint8Array()}catch(u){if(u instanceof mE)return Oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Np(o,s,i)}catch(u){return Oi(u instanceof Uo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Df(c.target)){const u=new X(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ft.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=le();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Wu(e,n,this.Ye,this.je,r);return this.je=lr(),this.Je=$l(),this.He=$l(),this.Ye=new De(ae),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ke(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ke(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $l(){return new De(X.comparator)}function Lv(){return new De(X.comparator)}const Ej={asc:"ASCENDING",desc:"DESCENDING"},Tj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ij={and:"AND",or:"OR"};class Sj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Of(t,e){return t.useProto3Json||Fu(e)?e:{value:e}}function nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Nj(t,e){return nu(t,e.toTimestamp())}function On(t){return pe(!!t,49232),ee.fromTimestamp(function(n){const r=Yr(n);return new Te(r.seconds,r.nanos)}(t))}function kp(t,e){return Mf(t,e).canonicalString()}function Mf(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qE(t){const e=we.fromString(t);return pe(YE(e),10190,{key:e.toString()}),e}function Vf(t,e){return kp(t.databaseId,e.path)}function mh(t,e){const n=qE(e);if(n.get(1)!==t.databaseId.projectId)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(GE(n))}function WE(t,e){return kp(t.databaseId,e)}function kj(t){const e=qE(t);return e.length===4?we.emptyPath():GE(e)}function Ff(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GE(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ov(t,e,n){return{name:Vf(t,e),fields:n.value.mapValue.fields}}function Cj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(pe(f===void 0||typeof f=="string",58123),ot.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ot.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?U.UNKNOWN:$E(d.code);return new G(f,d.message||"")}(o);n=new zE(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mh(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):ee.min(),c=new Ct({mapValue:{fields:r.document.fields}}),u=ft.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mh(t,r.document),i=r.readTime?On(r.readTime):ee.min(),o=ft.newNoDocument(s,i),c=r.removedTargetIds||[];n=new fc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mh(t,r.document),i=r.removedTargetIds||[];n=new fc([],i,s,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new vj(s,i),c=r.targetId;n=new BE(c,o)}}return n}function Aj(t,e){let n;if(e instanceof Xa)n={update:Ov(t,e.key,e.value)};else if(e instanceof Ip)n={delete:Vf(t,e.key)};else if(e instanceof ls)n={update:Ov(t,e.key,e.data),updateMask:Fj(e.fieldMask)};else{if(!(e instanceof pj))return Z(16599,{Vt:e.type});n={verify:Vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tu)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Nj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z(27497)}(t,e.precondition)),n}function Rj(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(ee.min())&&(o=On(i)),new hj(o,s.transformResults||[])}(n,e))):[]}function Pj(t,e){return{documents:[WE(t,e.path)]}}function jj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WE(t,s);const i=function(d){if(d.length!==0)return QE(xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:si(g.field),direction:Oj(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Of(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Dj(t){let e=kj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=KE(m);return g instanceof xn&&TE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(N){return new Ra(ii(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Fu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Zc(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new Zc(x,g)}(n.endAt)),JP(e,s,o,i,c,"F",u,d)}function Lj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ii(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ii(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ii(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ii(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>KE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function Oj(t){return Ej[t]}function Mj(t){return Tj[t]}function Vj(t){return Ij[t]}function si(t){return{fieldPath:t.canonicalString()}}function ii(t){return rt.fromServerFormat(t.fieldPath)}function QE(t){return t instanceof ze?function(n){if(n.op==="=="){if(Ev(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(bv(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ev(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(bv(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:Mj(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>QE(s));return r.length===1?r[0]:{compositeFilter:{op:Vj(n.op),filters:r}}}(t):Z(54877,{filter:t})}function Fj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),c=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.yt=e}}function $j(t){const e=Dj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.Cn=new zj}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Qr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class zj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XE=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(XE,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ui(0)}static cr(){return new Ui(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LruGarbageCollector",Hj=1048576;function Fv([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class qj{constructor(e){this.Ir=e,this.buffer=new Ke(Fv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Wj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xi(n)?K(Vv,"Ignoring IndexedDB error during garbage collection: ",n):await Yi(n)}await this.Vr(3e5)})}}class Gj{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Vu.ce);const r=new qj(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Mv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ni()<=oe.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Kj(t,e){return new Gj(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ra(r.mutation,s,Bt.empty(),Te.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Fo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=lr();const o=na(),c=function(){return na()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof ls)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ra(f.mutation,d,f.mutation.getFieldMask(),Te.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new Yj(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=na();let s=new De((o,c)=>o-c),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Bt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||le()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=jE();f.forEach(g=>{if(!i.has(g)){const x=FE(n.get(g),r.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(bs());let c=Na,u=i;return o.next(d=>$.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?$.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,le())).next(f=>({batchId:c,changes:PE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Fo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Fo();return this.indexManager.getCollectionParents(e,i).next(c=>$.forEach(c,u=>{const d=function(m,g){return new Ji(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))});let c=Fo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ra(f.mutation,d,Bt.empty(),Te.now()),zu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:$j(s.bundledQuery),readTime:On(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.overlays=new De(X.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=bs(),i=n.length+1,o=new X(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=bs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=bs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return $.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yj(n,r));let i=this.qr.get(n);i===void 0&&(i=le(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this.Qr=new Ke(Ye.$r),this.Ur=new Ke(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ye(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new X(new we([])),r=new Ye(n,e),s=new Ye(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new we([])),r=new Ye(n,e),s=new Ye(n,e+1);let i=le();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ye(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ke(Ye.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gj(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Ye(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?wp:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),s=new Ye(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(ae);return n.forEach(s=>{const i=new Ye(s,0),o=new Ye(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new Ye(new X(i),0);let c=new Ke(ae);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),$.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new Ye(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ye(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.ri=e,this.docs=function(){return new De(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=lr();const o=n.path,c=new X(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||AP(CP(f),r)<=0||(s.has(f.key)||zu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rD(this)}getSize(e){return $.resolve(this.size)}}class rD extends Qj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.persistence=e,this.si=new Gs(n=>bp(n),Ep),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Cp,this.targetCount=0,this.ai=Ui.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ui(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vu(0),this.li=!1,this.li=!0,this.hi=new eD,this.referenceDelegate=e(this),this.Pi=new sD(this),this.indexManager=new Bj,this.remoteDocumentCache=function(s){return new nD(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Uj(n),this.Ii=new Jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new tD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new iD(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class iD extends PP{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Ri=new Cp,this.Vi=null}static mi(e){return new Ap(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=X.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ru{constructor(e,n){this.persistence=e,this.pi=new Gs(r=>LP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Kj(this,n)}static mi(e,n){return new ru(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uc(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Ik()?8:jP(pt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oD;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ni()<=oe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(ni()<=oe.DEBUG&&K("QueryEngine","Query:",ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ni()<=oe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):$.resolve())}ys(e,n){if(Nv(n))return $.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=eu(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=le(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,eu(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return Nv(n)||s.isEqual(ee.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?$.resolve(null):(ni()<=oe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ri(n)),this.vs(e,o,n,kP(s,Na)).next(c=>c))})}Ds(e,n){let r=new Ke(AE(e));return n.forEach((s,i)=>{zu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ni()<=oe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ri(n)),this.ps.getDocumentsMatchingQuery(e,n,Qr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="LocalStore",lD=3e8;class cD{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new De(ae),this.xs=new Gs(i=>bp(i),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function uD(t,e,n,r){return new cD(t,e,n,r)}async function ZE(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=le();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function dD(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let x=$.resolve();return g.forEach(N=>{x=x.next(()=>f.getEntry(u,N)).next(y=>{const C=d.docVersions.get(N);pe(C!==null,48541),y.version.compareTo(C)<0&&(m.applyToRemoteDocument(y,d),y.isValidDocument()&&(y.setReadTime(d.commitVersion),f.addEntry(y)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=le();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function e1(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function hD(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(ot.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(m,x),function(y,C,I){return y.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=lD?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,x,f)&&c.push(n.Pi.updateTargetData(i,x))});let u=lr(),d=le();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(fD(i,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(ee.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return $.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function fD(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=lr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):K(Pp,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function mD(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pD(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Uf(t,e,n){const r=te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xi(o))throw o;K(Pp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Uv(t,e,n){const r=te(t);let s=ee.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=te(u),g=m.xs.get(f);return g!==void 0?$.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,Ln(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:le())).next(c=>(gD(r,ej(e),c),{documents:c,Qs:i})))}function gD(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class $v{constructor(){this.activeTargetIds=oj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yD{constructor(){this.Mo=new $v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="ConnectivityMonitor";class zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(Bv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(Bv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl=null;function $f(){return Bl===null?Bl=function(){return 268435456+Math.round(2147483648*Math.random())}():Bl++,"0x"+Bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="RestConnection",wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _D{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Xc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=$f(),c=this.zo(e,n.toUriEncodedString());K(ph,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),f=is(d);return this.Jo(e,c,u,r,f).then(m=>(K(ph,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Oi(ph,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=wD[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class bD extends _D{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=$f();return new Promise((c,u)=>{const d=new rE;d.setWithCredentials(!0),d.listenOnce(sE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case cc.NO_ERROR:const m=d.getResponseJson();K(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case cc.TIMEOUT:K(ut,`RPC '${e}' ${o} timed out`),u(new G(U.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const g=d.getStatus();if(K(ut,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const N=x==null?void 0:x.error;if(N&&N.status&&N.message){const y=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(N.status);u(new G(y,N.message))}else u(new G(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G(U.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{K(ut,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);K(ut,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=$f(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aE(),c=oE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");K(ut,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,x=!1;const N=new xD({Yo:C=>{x?K(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(g||(K(ut,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(ut,`RPC '${e}' stream ${s} sending:`,C),m.send(C))},Zo:()=>m.close()}),y=(C,I,w)=>{C.listen(I,E=>{try{w(E)}catch(_){setTimeout(()=>{throw _},0)}})};return y(m,Vo.EventType.OPEN,()=>{x||(K(ut,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),y(m,Vo.EventType.CLOSE,()=>{x||(x=!0,K(ut,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(m))}),y(m,Vo.EventType.ERROR,C=>{x||(x=!0,Oi(ut,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),N.a_(new G(U.UNAVAILABLE,"The operation could not be completed")))}),y(m,Vo.EventType.MESSAGE,C=>{var I;if(!x){const w=C.data[0];pe(!!w,16349);const E=w,_=(E==null?void 0:E.error)||((I=E[0])==null?void 0:I.error);if(_){K(ut,`RPC '${e}' stream ${s} received error:`,_);const L=_.status;let V=function(S){const A=$e[S];if(A!==void 0)return $E(A)}(L),T=_.message;V===void 0&&(V=U.INTERNAL,T="Unknown error status: "+L+" with message "+_.message),x=!0,N.a_(new G(V,T)),m.close()}else K(ut,`RPC '${e}' stream ${s} received:`,w),N.u_(w)}}),y(c,iE.STAT_EVENT,C=>{C.stat===Cf.PROXY?K(ut,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Cf.NOPROXY&&K(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){return new Sj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="PersistentStream";class n1{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new t1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new G(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(Hv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(Hv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ED extends n1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Cj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?On(o.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ff(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Df(u)?{documents:Pj(i,u)}:{query:jj(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=HE(i,o.resumeToken);const d=Of(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){c.readTime=nu(i,o.snapshotVersion.toTimestamp());const d=Of(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Lj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ff(this.serializer),n.removeTarget=e,this.q_(n)}}class TD extends n1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rj(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ff(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Aj(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{}class SD extends ID{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Mf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Mf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ND{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RemoteStore";class kD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(K(Vs,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await Za(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ku(d)}(this))})}),this.Ra=new ND(r,s)}}async function Ku(t){if(Ks(t))for(const e of t.da)await e(!0)}async function Za(t){for(const e of t.da)await e(!1)}function r1(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Op(n)?Lp(n):Zi(n).O_()&&Dp(n,e))}function jp(t,e){const n=te(t),r=Zi(n);n.Ia.delete(e),r.O_()&&s1(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ks(n)&&n.Ra.set("Unknown"))}function Dp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zi(t).Y_(e)}function s1(t,e){t.Va.Ue(e),Zi(t).Z_(e)}function Lp(t){t.Va=new bj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Zi(t).start(),t.Ra.ua()}function Op(t){return Ks(t)&&!Zi(t).x_()&&t.Ia.size>0}function Ks(t){return te(t).Ea.size===0}function i1(t){t.Va=void 0}async function CD(t){t.Ra.set("Online")}async function AD(t){t.Ia.forEach((e,n)=>{Dp(t,e)})}async function RD(t,e){i1(t),Op(t)?(t.Ra.ha(e),Lp(t)):t.Ra.set("Unknown")}async function PD(t,e,n){if(t.Ra.set("Online"),e instanceof zE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){K(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await su(t,r)}else if(e instanceof fc?t.Va.Ze(e):e instanceof BE?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await e1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(ot.EMPTY_BYTE_STRING,f.snapshotVersion)),s1(i,u);const m=new jr(f.target,u,d,f.sequenceNumber);Dp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){K(Vs,"Failed to raise snapshot:",r),await su(t,r)}}async function su(t,e,n){if(!Xi(e))throw e;t.Ea.add(1),await Za(t),t.Ra.set("Offline"),n||(n=()=>e1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Vs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ku(t)})}function o1(t,e){return e().catch(n=>su(t,n,e))}async function Qu(t){const e=te(t),n=Zr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wp;for(;jD(e);)try{const s=await mD(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,DD(e,s)}catch(s){await su(e,s)}a1(e)&&l1(e)}function jD(t){return Ks(t)&&t.Ta.length<10}function DD(t,e){t.Ta.push(e);const n=Zr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function a1(t){return Ks(t)&&!Zr(t).x_()&&t.Ta.length>0}function l1(t){Zr(t).start()}async function LD(t){Zr(t).ra()}async function OD(t){const e=Zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function MD(t,e,n){const r=t.Ta.shift(),s=Sp.from(r,e,n);await o1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qu(t)}async function VD(t,e){e&&Zr(t).X_&&await async function(r,s){if(function(o){return wj(o)&&o!==U.ABORTED}(s.code)){const i=r.Ta.shift();Zr(r).B_(),await o1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qu(r)}}(t,e),a1(t)&&l1(t)}async function qv(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K(Vs,"RemoteStore received new credentials");const r=Ks(n);n.Ea.add(3),await Za(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ku(n)}async function FD(t,e){const n=te(t);e?(n.Ea.delete(2),await Ku(n)):e||(n.Ea.add(2),await Za(n),n.Ra.set("Unknown"))}function Zi(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new ED(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:CD.bind(null,t),t_:AD.bind(null,t),r_:RD.bind(null,t),H_:PD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Op(t)?Lp(t):t.Ra.set("Unknown")):(await t.ma.stop(),i1(t))})),t.ma}function Zr(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new TD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:LD.bind(null,t),r_:VD.bind(null,t),ta:OD.bind(null,t),na:MD.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qu(t)):(await t.fa.stop(),t.Ta.length>0&&(K(Vs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Mp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Xi(t))return new G(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{static emptySet(e){return new Ni(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Fo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ni;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.ga=new De(X.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $i{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new $i(e,n,Ni.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $D{constructor(){this.queries=Gv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Gv(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new G(U.ABORTED,"Firestore shutting down"))}}function Gv(){return new Gs(t=>CE(t),Bu)}async function Fp(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new UD,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Vp(o,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&$p(n)}async function Up(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BD(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&$p(n)}function zD(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function $p(t){t.Ca.forEach(e=>{e.next()})}var Bf,Kv;(Kv=Bf||(Bf={})).Ma="default",Kv.Cache="cache";class Bp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class HD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=AE(e),this.tu=new Ni(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Wv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),x=zu(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),y=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;g&&x?g.data.isEqual(x.data)?N!==y&&(r.track({type:3,doc:x}),C=!0):this.su(g,x)||(r.track({type:2,doc:x}),C=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!g&&x?(r.track({type:0,doc:x}),C=!0):g&&!x&&(r.track({type:1,doc:g}),C=!0,(u||d)&&(c=!0)),C&&(x?(o=o.add(x),i=y?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(x,N){const y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:C})}};return y(x)-y(N)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new $i(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new u1(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new c1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $i.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zp="SyncEngine";class qD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WD{constructor(e){this.key=e,this.hu=!1}}class GD{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gs(c=>CE(c),Bu),this.Iu=new Map,this.Eu=new Set,this.du=new De(X.comparator),this.Au=new Map,this.Ru=new Cp,this.Vu={},this.mu=new Map,this.fu=Ui.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KD(t,e,n=!0){const r=g1(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await d1(r,e,n,!0),s}async function QD(t,e){const n=g1(t);await d1(n,e,!0,!1)}async function d1(t,e,n,r){const s=await pD(t.localStore,Ln(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await YD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&r1(t.remoteStore,s),c}async function YD(t,e,n,r,s){t.pu=(m,g,x)=>async function(y,C,I,w){let E=C.view.ru(I);E.Cs&&(E=await Uv(y.localStore,C.query,!1).then(({documents:T})=>C.view.ru(T,E)));const _=w&&w.targetChanges.get(C.targetId),L=w&&w.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(E,y.isPrimaryClient,_,L);return Yv(y,C.targetId,V.au),V.snapshot}(t,m,g,x);const i=await Uv(t.localStore,e,!0),o=new HD(e,i.Qs),c=o.ru(i.documents),u=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);Yv(t,n,d.au);const f=new qD(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function XD(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Bu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jp(r.remoteStore,s.targetId),zf(r,s.targetId)}).catch(Yi)):(zf(r,s.targetId),await Uf(r.localStore,s.targetId,!0))}async function JD(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jp(n.remoteStore,r.targetId))}async function ZD(t,e,n){const r=o4(t);try{const s=await function(o,c){const u=te(o),d=Te.now(),f=c.reduce((x,N)=>x.add(N.key),le());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let N=lr(),y=le();return u.Ns.getEntries(x,f).next(C=>{N=C,N.forEach((I,w)=>{w.isValidDocument()||(y=y.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,N)).next(C=>{m=C;const I=[];for(const w of c){const E=mj(w,m.get(w.key).overlayedDocument);E!=null&&I.push(new ls(w.key,E,xE(E.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,I,c)}).next(C=>{g=C;const I=C.applyToLocalDocumentSet(m,y);return u.documentOverlayCache.saveOverlays(x,C.batchId,I)})}).then(()=>({batchId:g.batchId,changes:PE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new De(ae)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await el(r,s.changes),await Qu(r.remoteStore)}catch(s){const i=Vp(s,"Failed to persist write");n.reject(i)}}async function h1(t,e){const n=te(t);try{const r=await hD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?pe(o.hu,14607):s.removedDocuments.size>0&&(pe(o.hu,42227),o.hu=!1))}),await el(n,r,e)}catch(r){await Yi(r)}}function Qv(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=te(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&$p(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function e4(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new De(X.comparator);o=o.insert(i,ft.newNoDocument(i,ee.min()));const c=le().add(i),u=new Wu(ee.min(),new Map,new De(ae),o,c);await h1(r,u),r.du=r.du.remove(i),r.Au.delete(e),Hp(r)}else await Uf(r.localStore,e,!1).then(()=>zf(r,e,n)).catch(Yi)}async function t4(t,e){const n=te(t),r=e.batch.batchId;try{const s=await dD(n.localStore,e);m1(n,r,null),f1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await el(n,s)}catch(s){await Yi(s)}}async function n4(t,e,n){const r=te(t);try{const s=await function(o,c){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(pe(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);m1(r,e,n),f1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await el(r,s)}catch(s){await Yi(s)}}function f1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function m1(t,e,n){const r=te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function zf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||p1(t,r)})}function p1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(jp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Hp(t))}function Yv(t,e,n){for(const r of n)r instanceof c1?(t.Ru.addReference(r.key,e),r4(t,r)):r instanceof u1?(K(zp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||p1(t,r.key)):Z(19791,{wu:r})}function r4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(zp,"New document in limbo: "+n),t.Eu.add(r),Hp(t))}function Hp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(we.fromString(e)),r=t.fu.next();t.Au.set(r,new WD(n)),t.du=t.du.insert(n,r),r1(t.remoteStore,new jr(Ln($u(n.path)),r,"TargetPurposeLimboResolution",Vu.ce))}}async function el(t,e,n){const r=te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Rp.As(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(d,g=>$.forEach(g.Es,x=>f.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>$.forEach(g.ds,x=>f.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Xi(m))throw m;K(Pp,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=f.Ms.get(g),N=x.snapshotVersion,y=x.withLastLimboFreeSnapshotVersion(N);f.Ms=f.Ms.insert(g,y)}}}(r.localStore,i))}async function s4(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K(zp,"User change. New user:",e.toKey());const r=await ZE(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new G(U.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await el(n,r.Ls)}}function i4(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let s=le();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function g1(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e4.bind(null,e),e.Pu.H_=BD.bind(null,e.eventManager),e.Pu.yu=zD.bind(null,e.eventManager),e}function o4(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n4.bind(null,e),e}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return uD(this.persistence,new aD,e.initialUser,this.serializer)}Cu(e){return new JE(Ap.mi,this.serializer)}Du(e){return new yD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class a4 extends iu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pe(this.persistence.referenceDelegate instanceof ru,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Wj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new JE(r=>ru.mi(r,n),this.serializer)}}class Hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s4.bind(null,this.syncEngine),await FD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $D}()}createDatastore(e){const n=Gu(e.databaseInfo.databaseId),r=function(i){return new bD(i)}(e.databaseInfo);return function(i,o,c,u){return new SD(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new kD(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Qv(this.syncEngine,n,0),function(){return zv.v()?new zv:new vD}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new GD(s,i,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);K(Vs,"RemoteStore shutting down."),i.Ea.add(5),await Za(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hf.provider={build:()=>new Hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class l4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(es,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(es,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yh(t,e){t.asyncQueue.verifyOperationInProgress(),K(es,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ZE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c4(t);K(es,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>qv(e.remoteStore,s)),t._onlineComponents=e}async function c4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(es,"Using user provided OfflineComponentProvider");try{await yh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),await yh(t,new iu)}}else K(es,"Using default OfflineComponentProvider"),await yh(t,new a4(void 0));return t._offlineComponents}async function y1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(es,"Using user provided OnlineComponentProvider"),await Xv(t,t._uninitializedComponentsProvider._online)):(K(es,"Using default OnlineComponentProvider"),await Xv(t,new Hf))),t._onlineComponents}function u4(t){return y1(t).then(e=>e.syncEngine)}async function ou(t){const e=await y1(t),n=e.eventManager;return n.onListen=KD.bind(null,e.syncEngine),n.onUnlisten=XD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JD.bind(null,e.syncEngine),n}function d4(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new qp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Up(i,m));const x=g.docs.has(c);!x&&g.fromCache?d.reject(new G(U.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new G(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Bp($u(c.path),f,{includeMetadataChanges:!0,qa:!0});return Fp(i,m)}(await ou(t),t.asyncQueue,e,n,r)),r.promise}function h4(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new qp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Up(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Bp(c,f,{includeMetadataChanges:!0,qa:!0});return Fp(i,m)}(await ou(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firestore.googleapis.com",Zv=!0;class ew{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=w1,this.ssl=Zv}else this.host=e.host,this.ssl=e.ssl??Zv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Hj)throw new G(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yP;switch(r.type){case"firstParty":return new xP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jv.get(n);r&&(K("ComponentProvider","Removing Datastore"),Jv.delete(n),r.terminate())}(this),Promise.resolve()}}function f4(t,e,n,r={}){var d;t=Lt(t,Yu);const s=is(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(sp(`https://${c}`),ip("Firestore",!0)),i.host!==w1&&i.host!==c&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Kr(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=dt.MOCK_USER;else{f=ub(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new dt(g)}t._authCredentials=new vP(new cE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ya(n,Ve._jsonSchema))return new Ve(e,r||null,new X(we.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:He("string",Ve._jsonSchemaVersion),referencePath:He("string")};class qr extends mr{constructor(e,n,r){super(e,n,$u(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new X(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function et(t,e,...n){if(t=fe(t),uE("collection","path",e),t instanceof Yu){const r=we.fromString(e,...n);return fv(r),new qr(t,null,r)}{if(!(t instanceof Ve||t instanceof qr))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return fv(r),new qr(t.firestore,null,r)}}function Je(t,e,...n){if(t=fe(t),arguments.length===1&&(e=vp.newId()),uE("doc","path",e),t instanceof Yu){const r=we.fromString(e,...n);return hv(r),new Ve(t,null,new X(r))}{if(!(t instanceof Ve||t instanceof qr))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return hv(r),new Ve(t.firestore,t instanceof qr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="AsyncQueue";class nw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new t1(this,"async_queue_retry"),this._c=()=>{const r=gh();r&&K(tw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Jn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xi(e))throw e;K(tw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",rw(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Mp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Z(47125,{Pc:rw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class cr extends Yu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new nw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nw(e),this._firestoreClient=void 0,await e}}}function m4(t,e){const n=typeof t=="object"?t:qa(),r=typeof t=="string"?t:Xc,s=os(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ab("firestore");i&&f4(s,...i)}return s}function Xu(t){if(t._terminated)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p4(t),t._firestoreClient}function p4(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,f){return new VP(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,v1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(ot.fromBase64String(e))}catch(n){throw new G(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ya(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:He("string",Zt._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(e){if(Ya(e,Mn._jsonSchema))return new Mn(e.latitude,e.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:He("string",Mn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ya(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Vn(e.vectorValues);throw new G(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:He("string",Vn._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=/^__.*__$/;class y4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class _1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ls(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function x1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class Wp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return au(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(x1(this.Ac)&&g4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class v4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}Cc(e,n,r,s=!1){return new Wp({Ac:e,methodName:n,Dc:r,path:rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ed(t){const e=t._freezeSettings(),n=Gu(t._databaseId);return new v4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function b1(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Kp("Data must be an object, but it was:",o,r);const c=E1(r,o);let u,d;if(i.merge)u=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=qf(e,m,n);if(!o.contains(g))throw new G(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);I1(f,g)||f.push(g)}u=new Bt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new y4(new Ct(c),u,d)}class td extends Zu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof td}}class Gp extends Zu{_toFieldTransform(e){return new uj(e.path,new Pa)}isEqual(e){return e instanceof Gp}}function w4(t,e,n,r){const s=t.Cc(1,e,n);Kp("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();as(r,(u,d)=>{const f=Qp(e,u,n);d=fe(d);const m=s.yc(f);if(d instanceof td)i.push(f);else{const g=tl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new Bt(i);return new _1(o,c,s.fieldTransforms)}function _4(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[qf(e,r,n)],u=[s];if(i.length%2!=0)throw new G(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(qf(e,i[g])),u.push(i[g+1]);const d=[],f=Ct.empty();for(let g=c.length-1;g>=0;--g)if(!I1(d,c[g])){const x=c[g];let N=u[g];N=fe(N);const y=o.yc(x);if(N instanceof td)d.push(x);else{const C=tl(N,y);C!=null&&(d.push(x),f.set(x,C))}}const m=new Bt(d);return new _1(f,m,o.fieldTransforms)}function x4(t,e,n,r=!1){return tl(n,t.Cc(r?4:3,e))}function tl(t,e){if(T1(t=fe(t)))return Kp("Unsupported field value:",e,t),E1(t,e);if(t instanceof Zu)return function(r,s){if(!x1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=tl(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Te.fromDate(r);return{timestampValue:nu(s.serializer,i)}}if(r instanceof Te){const i=new Te(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nu(s.serializer,i)}}if(r instanceof Mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zt)return{bytesValue:HE(s.serializer,r._byteString)};if(r instanceof Ve){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:kp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Vn)return function(o,c){return{mapValue:{fields:{[wE]:{stringValue:_E},[Jc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return Tp(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Mu(r)}`)}(t,e)}function E1(t,e){const n={};return fE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(t,(r,s)=>{const i=tl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function T1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Te||t instanceof Mn||t instanceof Zt||t instanceof Ve||t instanceof Zu||t instanceof Vn)}function Kp(t,e,n){if(!T1(n)||!dE(n)){const r=Mu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function qf(t,e,n){if((e=fe(e))instanceof Ju)return e._internalPath;if(typeof e=="string")return Qp(t,e);throw au("Field path arguments must be of type string or ",t,!1,void 0,n)}const b4=new RegExp("[~\\*/\\[\\]]");function Qp(t,e,n){if(e.search(b4)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ju(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function au(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(U.INVALID_ARGUMENT,c+t+u)}function I1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E4 extends S1{data(){return super.data()}}function nd(t,e){return typeof e=="string"?Qp(t,e):e instanceof Ju?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yp{}class Xp extends Yp{}function eo(t,e,...n){let r=[];e instanceof Yp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Jp).length,c=i.filter(u=>u instanceof rd).length;if(o>1||o>0&&c>0)throw new G(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class rd extends Xp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rd(e,n,r)}_apply(e){const n=this._parse(e);return k1(e._query,n),new mr(e.firestore,e.converter,Lf(e._query,n))}_parse(e){const n=ed(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ow(m,f);const N=[];for(const y of m)N.push(iw(u,i,y));g={arrayValue:{values:N}}}else g=iw(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ow(m,f),g=x4(c,o,m,f==="in"||f==="not-in");return ze.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sd(t,e,n){const r=e,s=nd("where",t);return rd._create(s,r,n)}class Jp extends Yp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)k1(o,u),o=Lf(o,u)}(e._query,n),new mr(e.firestore,e.converter,Lf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zp extends Xp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new G(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ra(i,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ji(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nl(t,e="asc"){const n=e,r=nd("orderBy",t);return Zp._create(r,n)}class eg extends Xp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new eg(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,eu(e._query,this._limit,this._limitType))}}function T4(t){return eg._create("limit",t,"F")}function iw(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new G(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kE(e)&&n.indexOf("/")!==-1)throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!X.isDocumentKey(r))throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xv(t,new X(r))}if(n instanceof Ve)return xv(t,n._key);throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mu(n)}.`)}function ow(t,e){if(!Array.isArray(t)||t.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k1(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class I4{convertValue(e,n="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return as(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Jc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Fe(o.doubleValue));return new Vn(n)}convertGeoPoint(e){return new Mn(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ka(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new Te(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);pe(YE(r),9688,{name:e});const s=new Ca(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class $o{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends S1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:He("string",Ss._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class mc extends Ss{data(e={}){return super.data(e)}}class Ns{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new $o(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mc(this._firestore,this._userDataWriter,r.key,r,new $o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new $o(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new $o(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:S4(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ns._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function S4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){t=Lt(t,Ve);const e=Lt(t.firestore,cr);return d4(Xu(e),t._key).then(n=>A1(e,t,n))}Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:He("string",Ns._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class tg extends I4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function rl(t){t=Lt(t,mr);const e=Lt(t.firestore,cr),n=Xu(e),r=new tg(e);return N1(t._query),h4(n,t._query).then(s=>new Ns(e,r,t,s))}function Wf(t,e,n){t=Lt(t,Ve);const r=Lt(t.firestore,cr),s=C1(t.converter,e,n);return id(r,[b1(ed(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function to(t,e,n,...r){t=Lt(t,Ve);const s=Lt(t.firestore,cr),i=ed(s);let o;return o=typeof(e=fe(e))=="string"||e instanceof Ju?_4(i,"updateDoc",t._key,e,n,r):w4(i,"updateDoc",t._key,e),id(s,[o.toMutation(t._key,nn.exists(!0))])}function N4(t){return id(Lt(t.firestore,cr),[new Ip(t._key,nn.none())])}function ln(t,e){const n=Lt(t.firestore,cr),r=Je(t),s=C1(t.converter,e);return id(n,[b1(ed(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function k4(t,...e){var u,d,f;t=fe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||sw(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(sw(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,c;if(t instanceof Ve)o=Lt(t.firestore,cr),c=$u(t._key.path),i={next:m=>{e[r]&&e[r](A1(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Lt(t,mr);o=Lt(m.firestore,cr),c=m._query;const g=new tg(o);i={next:x=>{e[r]&&e[r](new Ns(o,g,m,x))},error:e[r+1],complete:e[r+2]},N1(t._query)}return function(g,x,N,y){const C=new qp(y),I=new Bp(x,C,N);return g.asyncQueue.enqueueAndForget(async()=>Fp(await ou(g),I)),()=>{C.Nu(),g.asyncQueue.enqueueAndForget(async()=>Up(await ou(g),I))}}(Xu(o),c,s,i)}function id(t,e){return function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget(async()=>ZD(await u4(r),s,i)),i.promise}(Xu(t),e)}function A1(t,e,n){const r=n.docs.get(e._key),s=new tg(t);return new Ss(t,s,e._key,r,new $o(n.hasPendingWrites,n.fromCache),e.converter)}function Re(){return new Gp("serverTimestamp")}(function(e,n=!0){(function(s){Qi=s})(qs),_n(new on("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new cr(new wP(r.getProvider("auth-internal")),new bP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Dt(lv,cv,e),Dt(lv,cv,"esm2020")})();var C4="firebase",A4="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt(C4,A4,"app");const R1="@firebase/installations",ng="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=1e4,j1=`w:${ng}`,D1="FIS_v2",R4="https://firebaseinstallations.googleapis.com/v1",P4=60*60*1e3,j4="installations",D4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fs=new Hs(j4,D4,L4);function L1(t){return t instanceof cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1({projectId:t}){return`${R4}/projects/${t}/installations`}function M1(t){return{token:t.token,requestStatus:2,expiresIn:M4(t.expiresIn),creationTime:Date.now()}}async function V1(t,e){const r=(await e.json()).error;return Fs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function F1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function O4(t,{refreshToken:e}){const n=F1(t);return n.append("Authorization",V4(e)),n}async function U1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function M4(t){return Number(t.replace("s","000"))}function V4(t){return`${D1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=O1(t),s=F1(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:D1,appId:t.appId,sdkVersion:j1},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await U1(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:M1(d.authToken)}}else throw await V1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=/^[cdef][\w-]{21}$/,Gf="";function B4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=z4(t);return $4.test(n)?n:Gf}catch{return Gf}}function z4(t){return U4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;function z1(t,e){const n=od(t);H1(n,e),H4(n,e)}function H1(t,e){const n=B1.get(t);if(n)for(const r of n)r(e)}function H4(t,e){const n=q4();n&&n.postMessage({key:t,fid:e}),W4()}let Es=null;function q4(){return!Es&&"BroadcastChannel"in self&&(Es=new BroadcastChannel("[Firebase] FID Change"),Es.onmessage=t=>{H1(t.data.key,t.data.fid)}),Es}function W4(){B1.size===0&&Es&&(Es.close(),Es=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="firebase-installations-database",K4=1,Us="firebase-installations-store";let vh=null;function rg(){return vh||(vh=gb(G4,K4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Us)}}})),vh}async function lu(t,e){const n=od(t),s=(await rg()).transaction(Us,"readwrite"),i=s.objectStore(Us),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&z1(t,e.fid),e}async function q1(t){const e=od(t),r=(await rg()).transaction(Us,"readwrite");await r.objectStore(Us).delete(e),await r.done}async function ad(t,e){const n=od(t),s=(await rg()).transaction(Us,"readwrite"),i=s.objectStore(Us),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&z1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sg(t){let e;const n=await ad(t.appConfig,r=>{const s=Q4(r),i=Y4(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Gf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Q4(t){const e=t||{fid:B4(),registrationStatus:0};return W1(e)}function Y4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Fs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=X4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:J4(t)}:{installationEntry:e}}async function X4(t,e){try{const n=await F4(t,e);return lu(t.appConfig,n)}catch(n){throw L1(n)&&n.customData.serverCode===409?await q1(t.appConfig):await lu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function J4(t){let e=await aw(t.appConfig);for(;e.registrationStatus===1;)await $1(100),e=await aw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await sg(t);return r||n}return e}function aw(t){return ad(t,e=>{if(!e)throw Fs.create("installation-not-found");return W1(e)})}function W1(t){return Z4(t)?{fid:t.fid,registrationStatus:0}:t}function Z4(t){return t.registrationStatus===1&&t.registrationTime+P1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL({appConfig:t,heartbeatServiceProvider:e},n){const r=tL(t,n),s=O4(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:j1,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await U1(()=>fetch(r,c));if(u.ok){const d=await u.json();return M1(d)}else throw await V1("Generate Auth Token",u)}function tL(t,{fid:e}){return`${O1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ig(t,e=!1){let n;const r=await ad(t.appConfig,i=>{if(!G1(i))throw Fs.create("not-registered");const o=i.authToken;if(!e&&sL(o))return i;if(o.requestStatus===1)return n=nL(t,e),i;{if(!navigator.onLine)throw Fs.create("app-offline");const c=oL(i);return n=rL(t,c),c}});return n?await n:r.authToken}async function nL(t,e){let n=await lw(t.appConfig);for(;n.authToken.requestStatus===1;)await $1(100),n=await lw(t.appConfig);const r=n.authToken;return r.requestStatus===0?ig(t,e):r}function lw(t){return ad(t,e=>{if(!G1(e))throw Fs.create("not-registered");const n=e.authToken;return aL(n)?{...e,authToken:{requestStatus:0}}:e})}async function rL(t,e){try{const n=await eL(t,e),r={...e,authToken:n};return await lu(t.appConfig,r),n}catch(n){if(L1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await q1(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await lu(t.appConfig,r)}throw n}}function G1(t){return t!==void 0&&t.registrationStatus===2}function sL(t){return t.requestStatus===2&&!iL(t)}function iL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+P4}function oL(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function aL(t){return t.requestStatus===1&&t.requestTime+P1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t){const e=t,{installationEntry:n,registrationPromise:r}=await sg(e);return r?r.catch(console.error):ig(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e=!1){const n=t;return await uL(n),(await ig(n,e)).token}async function uL(t){const{registrationPromise:e}=await sg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){if(!t||!t.options)throw wh("App Configuration");if(!t.name)throw wh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw wh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function wh(t){return Fs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="installations",hL="installations-internal",fL=t=>{const e=t.getProvider("app").getImmediate(),n=dL(e),r=os(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},mL=t=>{const e=t.getProvider("app").getImmediate(),n=os(e,K1).getImmediate();return{getId:()=>lL(n),getToken:s=>cL(n,s)}};function pL(){_n(new on(K1,fL,"PUBLIC")),_n(new on(hL,mL,"PRIVATE"))}pL();Dt(R1,ng);Dt(R1,ng,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="analytics",gL="firebase_id",yL="origin",vL=60*1e3,wL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",og="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt=new ju("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wt=new Hs("analytics","Analytics",_L);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){if(!t.startsWith(og)){const e=Wt.create("invalid-gtag-resource",{gtagURL:t});return xt.warn(e.message),""}return t}function Q1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function bL(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function EL(t,e){const n=bL("firebase-js-sdk-policy",{createScriptURL:xL}),r=document.createElement("script"),s=`${og}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function TL(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function IL(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await Q1(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){xt.error(c)}t("config",s,i)}async function SL(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await Q1(n);for(const u of o){const d=c.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){xt.error(i)}}function NL(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[c,u]=o;await SL(t,e,n,c,u)}else if(i==="config"){const[c,u]=o;await IL(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=o;t("consent",c,u)}else if(i==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(i==="set"){const[c]=o;t("set",c)}else t(i,...o)}catch(c){xt.error(c)}}return s}function kL(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=NL(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function CL(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(og)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=30,RL=1e3;class PL{constructor(e={},n=RL){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Y1=new PL;function jL(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function DL(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:jL(n)},s=wL.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let c="";try{const u=await i.json();(o=u.error)!=null&&o.message&&(c=u.error.message)}catch{}throw Wt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:c})}return i.json()}async function LL(t,e=Y1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Wt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Wt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new VL;return setTimeout(async()=>{c.abort()},vL),X1({appId:r,apiKey:s,measurementId:i},o,c,e)}async function X1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Y1){var c;const{appId:i,measurementId:o}=t;try{await OL(r,e)}catch(u){if(o)return xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw u}try{const u=await DL(t);return s.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!ML(d)){if(s.deleteThrottleMetadata(i),o)return xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:o};throw u}const f=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?j0(n,s.intervalMillis,AL):j0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,m),xt.debug(`Calling attemptFetch again in ${f} millis`),X1(t,m,r,s)}}function OL(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Wt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ML(t){if(!(t instanceof cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class VL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function FL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function UL(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(){if(hb())try{await fb()}catch(t){return xt.warn(Wt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return xt.warn(Wt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BL(t,e,n,r,s,i,o){const c=LL(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&xt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>xt.error(g)),e.push(c);const u=$L().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([c,u]);CL(i)||EL(i,d.measurementId),s("js",new Date);const m=(o==null?void 0:o.config)??{};return m[yL]="firebase",m.update=!0,f!=null&&(m[gL]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.app=e}_delete(){return delete ki[this.app.options.appId],Promise.resolve()}}let ki={},cw=[];const uw={};let _h="dataLayer",HL="gtag",dw,ag,hw=!1;function qL(){const t=[];if(db()&&t.push("This is a browser extension environment."),Sk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Wt.create("invalid-analytics-context",{errorInfo:e});xt.warn(n.message)}}function WL(t,e,n){qL();const r=t.options.appId;if(!r)throw Wt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wt.create("no-api-key");if(ki[r]!=null)throw Wt.create("already-exists",{id:r});if(!hw){TL(_h);const{wrappedGtag:i,gtagCore:o}=kL(ki,cw,uw,_h,HL);ag=i,dw=o,hw=!0}return ki[r]=BL(t,cw,uw,e,dw,_h,n),new zL(t)}function GL(t=qa()){t=fe(t);const e=os(t,cu);return e.isInitialized()?e.getImmediate():KL(t)}function KL(t,e={}){const n=os(t,cu);if(n.isInitialized()){const s=n.getImmediate();if(Kr(e,n.getOptions()))return s;throw Wt.create("already-initialized")}return n.initialize({options:e})}function QL(t,e,n){t=fe(t),UL(ag,ki[t.app.options.appId],e,n).catch(r=>xt.error(r))}function YL(t,e,n,r){t=fe(t),FL(ag,ki[t.app.options.appId],e,n,r).catch(s=>xt.error(s))}const fw="@firebase/analytics",mw="0.10.19";function XL(){_n(new on(cu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return WL(r,s,n)},"PUBLIC")),_n(new on("analytics-internal",t,"PRIVATE")),Dt(fw,mw),Dt(fw,mw,"esm2020");function t(e){try{const n=e.getProvider(cu).getImmediate();return{logEvent:(r,s,i)=>YL(n,r,s,i),setUserProperties:(r,s)=>QL(n,r,s)}}catch(n){throw Wt.create("interop-component-reg-failed",{reason:n})}}}XL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebasestorage.googleapis.com",Z1="storageBucket",JL=2*60*1e3,ZL=10*60*1e3,e3=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le extends cn{constructor(e,n,r=0){super(xh(e),`Firebase Storage: ${n} (${xh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Le.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Se;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Se||(Se={}));function xh(t){return"storage/"+t}function lg(){const t="An unknown error occurred, please check the error payload for server response.";return new Le(Se.UNKNOWN,t)}function t3(t){return new Le(Se.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function n3(t){return new Le(Se.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function r3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Le(Se.UNAUTHENTICATED,t)}function s3(){return new Le(Se.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i3(t){return new Le(Se.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function eT(){return new Le(Se.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tT(){return new Le(Se.CANCELED,"User canceled the upload/download.")}function o3(t){return new Le(Se.INVALID_URL,"Invalid URL '"+t+"'.")}function a3(t){return new Le(Se.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l3(){return new Le(Se.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Z1+"' property when initializing the app?")}function nT(){return new Le(Se.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function c3(){return new Le(Se.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function u3(){return new Le(Se.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function d3(t){return new Le(Se.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kf(t){return new Le(Se.INVALID_ARGUMENT,t)}function rT(){return new Le(Se.APP_DELETED,"The Firebase app was deleted.")}function h3(t){return new Le(Se.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sa(t,e){return new Le(Se.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ao(t){throw new Le(Se.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=zt.makeFromUrl(e,n)}catch{return new zt(e,"")}if(r.path==="")return r;throw a3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(_){_.path_=decodeURIComponent(_.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),N={bucket:1,path:3},y=n===J1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",I=new RegExp(`^https?://${y}/${s}/${C}`,"i"),E=[{regex:c,indices:u,postModify:i},{regex:x,indices:N,postModify:d},{regex:I,indices:{bucket:1,path:2},postModify:d}];for(let _=0;_<E.length;_++){const L=E[_],V=L.regex.exec(e);if(V){const T=V[L.indices.bucket];let v=V[L.indices.path];v||(v=""),r=new zt(T,v),L.postModify(r);break}}if(r==null)throw o3(e);return r}}class f3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...C){d||(d=!0,e.apply(null,C))}function m(C){s=setTimeout(()=>{s=null,t(x,u())},C)}function g(){i&&clearTimeout(i)}function x(C,...I){if(d){g();return}if(C){g(),f.call(null,C,...I);return}if(u()||o){g(),f.call(null,C,...I);return}r<64&&(r*=2);let E;c===1?(c=2,E=0):E=(r+Math.random())*1e3,m(E)}let N=!1;function y(C){N||(N=!0,g(),!d&&(s!==null?(C||(c=2),clearTimeout(s),m(0)):C||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function p3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t){return t!==void 0}function y3(t){return typeof t=="function"}function v3(t){return typeof t=="object"&&!Array.isArray(t)}function ld(t){return typeof t=="string"||t instanceof String}function pw(t){return cg()&&t instanceof Blob}function cg(){return typeof Blob<"u"}function gw(t,e,n,r){if(r<e)throw Kf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Kf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ks;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ks||(ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n,r,s,i,o,c,u,d,f,m,g=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,y)=>{this.resolve_=N,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===ks.NO_ERROR,u=i.getStatus();if(!c||iT(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ks.ABORT;r(!1,new zl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new zl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());g3(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=lg();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?rT():tT();o(u)}else{const u=eT();o(u)}};this.canceled_?n(!1,new zl(!1,null,!0)):this.backoffId_=m3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&p3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function x3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function E3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function T3(t,e,n,r,s,i,o=!0,c=!1){const u=sT(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return b3(f,e),_3(f,n),x3(f,i),E3(f,r),new w3(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function S3(...t){const e=I3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(cg())return new Blob(t);throw new Le(Se.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function N3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){if(typeof atob>"u")throw d3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bh{constructor(e,n){this.data=e,this.contentType=n||null}}function C3(t,e){switch(t){case Rn.RAW:return new bh(oT(e));case Rn.BASE64:case Rn.BASE64URL:return new bh(aT(t,e));case Rn.DATA_URL:return new bh(R3(e),P3(e))}throw lg()}function oT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function A3(t){let e;try{e=decodeURIComponent(t)}catch{throw sa(Rn.DATA_URL,"Malformed data URL.")}return oT(e)}function aT(t,e){switch(t){case Rn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw sa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Rn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw sa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=k3(e)}catch(s){throw s.message.includes("polyfill")?s:sa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class lT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw sa(Rn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=j3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function R3(t){const e=new lT(t);return e.base64?aT(Rn.BASE64,e.rest):A3(e.rest)}function P3(t){return new lT(t).contentType}function j3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){let r=0,s="";pw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(pw(this.data_)){const r=this.data_,s=N3(r,e,n);return s===null?null:new zn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new zn(r,!0)}}static getBlob(...e){if(cg()){const n=e.map(r=>r instanceof zn?r.data_:r);return new zn(S3.apply(null,n))}else{const n=e.map(o=>ld(o)?C3(Rn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new zn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){let e;try{e=JSON.parse(t)}catch{return null}return v3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function uT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t,e){return e}class vt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||O3}}let Hl=null;function M3(t){return!ld(t)||t.length<2?t:uT(t)}function ug(){if(Hl)return Hl;const t=[];t.push(new vt("bucket")),t.push(new vt("generation")),t.push(new vt("metageneration")),t.push(new vt("name","fullPath",!0));function e(i,o){return M3(o)}const n=new vt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new vt("size");return s.xform=r,t.push(s),t.push(new vt("timeCreated")),t.push(new vt("updated")),t.push(new vt("md5Hash",null,!0)),t.push(new vt("cacheControl",null,!0)),t.push(new vt("contentDisposition",null,!0)),t.push(new vt("contentEncoding",null,!0)),t.push(new vt("contentLanguage",null,!0)),t.push(new vt("contentType",null,!0)),t.push(new vt("metadata","customMetadata",!0)),Hl=t,Hl}function V3(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new zt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function F3(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return V3(r,t),r}function dT(t,e,n){const r=cT(e);return r===null?null:F3(t,r,n)}function U3(t,e,n,r){const s=cT(e);if(s===null||!ld(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),x=no(g,n,r),N=sT({alt:"media",token:d});return x+N})[0]}function hT(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Qs{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t){if(!t)throw lg()}function dg(t,e){function n(r,s){const i=dT(t,s,e);return Zn(i!==null),i}return n}function $3(t,e){function n(r,s){const i=dT(t,s,e);return Zn(i!==null),U3(i,s,t.host,t._protocol)}return n}function sl(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=s3():s=r3():n.getStatus()===402?s=n3(t.bucket):n.getStatus()===403?s=i3(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function hg(t){const e=sl(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=t3(t.path)),i.serverResponse=s.serverResponse,i}return n}function B3(t,e,n){const r=e.fullServerUrl(),s=no(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Qs(s,i,dg(t,n),o);return c.errorHandler=hg(e),c}function z3(t,e,n){const r=e.fullServerUrl(),s=no(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Qs(s,i,$3(t,n),o);return c.errorHandler=hg(e),c}function H3(t,e){const n=e.fullServerUrl(),r=no(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const c=new Qs(r,s,o,i);return c.successCodes=[200,204],c.errorHandler=hg(e),c}function q3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fT(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=q3(null,e)),r}function mT(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let E="";for(let _=0;_<2;_++)E=E+Math.random().toString().slice(2);return E}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=fT(e,r,s),f=hT(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=zn.getBlob(m,r,g);if(x===null)throw nT();const N={name:d.fullPath},y=no(i,t.host,t._protocol),C="POST",I=t.maxUploadRetryTime,w=new Qs(y,C,dg(t,n),I);return w.urlParams=N,w.headers=o,w.body=x.uploadData(),w.errorHandler=sl(e),w}class uu{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function fg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Zn(!1)}return Zn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function W3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=fT(e,r,s),c={name:o.fullPath},u=no(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=hT(o,n),g=t.maxUploadRetryTime;function x(y){fg(y);let C;try{C=y.getResponseHeader("X-Goog-Upload-URL")}catch{Zn(!1)}return Zn(ld(C)),C}const N=new Qs(u,d,x,g);return N.urlParams=c,N.headers=f,N.body=m,N.errorHandler=sl(e),N}function G3(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=fg(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zn(!1)}m||Zn(!1);const g=Number(m);return Zn(!isNaN(g)),new uu(g,r.size(),f==="final")}const o="POST",c=t.maxUploadRetryTime,u=new Qs(n,o,i,c);return u.headers=s,u.errorHandler=sl(e),u}const yw=256*1024;function K3(t,e,n,r,s,i,o,c){const u=new uu(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw c3();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const m=u.current,g=m+f;let x="";f===0?x="finalize":d===f?x="upload, finalize":x="upload";const N={"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":`${u.current}`},y=r.slice(m,g);if(y===null)throw nT();function C(_,L){const V=fg(_,["active","final"]),T=u.current+f,v=r.size();let S;return V==="final"?S=dg(e,i)(_,L):S=null,new uu(T,v,V==="final",S)}const I="POST",w=e.maxUploadRetryTime,E=new Qs(n,I,C,w);return E.headers=N,E.body=y.uploadData(),E.progressCallback=c||null,E.errorHandler=sl(t),E}const It={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Eh(t){switch(t){case"running":case"pausing":case"canceling":return It.RUNNING;case"paused":return It.PAUSED;case"success":return It.SUCCESS;case"canceled":return It.CANCELED;case"error":return It.ERROR;default:return It.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,r){if(y3(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Y3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Ao("cannot .send() more than once");if(is(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ao("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ao("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ao("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ao("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class X3 extends Y3{initXhr(){this.xhr_.responseType="text"}}function Ar(){return new X3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=ug(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Se.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(iT(s.status,[]))if(i)s=eT();else{this.sleepTime=Math.max(this.sleepTime*2,e3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Se.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=W3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ar,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=G3(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Ar,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=yw*this._chunkMultiplier,n=new uu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=K3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,Ar,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){yw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=B3(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ar,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=mT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ar,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Eh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Q3(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Eh(this._state)){case It.SUCCESS:ti(this._resolve.bind(null,this.snapshot))();break;case It.CANCELED:case It.ERROR:const n=this._reject;ti(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Eh(this._state)){case It.RUNNING:case It.PAUSED:e.next&&ti(e.next.bind(e,this.snapshot))();break;case It.SUCCESS:e.complete&&ti(e.complete.bind(e))();break;case It.CANCELED:case It.ERROR:e.error&&ti(e.error.bind(e,this._error))();break;default:e.error&&ti(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this._service=e,n instanceof zt?this._location=n:this._location=zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $s(e,n)}get root(){const e=new zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uT(this._location.path)}get storage(){return this._service}get parent(){const e=D3(this._location.path);if(e===null)return null;const n=new zt(this._location.bucket,e);return new $s(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw h3(e)}}function Z3(t,e,n){t._throwIfRoot("uploadBytes");const r=mT(t.storage,t._location,ug(),new zn(e,!0),n);return t.storage.makeRequestWithTokens(r,Ar).then(s=>({metadata:s,ref:t}))}function eO(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new J3(t,new zn(e),n)}function tO(t){t._throwIfRoot("getDownloadURL");const e=z3(t.storage,t._location,ug());return t.storage.makeRequestWithTokens(e,Ar).then(n=>{if(n===null)throw u3();return n})}function nO(t){t._throwIfRoot("deleteObject");const e=H3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Ar)}function rO(t,e){const n=L3(t._location.path,e),r=new zt(t._location.bucket,n);return new $s(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){return/^[A-Za-z]+:\/\//.test(t)}function iO(t,e){return new $s(t,e)}function pT(t,e){if(t instanceof mg){const n=t;if(n._bucket==null)throw l3();const r=new $s(n,n._bucket);return e!=null?pT(r,e):r}else return e!==void 0?rO(t,e):t}function oO(t,e){if(e&&sO(e)){if(t instanceof mg)return iO(t,e);throw Kf("To use ref(service, url), the first argument must be a Storage instance.")}else return pT(t,e)}function vw(t,e){const n=e==null?void 0:e[Z1];return n==null?null:zt.makeFromBucketSpec(n,t)}function aO(t,e,n,r={}){t.host=`${e}:${n}`;const s=is(e);s&&(sp(`https://${t.host}/b`),ip("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ub(i,t.app.options.projectId))}class mg{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=J1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JL,this._maxUploadRetryTime=ZL,this._requests=new Set,s!=null?this._bucket=zt.makeFromBucketSpec(s,this._host):this._bucket=vw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zt.makeFromBucketSpec(this._url,e):this._bucket=vw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $s(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new f3(rT());{const o=T3(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ww="@firebase/storage",_w="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="storage";function lO(t,e,n){return t=fe(t),Z3(t,e,n)}function cO(t,e,n){return t=fe(t),eO(t,e,n)}function yT(t){return t=fe(t),tO(t)}function uO(t){return t=fe(t),nO(t)}function pg(t,e){return t=fe(t),oO(t,e)}function dO(t=qa(),e){t=fe(t);const r=os(t,gT).getImmediate({identifier:e}),s=ab("storage");return s&&hO(r,...s),r}function hO(t,e,n,r={}){aO(t,e,n,r)}function fO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new mg(n,r,s,e,qs)}function mO(){_n(new on(gT,fO,"PUBLIC").setMultipleInstances(!0)),Dt(ww,_w,""),Dt(ww,_w,"esm2020")}mO();const pO={apiKey:"AIzaSyBHyhsDtZABqCEgmPdVHsA8r4vqTQIBJSs",authDomain:"dermaglareapp.firebaseapp.com",projectId:"dermaglareapp",storageBucket:"dermaglareapp.firebasestorage.app",messagingSenderId:"462818904186",appId:"1:462818904186:web:2040dcd437664d563bd3c3",measurementId:"G-3XLGD4G27R"},cd=LC().length?qa():yb(pO),ro=pP(cd),ce=m4(cd),gg=dO(cd);GL(cd);const vT=new Bn;vT.setCustomParameters({prompt:"select_account"});const La=t=>{if(!t||t.trim()==="")return{isValid:!1,error:"Email is required."};if(!t.includes("@"))return{isValid:!1,error:"Email must contain @ symbol."};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return{isValid:!1,error:"Please enter a valid email address."};if(!/\.(com|net|org|edu|gov|co\.za|za|io|me|info|biz)$/i.test(t))return{isValid:!1,error:"Email must have a valid domain (.com, .net, .org, .co.za, etc.)."};const r=t.split("@")[1].toLowerCase(),s={"gmial.com":"gmail.com","gmai.com":"gmail.com","yahooo.com":"yahoo.com","yaho.com":"yahoo.com","outlok.com":"outlook.com","hotmial.com":"hotmail.com"};return s[r]?{isValid:!1,error:`Did you mean ${s[r]}?`}:{isValid:!0}},wT=t=>t.length<8?{isValid:!1,error:"Password must be at least 8 characters long."}:/[A-Z]/.test(t)?/[a-z]/.test(t)?/[0-9]/.test(t)?{isValid:!0}:{isValid:!1,error:"Password must contain at least one number."}:{isValid:!1,error:"Password must contain at least one lowercase letter."}:{isValid:!1,error:"Password must contain at least one uppercase letter."},gO=(t,e)=>t!==e?{isValid:!1,error:"Passwords do not match."}:{isValid:!0},yO=async(t,e)=>{try{const n=La(t);if(!n.isValid)throw new Error(n.error);const r=await QA(ro,t,e),s=await ur(Je(ce,"patients",r.user.uid));if(!s.exists())throw new Error("Patient record not found. Please contact support.");return{user:r.user,patientData:s.data()}}catch(n){throw console.error("Login error:",n),new Error(ud(n.code))}},vO=async(t,e,n,r)=>{try{console.log("Starting signup process for:",t);const s=La(t);if(!s.isValid)throw new Error(s.error);const i=wT(e);if(!i.isValid)throw new Error(i.error);console.log("Creating user account...");const o=await KA(ro,t,e);console.log("User account created with UID:",o.user.uid),console.log("Sending verification email..."),await YA(o.user,{url:window.location.origin+"/dashboard",handleCodeInApp:!1}),console.log("Verification email sent successfully"),console.log("Updating user profile..."),await JA(o.user,{displayName:n}),console.log("Profile updated successfully"),console.log("Creating patient record in Firestore...");const c={name:n,email:t,createdAt:Re(),lastVisit:Re(),role:"patient",status:"active",emailVerified:!1,...r};if(await Wf(Je(ce,"patients",o.user.uid),c),console.log("Patient record created successfully"),!(await ur(Je(ce,"patients",o.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),o.user}catch(s){throw console.error("Signup error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(ud(s.code))}},wO=async()=>{try{console.log("Starting Google sign-in...");const t=await TR(ro,vT);console.log("Google sign-in successful, UID:",t.user.uid);const e=await ur(Je(ce,"patients",t.user.uid));if(console.log("Patient document exists:",e.exists()),e.exists())return console.log("Updating last visit for existing user..."),await Wf(Je(ce,"patients",t.user.uid),{lastVisit:Re()},{merge:!0}),console.log("Last visit updated"),{user:t.user,patientData:e.data()};{console.log("Creating new patient record for Google user...");const n={name:t.user.displayName||"Google User",email:t.user.email,photoURL:t.user.photoURL,createdAt:Re(),lastVisit:Re(),role:"patient",status:"active"};if(await Wf(Je(ce,"patients",t.user.uid),n),console.log("New patient record created"),!(await ur(Je(ce,"patients",t.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),{user:t.user,patientData:n}}}catch(t){throw console.error("Google login error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),t.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(ud(t.code))}},_O=async()=>{try{await sR(ro)}catch(t){throw console.error("Logout error:",t),new Error("Failed to logout. Please try again.")}},xO=async t=>{try{const e=La(t);if(!e.isValid)throw new Error(e.error);return await GA(ro,t,{url:window.location.origin+"/login",handleCodeInApp:!1}),{success:!0,message:`Password reset email sent to ${t}. Please check your inbox.`}}catch(e){throw console.error("Password reset error:",e),new Error(ud(e.code))}},bO=t=>rR(ro,t),ud=t=>({"auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters.","auth/invalid-email":"Invalid email address.","auth/user-disabled":"This account has been disabled.","auth/too-many-requests":"Too many attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/popup-closed-by-user":"Sign-in popup was closed.","auth/cancelled-popup-request":"Only one popup request is allowed at a time.","auth/operation-not-allowed":"This sign-in method is not enabled. Please contact support.","permission-denied":"Database permission error. Please contact support."})[t]||"An error occurred. Please try again.",EO="modulepreload",TO=function(t){return"/"+t},xw={},du=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=TO(u),u in xw)return;xw[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":EO,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},hu=async t=>{try{const e=eo(et(ce,"appointments"),sd("patientId","==",t),nl("date","desc"));return(await rl(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching appointments:",e),e}},IO=async t=>{try{console.log("bookAppointment called with:",t),console.log("Firebase db instance:",ce);const e=await ln(et(ce,"appointments"),{...t,createdAt:Re()});console.log("Document created with ID:",e.id);const{getServicePrice:n}=await du(async()=>{const{getServicePrice:c}=await Promise.resolve().then(()=>FT);return{getServicePrice:c}},[]),r=n(t.type)||{basePrice:500,name:t.type},s={patientId:t.patientId,patientName:t.patientName,patientEmail:t.patientEmail||"",appointmentId:e.id,amount:r.basePrice,description:`${t.type} - ${t.doctorName}`,service:t.type,status:"Pending",date:new Date().toISOString(),dueDate:t.date,invoiceNumber:`INV-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,createdAt:Re()},i=await ln(et(ce,"invoices"),s);console.log("Invoice created with ID:",i.id);const{sendInvoiceCreatedEmail:o}=await du(async()=>{const{sendInvoiceCreatedEmail:c}=await Promise.resolve().then(()=>DT);return{sendInvoiceCreatedEmail:c}},void 0);return await o(t.patientEmail||"",t.patientName,t.patientId,s.invoiceNumber,r.basePrice,t.date,[t.type]),e.id}catch(e){throw console.error("Error booking appointment:",e),console.error("Error details:",JSON.stringify(e,null,2)),e}},SO=async(t,e=!0)=>{var n;try{const r=Je(ce,"appointments",t),s=await ur(r);if(!s.exists())throw new Error("Appointment not found");const i=s.data();if(await to(r,{status:"Cancelled",cancelledAt:Re()}),e&&i.patientId){const{createCancellationFeeInvoice:o,getServicePrice:c}=await du(async()=>{const{createCancellationFeeInvoice:m,getServicePrice:g}=await Promise.resolve().then(()=>FT);return{createCancellationFeeInvoice:m,getServicePrice:g}},void 0),{sendCancellationFeeEmail:u}=await du(async()=>{const{sendCancellationFeeEmail:m}=await Promise.resolve().then(()=>DT);return{sendCancellationFeeEmail:m}},void 0),d=i.type||i.serviceType,f=c(d);if(f){const m=f.basePrice*.1,g=await o(t,i.patientId);return i.patientEmail&&await u(i.patientEmail,i.patientName||"Patient",i.patientId,i.date,i.time,f.basePrice,m,`INV-${(n=g.id)==null?void 0:n.slice(-8).toUpperCase()}`),{success:!0,invoiceId:g.id,cancellationFee:m}}}return{success:!0}}catch(r){throw console.error("Error cancelling appointment:",r),r}},Qf=async t=>{try{const e=eo(et(ce,"documents"),sd("patientId","==",t),nl("date","desc"));return(await rl(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching documents:",e),e}},NO=async(t,e,n)=>{try{const r=Date.now(),s=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`${r}_${s}`,o=pg(gg,`documents/${t}/${i}`),c=cO(o,e);return new Promise((u,d)=>{c.on("state_changed",f=>{const m=f.bytesTransferred/f.totalBytes*100;n&&n(Math.round(m))},f=>{console.error("Upload error:",f),d(new Error("Upload failed: "+f.message))},async()=>{var f;try{const m=await yT(c.snapshot.ref),g=((f=e.name.split(".").pop())==null?void 0:f.toLowerCase())||"";let x="PDF";["jpg","jpeg","png","gif","webp"].includes(g)?x="Image":["doc","docx"].includes(g)&&(x="Document");const N=Math.round(e.size/1024),y=N<1024?`${N} KB`:`${(N/1024).toFixed(2)} MB`,C=CO(e.name),I=await ln(et(ce,"documents"),{patientId:t,name:e.name,type:x,size:y,sizeBytes:e.size,fileUrl:m,url:m,storagePath:`documents/${t}/${i}`,date:new Date().toISOString().split("T")[0],uploadedAt:Re(),category:C});console.log("Document uploaded successfully:",I.id),u(I.id)}catch(m){console.error("Error saving document metadata:",m),d(new Error("Failed to save document: "+m.message))}})})}catch(r){throw console.error("Upload initialization error:",r),new Error("Failed to initialize upload: "+r.message)}},kO=async(t,e)=>{try{const n=pg(gg,e);await uO(n),await N4(Je(ce,"documents",t)),console.log("Document deleted successfully")}catch(n){throw console.error("Error deleting document:",n),new Error("Failed to delete document: "+n.message)}},CO=t=>{const e=t.toLowerCase();return e.includes("report")?"Report":e.includes("lab")||e.includes("test")?"Lab Result":e.includes("prescription")||e.includes("rx")?"Prescription":e.includes("imaging")||e.includes("scan")||e.includes("xray")?"Imaging":"General"},AO=async(t,e)=>{try{const n=eo(et(ce,"chats"),sd("patientId","==",t),T4(1)),r=await rl(n);return r.empty?(await ln(et(ce,"chats"),{patientId:t,patientName:e,lastMessageText:"",lastMessageTimestamp:Re(),unreadByPatient:0,unreadByAdmin:!1})).id:r.docs[0].id}catch(n){throw console.error("Error getting/creating chat:",n),n}},RO=async t=>{try{const e=eo(et(ce,`chats/${t}/messages`),nl("timestamp","asc"));return(await rl(e)).docs.map(r=>({id:r.id,chatId:t,...r.data()}))}catch(e){throw console.error("Error fetching messages:",e),e}},PO=async(t,e,n)=>{try{const r=await ln(et(ce,`chats/${t}/messages`),{senderId:e,text:n,timestamp:Re(),read:!1});return await to(Je(ce,"chats",t),{lastMessageText:n,lastMessageTimestamp:Re(),unreadByAdmin:e!=="admin"}),r.id}catch(r){throw console.error("Error sending message:",r),r}},jO=async t=>{try{await to(Je(ce,"chats",t),{unreadByPatient:0})}catch(e){throw console.error("Error marking messages as read:",e),e}},DO=(t,e)=>{const n=eo(et(ce,`chats/${t}/messages`),nl("timestamp","asc"));return k4(n,r=>{const s=r.docs.map(i=>({id:i.id,chatId:t,...i.data()}));e(s)})},yg=async t=>{try{const e=await ur(Je(ce,"patients",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error fetching patient profile:",e),e}},pc=async(t,e)=>{try{await to(Je(ce,"patients",t),e)}catch(n){throw console.error("Error updating patient profile:",n),n}},_T=R.createContext(void 0),Ot=()=>{const t=R.useContext(_T);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},LO=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(!0),[i,o]=R.useState([]);R.useEffect(()=>bO(async N=>{if(N)try{const y=await yg(N.uid);n({...N,displayName:(y==null?void 0:y.name)||N.displayName||"Patient",photoURL:(y==null?void 0:y.photoURL)||N.photoURL||`https://ui-avatars.com/api/?name=${(y==null?void 0:y.name)||"P"}&background=F4E48E&color=3A565B`})}catch(y){console.error("Failed to fetch patient profile",y),n({...N,displayName:N.displayName||"Patient",photoURL:N.photoURL||`https://ui-avatars.com/api/?name=${N.displayName||"P"}&background=F4E48E&color=3A565B`})}else n(null);s(!1)}),[]);const c=async(x,N)=>{await yO(x,N)},u=async(x,N,y)=>{await vO(x,N,y)},d=async()=>{await _O()},f=R.useCallback((x,N="info")=>{const y=Math.random().toString(36).substr(2,9);o(C=>[...C,{id:y,message:x,type:N}]),setTimeout(()=>m(y),5e3)},[]),m=x=>{o(N=>N.filter(y=>y.id!==x))},g={user:e,loading:r,login:c,signup:u,logout:d,showToast:f,toasts:i,removeToast:m};return a.jsx(_T.Provider,{value:g,children:t})},bw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Ut=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),a.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),a.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),St=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),a.jsx("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),Yf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),OO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),MO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"9 18 15 12 9 6"})}),VO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"15 18 9 12 15 6"})}),Bi=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),xT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),a.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),Kn=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),vg=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Oa=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),bT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),a.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),gc=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),a.jsx("polyline",{points:"22 6 12 13 2 6"})]}),Ht=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),fu=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.jsx("polyline",{points:"12 5 19 12 12 19"})]}),FO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),il=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),UO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),ET=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),$O=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),a.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]}),Xf=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),TT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a.jsx("polyline",{points:"17 6 23 6 23 12"})]}),IT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),ST=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),NT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),kT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),CT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.35-4.35"})]}),AT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),RT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),BO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),zO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),Ew=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),a.jsx("path",{d:"M22 2 11 13"})]}),HO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),qO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 8-6 4 6 4V8Z"}),a.jsx("rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2"})]}),WO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),GO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),a.jsx("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),a.jsx("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]}),KO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),a.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Th=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]}),QO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),a.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),Tw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),Iw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),Sw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),YO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),ia=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),XO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),a.jsx("path",{d:"M9 22v-4h6v4"}),a.jsx("path",{d:"M8 6h.01"}),a.jsx("path",{d:"M16 6h.01"}),a.jsx("path",{d:"M12 6h.01"}),a.jsx("path",{d:"M12 10h.01"}),a.jsx("path",{d:"M12 14h.01"}),a.jsx("path",{d:"M16 10h.01"}),a.jsx("path",{d:"M16 14h.01"}),a.jsx("path",{d:"M8 10h.01"}),a.jsx("path",{d:"M8 14h.01"})]}),JO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"}),a.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),PT=async(t,e,n,r,s,i,o)=>{try{const c="Payment Successful - Dermaglare Skin & Laser Clinic",u=`
Dear ${e},

Thank you for your payment!

Payment Details:

Invoice Number: ${r}
Amount Paid: R${s.toFixed(2)}
Payment Method: ${o}
Transaction ID: ${i}
Date: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

Your payment has been successfully processed and your invoice has been marked as paid.

You can view your invoice and payment history in your patient portal at any time.

If you have any questions about this payment, please don't hesitate to contact us at:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for choosing Dermaglare Skin & Laser Clinic!

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),d={to:t,subject:c,body:u,type:"payment_success",patientId:n,relatedId:i,sentAt:Re(),status:"sent"};return await ln(et(ce,"email_notifications"),d),console.log(" Payment success email sent to:",t),console.log("Subject:",c),console.log(`
Email body:
`,u),!0}catch(c){return console.error("Error sending payment success email:",c),!1}},jT=async(t,e,n,r,s,i)=>{try{const o="Payment Failed - Dermaglare Skin & Laser Clinic",c=`
Dear ${e},

We were unable to process your payment.

Payment Details:

Invoice Number: ${r}
Amount: R${s.toFixed(2)}
Reason: ${i}
Date: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

Please try again or use a different payment method. Your invoice remains unpaid and can be accessed in your patient portal.

If you continue to experience issues, please contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for your understanding.

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),u={to:t,subject:o,body:c,type:"payment_failed",patientId:n,sentAt:Re(),status:"sent"};return await ln(et(ce,"email_notifications"),u),console.log(" Payment failed email sent to:",t),!0}catch(o){return console.error("Error sending payment failed email:",o),!1}},ZO=async(t,e,n,r,s,i,o)=>{try{const c="New Invoice - Dermaglare Skin & Laser Clinic",u=`
Dear ${e},

A new invoice has been generated for your recent visit.

Invoice Details:

Invoice Number: ${r}
Amount Due: R${s.toFixed(2)}
Due Date: ${new Date(i).toLocaleDateString("en-ZA")}

Services:
${o.map((f,m)=>`${m+1}. ${f}`).join(`
`)}

You can view and pay your invoice online through your patient portal.

Payment Options:
 Credit/Debit Card (Instant)
 EFT (1-3 business days)
 Cash (In-person)

Please ensure payment is made by the due date to avoid any additional charges.

Questions? Contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for choosing Dermaglare!

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),d={to:t,subject:c,body:u,type:"invoice_created",patientId:n,relatedId:r,sentAt:Re(),status:"sent"};return await ln(et(ce,"email_notifications"),d),console.log(" Invoice created email sent to:",t),!0}catch(c){return console.error("Error sending invoice created email:",c),!1}},eM=async(t,e,n,r,s,i,o,c)=>{try{const u="Appointment Cancellation Fee - Dermaglare Skin & Laser Clinic",d=`
Dear ${e},

Your appointment has been cancelled and a cancellation fee has been applied.

Cancellation Details:

Original Appointment: ${new Date(r).toLocaleDateString("en-ZA")} at ${s}
Consultation Fee: R${i.toFixed(2)}
Cancellation Fee (10%): R${o.toFixed(2)}
Invoice Number: ${c}

As per our cancellation policy, a 10% cancellation fee of the consultation fee has been applied.

This fee helps cover administrative costs and the reserved appointment slot. An invoice has been generated and can be viewed in your patient portal.

To avoid cancellation fees in the future, please:
 Cancel at least 24 hours in advance when possible
 Contact us if you need to reschedule

Payment can be made through:
 Credit/Debit Card (Instant)
 EFT (1-3 business days)
 Cash (In-person)

Questions about our cancellation policy? Contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

We look forward to serving you in the future.

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),f={to:t,subject:u,body:d,type:"cancellation_fee",patientId:n,relatedId:c,sentAt:Re(),status:"sent"};return await ln(et(ce,"email_notifications"),f),console.log(" Cancellation fee email sent to:",t),!0}catch(u){return console.error("Error sending cancellation fee email:",u),!1}},DT=Object.freeze(Object.defineProperty({__proto__:null,sendCancellationFeeEmail:eM,sendInvoiceCreatedEmail:ZO,sendPaymentFailedEmail:jT,sendPaymentSuccessEmail:PT},Symbol.toStringTag,{value:"Module"})),LT=[{id:"consultation",name:"Standard Consultation",basePrice:1300,duration:"30 min",description:"Comprehensive skin assessment and treatment plan",category:"medical"},{id:"medical_dermatology",name:"Medical Dermatology",basePrice:1500,duration:"30 min",description:"Treatment of skin conditions",category:"medical"},{id:"cosmetic_dermatology",name:"Cosmetic Dermatology",basePrice:1600,duration:"30-60 min",description:"Aesthetic treatments and procedures",category:"cosmetic"},{id:"laser_treatment",name:"Laser Treatment",basePrice:3500,duration:"45-60 min",description:"Advanced laser procedures",category:"cosmetic"},{id:"chemical_peel",name:"Chemical Peel",basePrice:1800,duration:"30-45 min",description:"Chemical peels for skin renewal",category:"cosmetic"},{id:"microneedling",name:"Microneedling",basePrice:1900,duration:"45 min",description:"Collagen induction therapy",category:"cosmetic"},{id:"botox",name:"Botox Injections",basePrice:4500,duration:"20-30 min",description:"Anti-aging wrinkle treatment",category:"cosmetic"},{id:"prp_therapy",name:"Platelet-Rich Plasma (PRP)",basePrice:3200,duration:"45-60 min",description:"PRP therapy for skin rejuvenation",category:"specialty"},{id:"skin_tightening",name:"Skin Tightening",basePrice:2200,duration:"45-60 min",description:"Non-surgical skin firming",category:"cosmetic"},{id:"mole_removal",name:"Mole Removal",basePrice:1800,duration:"30 min",description:"Surgical removal of moles",category:"surgical"},{id:"skin_cancer_screening",name:"Skin Cancer Screening",basePrice:1750,duration:"30 min",description:"Comprehensive skin cancer examination",category:"medical"},{id:"acne_treatment",name:"Acne Treatment",basePrice:1650,duration:"30 min",description:"Specialized acne management",category:"medical"},{id:"paediatric_dermatology",name:"Paediatric Dermatology",basePrice:1450,duration:"30-45 min",description:"Specialized skin care for children",category:"specialty"}],OT=t=>LT.find(e=>e.id===t.toLowerCase().replace(/\s+/g,"_")||e.name.toLowerCase()===t.toLowerCase()),Jf=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`INV-${e}${n}-${r}`},MT=async t=>{try{const e=et(ce,"invoices"),n=eo(e,sd("patientId","==",t),nl("createdAt","desc"));return(await rl(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error fetching patient invoices:",e),[]}},Zf=async t=>{try{const e=Je(ce,"invoices",t),n=await ur(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error fetching invoice:",e),null}},tM=(t=2e3)=>new Promise(e=>setTimeout(e,t)),nM=()=>{const t=Date.now(),e=Math.floor(Math.random()*1e5);return`TXN-${t}-${e}`},rM=t=>{const e=t.replace(/\s+/g,"");if(!/^\d{13,19}$/.test(e))return!1;let n=0,r=!1;for(let s=e.length-1;s>=0;s--){let i=parseInt(e[s]);r&&(i*=2,i>9&&(i-=9)),n+=i,r=!r}return n%10===0},VT=async(t,e,n)=>{try{if(!rM(e.cardNumber))return{success:!1,message:"Invalid card number"};const r=new Date;if(new Date(parseInt(`20${e.expiryYear}`),parseInt(e.expiryMonth)-1)<r)return{success:!1,message:"Card has expired"};if(!/^\d{3,4}$/.test(e.cvv))return{success:!1,message:"Invalid CVV"};const i=await Zf(t);if(!i)return{success:!1,message:"Invoice not found"};if(i.status==="paid")return{success:!1,message:"Invoice already paid"};if(await tM(2e3),Math.random()<.1){const m={invoiceId:t,amount:i.amount,currency:"ZAR",status:"failed",paymentMethod:"card",createdAt:Re(),updatedAt:Re()};return await ln(et(ce,"payment_intents"),m),await jT(n,i.patientName,i.patientId,Jf(),i.amount,"Payment declined by bank"),{success:!1,message:"Payment declined by bank. Please try again or use a different card."}}const c=nM(),u={invoiceId:t,amount:i.amount,currency:"ZAR",status:"succeeded",paymentMethod:"card",createdAt:Re(),updatedAt:Re()};await ln(et(ce,"payment_intents"),u);const d=Je(ce,"invoices",t);await to(d,{status:"paid",paymentMethod:"card",transactionId:c,paidAt:new Date().toISOString(),updatedAt:Re()});const f=await Zf(t);return await PT(n,i.patientName,i.patientId,Jf(),i.amount,c,"Credit/Debit Card"),{success:!0,transactionId:c,message:"Payment processed successfully",invoice:f}}catch(r){return console.error("Error processing card payment:",r),{success:!1,message:"Payment processing failed. Please try again."}}},sM=async(t,e)=>{try{const n=Je(ce,"appointments",t),r=await ur(n);if(!r.exists())throw new Error("Appointment not found");const s=r.data(),i=s.type||s.serviceType,o=OT(i);if(!o)throw new Error(`Service pricing not found for: ${i}`);const c=o.basePrice*.1,u={serviceId:"cancellation_fee",serviceName:`Cancellation Fee (10% of ${o.name})`,price:c,quantity:1,total:c},d=Je(ce,"patients",e),f=await ur(d),m=f.exists()?f.data().name:s.patientName||"Unknown Patient",g=new Date,x=new Date;x.setDate(x.getDate()+7);const N={patientId:e,patientName:m,amount:c,status:"pending",date:g.toISOString().split("T")[0],dueDate:x.toISOString().split("T")[0],services:[u],description:`Cancellation Fee - Appointment on ${s.date} at ${s.time}`,appointmentId:t,createdAt:Re(),updatedAt:Re()},y=et(ce,"invoices"),C=await ln(y,N);return await to(n,{cancellationFeeInvoiceId:C.id,cancellationFeeApplied:!0,cancellationFeeAmount:c}),{id:C.id,...N}}catch(n){throw console.error("Error creating cancellation fee invoice:",n),n}},FT=Object.freeze(Object.defineProperty({__proto__:null,SERVICE_PRICES:LT,createCancellationFeeInvoice:sM,generateInvoiceNumber:Jf,getInvoice:Zf,getPatientInvoices:MT,getServicePrice:OT,processCardPayment:VT},Symbol.toStringTag,{value:"Module"})),iM=({invoice:t,onClose:e,onSuccess:n})=>{var B;const{user:r,showToast:s}=Ot(),[i,o]=R.useState("card"),[c,u]=R.useState(!1),[d,f]=R.useState(0),[m,g]=R.useState(""),[x,N]=R.useState(""),[y,C]=R.useState(""),[I,w]=R.useState(""),[E,_]=R.useState(""),[L,V]=R.useState(""),[T,v]=R.useState(""),[S,A]=R.useState(""),[P,j]=R.useState(""),[k,re]=R.useState("");if(!t)return null;const W=F=>(F.replace(/\s+/g,"").match(/.{1,4}/g)||[]).join(" "),me=F=>{const D=F.target.value.replace(/\s+/g,"");D.length<=16&&/^\d*$/.test(D)&&g(D)},H=async()=>{if(!t.id||!(r!=null&&r.email)){s("Missing payment information","error");return}u(!0),f(0);try{const F=setInterval(()=>{f(D=>D>=90?(clearInterval(F),90):D+10)},200);if(i==="card"){if(!m||!x||!y||!I||!E){s("Please fill in all card details","error"),u(!1),clearInterval(F);return}const D=await VT(t.id,{cardNumber:m,expiryMonth:y,expiryYear:I,cvv:E,cardholderName:x},r.email);clearInterval(F),f(100),D.success?(s(` Payment successful! Confirmation email sent to ${r.email}`,"success"),setTimeout(()=>{n(),e()},1e3)):(s(D.message,"error"),u(!1),f(0))}else if(i==="eft"){if(!L||!T||!S||!P){s("Please fill in all EFT details","error"),u(!1),clearInterval(F);return}clearInterval(F),f(100),s("EFT payment initiated. Please allow 1-3 business days for processing.","success"),setTimeout(()=>{e()},2e3)}else if(i==="cash"){if(!k||parseFloat(k)<t.amount){s("Insufficient cash amount","error"),u(!1),clearInterval(F);return}clearInterval(F),f(100),s("Cash payment recorded successfully","success"),setTimeout(()=>{n(),e()},1e3)}}catch(F){console.error("Payment error:",F),s("Payment processing failed. Please try again.","error"),u(!1),f(0)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark text-white p-6 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Payment Gateway"}),a.jsxs("p",{className:"text-white/80 mt-1",children:["Secure payment processing for Invoice #",(B=t.id)==null?void 0:B.slice(-8)]})]}),a.jsx("button",{onClick:e,disabled:c,className:"p-2 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(Bi,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-brand-light to-white border border-brand-teal/20 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Amount Due:"}),a.jsxs("span",{className:"text-3xl font-bold text-brand-dark",children:["R",t.amount.toFixed(2)]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Service:"})," ",t.description||t.service||"Medical Services"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Payment Method"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"card",icon:xT,label:"Card"},{id:"eft",icon:XO,label:"EFT"},{id:"cash",icon:JO,label:"Cash"}].map(F=>a.jsxs("button",{onClick:()=>o(F.id),disabled:c,className:`p-4 rounded-xl border-2 transition-all duration-300 ${i===F.id?"border-brand-teal bg-brand-light text-brand-teal shadow-lg":"border-gray-200 hover:border-brand-teal/50"} disabled:opacity-50`,children:[a.jsx(F.icon,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-semibold",children:F.label})]},F.id))})]}),i==="card"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Card Number"}),a.jsx("input",{type:"text",value:W(m),onChange:me,placeholder:"1234 5678 9012 3456",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cardholder Name"}),a.jsx("input",{type:"text",value:x,onChange:F=>N(F.target.value),placeholder:"John Doe",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Month"}),a.jsx("input",{type:"text",value:y,onChange:F=>{const D=F.target.value;/^\d{0,2}$/.test(D)&&parseInt(D||"0")<=12&&C(D)},placeholder:"MM",disabled:c,maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Year"}),a.jsx("input",{type:"text",value:I,onChange:F=>{const D=F.target.value;/^\d{0,2}$/.test(D)&&w(D)},placeholder:"YY",disabled:c,maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CVV"}),a.jsx("input",{type:"text",value:E,onChange:F=>{const D=F.target.value;/^\d{0,4}$/.test(D)&&_(D)},placeholder:"123",disabled:c,maxLength:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]})]})]}),i==="eft"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Account Holder Name"}),a.jsx("input",{type:"text",value:L,onChange:F=>V(F.target.value),placeholder:"John Doe",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Account Number"}),a.jsx("input",{type:"text",value:T,onChange:F=>v(F.target.value),placeholder:"1234567890",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bank Name"}),a.jsx("input",{type:"text",value:S,onChange:F=>A(F.target.value),placeholder:"Standard Bank",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Branch Code"}),a.jsx("input",{type:"text",value:P,onChange:F=>j(F.target.value),placeholder:"051001",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Note:"})," EFT payments typically take 1-3 business days to process. You will receive a confirmation email once the payment is verified."]})})]}),i==="cash"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cash Amount (R)"}),a.jsx("input",{type:"number",value:k,onChange:F=>re(F.target.value),placeholder:t.amount.toFixed(2),disabled:c,min:t.amount,step:"0.01",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono text-lg"})]}),k&&parseFloat(k)>t.amount&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Change Due:"})," R",(parseFloat(k)-t.amount).toFixed(2)]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Cash payments must be made in person at our clinic. This form records the payment for our records."]})})]}),c&&a.jsxs("div",{className:"space-y-2 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Processing payment..."}),a.jsxs("span",{className:"font-semibold text-brand-teal",children:[d,"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal to-brand-dark transition-all duration-300 ease-out",style:{width:`${d}%`}})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:e,disabled:c,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:H,disabled:c,type:"button",className:"flex-1 px-6 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:transform-none flex items-center justify-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),"Pay R",t.amount.toFixed(2)]})})]}),a.jsx("div",{className:"text-center text-xs text-gray-500 pt-2",children:" Secure payment processing powered by Dermaglare Payment Gateway"})]})]})})},oM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState("invoices"),[s,i]=R.useState([]),[o,c]=R.useState(!0),[u,d]=R.useState(null),[f,m]=R.useState(!1),g=async()=>{if(t!=null&&t.uid)try{c(!0);const L=(await MT(t.uid)).map(V=>{var T,v,S;return{...V,invoiceNumber:`INV-${(T=V.id)==null?void 0:T.slice(-8).toUpperCase()}`,service:V.description||((S=(v=V.services)==null?void 0:v[0])==null?void 0:S.serviceName)||"Medical Service"}});i(L),c(!1)}catch(_){console.error("Error fetching invoices:",_),e("Failed to load invoices","error"),c(!1)}};R.useEffect(()=>{g()},[t]);const x=_=>{switch(_.toLowerCase()){case"paid":return"from-green-500 to-emerald-600";case"pending":return"from-yellow-500 to-orange-600";case"overdue":return"from-red-500 to-rose-600";case"cancelled":return"from-gray-500 to-slate-600";default:return"from-gray-500 to-slate-600"}},N=_=>{switch(_.toLowerCase()){case"paid":return a.jsx(Ht,{className:"w-5 h-5"});case"pending":return a.jsx(Oa,{className:"w-5 h-5"});case"overdue":return a.jsx(bT,{className:"w-5 h-5"});case"cancelled":return a.jsx(Bi,{className:"w-5 h-5"});default:return null}},y=s.filter(_=>_.status.toLowerCase()==="paid").reduce((_,L)=>_+L.amount,0),C=s.filter(_=>_.status.toLowerCase()==="pending"||_.status.toLowerCase()==="overdue").reduce((_,L)=>_+L.amount,0);s.filter(_=>{const L=new Date(_.date),V=new Date;return L.getMonth()===V.getMonth()&&L.getFullYear()===V.getFullYear()}).reduce((_,L)=>_+L.amount,0);const I=_=>{d(_),m(!0)},w=()=>{g()},E=_=>{const L=`
DERMAGLARE SKIN & LASER CLINIC
Invoice: ${_.invoiceNumber}
Date: ${new Date(_.date).toLocaleDateString()}
Due Date: ${_.dueDate?new Date(_.dueDate).toLocaleDateString():"N/A"}

Patient: ${_.patientName}
Service: ${_.service}
Amount: R${_.amount.toFixed(2)}
Status: ${_.status}

Thank you for choosing Dermaglare!
    `.trim(),V=new Blob([L],{type:"text/plain"}),T=URL.createObjectURL(V),v=document.createElement("a");v.href=T,v.download=`${_.invoiceNumber}.txt`,v.click(),URL.revokeObjectURL(T),e("Invoice downloaded successfully","success")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Billing & Payments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your invoices and make secure payments"})]})}),a.jsxs("div",{className:"flex gap-4 animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("button",{onClick:()=>r("invoices"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 ${n==="invoices"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:"Invoices"}),a.jsx("button",{onClick:()=>r("history"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 ${n==="history"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:"Payment History"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{label:"Total Paid",amount:y,icon:Ht,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Total Pending",amount:C,icon:Oa,color:"from-yellow-500 to-orange-600",delay:"0.3s"},{label:"Total Invoices",amount:s.length,icon:St,color:"from-blue-500 to-cyan-600",delay:"0.4s",isCount:!0},{label:"This Month",amount:600,icon:TT,color:"from-purple-500 to-violet-600",delay:"0.5s"}].map(_=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:_.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${_.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(_.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:_.isCount?_.amount:`R${_.amount.toFixed(2)}`}),a.jsx("div",{className:"text-gray-600 font-medium",children:_.label})]},_.label))}),n==="invoices"?a.jsx("div",{className:"space-y-6",children:o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading invoices..."})]})}):s.length===0?a.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center shadow-lg",children:[a.jsx(St,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Invoices Found"}),a.jsx("p",{className:"text-gray-600",children:"You don't have any invoices yet."})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.map((_,L)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.01] animate-slide-in-up",style:{animationDelay:`${.6+L*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${x(_.status)} animate-shimmer`}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(St,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-brand-teal transition-colors duration-300",children:_.invoiceNumber}),a.jsx("p",{className:"text-gray-600",children:_.service})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Invoice Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(_.date).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Due Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:_.dueDate?new Date(_.dueDate).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Amount"}),a.jsxs("p",{className:"font-bold text-2xl text-gray-800",children:["R",_.amount.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-4",children:[a.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${x(_.status)} text-white font-semibold`,children:[N(_.status),_.status.charAt(0).toUpperCase()+_.status.slice(1)]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>E(_),className:"px-4 py-2 bg-brand-light text-brand-teal rounded-lg hover:bg-brand-teal hover:text-white font-semibold transform hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[a.jsx(vg,{className:"w-4 h-4"}),"Download"]}),_.status.toLowerCase()!=="paid"&&_.status.toLowerCase()!=="cancelled"&&_.id&&a.jsx("button",{onClick:()=>I(_),className:"px-4 py-2 bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark rounded-lg font-semibold transform hover:scale-105 transition-all duration-300",children:"Pay Now"})]})]})]})})]},_.id))})})}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Payment History"}),s.filter(_=>_.status.toLowerCase()==="paid").length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(KO,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No payment history yet."})]}):a.jsx("div",{className:"space-y-4",children:s.filter(_=>_.status.toLowerCase()==="paid").map(_=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:a.jsx(Ht,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:_.invoiceNumber}),a.jsx("p",{className:"text-sm text-gray-600",children:_.service}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(_.date).toLocaleDateString("en-ZA")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-xl text-green-600",children:["R",_.amount.toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:_.paymentMethod||"Card"})]})]},_.id))})]})}),f&&a.jsx(iM,{invoice:u,onClose:()=>{m(!1),d(null)},onSuccess:w})]})},Bo=({children:t,variant:e="primary",size:n="md",className:r="",onClick:s,disabled:i,type:o="button"})=>{const c="relative overflow-hidden font-medium rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",u={primary:"bg-brand-teal text-white hover:bg-brand-dark shadow-lg hover:shadow-xl hover:shadow-brand-teal/30",secondary:"bg-brand-yellow text-brand-dark hover:bg-yellow-400 shadow-lg hover:shadow-xl hover:shadow-brand-yellow/30",ghost:"bg-transparent text-brand-dark hover:bg-brand-teal/10 hover:text-brand-teal",danger:"bg-red-600 text-white hover:bg-red-700 shadow-lg hover:shadow-xl hover:shadow-red-600/30"},d={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},f=m=>{const g=m.currentTarget,x=document.createElement("span"),N=g.getBoundingClientRect(),y=Math.max(N.width,N.height),C=m.clientX-N.left-y/2,I=m.clientY-N.top-y/2;x.style.width=x.style.height=`${y}px`,x.style.left=`${C}px`,x.style.top=`${I}px`,x.classList.add("absolute","bg-white/30","rounded-full","pointer-events-none","animate-ping"),g.appendChild(x),setTimeout(()=>{x.remove()},600),s&&s(m)};return a.jsx("button",{type:o,disabled:i,onClick:f,className:`${c} ${u[e]} ${d[n]} ${r}`,children:a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:t})})},Ro=({id:t,label:e,type:n="text",placeholder:r,value:s,onChange:i,icon:o,disabled:c,defaultValue:u,error:d,required:f=!1})=>{const[m,g]=R.useState(!1);return a.jsxs("div",{className:"relative group",children:[a.jsx("label",{htmlFor:t,className:`
          block text-sm font-medium mb-2 transition-all duration-300
          ${m?"text-brand-teal":"text-gray-700"}
        `,children:e}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 transition-all duration-300 group-focus-within:text-brand-teal",children:Mw.cloneElement(o,{className:"w-5 h-5"})}),a.jsx("input",{id:t,type:n,placeholder:r,value:s,defaultValue:u,onChange:i,disabled:c,required:f,"aria-invalid":!!d,onFocus:()=>g(!0),onBlur:()=>g(!1),className:`
            w-full px-4 py-3 border-2 rounded-lg
            ${o?"pl-11":""}
            transition-all duration-300
            focus:outline-none focus:border-brand-teal focus:ring-4 focus:ring-brand-teal/20
            disabled:bg-gray-100 disabled:cursor-not-allowed
            hover:border-brand-teal/50
            ${m?"shadow-lg scale-[1.02]":""}
            ${d?"border-red-400 focus:ring-red-200":""}
          `})]}),d&&a.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:d})]})},aM=()=>{const t=Array.from({length:20});return a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map((e,n)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},n))})},lM=({className:t="w-5 h-5"})=>a.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),cM=()=>{const{login:t,signup:e,showToast:n}=Ot(),[r,s]=R.useState(!0),[i,o]=R.useState(""),[c,u]=R.useState(""),[d,f]=R.useState(""),[m,g]=R.useState(""),[x,N]=R.useState(!1),[y,C]=R.useState(!1),[I,w]=R.useState(!1),[E,_]=R.useState(""),[L,V]=R.useState(!1),[T,v]=R.useState({}),S=async k=>{k.preventDefault(),v({}),N(!0);try{const re=La(i);if(!re.isValid){v({email:re.error}),N(!1),n(re.error||"Invalid email","error");return}if(r)await t(i,c),n("Welcome back! ","success");else{const W=wT(c);if(!W.isValid){v({password:W.error}),N(!1);return}const me=gO(c,d);if(!me.isValid){v({confirmPassword:me.error}),N(!1);return}await e(i,c,m),n("Account created successfully!  Please check your email to verify your account.","success")}}catch(re){console.error("Login/Signup Error:",re),v({general:re.message||"Authentication failed"}),n(re.message||"Authentication failed","error")}finally{N(!1)}},A=async()=>{try{n("Connecting to Google... ","info"),await wO(),n("Google login successful! ","success")}catch(k){console.error("Google Login Error:",k),n(k.message||"Google login failed","error")}},P=async()=>{if(!E){n("Please enter your email address","error");return}const k=La(E);if(!k.isValid){n(k.error||"Invalid email","error");return}try{V(!0);const re=await xO(E);n(re.message||"Password reset email sent! ","success"),w(!1),_("")}catch(re){n(re.message||"Failed to send reset email","error")}finally{V(!1)}},j=()=>{C(!y),v({}),setTimeout(()=>{s(!r)},300)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsx(aM,{}),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/10 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/5 to-brand-yellow/5 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"w-full max-w-md relative z-10",style:{perspective:"1000px"},children:a.jsx("div",{className:`relative w-full transition-transform duration-700 transform-style-3d ${y?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:a.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl p-8 border border-white/50 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-brand-teal/20 via-brand-yellow/20 to-brand-teal/20 animate-shimmer",style:{backgroundSize:"200% 100%",filter:"blur(20px)",zIndex:-1}}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"relative inline-block mb-6 animate-slide-up",children:[a.jsx("div",{className:"relative p-4 bg-white rounded-3xl shadow-2xl animate-pulse-glow",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain"})}),a.jsx("div",{className:"absolute inset-0 border-4 border-brand-yellow/30 rounded-3xl animate-ping"}),a.jsx("div",{className:"absolute inset-0 border-2 border-brand-teal/20 rounded-3xl animate-pulse",style:{animationDelay:"0.5s"}})]}),a.jsx("h1",{className:"text-4xl font-bold text-brand-dark mb-2 animate-slide-up",style:{animationDelay:"100ms"},children:r?"Welcome Back!":"Join Dermaglare"}),a.jsx("p",{className:"text-gray-600 animate-slide-up",style:{animationDelay:"200ms"},children:r?"Continue your skincare journey":"Begin your transformation today"})]}),T.general&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg animate-slide-up",children:a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx(bT,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium",children:T.general})]})}),a.jsxs("form",{onSubmit:S,className:"space-y-5",children:[!r&&a.jsx("div",{className:"animate-slide-up",children:a.jsx(Ro,{id:"displayName",label:"Full Name",placeholder:"Jane Doe",value:m,onChange:k=>g(k.target.value),icon:a.jsx(il,{})})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"100ms"},children:a.jsx(Ro,{id:"email",label:"Email Address",type:"email",placeholder:"jane@example.com",value:i,onChange:k=>o(k.target.value),icon:a.jsx(gc,{}),error:T.email})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"200ms"},children:a.jsx(Ro,{id:"password",label:"Password",type:"password",placeholder:"",value:c,onChange:k=>u(k.target.value),icon:a.jsx(Kn,{}),error:T.password,required:!0})}),!r&&a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"250ms"},children:a.jsx(Ro,{id:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"",value:d,onChange:k=>f(k.target.value),icon:a.jsx(Kn,{}),error:T.confirmPassword,required:!0})}),!r&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 animate-slide-up",style:{animationDelay:"300ms"},children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password must contain:"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"At least 8 characters"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"One uppercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"One lowercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"One number"]})]})]}),r&&a.jsxs("div",{className:"flex items-center justify-between text-sm animate-slide-up",style:{animationDelay:"250ms"},children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-2 border-brand-teal text-brand-teal focus:ring-2 focus:ring-brand-teal/20 transition-all group-hover:scale-110"}),a.jsx("span",{className:"text-gray-600 group-hover:text-brand-teal transition-colors",children:"Remember me"})]}),a.jsx("button",{type:"button",className:"text-brand-teal hover:text-brand-dark font-medium hover:underline transition-all hover:scale-105",onClick:()=>w(!0),children:"Forgot Password?"})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"300ms"},children:a.jsxs(Bo,{type:"submit",size:"lg",className:"w-full relative overflow-hidden group",disabled:x,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-dark via-brand-teal to-brand-dark opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer",style:{backgroundSize:"200% 100%"}}),a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:x?a.jsx(bw,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[r?"Log In":"Create Account",a.jsx(fu,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})})]}),a.jsxs("div",{className:"relative my-6 animate-slide-up",style:{animationDelay:"350ms"},children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white/70 text-gray-500 font-medium",children:"Or continue with"})})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"400ms"},children:a.jsxs("button",{type:"button",onClick:A,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg hover:border-brand-teal hover:shadow-lg transition-all duration-300 group hover:scale-105 active:scale-95",children:[a.jsx(lM,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"font-medium text-gray-700 group-hover:text-brand-teal transition-colors",children:"Continue with Google"})]})}),a.jsx("div",{className:"mt-6 text-center animate-slide-up",style:{animationDelay:"450ms"},children:a.jsxs("p",{className:"text-gray-600",children:[r?"Don't have an account?":"Already have an account?",a.jsxs("button",{onClick:j,className:"ml-2 text-brand-teal font-semibold hover:text-brand-dark transition-all hover:scale-105 inline-block relative group",children:[r?"Sign Up":"Log In",a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-brand-teal group-hover:w-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"mt-8 flex items-center justify-center gap-6 text-xs text-gray-500 animate-slide-up",style:{animationDelay:"500ms"},children:[a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(Kn,{className:"w-3 h-3"}),a.jsx("span",{children:"Secure"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(ia,{className:"w-3 h-3"}),a.jsx("span",{children:"HIPAA Compliant"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(ia,{className:"w-3 h-3"}),a.jsx("span",{children:"Encrypted"})]})]})]})})}),a.jsx("div",{className:"absolute bottom-10 left-10 animate-bounce-subtle opacity-50",children:a.jsx(ia,{className:"w-12 h-12 text-brand-teal"})}),a.jsx("div",{className:"absolute top-10 right-10 animate-float opacity-50",style:{animationDelay:"1s"},children:a.jsx(Kn,{className:"w-10 h-10 text-brand-yellow"})}),I&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(gc,{className:"w-8 h-8 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"Reset Password"}),a.jsx("p",{className:"text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ro,{id:"resetEmail",label:"Email Address",type:"email",placeholder:"jane@example.com",value:E,onChange:k=>_(k.target.value),icon:a.jsx(gc,{})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{w(!1),_("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:L,children:"Cancel"}),a.jsx("button",{type:"button",onClick:P,disabled:L||!E,className:"flex-1 px-4 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:L?a.jsxs(a.Fragment,{children:[a.jsx(bw,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Sending..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(fu,{className:"w-5 h-5"}),a.jsx("span",{children:"Send Reset Link"})]})})]})]})]})})]})},uM=({children:t})=>{const[e,n]=R.useState(!0),{logout:r,user:s}=Ot(),i=[{to:"/dashboard",icon:a.jsx(FO,{className:"w-6 h-6"}),label:"Dashboard",color:"from-brand-teal to-brand-dark"},{to:"/appointments",icon:a.jsx(Ut,{className:"w-6 h-6"}),label:"Appointments",color:"from-brand-yellow to-brand-teal"},{to:"/documents",icon:a.jsx(St,{className:"w-6 h-6"}),label:"Documents",color:"from-brand-teal to-brand-yellow"},{to:"/chat",icon:a.jsx(Yf,{className:"w-6 h-6"}),label:"Chat",color:"from-brand-dark to-brand-teal"},{to:"/billing",icon:a.jsx(xT,{className:"w-6 h-6"}),label:"Billing",color:"from-brand-yellow to-brand-dark"},{to:"/profile",icon:a.jsx(il,{className:"w-6 h-6"}),label:"Profile",color:"from-brand-teal to-brand-yellow"},{to:"/settings",icon:a.jsx(UO,{className:"w-6 h-6"}),label:"Settings",color:"from-brand-dark to-brand-teal"}],o=()=>{var u;return a.jsxs("div",{className:`fixed top-0 left-0 h-full bg-gradient-to-b from-brand-dark via-brand-teal to-brand-dark text-white transition-all duration-500 ease-in-out shadow-2xl z-50 ${e?"w-72":"w-20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 h-28 border-b border-white/10 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-yellow/10 to-transparent animate-gradient-x"}),a.jsx("div",{className:`flex items-center justify-center overflow-hidden transition-all duration-500 relative z-10 ${e?"w-full":"w-0"}`,children:a.jsx("div",{className:"bg-white/95 px-4 py-2 rounded-xl shadow-lg",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain",onError:d=>{const f=d.target;f.style.display="none";const m=f.parentElement;m&&(m.innerHTML='<span class="text-2xl font-bold text-brand-teal">DERMAGLARE</span>')}})})}),a.jsx("button",{onClick:()=>n(!e),className:"p-2.5 text-brand-yellow hover:text-white focus:outline-none rounded-xl hover:bg-white/10 transition-all duration-300 relative z-10 group",children:a.jsx($O,{className:"w-6 h-6 transform group-hover:rotate-180 transition-transform duration-300"})})]}),a.jsx("nav",{className:"mt-6 px-3",children:a.jsx("ul",{className:"space-y-2",children:i.map((d,f)=>a.jsx("li",{className:"animate-slide-in-left",style:{animationDelay:`${f*.05}s`},children:a.jsx(tb,{to:d.to,className:({isActive:m})=>`flex items-center p-3.5 rounded-xl transition-all duration-300 group relative overflow-hidden ${m?"bg-gradient-to-r "+d.color+" text-white shadow-2xl shadow-brand-yellow/20 scale-105":"text-white/70 hover:bg-white/10 hover:text-white hover:scale-105"}`,children:({isActive:m})=>a.jsxs(a.Fragment,{children:[m&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 animate-shimmer"}),a.jsx("div",{className:`relative transition-transform duration-300 ${m?"animate-bounce-subtle":"group-hover:scale-110"}`,children:d.icon}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:d.label}),m&&a.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-brand-yellow rounded-l-full animate-pulse"})]})})},d.to))})}),a.jsxs("div",{className:"absolute bottom-0 w-full p-4 border-t border-white/10 bg-gradient-to-t from-black/20 to-transparent",children:[e&&s&&a.jsx("div",{className:"mb-3 p-3 rounded-xl bg-white/5 backdrop-blur-sm animate-fade-in-up",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:((u=s.email)==null?void 0:u.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.displayName||"Patient"}),a.jsx("p",{className:"text-xs text-white/60 truncate",children:s.email})]})]})}),a.jsxs("button",{onClick:r,className:"flex items-center p-3.5 w-full text-white/70 hover:bg-red-500/20 hover:text-red-300 rounded-xl transition-all duration-300 group relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/10 to-red-500/0 opacity-0 group-hover:opacity-100 animate-shimmer"}),a.jsx(ET,{className:"w-6 h-6 relative z-10 transform group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative z-10 ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:"Logout"})]})]})]})},c=()=>{var u;return a.jsx("header",{className:`fixed top-0 right-0 h-20 bg-white/80 backdrop-blur-xl border-b border-gray-200/50 z-40 transition-all duration-500 ease-in-out shadow-lg ${e?"left-72":"left-20"}`,children:a.jsxs("div",{className:"flex items-center justify-between h-full px-8",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent",children:"Welcome Back!"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("button",{className:"relative p-2.5 text-brand-dark hover:text-brand-teal transition-colors rounded-xl hover:bg-brand-teal/10 group",children:[a.jsx(Xf,{className:"w-6 h-6"}),a.jsx("span",{className:"absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse border-2 border-white"})]}),a.jsxs("div",{className:"flex items-center space-x-3 p-2 pr-4 rounded-full bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 hover:from-brand-teal/20 hover:to-brand-yellow/20 transition-all duration-300 cursor-pointer",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:s!=null&&s.email?s.email.charAt(0).toUpperCase():"G"}),a.jsx("span",{className:"text-sm font-semibold text-brand-dark",children:((u=s==null?void 0:s.email)==null?void 0:u.split("@")[0])||"Guest"})]})]})]})})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/10",children:[a.jsx(o,{}),a.jsx(c,{}),a.jsx("main",{className:`transition-all duration-500 ease-in-out pt-20 ${e?"ml-72":"ml-20"}`,children:a.jsx("div",{className:"p-8 animate-fade-in-up",children:t})})]})},em=({children:t,className:e="",hover:n=!0,style:r})=>a.jsx("div",{className:`
        bg-white rounded-xl shadow-md p-6 
        transition-all duration-300
        ${n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":""}
        ${e}
        animate-scale-in
      `,style:r,children:t}),dM=({icon:t,label:e,value:n,trend:r,color:s,delay:i,onClick:o})=>{const[c,u]=R.useState(0),d=typeof n=="number"?n:0;return R.useEffect(()=>{if(typeof n=="number"){const g=d/60;let x=0;const N=setInterval(()=>{x+=g,x>=d?(u(d),clearInterval(N)):u(Math.floor(x))},2e3/60);return()=>clearInterval(N)}},[d]),a.jsx("div",{className:"group animate-scale-in",style:{animationDelay:`${i}ms`},onClick:o,children:a.jsxs(em,{className:"relative overflow-hidden hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 cursor-pointer border-2 border-transparent hover:border-brand-yellow/50",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s} opacity-5 group-hover:opacity-10 transition-opacity duration-500`}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${s} group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:a.jsx("div",{className:"text-white",children:t})}),r&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 text-sm font-semibold",children:[a.jsx(TT,{className:"w-4 h-4"}),a.jsx("span",{children:r})]})]}),a.jsx("h3",{className:"text-4xl font-bold text-brand-dark mb-2 group-hover:scale-105 transition-transform duration-300",children:typeof n=="number"?c:n}),a.jsx("p",{className:"text-gray-600 font-medium",children:e})]})]})})},hM=()=>{var E;const{user:t}=Ot(),e=Jm(),[n,r]=R.useState(""),[s,i]=R.useState([]),[o,c]=R.useState([]),[u,d]=R.useState(0),[f,m]=R.useState(!0),[g,x]=R.useState([]);R.useEffect(()=>{const _=new Date().getHours();_<12?r("Good Morning"):_<18?r("Good Afternoon"):r("Good Evening")},[]),R.useEffect(()=>{(async()=>{if(t)try{m(!0);const L=await hu(t.uid);i(L);const V=await Qf(t.uid);c(V),d(V.length);const T=[];V.slice(0,2).forEach(v=>{const S=v.uploadedAt?new Date(v.uploadedAt):new Date;T.push({id:v.id||"",action:"New document uploaded",detail:v.name,time:N(S),icon:a.jsx(St,{className:"w-5 h-5"}),color:"bg-brand-yellow",onClick:()=>e("/documents"),timestamp:S})}),L.filter(v=>v.status==="Confirmed").slice(0,2).forEach(v=>{const S=v.createdAt?new Date(v.createdAt):new Date;T.push({id:v.id||"",action:"Appointment confirmed",detail:`${v.type} - ${new Date(v.date).toLocaleDateString()}`,time:N(S),icon:a.jsx(ia,{className:"w-5 h-5"}),color:"bg-green-500",onClick:()=>e("/appointments"),timestamp:S})}),T.sort((v,S)=>S.timestamp.getTime()-v.timestamp.getTime()),x(T.slice(0,3))}catch(L){console.error("Error fetching dashboard data:",L)}finally{m(!1)}})()},[t,e]);const N=_=>{const L=Math.floor((new Date().getTime()-_.getTime())/1e3);if(L<60)return"Just now";const V=Math.floor(L/60);if(V<60)return`${V} ${V===1?"minute":"minutes"} ago`;const T=Math.floor(V/60);if(T<24)return`${T} ${T===1?"hour":"hours"} ago`;const v=Math.floor(T/24);if(v<7)return`${v} ${v===1?"day":"days"} ago`;const S=Math.floor(v/7);if(S<4)return`${S} ${S===1?"week":"weeks"} ago`;const A=Math.floor(v/30);return`${A} ${A===1?"month":"months"} ago`},y=s.filter(_=>_.status==="Pending"||_.status==="Confirmed"),C=s.filter(_=>_.status==="Completed").length,I=[{icon:a.jsx(Ut,{className:"w-8 h-8"}),label:"Upcoming Appointments",value:y.length,trend:y.length>0?`+${y.length}`:void 0,color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{icon:a.jsx(St,{className:"w-8 h-8"}),label:"Documents",value:u,color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{icon:a.jsx(Yf,{className:"w-8 h-8"}),label:"Unread Messages",value:0,color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{icon:a.jsx(ia,{className:"w-8 h-8"}),label:"Completed Visits",value:C,color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}],w=y.slice(0,3).map(_=>{const L=new Date(_.date),V=new Date,T=new Date(V);T.setDate(T.getDate()+1);let v="";return L.toDateString()===V.toDateString()?v="Today":L.toDateString()===T.toDateString()?v="Tomorrow":v=L.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),{id:_.id||"",title:_.type,doctor:_.doctorName||"Dr. Jabu Nkehli",date:v,time:_.time,type:"In-Person",color:"from-brand-teal to-brand-dark"}});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-teal via-brand-dark to-brand-teal p-8 md:p-12 shadow-2xl animate-fade-in-down",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-yellow/20 rounded-full filter blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-teal/30 rounded-full filter blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"bg-white/95 p-4 rounded-2xl shadow-2xl backdrop-blur-sm",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Logo",className:"h-20 w-auto object-contain",onError:_=>{const L=_.target;L.style.display="none";const V=L.parentElement;V&&(V.innerHTML='<span class="text-4xl font-bold text-brand-teal px-4">DERMAGLARE</span>')}})}),a.jsxs("div",{className:"border-l-2 border-brand-yellow/50 pl-6",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-3 animate-slide-in-left flex items-center gap-3",children:[n,","," ",(t==null?void 0:t.displayName)||((E=t==null?void 0:t.email)==null?void 0:E.split("@")[0])||"there","!",a.jsx("span",{className:"text-brand-yellow",children:""})]}),a.jsxs("p",{className:"text-brand-yellow text-lg animate-slide-in-left",style:{animationDelay:"0.1s"},children:["Your skin health journey continues."," ",y.length>0?`You have ${y.length} upcoming ${y.length===1?"appointment":"appointments"}.`:"Book your next appointment today."]})]})]}),a.jsx("div",{className:"animate-scale-in",style:{animationDelay:"0.2s"},children:a.jsxs(Bo,{onClick:()=>e("/appointments"),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark font-bold shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[a.jsx(Ut,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:I.map((_,L)=>a.jsx(dM,{..._,delay:L*100},_.label))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent animate-slide-in-right",children:"Upcoming Appointments"}),a.jsxs(Bo,{onClick:()=>e("/appointments"),variant:"ghost",className:"text-brand-teal hover:text-brand-dark",children:["View All ",a.jsx(fu,{className:"w-4 h-4 ml-2"})]})]}),a.jsx("div",{className:"space-y-4",children:w.length>0?w.map((_,L)=>a.jsx("div",{className:"group animate-slide-in-up",style:{animationDelay:`${L*100}ms`},children:a.jsx(em,{className:"hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 cursor-pointer border-2 border-transparent hover:border-brand-yellow/30",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${_.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:a.jsx(Ut,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:_.title}),a.jsx("p",{className:"text-gray-600",children:_.doctor})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-brand-teal/10 text-brand-teal",children:_.type})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:_.date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oa,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:_.time})]})]})]}),a.jsx(Bo,{onClick:()=>e("/appointments"),size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-brand-teal to-brand-dark text-white",children:"View Details"})]})})},_.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming appointments"})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent mb-6 animate-slide-in-left",children:"Recent Activity"}),a.jsxs(em,{className:"bg-gradient-to-br from-white to-brand-light/50 backdrop-blur-sm animate-scale-in",children:[a.jsx("div",{className:"space-y-4",children:g.length>0?g.map((_,L)=>a.jsxs("div",{onClick:_.onClick,className:"flex items-start gap-4 p-3 rounded-xl hover:bg-white/60 transition-all duration-300 cursor-pointer group animate-slide-in-right",style:{animationDelay:`${L*100}ms`},children:[a.jsx("div",{className:`${_.color} p-2.5 rounded-xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300`,children:_.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:_.action}),a.jsx("p",{className:"text-sm text-gray-600",children:_.detail}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:_.time})]})]},_.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})}),a.jsxs(Bo,{onClick:()=>e("/appointments"),variant:"ghost",className:"w-full mt-4 text-brand-teal hover:text-brand-dark",children:["View All Activity ",a.jsx(fu,{className:"w-4 h-4 ml-2"})]})]}),a.jsxs("div",{className:"mt-6 animate-scale-in",style:{animationDelay:"0.4s"},children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-4",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Book",icon:a.jsx(Ut,{className:"w-5 h-5"}),color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{label:"Upload",icon:a.jsx(St,{className:"w-5 h-5"}),color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{label:"Message",icon:a.jsx(Yf,{className:"w-5 h-5"}),color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{label:"History",icon:a.jsx(IT,{className:"w-5 h-5"}),color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}].map((_,L)=>a.jsxs("button",{onClick:_.onClick,className:`p-4 rounded-xl bg-gradient-to-br ${_.color} text-white font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 animate-scale-in`,style:{animationDelay:`${.5+L*.1}s`},children:[_.icon,a.jsx("span",{className:"block mt-2 text-sm",children:_.label})]},_.label))})]})]})]})]})},fM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,c]=R.useState(!0),[u,d]=R.useState(!1),[f,m]=R.useState(!1),[g,x]=R.useState({currentPassword:"",newPassword:"",confirmPassword:""}),N=R.useRef(null),[y,C]=R.useState({name:"",email:"",phone:"",address:"",dateOfBirth:"",bloodType:"",height:"",weight:"",allergies:"",emergencyContact:"",photoURL:""}),[I,w]=R.useState(0),[E,_]=R.useState(0),[L,V]=R.useState(0);R.useEffect(()=>{(async()=>{var me,H,B,F;if(t)try{c(!0);const D=await yg(t.uid),Q=await hu(t.uid);C(D?{name:D.name||t.displayName||"",email:D.email||t.email||"",phone:D.phone||"",address:D.address||"",dateOfBirth:D.dob||"",bloodType:D.bloodType||"",height:((H=(me=D.vitals)==null?void 0:me.heightCm)==null?void 0:H.toString())||"",weight:((F=(B=D.vitals)==null?void 0:B.weightKg)==null?void 0:F.toString())||"",allergies:Array.isArray(D.allergies)?D.allergies.join(", "):"",emergencyContact:D.emergencyContact||"",photoURL:D.photoURL||t.photoURL||""}:he=>({...he,name:t.displayName||"",email:t.email||"",photoURL:t.photoURL||""}));const se=Q.filter(he=>he.status==="Pending"||he.status==="Confirmed").length,xe=Q.filter(he=>he.status==="Completed").length;w(Q.length),_(xe),V(se)}catch(D){console.error("Error fetching profile:",D),e("Failed to load profile data","error")}finally{c(!1)}})()},[t,e]);const T=async()=>{if(t)try{const W={name:y.name,email:y.email,phone:y.phone,address:y.address,dob:y.dateOfBirth,allergies:y.allergies?y.allergies.split(",").map(me=>me.trim()):[],vitals:{heightCm:y.height?parseFloat(y.height):void 0,weightKg:y.weight?parseFloat(y.weight):void 0},bloodType:y.bloodType,emergencyContact:y.emergencyContact,photoURL:y.photoURL};await pc(t.uid,W),r(!1),e("Profile updated successfully! ","success")}catch(W){console.error("Error saving profile:",W),e("Failed to update profile","error")}},v=async()=>{if(t)try{const W={bloodType:y.bloodType,allergies:y.allergies?y.allergies.split(",").map(me=>me.trim()):[],vitals:{heightCm:y.height?parseFloat(y.height):void 0,weightKg:y.weight?parseFloat(y.weight):void 0},emergencyContact:y.emergencyContact};await pc(t.uid,W),i(!1),e("Medical information updated successfully! ","success")}catch(W){console.error("Error saving medical info:",W),e("Failed to update medical information","error")}},S=async W=>{if(!W.target.files||!W.target.files[0]||!t)return;const me=W.target.files[0];if(!me.type.startsWith("image/")){e("Please select an image file","error");return}if(me.size>5*1024*1024){e("Image size must be less than 5MB","error");return}try{d(!0);const H=pg(gg,`profile-pictures/${t.uid}/${Date.now()}_${me.name}`);await lO(H,me);const B=await yT(H),F={photoURL:B};await pc(t.uid,F),C(D=>({...D,photoURL:B})),e("Profile picture updated successfully! ","success")}catch(H){console.error("Error uploading profile picture:",H),e("Failed to upload profile picture","error")}finally{d(!1)}},A=async()=>{if(!(!t||!t.email)){if(!g.currentPassword||!g.newPassword||!g.confirmPassword){e("Please fill in all password fields","error");return}if(g.newPassword!==g.confirmPassword){e("New passwords do not match","error");return}if(g.newPassword.length<6){e("Password must be at least 6 characters","error");return}try{const W=Ws.credential(t.email,g.currentPassword);await WA(t,W),await ZA(t,g.newPassword),m(!1),x({currentPassword:"",newPassword:"",confirmPassword:""}),e("Password changed successfully! ","success")}catch(W){console.error("Error changing password:",W),W.code==="auth/wrong-password"?e("Current password is incorrect","error"):e("Failed to change password","error")}}},j=(()=>{let W=0;const me=[y.name,y.email,y.phone,y.address,y.dateOfBirth,y.bloodType,y.height,y.weight,y.emergencyContact],H=me.filter(B=>B&&B.trim()!=="").length;if(W+=H/me.length*60,I>0){const B=E/I*40;W+=B}return Math.round(W)})(),k=j>=80?"Excellent":j>=60?"Good":j>=40?"Fair":"Needs Attention",re=[{label:"Total Appointments",value:I.toString(),change:`${L} upcoming`,icon:Ut,color:"from-blue-500 to-cyan-600"},{label:"Health Score",value:`${j}%`,change:k,icon:Tw,color:j>=80?"from-green-500 to-emerald-600":j>=60?"from-yellow-500 to-orange-500":"from-red-500 to-rose-600"},{label:"Completed Visits",value:E.toString(),change:`${Math.round(E/(I||1)*100)}% attendance`,icon:IT,color:"from-purple-500 to-violet-600"}];return o?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading profile..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"My Profile"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your personal information and health records"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden animate-slide-in-left",children:[a.jsx("div",{className:"h-32 bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal relative",children:a.jsx("div",{className:"absolute inset-0 bg-black/10"})}),a.jsxs("div",{className:"px-6 pb-6",children:[a.jsxs("div",{className:"relative -mt-16 mb-4",children:[y.photoURL?a.jsx("img",{src:y.photoURL,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-xl mx-auto animate-scale-in"}):a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center text-brand-dark font-bold text-5xl border-4 border-white shadow-xl mx-auto animate-scale-in",children:y.name.charAt(0).toUpperCase()}),a.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:S,className:"hidden"}),a.jsx("button",{onClick:()=>{var W;return(W=N.current)==null?void 0:W.click()},disabled:u,className:"absolute bottom-0 right-1/2 translate-x-16 w-10 h-10 bg-gradient-to-r from-brand-teal to-brand-dark rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Upload profile picture",children:u?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(QO,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:y.name}),a.jsx("p",{className:"text-gray-600",children:y.email}),a.jsx("div",{className:"mt-4 inline-block px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-sm font-semibold",children:"Active Patient"})]}),a.jsx("div",{className:"space-y-3",children:re.map((W,me)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-br from-brand-light to-white rounded-xl animate-fade-in",style:{animationDelay:`${me*.1}s`},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${W.color} flex items-center justify-center`,children:a.jsx(W.icon,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:W.label}),a.jsx("p",{className:"font-bold text-gray-800",children:W.value})]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:W.change})]},W.label))}),a.jsxs("div",{className:"space-y-3 mt-6",children:[a.jsx("button",{onClick:()=>r(!n),className:"w-full bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),"Save Changes"]}):a.jsxs(a.Fragment,{children:[a.jsx(Th,{className:"w-5 h-5"}),"Edit Profile"]})}),a.jsxs("button",{onClick:()=>m(!0),className:"w-full bg-gradient-to-r from-purple-500 to-violet-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(Kn,{className:"w-5 h-5"}),"Change Password"]})]})]})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(il,{className:"w-5 h-5 text-white"})}),"Personal Information"]}),!n&&a.jsx("button",{onClick:()=>r(!0),className:"text-brand-teal hover:text-brand-dark transition-colors duration-300",children:a.jsx(Th,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),n?a.jsx("input",{type:"text",value:y.name,onChange:W=>C({...y,name:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:y.name})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),n?a.jsx("input",{type:"email",value:y.email,onChange:W=>C({...y,email:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(gc,{className:"w-4 h-4 text-brand-teal"}),y.email]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),n?a.jsx("input",{type:"tel",value:y.phone,onChange:W=>C({...y,phone:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(ST,{className:"w-4 h-4 text-brand-teal"}),y.phone]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date of Birth"}),n?a.jsx("input",{type:"date",value:y.dateOfBirth,onChange:W=>C({...y,dateOfBirth:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-brand-teal"}),new Date(y.dateOfBirth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Address"}),n?a.jsx("input",{type:"text",value:y.address,onChange:W=>C({...y,address:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(NT,{className:"w-4 h-4 text-brand-teal"}),y.address]})]})]}),n&&a.jsxs("div",{className:"mt-6 flex gap-4 animate-fade-in",children:[a.jsx("button",{onClick:T,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Save Changes"}),a.jsx("button",{onClick:()=>r(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-up",style:{animationDelay:"0.3s"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(Tw,{className:"w-5 h-5 text-white"})}),"Medical Information"]}),!s&&a.jsx("button",{onClick:()=>i(!0),className:"text-brand-teal hover:text-brand-dark transition-colors duration-300",children:a.jsx(Th,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Blood Type"}),s?a.jsxs("select",{value:y.bloodType,onChange:W=>C({...y,bloodType:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",children:[a.jsx("option",{value:"",children:"Select Blood Type"}),a.jsx("option",{value:"A+",children:"A+"}),a.jsx("option",{value:"A-",children:"A-"}),a.jsx("option",{value:"B+",children:"B+"}),a.jsx("option",{value:"B-",children:"B-"}),a.jsx("option",{value:"AB+",children:"AB+"}),a.jsx("option",{value:"AB-",children:"AB-"}),a.jsx("option",{value:"O+",children:"O+"}),a.jsx("option",{value:"O-",children:"O-"})]}):a.jsx("div",{className:"px-4 py-3 bg-red-50 rounded-xl text-red-800 font-bold",children:y.bloodType||"Not specified"})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Allergies (comma-separated)"}),s?a.jsx("input",{type:"text",value:y.allergies,onChange:W=>C({...y,allergies:W.target.value}),placeholder:"e.g., Penicillin, Peanuts",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-orange-50 rounded-xl text-orange-800 font-medium",children:y.allergies||"None"})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Height (cm)"}),s?a.jsx("input",{type:"number",value:y.height,onChange:W=>C({...y,height:W.target.value}),placeholder:"e.g., 170",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:y.height?`${y.height} cm`:"Not specified"})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Weight (kg)"}),s?a.jsx("input",{type:"number",value:y.weight,onChange:W=>C({...y,weight:W.target.value}),placeholder:"e.g., 70",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:y.weight?`${y.weight} kg`:"Not specified"})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Emergency Contact"}),s?a.jsx("input",{type:"text",value:y.emergencyContact,onChange:W=>C({...y,emergencyContact:W.target.value}),placeholder:"Name and phone number",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:y.emergencyContact||"Not specified"})]})]}),s&&a.jsxs("div",{className:"mt-6 flex gap-4 animate-fade-in",children:[a.jsx("button",{onClick:v,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Save Medical Info"}),a.jsx("button",{onClick:()=>i(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(Kn,{className:"w-5 h-5 text-white"})}),"Change Password"]}),a.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Bi,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Current Password"}),a.jsx("input",{type:"password",value:g.currentPassword,onChange:W=>x({...g,currentPassword:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Enter current password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),a.jsx("input",{type:"password",value:g.newPassword,onChange:W=>x({...g,newPassword:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Enter new password"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:g.confirmPassword,onChange:W=>x({...g,confirmPassword:W.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300",placeholder:"Confirm new password"})]}),a.jsxs("div",{className:"flex gap-4 mt-6",children:[a.jsx("button",{onClick:A,className:"flex-1 bg-gradient-to-r from-purple-500 to-violet-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Change Password"}),a.jsx("button",{onClick:()=>{m(!1),x({currentPassword:"",newPassword:"",confirmPassword:""})},className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]})]})})]})},mM=()=>{const{user:t,showToast:e,logout:n}=Ot(),[r,s]=R.useState(!1),[i,o]=R.useState([{id:"email_notifications",label:"Email Notifications",description:"Receive email updates about appointments and health reminders",enabled:!0},{id:"sms_notifications",label:"SMS Notifications",description:"Get text messages for appointment reminders",enabled:!1},{id:"push_notifications",label:"Push Notifications",description:"Receive push notifications on your devices",enabled:!0},{id:"marketing_emails",label:"Marketing Emails",description:"Receive newsletters and promotional content",enabled:!1}]),[c,u]=R.useState([{id:"profile_visibility",label:"Profile Visibility",description:"Make your profile visible to healthcare providers",enabled:!0},{id:"share_data",label:"Share Anonymous Data",description:"Help improve our services with anonymous usage data",enabled:!1},{id:"two_factor",label:"Two-Factor Authentication",description:"Add an extra layer of security to your account",enabled:!0}]),[d,f]=R.useState({theme:"light",language:"English",fontSize:"medium"});R.useEffect(()=>{(async()=>{var C,I,w;if(t!=null&&t.uid)try{const E=await yg(t.uid);(C=E==null?void 0:E.settings)!=null&&C.notifications&&o(E.settings.notifications),(I=E==null?void 0:E.settings)!=null&&I.privacy&&u(E.settings.privacy),(w=E==null?void 0:E.settings)!=null&&w.appearance&&f(E.settings.appearance)}catch(E){console.error("Error loading settings:",E)}})()},[t]);const m=async()=>{if(t!=null&&t.uid)try{s(!0),await pc(t.uid,{settings:{notifications:i,privacy:c,appearance:d}}),e("Settings saved successfully!","success"),s(!1)}catch(y){console.error("Error saving settings:",y),e("Failed to save settings","error"),s(!1)}},g=y=>{o(i.map(C=>C.id===y?{...C,enabled:!C.enabled}:C)),setTimeout(m,500)},x=y=>{u(c.map(C=>C.id===y?{...C,enabled:!C.enabled}:C)),setTimeout(m,500)},N=({enabled:y,onToggle:C})=>a.jsx("button",{onClick:C,className:`relative w-14 h-7 rounded-full transition-all duration-300 ${y?"bg-gradient-to-r from-brand-teal to-brand-dark":"bg-gray-300"}`,children:a.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 ${y?"transform translate-x-7":""}`})});return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Settings"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your account preferences and settings"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8 animate-slide-in-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Navigation"}),a.jsx("nav",{className:"space-y-2",children:[{icon:Xf,label:"Notifications",href:"#notifications"},{icon:Iw,label:"Privacy & Security",href:"#privacy"},{icon:Sw,label:"Appearance",href:"#appearance"},{icon:YO,label:"Language & Region",href:"#language"},{icon:Kn,label:"Account",href:"#account"}].map((y,C)=>a.jsxs("a",{href:y.href,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-brand-light transition-all duration-300 group animate-fade-in",style:{animationDelay:`${C*.1}s`},children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:a.jsx(y.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"font-semibold text-gray-700 group-hover:text-brand-teal transition-colors duration-300",children:y.label})]},y.label))})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{id:"notifications",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:a.jsx(Xf,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage how you receive notifications"})]})]}),a.jsx("div",{className:"space-y-4",children:i.map((y,C)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${C*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:y.label}),a.jsx("p",{className:"text-sm text-gray-600",children:y.description})]}),a.jsx(N,{enabled:y.enabled,onToggle:()=>g(y.id)})]},y.id))})]}),a.jsxs("div",{id:"privacy",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(Iw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Privacy & Security"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Control your privacy and security settings"})]})]}),a.jsx("div",{className:"space-y-4 mb-6",children:c.map((y,C)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${.3+C*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:y.label}),a.jsx("p",{className:"text-sm text-gray-600",children:y.description})]}),a.jsx(N,{enabled:y.enabled,onToggle:()=>x(y.id)})]},y.id))}),a.jsx("div",{className:"pt-6 border-t border-gray-200",children:a.jsxs("button",{className:"w-full bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(Kn,{className:"w-5 h-5"}),"Change Password"]})})]}),a.jsxs("div",{id:"appearance",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.4s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(Sw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Appearance"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Customize how the app looks"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Theme"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(y=>a.jsx("button",{onClick:()=>f({...d,theme:y}),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${d.theme===y?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Font Size"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["small","medium","large"].map(y=>a.jsx("button",{onClick:()=>f({...d,fontSize:y}),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${d.fontSize===y?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]})]})]}),a.jsxs("div",{id:"account",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.6s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center",children:a.jsx(Kn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Account Actions"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your account data"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(vg,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Download Your Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Export all your health records and data"})]})]}),a.jsx("div",{className:"text-blue-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-yellow-50 hover:bg-yellow-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(AT,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Privacy Policy"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review how we protect your data"})]})]}),a.jsx("div",{className:"text-yellow-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.9s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(RT,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Delete Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and data"})]})]}),a.jsx("div",{className:"text-red-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 p-4 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 animate-fade-in",style:{animationDelay:"1s"},children:[a.jsx(ET,{className:"w-5 h-5"}),"Sign Out"]})]})]})]})]})]})},pM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState("all"),[s,i]=R.useState(!1),[o,c]=R.useState([]),[u,d]=R.useState(!0),[f,m]=R.useState(!1),[g,x]=R.useState("list"),[N,y]=R.useState(new Date),[C,I]=R.useState(null),[w,E]=R.useState({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"});R.useEffect(()=>{(async()=>{if(t)try{d(!0);const se=(await hu(t.uid)).map(xe=>{let he="upcoming";return xe.status==="Completed"?he="completed":xe.status==="Cancelled"?he="cancelled":he="upcoming",{id:xe.id||"",title:xe.type,doctor:xe.doctorName||"Dr. Jabu Nkehli",date:xe.date,time:xe.time,location:"Dermaglare Clinic - Main Branch",type:xe.type,status:he}});c(se)}catch(Q){console.error("Error fetching appointments:",Q),e("Failed to load appointments","error")}finally{d(!1)}})()},[t,e]);const _=async D=>{try{await SO(String(D)),c(o.map(Q=>Q.id===D?{...Q,status:"cancelled"}:Q)),e("Appointment cancelled successfully","success")}catch(Q){console.error("Error cancelling appointment:",Q),e("Failed to cancel appointment","error")}},L=async D=>{if(D.preventDefault(),console.log("=== Booking Appointment ==="),console.log("User:",t),console.log("Form data:",w),!t){e("Please login to book an appointment","error");return}if(!w.date||!w.time||!w.type){console.log("Validation failed - missing fields"),e("Please fill in all required fields","error");return}try{m(!0);const Q={patientId:t.uid,patientName:t.displayName||t.email||"Patient",patientEmail:t.email||"",date:w.date,time:w.time,type:w.type,status:"Pending",doctorName:w.doctorName,notes:w.notes};console.log("Appointment data to save:",Q);const se=await IO(Q);console.log("Appointment booked with ID:",se);const xe=await hu(t.uid);console.log("Fetched appointments:",xe);const he=xe.map(ye=>{let Ce="upcoming";return ye.status==="Completed"?Ce="completed":ye.status==="Cancelled"?Ce="cancelled":Ce="upcoming",{id:ye.id||"",title:ye.type,doctor:ye.doctorName||"Dr. Jabu Nkehli",date:ye.date,time:ye.time,location:"Dermaglare Clinic - Main Branch",type:ye.type,status:Ce}});console.log("Transformed appointments:",he),c(he),E({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"}),i(!1),m(!1),e("Appointment booked successfully! ","success")}catch(Q){console.error("Error booking appointment:",Q),e(`Failed to book appointment: ${Q}`,"error"),m(!1)}},V=n==="all"?o:o.filter(D=>D.status===n),T=o.filter(D=>D.status==="upcoming").length,v=o.filter(D=>D.status==="completed").length,S=new Date().getMonth(),A=new Date().getFullYear(),P=o.filter(D=>{const Q=new Date(D.date);return Q.getMonth()===S&&Q.getFullYear()===A}).length,j=D=>{const Q=D.getFullYear(),se=D.getMonth(),xe=new Date(Q,se,1),ye=new Date(Q,se+1,0).getDate(),Ce=xe.getDay();return{daysInMonth:ye,startingDayOfWeek:Ce,year:Q,month:se}},k=D=>o.filter(Q=>{const se=new Date(Q.date);return se.getDate()===D.getDate()&&se.getMonth()===D.getMonth()&&se.getFullYear()===D.getFullYear()}),re=()=>{y(new Date(N.getFullYear(),N.getMonth()-1,1))},W=()=>{y(new Date(N.getFullYear(),N.getMonth()+1,1))},me=D=>{const Q=new Date;return D.getDate()===Q.getDate()&&D.getMonth()===Q.getMonth()&&D.getFullYear()===Q.getFullYear()},H=(D,Q)=>D?D.getDate()===Q.getDate()&&D.getMonth()===Q.getMonth()&&D.getFullYear()===Q.getFullYear():!1,B=D=>{switch(D){case"upcoming":return"from-green-500 to-emerald-600";case"completed":return"from-blue-500 to-cyan-600";case"cancelled":return"from-red-500 to-rose-600";default:return"from-gray-500 to-slate-600"}},F=D=>{switch(D){case"upcoming":return a.jsx(Oa,{className:"w-5 h-5"});case"completed":return a.jsx(Ht,{className:"w-5 h-5"});case"cancelled":return a.jsx(Bi,{className:"w-5 h-5"});default:return null}};return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading appointments..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Appointments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your healthcare appointments"})]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(OO,{className:"w-5 h-5"}),"Book Appointment"]})]}),a.jsxs("div",{className:"flex gap-4 items-center animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("div",{className:"flex gap-2",children:["all","upcoming","completed","cancelled"].map(D=>a.jsx("button",{onClick:()=>r(D),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 ${n===D?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:D.charAt(0).toUpperCase()+D.slice(1)},D))}),a.jsxs("div",{className:"ml-auto flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(kT,{className:"w-5 h-5 text-brand-teal"})}),a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(CT,{className:"w-5 h-5 text-brand-teal"})})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{label:"Upcoming",count:T,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Completed",count:v,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"This Month",count:P,color:"from-purple-500 to-violet-600",delay:"0.4s"}].map(D=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:D.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${D.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(Ut,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:D.count}),a.jsx("div",{className:"text-gray-600 font-medium",children:D.label})]},D.label))}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-1 shadow-md",children:[a.jsx("button",{onClick:()=>x("list"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="list"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"List View"}),a.jsx("button",{onClick:()=>x("calendar"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="calendar"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"Calendar View"})]})}),g==="calendar"&&a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:N.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:re,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(VO,{className:"w-6 h-6 text-brand-teal"})}),a.jsx("button",{onClick:W,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(MO,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(D=>a.jsx("div",{className:"text-center font-bold text-gray-600 py-2",children:D},D)),(()=>{const{daysInMonth:D,startingDayOfWeek:Q,year:se,month:xe}=j(N),he=[];for(let ye=0;ye<Q;ye++)he.push(a.jsx("div",{className:"aspect-square"},`empty-${ye}`));for(let ye=1;ye<=D;ye++){const Ce=new Date(se,xe,ye),Mt=k(Ce),Ys=me(Ce),ol=H(C,Ce);he.push(a.jsx("div",{onClick:()=>I(Ce),className:`aspect-square p-2 rounded-lg border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${Ys?"border-brand-yellow bg-brand-yellow/10 ring-2 ring-brand-yellow ring-offset-2":ol?"border-brand-teal bg-brand-teal/10":"border-gray-200 hover:border-brand-teal/50"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("span",{className:`text-sm font-semibold ${Ys?"text-brand-teal":"text-gray-700"}`,children:ye}),Mt.length>0&&a.jsxs("div",{className:"flex-1 flex flex-col gap-1 mt-1",children:[Mt.slice(0,2).map((cs,dd)=>a.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${cs.status==="upcoming"?"bg-green-100 text-green-700":cs.status==="completed"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,title:`${cs.time} - ${cs.title}`,children:cs.time},dd)),Mt.length>2&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",Mt.length-2," more"]})]})]})},ye))}return he})()]}),C&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:["Appointments on"," ",C.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),k(C).length>0?a.jsx("div",{className:"space-y-3",children:k(C).map(D=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${D.status==="upcoming"?"bg-green-500":D.status==="completed"?"bg-blue-500":"bg-red-500"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:D.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[D.time,"  ",D.doctor]})]})]}),D.status==="upcoming"&&a.jsx("button",{onClick:()=>_(D.id),className:"text-red-600 hover:text-red-700 text-sm font-semibold hover:underline transition-colors",children:"Cancel"})]},D.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments on this date"})]})]}),g==="list"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:V.map((D,Q)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.5+Q*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${B(D.status)} animate-shimmer`}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1 group-hover:text-brand-teal transition-colors duration-300",children:D.title}),a.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-brand-light text-brand-teal",children:D.type})]}),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${B(D.status)} text-white text-sm font-semibold`,children:[F(D.status),D.status]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(il,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Doctor"}),a.jsx("p",{className:"font-semibold",children:D.doctor})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center",children:a.jsx(Ut,{className:"w-5 h-5 text-brand-dark"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),a.jsxs("p",{className:"font-semibold",children:[new Date(D.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})," ","at ",D.time]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(NT,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),a.jsx("p",{className:"font-semibold",children:D.location})]})]})]}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[D.status==="upcoming"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Reschedule"}),a.jsx("button",{onClick:()=>_(D.id),className:"px-6 bg-red-50 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-100 transform hover:scale-105 transition-all duration-300",children:"Cancel"})]}),D.status==="completed"&&a.jsx("button",{className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"View Details"})]})]})]},D.id))}),V.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(Ut,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:n==="all"?"You don't have any appointments scheduled yet.":`No ${n} appointments.`}),a.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Book Your First Appointment"})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full mx-4 shadow-2xl animate-scale-in max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-1",children:"Book New Appointment"}),a.jsx("p",{className:"text-brand-yellow",children:"Schedule your visit with us"})]}),a.jsx("button",{onClick:()=>i(!1),className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(Bi,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:L,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Appointment Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:w.type,onChange:D=>E({...w,type:D.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select appointment type"}),a.jsx("option",{value:"Standard Consultation",children:"Standard Consultation - R1,300"}),a.jsx("option",{value:"Medical Dermatology",children:"Medical Dermatology - R1,500"}),a.jsx("option",{value:"Cosmetic Dermatology",children:"Cosmetic Dermatology - R1,600"}),a.jsx("option",{value:"Laser Treatment",children:"Laser Treatment - R3,500"}),a.jsx("option",{value:"Chemical Peel",children:"Chemical Peel - R1,800"}),a.jsx("option",{value:"Microneedling",children:"Microneedling - R1,900"}),a.jsx("option",{value:"Botox Injections",children:"Botox Injections - R4,500"}),a.jsx("option",{value:"Platelet-Rich Plasma (PRP)",children:"PRP Therapy - R3,200"}),a.jsx("option",{value:"Skin Tightening",children:"Skin Tightening - R2,200"}),a.jsx("option",{value:"Mole Removal",children:"Mole Removal - R1,800"}),a.jsx("option",{value:"Skin Cancer Screening",children:"Skin Cancer Screening - R1,750"}),a.jsx("option",{value:"Acne Treatment",children:"Acne Treatment - R1,650"}),a.jsx("option",{value:"Paediatric Dermatology",children:"Paediatric Dermatology - R1,450"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Doctor ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:w.doctorName,onChange:D=>E({...w,doctorName:D.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"Dr. Jabu Nkehli",children:"Dr. Jabu Nkehli - Dermatologist"}),a.jsx("option",{value:"Dr. Sarah Johnson",children:"Dr. Sarah Johnson - Specialist"}),a.jsx("option",{value:"Dr. Michael Chen",children:"Dr. Michael Chen - Cosmetic Dermatology"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"date",value:w.date,onChange:D=>E({...w,date:D.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsxs("select",{value:w.time,onChange:D=>E({...w,time:D.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select time"}),a.jsx("option",{value:"08:00 AM",children:"08:00 AM"}),a.jsx("option",{value:"09:00 AM",children:"09:00 AM"}),a.jsx("option",{value:"10:00 AM",children:"10:00 AM"}),a.jsx("option",{value:"11:00 AM",children:"11:00 AM"}),a.jsx("option",{value:"12:00 PM",children:"12:00 PM"}),a.jsx("option",{value:"01:00 PM",children:"01:00 PM"}),a.jsx("option",{value:"02:00 PM",children:"02:00 PM"}),a.jsx("option",{value:"03:00 PM",children:"03:00 PM"}),a.jsx("option",{value:"04:00 PM",children:"04:00 PM"}),a.jsx("option",{value:"05:00 PM",children:"05:00 PM"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:w.notes,onChange:D=>E({...w,notes:D.target.value}),rows:4,placeholder:"Please provide any additional information about your condition or concerns...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors resize-none text-gray-700"})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ut,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important Information:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Appointments are subject to availability and confirmation"}),a.jsx("li",{children:"You will receive a confirmation email within 24 hours"}),a.jsx("li",{children:"Please arrive 10 minutes before your appointment"})]})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Booking..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),a.jsx("span",{children:"Confirm Booking"})]})})]})]})]})})]})},gM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState("all"),[s,i]=R.useState(""),[o,c]=R.useState([]),[u,d]=R.useState(!0),[f,m]=R.useState(!1),[g,x]=R.useState(!1),[N,y]=R.useState(0),[C,I]=R.useState(null),w=R.useRef(null);R.useEffect(()=>{(async()=>{if(t)try{d(!0);const F=(await Qf(t.uid)).map(D=>({id:D.id||"",name:D.name,type:D.type||"PDF",category:D.category||"General",size:D.size||"Unknown",date:D.date,url:D.fileUrl||D.url,storagePath:D.storagePath}));c(F)}catch(B){console.error("Error fetching documents:",B),e("Failed to load documents","error")}finally{d(!1)}})()},[t,e]);const E=async H=>{if(confirm("Are you sure you want to delete this document?"))try{const B=o.find(F=>F.id===H);if(!B||!B.storagePath){e("Cannot delete document: storage path not found","error");return}await kO(String(H),B.storagePath),c(o.filter(F=>F.id!==H)),e("Document deleted successfully","success")}catch(B){console.error("Error deleting document:",B),e("Failed to delete document","error")}},_=H=>{H.url?window.open(H.url,"_blank"):e("Document URL not available","error")},L=H=>{var F;const B=(F=H.target.files)==null?void 0:F[0];if(B){if(B.size>10*1024*1024){e("File size must be less than 10MB","error");return}I(B),m(!0)}},V=async()=>{if(!(!C||!t))try{x(!0),y(0),await NO(t.uid,C,F=>{y(F)});const B=(await Qf(t.uid)).map(F=>({id:F.id||"",name:F.name,type:F.type||"PDF",category:F.category||"General",size:F.size||"Unknown",date:F.date,url:F.fileUrl||F.url,storagePath:F.storagePath}));c(B),m(!1),I(null),y(0),e("Document uploaded successfully! ","success")}catch(H){console.error("Error uploading document:",H),e("Failed to upload document","error")}finally{x(!1)}},T=()=>{m(!1),I(null),y(0),w.current&&(w.current.value="")},v=["all",...Array.from(new Set(o.map(H=>H.category)))],S=v.length>1?v:["all","Lab Results","Prescriptions","Treatment Plans","Insurance","Forms","Reports"],A=o.filter(H=>{const B=n==="all"||H.category===n,F=H.name.toLowerCase().includes(s.toLowerCase());return B&&F}),P=o.filter(H=>H.category==="Lab Results").length,j=o.filter(H=>H.category==="Prescriptions").length,k=o.reduce((H,B)=>{const F=B.size.match(/([\d.]+)\s*(KB|MB)/i);if(F){const D=parseFloat(F[1]),Q=F[2].toUpperCase();return H+(Q==="MB"?D:D/1024)}return H},0),re=k<1?`${(k*1024).toFixed(1)} KB`:`${k.toFixed(1)} MB`,W=H=>({"Lab Results":"from-blue-500 to-cyan-600",Prescriptions:"from-green-500 to-emerald-600","Treatment Plans":"from-purple-500 to-violet-600",Insurance:"from-orange-500 to-amber-600",Forms:"from-pink-500 to-rose-600",Reports:"from-indigo-500 to-blue-600"})[H]||"from-gray-500 to-slate-600",me=H=>a.jsx(St,{className:"w-8 h-8 text-white"});return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading documents..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Documents"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Access and manage your medical documents"})]}),a.jsxs("button",{onClick:()=>{var H;return(H=w.current)==null?void 0:H.click()},className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(BO,{className:"w-5 h-5"}),"Upload Document"]}),a.jsx("input",{ref:w,type:"file",onChange:L,className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"})]}),a.jsxs("div",{className:"flex gap-4 animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(CT,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search documents...",value:s,onChange:H=>i(H.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300 shadow-sm hover:shadow-md"})]}),a.jsx("button",{className:"p-3 bg-white rounded-xl shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105 border-2 border-gray-200",children:a.jsx(kT,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsx("div",{className:"mb-8 overflow-x-auto animate-slide-in-up",style:{animationDelay:"0.2s"},children:a.jsx("div",{className:"flex gap-3 min-w-max pb-2",children:S.map(H=>a.jsx("button",{onClick:()=>r(H),className:`px-5 py-2 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 whitespace-nowrap ${n===H?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:H==="all"?"All Documents":H},H))})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{label:"Total Documents",count:o.length,icon:St,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"Lab Results",count:P,icon:St,color:"from-green-500 to-emerald-600",delay:"0.4s"},{label:"Prescriptions",count:j,icon:St,color:"from-purple-500 to-violet-600",delay:"0.5s"},{label:"Storage Used",count:re,icon:zO,color:"from-orange-500 to-amber-600",delay:"0.6s"}].map(H=>a.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:H.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${H.color} flex items-center justify-center mb-3 animate-pulse-glow`,children:a.jsx(H.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:(typeof H.count=="number",H.count)}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:H.label})]},H.label))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((H,B)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.7+B*.1}s`},children:[a.jsxs("div",{className:`h-48 bg-gradient-to-br ${W(H.category)} flex items-center justify-center relative overflow-hidden`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-all duration-300"}),me(H.type),a.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-semibold text-gray-800",children:H.type})]}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 group-hover:text-brand-teal transition-colors duration-300 line-clamp-2",children:H.name}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:`px-2 py-1 rounded-lg bg-gradient-to-r ${W(H.category)} text-white text-xs font-semibold`,children:H.category}),a.jsx("span",{children:H.size})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:new Date(H.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>_(H),className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-2 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(AT,{className:"w-4 h-4"}),"View"]}),a.jsx("button",{onClick:()=>_(H),className:"p-2 bg-brand-light text-brand-teal rounded-lg hover:bg-brand-teal hover:text-white transform hover:scale-110 transition-all duration-300",children:a.jsx(vg,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>E(H.id),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transform hover:scale-110 transition-all duration-300",children:a.jsx(RT,{className:"w-5 h-5"})})]})]})]},H.id))}),A.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(St,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No documents found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:s?`No documents match "${s}"`:n==="all"?"Upload your first document to get started.":`No documents in ${n}.`}),a.jsx("button",{onClick:()=>{var H;return(H=w.current)==null?void 0:H.click()},className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Upload Document"})]}),f&&C&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full mx-4 shadow-2xl animate-scale-in",children:[a.jsx("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Upload Document"}),a.jsx("p",{className:"text-brand-yellow text-sm",children:"Uploading to your medical records"})]}),!g&&a.jsx("button",{onClick:T,className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(Bi,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 p-4 bg-brand-light rounded-xl",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center flex-shrink-0",children:a.jsx(St,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-gray-800 truncate",children:C.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[(C.size/1024).toFixed(2)," KB"]})]})]})}),g&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Uploading..."}),a.jsxs("span",{className:"text-sm font-semibold text-brand-teal",children:[N,"%"]})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal to-brand-dark transition-all duration-300 rounded-full",style:{width:`${N}%`}})})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(St,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside text-xs",children:[a.jsx("li",{children:"Maximum file size: 10MB"}),a.jsx("li",{children:"Supported formats: PDF, DOC, DOCX, JPG, PNG"}),a.jsx("li",{children:"Documents are securely encrypted"})]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:T,disabled:g,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:V,disabled:g,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Uploading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload"})]})})]})]})]})})]})},yM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState(""),[s,i]=R.useState(null),[o,c]=R.useState([]),[u,d]=R.useState(null),[f,m]=R.useState(!0),[g,x]=R.useState(!1),N=R.useRef(null),y=[{id:1,name:"Dr. Jabu Nkehli",role:"Dermatologist",avatar:"JN",online:!0,lastMessage:"Your lab results are ready",unread:2},{id:2,name:"Support Team",role:"Customer Support",avatar:"ST",online:!0,lastMessage:"How can we help you today?",unread:0}];R.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{m(!0);const L=await AO(t.uid,t.displayName||t.email||"Patient");d(L);const T=(await RO(L)).map(v=>({id:v.id||"",sender:v.senderId===t.uid?"user":"support",text:v.text,timestamp:C(v.timestamp),read:v.read||!1}));c(T),await jO(L),m(!1)}catch(L){console.error("Error initializing chat:",L),e("Failed to load chat","error"),m(!1)}})()},[t]),R.useEffect(()=>{if(!u||!(t!=null&&t.uid))return;const _=DO(u,L=>{const V=L.map(T=>({id:T.id||"",sender:T.senderId===t.uid?"user":"support",text:T.text,timestamp:C(T.timestamp),read:T.read||!1}));c(V)});return()=>_()},[u,t]);const C=_=>{if(!_)return"";let L;return _.toDate?L=_.toDate():_.seconds?L=new Date(_.seconds*1e3):L=new Date(_),L.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};R.useEffect(()=>{y.length>0&&!s&&i(y[0])},[]);const I=()=>{var _;(_=N.current)==null||_.scrollIntoView({behavior:"smooth"})};R.useEffect(()=>{I()},[o]);const w=async _=>{if(_.preventDefault(),!n.trim()||!u||!(t!=null&&t.uid)||g)return;const L=n.trim();try{x(!0),r(""),await PO(u,t.uid,L),I()}catch(V){console.error("Error sending message:",V),e("Failed to send message","error"),r(L)}finally{x(!1)}},E=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),w(_))};return a.jsxs("div",{className:"h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex flex-col",children:[a.jsxs("div",{className:"mb-6 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Messages"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Connect with your healthcare providers"})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 overflow-hidden animate-slide-in-up",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("input",{type:"text",placeholder:"Search conversations...",className:"w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:y.map((_,L)=>a.jsx("div",{onClick:()=>i(_),className:`p-4 border-b border-gray-100 cursor-pointer transition-all duration-300 hover:bg-brand-light animate-fade-in ${(s==null?void 0:s.id)===_.id?"bg-brand-light border-l-4 border-l-brand-teal":""}`,style:{animationDelay:`${L*.1}s`},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center text-white font-bold",children:_.avatar}),_.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:_.name}),_.unread>0&&a.jsx("span",{className:"bg-gradient-to-r from-brand-yellow to-orange-400 text-brand-dark text-xs font-bold px-2 py-1 rounded-full animate-pulse-glow",children:_.unread})]}),a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:_.role}),a.jsx("p",{className:"text-sm text-gray-600 truncate",children:_.lastMessage})]})]})},_.id))})]}),a.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-4 flex items-center justify-between animate-slide-in-down",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-brand-teal font-bold",children:s.avatar}),s.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white",children:s.name}),a.jsx("p",{className:"text-xs text-brand-yellow",children:s.online?"Online":"Offline"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(ST,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(qO,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(WO,{className:"w-5 h-5 text-white"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-brand-light/20 to-white",children:[f?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]})}):o.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center animate-fade-in",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(Ew,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Start the conversation"}),a.jsxs("p",{className:"text-gray-500",children:["Send a message to ",s.name]})]})}):o.map((_,L)=>a.jsx("div",{className:`flex ${_.sender==="user"?"justify-end":"justify-start"} animate-slide-in-up`,style:{animationDelay:`${L*.05}s`},children:a.jsxs("div",{className:`max-w-[70%] ${_.sender==="user"?"bg-gradient-to-br from-brand-teal to-brand-dark text-white":"bg-white shadow-md"} rounded-2xl p-4 transform hover:scale-[1.02] transition-all duration-300`,children:[a.jsx("p",{className:`mb-2 ${_.sender==="user"?"text-white":"text-gray-800"}`,children:_.text}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-xs ${_.sender==="user"?"text-brand-yellow":"text-gray-500"}`,children:_.timestamp}),_.sender==="user"&&a.jsx(Ht,{className:`w-4 h-4 ${_.read?"text-brand-yellow":"text-white/50"}`})]})]})},_.id)),g&&a.jsx("div",{className:"flex justify-end animate-fade-in",children:a.jsx("div",{className:"max-w-[70%] bg-gradient-to-br from-brand-teal/50 to-brand-dark/50 text-white rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("span",{className:"text-xs text-brand-yellow",children:"Sending..."})]})})}),a.jsx("div",{ref:N})]}),a.jsx("form",{onSubmit:w,className:"p-4 border-t border-gray-200 bg-white",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(HO,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(GO,{className:"w-5 h-5"})}),a.jsx("input",{type:"text",value:n,onChange:_=>r(_.target.value),onKeyPress:E,placeholder:"Type your message...",disabled:g,className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300 disabled:opacity-50"}),a.jsx("button",{type:"submit",disabled:!n.trim()||g,className:"bg-gradient-to-r from-brand-teal to-brand-dark text-white p-3 rounded-xl hover:shadow-lg transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center min-w-[48px]",children:g?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Ew,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(il,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-600",children:"Choose a contact to start messaging"})]})})})]})]})},vM=({onLoadingComplete:t})=>{const[e,n]=R.useState(0),[r,s]=R.useState(!1);return R.useEffect(()=>{const i=setInterval(()=>{n(c=>c>=100?(clearInterval(i),100):c+2)},100),o=setTimeout(()=>{s(!0),setTimeout(()=>{t()},500)},5e3);return()=>{clearInterval(i),clearTimeout(o)}},[t]),a.jsxs("div",{className:`fixed inset-0 bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center z-[9999] transition-opacity duration-500 ${r?"opacity-0":"opacity-100"}`,children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[[...Array(20)].map((i,o)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},o)),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/20 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/30 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[a.jsxs("div",{className:"relative mb-12 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 -m-8",children:a.jsx("div",{className:"w-full h-full border-4 border-brand-teal/30 rounded-full animate-ping"})}),a.jsx("div",{className:"absolute inset-0 -m-12",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-yellow/30 rounded-full animate-pulse",style:{animationDelay:"0.5s"}})}),a.jsx("div",{className:"absolute inset-0 -m-16",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-teal/20 rounded-full animate-ping",style:{animationDelay:"1s"}})}),a.jsx("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare",className:"h-24 w-auto object-contain animate-pulse-glow"})}),a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-brand-yellow rounded-full animate-bounce opacity-75"}),a.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-brand-teal rounded-full animate-bounce opacity-75",style:{animationDelay:"0.3s"}})]}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-4 animate-gradient-x",children:"Welcome to Dermaglare"}),a.jsx("p",{className:"text-gray-600 text-lg mb-8 animate-fade-in",children:"Preparing your skincare journey..."}),a.jsx("div",{className:"w-80 h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal via-brand-yellow to-brand-teal rounded-full transition-all duration-300 ease-out animate-shimmer",style:{width:`${e}%`,backgroundSize:"200% 100%"}})}),a.jsxs("p",{className:"text-brand-teal font-semibold mt-3 text-sm",children:[e,"% Complete"]}),a.jsxs("div",{className:"flex gap-2 mt-8",children:[a.jsx("div",{className:"w-3 h-3 bg-brand-teal rounded-full animate-bounce"}),a.jsx("div",{className:"w-3 h-3 bg-brand-yellow rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-3 h-3 bg-brand-dark rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-500 text-sm italic animate-fade-in",children:[e<20&&" Loading your personalized dashboard...",e>=20&&e<40&&" Securing your data...",e>=40&&e<60&&" Syncing appointments...",e>=60&&e<80&&" Preparing documents...",e>=80&&e<100&&" Almost there...",e>=100&&" Ready!"]})})]}),a.jsx("div",{className:"absolute bottom-10 left-10 w-16 h-16 border-4 border-brand-teal/20 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute top-10 right-10 w-12 h-12 border-4 border-brand-yellow/20 rounded-full animate-spin-slow",style:{animationDelay:"1s"}})]})},wM=()=>{const{user:t}=Ot();return t?a.jsx(uM,{children:a.jsxs(Qx,{children:[a.jsx(Yt,{path:"dashboard",element:a.jsx(hM,{})}),a.jsx(Yt,{path:"appointments",element:a.jsx(pM,{})}),a.jsx(Yt,{path:"documents",element:a.jsx(gM,{})}),a.jsx(Yt,{path:"chat",element:a.jsx(yM,{})}),a.jsx(Yt,{path:"billing",element:a.jsx(oM,{})}),a.jsx(Yt,{path:"profile",element:a.jsx(fM,{})}),a.jsx(Yt,{path:"settings",element:a.jsx(mM,{})}),a.jsx(Yt,{path:"*",element:a.jsx(tp,{to:"/dashboard",replace:!0})})]})}):null},_M=()=>{const{user:t}=Ot();return t?a.jsx(wM,{}):a.jsx(tp,{to:"/login",replace:!0})},xM=()=>{const{user:t}=Ot();return t?a.jsx(tp,{to:"/dashboard",replace:!0}):a.jsx(AN,{})};function bM(){const{loading:t}=Ot(),[e,n]=R.useState(!0);R.useEffect(()=>{sessionStorage.getItem("hasShownLoading")&&n(!1)},[]);const r=()=>{n(!1),sessionStorage.setItem("hasShownLoading","true")};return e?a.jsx(vM,{onLoadingComplete:r}):t?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:a.jsx("div",{className:"text-xl font-semibold animate-pulse",children:"Loading Patient Portal..."})}):a.jsxs(Qx,{children:[a.jsx(Yt,{element:a.jsx(xM,{}),children:a.jsx(Yt,{path:"/login",element:a.jsx(cM,{})})}),a.jsx(Yt,{path:"/*",element:a.jsx(_M,{})})]})}Ih.createRoot(document.getElementById("root")).render(a.jsx(Mw.StrictMode,{children:a.jsx(ek,{children:a.jsx(LO,{children:a.jsx(bM,{})})})}));
