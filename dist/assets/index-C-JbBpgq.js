(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function uI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ew={exports:{}},fu={},Tw={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),dI=Symbol.for("react.portal"),hI=Symbol.for("react.fragment"),fI=Symbol.for("react.strict_mode"),mI=Symbol.for("react.profiler"),pI=Symbol.for("react.provider"),gI=Symbol.for("react.context"),yI=Symbol.for("react.forward_ref"),vI=Symbol.for("react.suspense"),wI=Symbol.for("react.memo"),_I=Symbol.for("react.lazy"),dy=Symbol.iterator;function xI(t){return t===null||typeof t!="object"?null:(t=dy&&t[dy]||t["@@iterator"],typeof t=="function"?t:null)}var Iw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sw=Object.assign,Nw={};function $i(t,e,n){this.props=t,this.context=e,this.refs=Nw,this.updater=n||Iw}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kw(){}kw.prototype=$i.prototype;function Zf(t,e,n){this.props=t,this.context=e,this.refs=Nw,this.updater=n||Iw}var em=Zf.prototype=new kw;em.constructor=Zf;Sw(em,$i.prototype);em.isPureReactComponent=!0;var hy=Array.isArray,Cw=Object.prototype.hasOwnProperty,tm={current:null},Aw={key:!0,ref:!0,__self:!0,__source:!0};function Rw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Cw.call(e,r)&&!Aw.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Ma,type:t,key:i,ref:o,props:s,_owner:tm.current}}function bI(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function EI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fy=/\/+/g;function Rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EI(""+t.key):e.toString(36)}function ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ma:case dI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Rd(o,0):r,hy(s)?(n="",t!=null&&(n=t.replace(fy,"$&/")+"/"),ql(s,e,n,"",function(d){return d})):s!=null&&(nm(s)&&(s=bI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hy(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Rd(i,c);o+=ql(i,e,n,u,s)}else if(u=xI(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Rd(i,c++),o+=ql(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,n){if(t==null)return t;var r=[],s=0;return ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function TI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Wl={transition:null},II={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:tm};function Pw(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:wl,forEach:function(t,e,n){wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!nm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=$i;ne.Fragment=hI;ne.Profiler=mI;ne.PureComponent=Zf;ne.StrictMode=fI;ne.Suspense=vI;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=II;ne.act=Pw;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Cw.call(e,u)&&!Aw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ma,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:gI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pI,_context:t},t.Consumer=t};ne.createElement=Rw;ne.createFactory=function(t){var e=Rw.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:yI,render:t}};ne.isValidElement=nm;ne.lazy=function(t){return{$$typeof:_I,_payload:{_status:-1,_result:t},_init:TI}};ne.memo=function(t,e){return{$$typeof:wI,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};ne.unstable_act=Pw;ne.useCallback=function(t,e){return xt.current.useCallback(t,e)};ne.useContext=function(t){return xt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return xt.current.useEffect(t,e)};ne.useId=function(){return xt.current.useId()};ne.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return xt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};ne.useRef=function(t){return xt.current.useRef(t)};ne.useState=function(t){return xt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return xt.current.useTransition()};ne.version="18.3.1";Tw.exports=ne;var R=Tw.exports;const jw=uI(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=R,NI=Symbol.for("react.element"),kI=Symbol.for("react.fragment"),CI=Object.prototype.hasOwnProperty,AI=SI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RI={key:!0,ref:!0,__self:!0,__source:!0};function Dw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CI.call(e,r)&&!RI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:NI,type:t,key:i,ref:o,props:s,_owner:AI.current}}fu.Fragment=kI;fu.jsx=Dw;fu.jsxs=Dw;Ew.exports=fu;var a=Ew.exports,Eh={},Lw={exports:{}},Kt={},Ow={exports:{}},Mw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,U){var O=B.length;B.push(U);e:for(;0<O;){var Q=O-1>>>1,le=B[Q];if(0<s(le,U))B[Q]=U,B[O]=le,O=Q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var U=B[0],O=B.pop();if(O!==U){B[0]=O;e:for(var Q=0,le=B.length,Se=le>>>1;Q<Se;){var ve=2*(Q+1)-1,me=B[ve],Ne=ve+1,Mt=B[Ne];if(0>s(me,O))Ne<le&&0>s(Mt,me)?(B[Q]=Mt,B[Ne]=O,Q=Ne):(B[Q]=me,B[ve]=O,Q=ve);else if(Ne<le&&0>s(Mt,O))B[Q]=Mt,B[Ne]=O,Q=Ne;else break e}}return U}function s(B,U){var O=B.sortIndex-U.sortIndex;return O!==0?O:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,m=null,g=3,b=!1,I=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=B)r(d),U.sortIndex=U.expirationTime,e(u,U);else break;U=n(d)}}function w(B){if(S=!1,_(B),!I)if(n(u)!==null)I=!0,Et(j);else{var U=n(d);U!==null&&q(w,U.startTime-B)}}function j(B,U){I=!1,S&&(S=!1,T(y),y=-1),b=!0;var O=g;try{for(_(U),m=n(u);m!==null&&(!(m.expirationTime>U)||B&&!P());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,g=m.priorityLevel;var le=Q(m.expirationTime<=U);U=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(u)&&r(u),_(U)}else r(u);m=n(u)}if(m!==null)var Se=!0;else{var ve=n(d);ve!==null&&q(w,ve.startTime-U),Se=!1}return Se}finally{m=null,g=O,b=!1}}var V=!1,E=null,y=-1,N=5,C=-1;function P(){return!(t.unstable_now()-C<N)}function D(){if(E!==null){var B=t.unstable_now();C=B;var U=!0;try{U=E(!0,B)}finally{U?k():(V=!1,E=null)}}else V=!1}var k;if(typeof v=="function")k=function(){v(D)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ze=ae.port2;ae.port1.onmessage=D,k=function(){ze.postMessage(null)}}else k=function(){A(D,0)};function Et(B){E=B,V||(V=!0,k())}function q(B,U){y=A(function(){B(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){I||b||(I=!0,Et(j))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var U=3;break;default:U=g}var O=g;g=U;try{return B()}finally{g=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var O=g;g=B;try{return U()}finally{g=O}},t.unstable_scheduleCallback=function(B,U,O){var Q=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?Q+O:Q):O=Q,B){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=O+le,B={id:f++,callback:U,priorityLevel:B,startTime:O,expirationTime:le,sortIndex:-1},O>Q?(B.sortIndex=O,e(d,B),n(u)===null&&B===n(d)&&(S?(T(y),y=-1):S=!0,q(w,O-Q))):(B.sortIndex=le,e(u,B),I||b||(I=!0,Et(j))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var U=g;return function(){var O=g;g=U;try{return B.apply(this,arguments)}finally{g=O}}}})(Mw);Ow.exports=Mw;var PI=Ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI=R,Gt=PI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vw=new Set,ia={};function $s(t,e){Ni(t,e),Ni(t+"Capture",e)}function Ni(t,e){for(ia[t]=e,t=0;t<e.length;t++)Vw.add(e[t])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=Object.prototype.hasOwnProperty,DI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,my={},py={};function LI(t){return Th.call(py,t)?!0:Th.call(my,t)?!1:DI.test(t)?py[t]=!0:(my[t]=!0,!1)}function OI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MI(t,e,n,r){if(e===null||typeof e>"u"||OI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rm=/[\-:]([a-z])/g;function sm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rm,sm);st[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rm,sm);st[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rm,sm);st[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function im(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MI(e,n,s,r)&&(n=null),r||s===null?LI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=jI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),si=Symbol.for("react.portal"),ii=Symbol.for("react.fragment"),om=Symbol.for("react.strict_mode"),Ih=Symbol.for("react.profiler"),Fw=Symbol.for("react.provider"),Uw=Symbol.for("react.context"),am=Symbol.for("react.forward_ref"),Sh=Symbol.for("react.suspense"),Nh=Symbol.for("react.suspense_list"),lm=Symbol.for("react.memo"),xr=Symbol.for("react.lazy"),$w=Symbol.for("react.offscreen"),gy=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Pd;function Ro(t){if(Pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pd=e&&e[1]||""}return`
`+Pd+t}var jd=!1;function Dd(t,e){if(!t||jd)return"";jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{jd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ro(t):""}function VI(t){switch(t.tag){case 5:return Ro(t.type);case 16:return Ro("Lazy");case 13:return Ro("Suspense");case 19:return Ro("SuspenseList");case 0:case 2:case 15:return t=Dd(t.type,!1),t;case 11:return t=Dd(t.type.render,!1),t;case 1:return t=Dd(t.type,!0),t;default:return""}}function kh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ii:return"Fragment";case si:return"Portal";case Ih:return"Profiler";case om:return"StrictMode";case Sh:return"Suspense";case Nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uw:return(t.displayName||"Context")+".Consumer";case Fw:return(t._context.displayName||"Context")+".Provider";case am:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lm:return e=t.displayName||null,e!==null?e:kh(t.type)||"Memo";case xr:e=t._payload,t=t._init;try{return kh(t(e))}catch{}}return null}function FI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kh(e);case 8:return e===om?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UI(t){var e=Bw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=UI(t))}function zw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ch(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hw(t,e){e=e.checked,e!=null&&im(t,"checked",e,!1)}function Ah(t,e){Hw(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rh(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rh(t,e,n){(e!=="number"||gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Po(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function qw(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _y(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ww(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ww(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bl,Gw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bl=bl||document.createElement("div"),bl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$I=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){$I.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function Kw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function Qw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Kw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var BI=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dh(t,e){if(e){if(BI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=null;function cm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mh=null,yi=null,vi=null;function xy(t){if(t=Ua(t)){if(typeof Mh!="function")throw Error(z(280));var e=t.stateNode;e&&(e=vu(e),Mh(t.stateNode,t.type,e))}}function Yw(t){yi?vi?vi.push(t):vi=[t]:yi=t}function Xw(){if(yi){var t=yi,e=vi;if(vi=yi=null,xy(t),e)for(t=0;t<e.length;t++)xy(e[t])}}function Jw(t,e){return t(e)}function Zw(){}var Ld=!1;function e_(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return Jw(t,e,n)}finally{Ld=!1,(yi!==null||vi!==null)&&(Zw(),Xw())}}function aa(t,e){var n=t.stateNode;if(n===null)return null;var r=vu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Vh=!1;if(Jn)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Vh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Vh=!1}function zI(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var zo=!1,yc=null,vc=!1,Fh=null,HI={onError:function(t){zo=!0,yc=t}};function qI(t,e,n,r,s,i,o,c,u){zo=!1,yc=null,zI.apply(HI,arguments)}function WI(t,e,n,r,s,i,o,c,u){if(qI.apply(this,arguments),zo){if(zo){var d=yc;zo=!1,yc=null}else throw Error(z(198));vc||(vc=!0,Fh=d)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function by(t){if(Bs(t)!==t)throw Error(z(188))}function GI(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return by(s),t;if(i===r)return by(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function n_(t){return t=GI(t),t!==null?r_(t):null}function r_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r_(t);if(e!==null)return e;t=t.sibling}return null}var s_=Gt.unstable_scheduleCallback,Ey=Gt.unstable_cancelCallback,KI=Gt.unstable_shouldYield,QI=Gt.unstable_requestPaint,Ve=Gt.unstable_now,YI=Gt.unstable_getCurrentPriorityLevel,um=Gt.unstable_ImmediatePriority,i_=Gt.unstable_UserBlockingPriority,wc=Gt.unstable_NormalPriority,XI=Gt.unstable_LowPriority,o_=Gt.unstable_IdlePriority,mu=null,Rn=null;function JI(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(mu,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:t2,ZI=Math.log,e2=Math.LN2;function t2(t){return t>>>=0,t===0?32:31-(ZI(t)/e2|0)|0}var El=64,Tl=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _c(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=jo(c):(i&=o,i!==0&&(r=jo(i)))}else o=n&~s,o!==0?r=jo(o):i!==0&&(r=jo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pn(e),s=1<<n,r|=t[n],e&=~s;return r}function n2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-pn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=n2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Uh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a_(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function Od(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Va(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function s2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function dm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function l_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c_,hm,u_,d_,h_,$h=!1,Il=[],Pr=null,jr=null,Dr=null,la=new Map,ca=new Map,Er=[],i2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(t,e){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ca.delete(e.pointerId)}}function bo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&hm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function o2(t,e,n,r,s){switch(e){case"focusin":return Pr=bo(Pr,t,e,n,r,s),!0;case"dragenter":return jr=bo(jr,t,e,n,r,s),!0;case"mouseover":return Dr=bo(Dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return la.set(i,bo(la.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ca.set(i,bo(ca.get(i)||null,t,e,n,r,s)),!0}return!1}function f_(t){var e=ys(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=t_(n),e!==null){t.blockedOn=e,h_(t.priority,function(){u_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oh=r,n.target.dispatchEvent(r),Oh=null}else return e=Ua(n),e!==null&&hm(e),t.blockedOn=n,!1;e.shift()}return!0}function Iy(t,e,n){Gl(t)&&n.delete(e)}function a2(){$h=!1,Pr!==null&&Gl(Pr)&&(Pr=null),jr!==null&&Gl(jr)&&(jr=null),Dr!==null&&Gl(Dr)&&(Dr=null),la.forEach(Iy),ca.forEach(Iy)}function Eo(t,e){t.blockedOn===e&&(t.blockedOn=null,$h||($h=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,a2)))}function ua(t){function e(s){return Eo(s,t)}if(0<Il.length){Eo(Il[0],t);for(var n=1;n<Il.length;n++){var r=Il[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pr!==null&&Eo(Pr,t),jr!==null&&Eo(jr,t),Dr!==null&&Eo(Dr,t),la.forEach(e),ca.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)f_(n),n.blockedOn===null&&Er.shift()}var wi=cr.ReactCurrentBatchConfig,xc=!0;function l2(t,e,n,r){var s=he,i=wi.transition;wi.transition=null;try{he=1,fm(t,e,n,r)}finally{he=s,wi.transition=i}}function c2(t,e,n,r){var s=he,i=wi.transition;wi.transition=null;try{he=4,fm(t,e,n,r)}finally{he=s,wi.transition=i}}function fm(t,e,n,r){if(xc){var s=Bh(t,e,n,r);if(s===null)Wd(t,e,r,bc,n),Ty(t,r);else if(o2(s,t,e,n,r))r.stopPropagation();else if(Ty(t,r),e&4&&-1<i2.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&c_(i),i=Bh(t,e,n,r),i===null&&Wd(t,e,r,bc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wd(t,e,r,null,n)}}var bc=null;function Bh(t,e,n,r){if(bc=null,t=cm(r),t=ys(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bc=t,null}function m_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YI()){case um:return 1;case i_:return 4;case wc:case XI:return 16;case o_:return 536870912;default:return 16}default:return 16}}var Cr=null,mm=null,Kl=null;function p_(){if(Kl)return Kl;var t,e=mm,n=e.length,r,s="value"in Cr?Cr.value:Cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function Sy(){return!1}function Qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sl:Sy,this.isPropagationStopped=Sy,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pm=Qt(Bi),Fa=Re({},Bi,{view:0,detail:0}),u2=Qt(Fa),Md,Vd,To,pu=Re({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==To&&(To&&t.type==="mousemove"?(Md=t.screenX-To.screenX,Vd=t.screenY-To.screenY):Vd=Md=0,To=t),Md)},movementY:function(t){return"movementY"in t?t.movementY:Vd}}),Ny=Qt(pu),d2=Re({},pu,{dataTransfer:0}),h2=Qt(d2),f2=Re({},Fa,{relatedTarget:0}),Fd=Qt(f2),m2=Re({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),p2=Qt(m2),g2=Re({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y2=Qt(g2),v2=Re({},Bi,{data:0}),ky=Qt(v2),w2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=x2[t])?!!e[t]:!1}function gm(){return b2}var E2=Re({},Fa,{key:function(t){if(t.key){var e=w2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gm,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T2=Qt(E2),I2=Re({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cy=Qt(I2),S2=Re({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gm}),N2=Qt(S2),k2=Re({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),C2=Qt(k2),A2=Re({},pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R2=Qt(A2),P2=[9,13,27,32],ym=Jn&&"CompositionEvent"in window,Ho=null;Jn&&"documentMode"in document&&(Ho=document.documentMode);var j2=Jn&&"TextEvent"in window&&!Ho,g_=Jn&&(!ym||Ho&&8<Ho&&11>=Ho),Ay=" ",Ry=!1;function y_(t,e){switch(t){case"keyup":return P2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oi=!1;function D2(t,e){switch(t){case"compositionend":return v_(e);case"keypress":return e.which!==32?null:(Ry=!0,Ay);case"textInput":return t=e.data,t===Ay&&Ry?null:t;default:return null}}function L2(t,e){if(oi)return t==="compositionend"||!ym&&y_(t,e)?(t=p_(),Kl=mm=Cr=null,oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g_&&e.locale!=="ko"?null:e.data;default:return null}}var O2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!O2[t.type]:e==="textarea"}function w_(t,e,n,r){Yw(r),e=Ec(e,"onChange"),0<e.length&&(n=new pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qo=null,da=null;function M2(t){A_(t,0)}function gu(t){var e=ci(t);if(zw(e))return t}function V2(t,e){if(t==="change")return e}var __=!1;if(Jn){var Ud;if(Jn){var $d="oninput"in document;if(!$d){var jy=document.createElement("div");jy.setAttribute("oninput","return;"),$d=typeof jy.oninput=="function"}Ud=$d}else Ud=!1;__=Ud&&(!document.documentMode||9<document.documentMode)}function Dy(){qo&&(qo.detachEvent("onpropertychange",x_),da=qo=null)}function x_(t){if(t.propertyName==="value"&&gu(da)){var e=[];w_(e,da,t,cm(t)),e_(M2,e)}}function F2(t,e,n){t==="focusin"?(Dy(),qo=e,da=n,qo.attachEvent("onpropertychange",x_)):t==="focusout"&&Dy()}function U2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(da)}function $2(t,e){if(t==="click")return gu(e)}function B2(t,e){if(t==="input"||t==="change")return gu(e)}function z2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:z2;function ha(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Th.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function Ly(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oy(t,e){var n=Ly(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ly(n)}}function b_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function E_(){for(var t=window,e=gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gc(t.document)}return e}function vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H2(t){var e=E_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b_(n.ownerDocument.documentElement,n)){if(r!==null&&vm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Oy(n,i);var o=Oy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var q2=Jn&&"documentMode"in document&&11>=document.documentMode,ai=null,zh=null,Wo=null,Hh=!1;function My(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hh||ai==null||ai!==gc(r)||(r=ai,"selectionStart"in r&&vm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wo&&ha(Wo,r)||(Wo=r,r=Ec(zh,"onSelect"),0<r.length&&(e=new pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ai)))}function Nl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var li={animationend:Nl("Animation","AnimationEnd"),animationiteration:Nl("Animation","AnimationIteration"),animationstart:Nl("Animation","AnimationStart"),transitionend:Nl("Transition","TransitionEnd")},Bd={},T_={};Jn&&(T_=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function yu(t){if(Bd[t])return Bd[t];if(!li[t])return t;var e=li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T_)return Bd[t]=e[n];return t}var I_=yu("animationend"),S_=yu("animationiteration"),N_=yu("animationstart"),k_=yu("transitionend"),C_=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(t,e){C_.set(t,e),$s(e,[t])}for(var zd=0;zd<Vy.length;zd++){var Hd=Vy[zd],W2=Hd.toLowerCase(),G2=Hd[0].toUpperCase()+Hd.slice(1);Zr(W2,"on"+G2)}Zr(I_,"onAnimationEnd");Zr(S_,"onAnimationIteration");Zr(N_,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(k_,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Fy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WI(r,e,void 0,t),t.currentTarget=null}function A_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Fy(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Fy(s,c,d),i=u}}}if(vc)throw t=Fh,vc=!1,Fh=null,t}function _e(t,e){var n=e[Qh];n===void 0&&(n=e[Qh]=new Set);var r=t+"__bubble";n.has(r)||(R_(e,t,2,!1),n.add(r))}function qd(t,e,n){var r=0;e&&(r|=4),R_(n,t,r,e)}var kl="_reactListening"+Math.random().toString(36).slice(2);function fa(t){if(!t[kl]){t[kl]=!0,Vw.forEach(function(n){n!=="selectionchange"&&(K2.has(n)||qd(n,!1,t),qd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kl]||(e[kl]=!0,qd("selectionchange",!1,e))}}function R_(t,e,n,r){switch(m_(e)){case 1:var s=l2;break;case 4:s=c2;break;default:s=fm}n=s.bind(null,e,n,t),s=void 0,!Vh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=ys(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}e_(function(){var d=i,f=cm(n),m=[];e:{var g=C_.get(t);if(g!==void 0){var b=pm,I=t;switch(t){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":b=T2;break;case"focusin":I="focus",b=Fd;break;case"focusout":I="blur",b=Fd;break;case"beforeblur":case"afterblur":b=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Ny;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=h2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=N2;break;case I_:case S_:case N_:b=p2;break;case k_:b=C2;break;case"scroll":b=u2;break;case"wheel":b=R2;break;case"copy":case"cut":case"paste":b=y2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Cy}var S=(e&4)!==0,A=!S&&t==="scroll",T=S?g!==null?g+"Capture":null:g;S=[];for(var v=d,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,T!==null&&(w=aa(v,T),w!=null&&S.push(ma(v,w,_)))),A)break;v=v.return}0<S.length&&(g=new b(g,I,null,n,f),m.push({event:g,listeners:S}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",g&&n!==Oh&&(I=n.relatedTarget||n.fromElement)&&(ys(I)||I[Zn]))break e;if((b||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,b?(I=n.relatedTarget||n.toElement,b=d,I=I?ys(I):null,I!==null&&(A=Bs(I),I!==A||I.tag!==5&&I.tag!==6)&&(I=null)):(b=null,I=d),b!==I)){if(S=Ny,w="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(S=Cy,w="onPointerLeave",T="onPointerEnter",v="pointer"),A=b==null?g:ci(b),_=I==null?g:ci(I),g=new S(w,v+"leave",b,n,f),g.target=A,g.relatedTarget=_,w=null,ys(f)===d&&(S=new S(T,v+"enter",I,n,f),S.target=_,S.relatedTarget=A,w=S),A=w,b&&I)t:{for(S=b,T=I,v=0,_=S;_;_=Js(_))v++;for(_=0,w=T;w;w=Js(w))_++;for(;0<v-_;)S=Js(S),v--;for(;0<_-v;)T=Js(T),_--;for(;v--;){if(S===T||T!==null&&S===T.alternate)break t;S=Js(S),T=Js(T)}S=null}else S=null;b!==null&&Uy(m,g,b,S,!1),I!==null&&A!==null&&Uy(m,A,I,S,!0)}}e:{if(g=d?ci(d):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var j=V2;else if(Py(g))if(__)j=B2;else{j=U2;var V=F2}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(j=$2);if(j&&(j=j(t,d))){w_(m,j,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Rh(g,"number",g.value)}switch(V=d?ci(d):window,t){case"focusin":(Py(V)||V.contentEditable==="true")&&(ai=V,zh=d,Wo=null);break;case"focusout":Wo=zh=ai=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,My(m,n,f);break;case"selectionchange":if(q2)break;case"keydown":case"keyup":My(m,n,f)}var E;if(ym)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else oi?y_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(g_&&n.locale!=="ko"&&(oi||y!=="onCompositionStart"?y==="onCompositionEnd"&&oi&&(E=p_()):(Cr=f,mm="value"in Cr?Cr.value:Cr.textContent,oi=!0)),V=Ec(d,y),0<V.length&&(y=new ky(y,t,null,n,f),m.push({event:y,listeners:V}),E?y.data=E:(E=v_(n),E!==null&&(y.data=E)))),(E=j2?D2(t,n):L2(t,n))&&(d=Ec(d,"onBeforeInput"),0<d.length&&(f=new ky("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=E))}A_(m,e)})}function ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ec(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=aa(t,n),i!=null&&r.unshift(ma(t,i,s)),i=aa(t,e),i!=null&&r.push(ma(t,i,s))),t=t.return}return r}function Js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Uy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=aa(n,i),u!=null&&o.unshift(ma(n,u,c))):s||(u=aa(n,i),u!=null&&o.push(ma(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Q2=/\r\n?/g,Y2=/\u0000|\uFFFD/g;function $y(t){return(typeof t=="string"?t:""+t).replace(Q2,`
`).replace(Y2,"")}function Cl(t,e,n){if(e=$y(e),$y(t)!==e&&n)throw Error(z(425))}function Tc(){}var qh=null,Wh=null;function Gh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kh=typeof setTimeout=="function"?setTimeout:void 0,X2=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,J2=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(Z2)}:Kh;function Z2(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ua(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ua(e)}function Lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zi=Math.random().toString(36).slice(2),Cn="__reactFiber$"+zi,pa="__reactProps$"+zi,Zn="__reactContainer$"+zi,Qh="__reactEvents$"+zi,eS="__reactListeners$"+zi,tS="__reactHandles$"+zi;function ys(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zy(t);t!==null;){if(n=t[Cn])return n;t=zy(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[Cn]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function vu(t){return t[pa]||null}var Yh=[],ui=-1;function es(t){return{current:t}}function be(t){0>ui||(t.current=Yh[ui],Yh[ui]=null,ui--)}function ye(t,e){ui++,Yh[ui]=t.current,t.current=e}var qr={},ft=es(qr),Rt=es(!1),Cs=qr;function ki(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function Ic(){be(Rt),be(ft)}function Hy(t,e,n){if(ft.current!==qr)throw Error(z(168));ye(ft,e),ye(Rt,n)}function P_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,FI(t)||"Unknown",s));return Re({},n,r)}function Sc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,Cs=ft.current,ye(ft,t),ye(Rt,Rt.current),!0}function qy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=P_(t,e,Cs),r.__reactInternalMemoizedMergedChildContext=t,be(Rt),be(ft),ye(ft,t)):be(Rt),ye(Rt,n)}var $n=null,wu=!1,Kd=!1;function j_(t){$n===null?$n=[t]:$n.push(t)}function nS(t){wu=!0,j_(t)}function ts(){if(!Kd&&$n!==null){Kd=!0;var t=0,e=he;try{var n=$n;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,wu=!1}catch(s){throw $n!==null&&($n=$n.slice(t+1)),s_(um,ts),s}finally{he=e,Kd=!1}}return null}var di=[],hi=0,Nc=null,kc=0,Xt=[],Jt=0,As=null,zn=1,Hn="";function fs(t,e){di[hi++]=kc,di[hi++]=Nc,Nc=t,kc=e}function D_(t,e,n){Xt[Jt++]=zn,Xt[Jt++]=Hn,Xt[Jt++]=As,As=t;var r=zn;t=Hn;var s=32-pn(r)-1;r&=~(1<<s),n+=1;var i=32-pn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,zn=1<<32-pn(e)+s|n<<s|r,Hn=i+t}else zn=1<<i|n<<s|r,Hn=t}function wm(t){t.return!==null&&(fs(t,1),D_(t,1,0))}function _m(t){for(;t===Nc;)Nc=di[--hi],di[hi]=null,kc=di[--hi],di[hi]=null;for(;t===As;)As=Xt[--Jt],Xt[Jt]=null,Hn=Xt[--Jt],Xt[Jt]=null,zn=Xt[--Jt],Xt[Jt]=null}var qt=null,$t=null,Te=!1,fn=null;function L_(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,$t=Lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=As!==null?{id:zn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,$t=null,!0):!1;default:return!1}}function Xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jh(t){if(Te){var e=$t;if(e){var n=e;if(!Wy(t,e)){if(Xh(t))throw Error(z(418));e=Lr(n.nextSibling);var r=qt;e&&Wy(t,e)?L_(r,n):(t.flags=t.flags&-4097|2,Te=!1,qt=t)}}else{if(Xh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Te=!1,qt=t}}}function Gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Al(t){if(t!==qt)return!1;if(!Te)return Gy(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gh(t.type,t.memoizedProps)),e&&(e=$t)){if(Xh(t))throw O_(),Error(z(418));for(;e;)L_(t,e),e=Lr(e.nextSibling)}if(Gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=qt?Lr(t.stateNode.nextSibling):null;return!0}function O_(){for(var t=$t;t;)t=Lr(t.nextSibling)}function Ci(){$t=qt=null,Te=!1}function xm(t){fn===null?fn=[t]:fn.push(t)}var rS=cr.ReactCurrentBatchConfig;function Io(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Rl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ky(t){var e=t._init;return e(t._payload)}function M_(t){function e(T,v){if(t){var _=T.deletions;_===null?(T.deletions=[v],T.flags|=16):_.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function r(T,v){for(T=new Map;v!==null;)v.key!==null?T.set(v.key,v):T.set(v.index,v),v=v.sibling;return T}function s(T,v){return T=Fr(T,v),T.index=0,T.sibling=null,T}function i(T,v,_){return T.index=_,t?(_=T.alternate,_!==null?(_=_.index,_<v?(T.flags|=2,v):_):(T.flags|=2,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function c(T,v,_,w){return v===null||v.tag!==6?(v=th(_,T.mode,w),v.return=T,v):(v=s(v,_),v.return=T,v)}function u(T,v,_,w){var j=_.type;return j===ii?f(T,v,_.props.children,w,_.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===xr&&Ky(j)===v.type)?(w=s(v,_.props),w.ref=Io(T,v,_),w.return=T,w):(w=nc(_.type,_.key,_.props,null,T.mode,w),w.ref=Io(T,v,_),w.return=T,w)}function d(T,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=nh(_,T.mode,w),v.return=T,v):(v=s(v,_.children||[]),v.return=T,v)}function f(T,v,_,w,j){return v===null||v.tag!==7?(v=Is(_,T.mode,w,j),v.return=T,v):(v=s(v,_),v.return=T,v)}function m(T,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=th(""+v,T.mode,_),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _l:return _=nc(v.type,v.key,v.props,null,T.mode,_),_.ref=Io(T,null,v),_.return=T,_;case si:return v=nh(v,T.mode,_),v.return=T,v;case xr:var w=v._init;return m(T,w(v._payload),_)}if(Po(v)||_o(v))return v=Is(v,T.mode,_,null),v.return=T,v;Rl(T,v)}return null}function g(T,v,_,w){var j=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:c(T,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case _l:return _.key===j?u(T,v,_,w):null;case si:return _.key===j?d(T,v,_,w):null;case xr:return j=_._init,g(T,v,j(_._payload),w)}if(Po(_)||_o(_))return j!==null?null:f(T,v,_,w,null);Rl(T,_)}return null}function b(T,v,_,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return T=T.get(_)||null,c(v,T,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _l:return T=T.get(w.key===null?_:w.key)||null,u(v,T,w,j);case si:return T=T.get(w.key===null?_:w.key)||null,d(v,T,w,j);case xr:var V=w._init;return b(T,v,_,V(w._payload),j)}if(Po(w)||_o(w))return T=T.get(_)||null,f(v,T,w,j,null);Rl(v,w)}return null}function I(T,v,_,w){for(var j=null,V=null,E=v,y=v=0,N=null;E!==null&&y<_.length;y++){E.index>y?(N=E,E=null):N=E.sibling;var C=g(T,E,_[y],w);if(C===null){E===null&&(E=N);break}t&&E&&C.alternate===null&&e(T,E),v=i(C,v,y),V===null?j=C:V.sibling=C,V=C,E=N}if(y===_.length)return n(T,E),Te&&fs(T,y),j;if(E===null){for(;y<_.length;y++)E=m(T,_[y],w),E!==null&&(v=i(E,v,y),V===null?j=E:V.sibling=E,V=E);return Te&&fs(T,y),j}for(E=r(T,E);y<_.length;y++)N=b(E,T,y,_[y],w),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?y:N.key),v=i(N,v,y),V===null?j=N:V.sibling=N,V=N);return t&&E.forEach(function(P){return e(T,P)}),Te&&fs(T,y),j}function S(T,v,_,w){var j=_o(_);if(typeof j!="function")throw Error(z(150));if(_=j.call(_),_==null)throw Error(z(151));for(var V=j=null,E=v,y=v=0,N=null,C=_.next();E!==null&&!C.done;y++,C=_.next()){E.index>y?(N=E,E=null):N=E.sibling;var P=g(T,E,C.value,w);if(P===null){E===null&&(E=N);break}t&&E&&P.alternate===null&&e(T,E),v=i(P,v,y),V===null?j=P:V.sibling=P,V=P,E=N}if(C.done)return n(T,E),Te&&fs(T,y),j;if(E===null){for(;!C.done;y++,C=_.next())C=m(T,C.value,w),C!==null&&(v=i(C,v,y),V===null?j=C:V.sibling=C,V=C);return Te&&fs(T,y),j}for(E=r(T,E);!C.done;y++,C=_.next())C=b(E,T,y,C.value,w),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?y:C.key),v=i(C,v,y),V===null?j=C:V.sibling=C,V=C);return t&&E.forEach(function(D){return e(T,D)}),Te&&fs(T,y),j}function A(T,v,_,w){if(typeof _=="object"&&_!==null&&_.type===ii&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case _l:e:{for(var j=_.key,V=v;V!==null;){if(V.key===j){if(j=_.type,j===ii){if(V.tag===7){n(T,V.sibling),v=s(V,_.props.children),v.return=T,T=v;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===xr&&Ky(j)===V.type){n(T,V.sibling),v=s(V,_.props),v.ref=Io(T,V,_),v.return=T,T=v;break e}n(T,V);break}else e(T,V);V=V.sibling}_.type===ii?(v=Is(_.props.children,T.mode,w,_.key),v.return=T,T=v):(w=nc(_.type,_.key,_.props,null,T.mode,w),w.ref=Io(T,v,_),w.return=T,T=w)}return o(T);case si:e:{for(V=_.key;v!==null;){if(v.key===V)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(T,v.sibling),v=s(v,_.children||[]),v.return=T,T=v;break e}else{n(T,v);break}else e(T,v);v=v.sibling}v=nh(_,T.mode,w),v.return=T,T=v}return o(T);case xr:return V=_._init,A(T,v,V(_._payload),w)}if(Po(_))return I(T,v,_,w);if(_o(_))return S(T,v,_,w);Rl(T,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(T,v.sibling),v=s(v,_),v.return=T,T=v):(n(T,v),v=th(_,T.mode,w),v.return=T,T=v),o(T)):n(T,v)}return A}var Ai=M_(!0),V_=M_(!1),Cc=es(null),Ac=null,fi=null,bm=null;function Em(){bm=fi=Ac=null}function Tm(t){var e=Cc.current;be(Cc),t._currentValue=e}function Zh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _i(t,e){Ac=t,bm=fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(bm!==t)if(t={context:t,memoizedValue:e,next:null},fi===null){if(Ac===null)throw Error(z(308));fi=t,Ac.dependencies={lanes:0,firstContext:t}}else fi=fi.next=t;return e}var vs=null;function Im(t){vs===null?vs=[t]:vs.push(t)}function F_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Im(e)):(n.next=s.next,s.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var br=!1;function Sm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,er(t,n)}return s=r.interleaved,s===null?(e.next=e,Im(r)):(e.next=s.next,s.next=e),r.interleaved=e,er(t,n)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dm(t,n)}}function Qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rc(t,e,n,r){var s=t.updateQueue;br=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=d=u=null,c=i;do{var g=c.lane,b=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var I=t,S=c;switch(g=e,b=n,S.tag){case 1:if(I=S.payload,typeof I=="function"){m=I.call(b,m,g);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=S.payload,g=typeof I=="function"?I.call(b,m,g):I,g==null)break e;m=Re({},m,g);break e;case 2:br=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else b={eventTime:b,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=b,u=m):f=f.next=b,o|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ps|=o,t.lanes=o,t.memoizedState=m}}function Yy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var $a={},Pn=es($a),ga=es($a),ya=es($a);function ws(t){if(t===$a)throw Error(z(174));return t}function Nm(t,e){switch(ye(ya,e),ye(ga,t),ye(Pn,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jh(e,t)}be(Pn),ye(Pn,e)}function Ri(){be(Pn),be(ga),be(ya)}function $_(t){ws(ya.current);var e=ws(Pn.current),n=jh(e,t.type);e!==n&&(ye(ga,t),ye(Pn,n))}function km(t){ga.current===t&&(be(Pn),be(ga))}var ke=es(0);function Pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qd=[];function Cm(){for(var t=0;t<Qd.length;t++)Qd[t]._workInProgressVersionPrimary=null;Qd.length=0}var Xl=cr.ReactCurrentDispatcher,Yd=cr.ReactCurrentBatchConfig,Rs=0,Ae=null,qe=null,Ye=null,jc=!1,Go=!1,va=0,sS=0;function at(){throw Error(z(321))}function Am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Rm(t,e,n,r,s,i){if(Rs=i,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xl.current=t===null||t.memoizedState===null?lS:cS,t=n(r,s),Go){i=0;do{if(Go=!1,va=0,25<=i)throw Error(z(301));i+=1,Ye=qe=null,e.updateQueue=null,Xl.current=uS,t=n(r,s)}while(Go)}if(Xl.current=Dc,e=qe!==null&&qe.next!==null,Rs=0,Ye=qe=Ae=null,jc=!1,e)throw Error(z(300));return t}function Pm(){var t=va!==0;return va=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ae.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function sn(){if(qe===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Ye===null?Ae.memoizedState:Ye.next;if(e!==null)Ye=e,qe=t;else{if(t===null)throw Error(z(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ye===null?Ae.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function wa(t,e){return typeof e=="function"?e(t):e}function Xd(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=qe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Rs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Ae.lanes|=f,Ps|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,vn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ae.lanes|=i,Ps|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jd(t){var e=sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function B_(){}function z_(t,e){var n=Ae,r=sn(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,jm(W_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,_a(9,q_.bind(null,n,r,s,e),void 0,null),Je===null)throw Error(z(349));Rs&30||H_(n,e,s)}return s}function H_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function q_(t,e,n,r){e.value=n,e.getSnapshot=r,G_(e)&&K_(t)}function W_(t,e,n){return n(function(){G_(e)&&K_(t)})}function G_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function K_(t){var e=er(t,1);e!==null&&gn(e,t,1,-1)}function Xy(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},e.queue=t,t=t.dispatch=aS.bind(null,Ae,t),[e.memoizedState,t]}function _a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Q_(){return sn().memoizedState}function Jl(t,e,n,r){var s=Nn();Ae.flags|=t,s.memoizedState=_a(1|e,n,void 0,r===void 0?null:r)}function _u(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,r!==null&&Am(r,o.deps)){s.memoizedState=_a(e,n,i,r);return}}Ae.flags|=t,s.memoizedState=_a(1|e,n,i,r)}function Jy(t,e){return Jl(8390656,8,t,e)}function jm(t,e){return _u(2048,8,t,e)}function Y_(t,e){return _u(4,2,t,e)}function X_(t,e){return _u(4,4,t,e)}function J_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z_(t,e,n){return n=n!=null?n.concat([t]):null,_u(4,4,J_.bind(null,e,t),n)}function Dm(){}function ex(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Am(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tx(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Am(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nx(t,e,n){return Rs&21?(vn(n,e)||(n=a_(),Ae.lanes|=n,Ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function iS(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Yd.transition;Yd.transition={};try{t(!1),e()}finally{he=n,Yd.transition=r}}function rx(){return sn().memoizedState}function oS(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sx(t))ix(e,n);else if(n=F_(t,e,n,r),n!==null){var s=wt();gn(n,t,r,s),ox(n,e,r)}}function aS(t,e,n){var r=Vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sx(t))ix(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,vn(c,o)){var u=e.interleaved;u===null?(s.next=s,Im(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=F_(t,e,s,r),n!==null&&(s=wt(),gn(n,t,r,s),ox(n,e,r))}}function sx(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function ix(t,e){Go=jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ox(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dm(t,n)}}var Dc={readContext:rn,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},lS={readContext:rn,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:Jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jl(4194308,4,J_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oS.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:Xy,useDebugValue:Dm,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=Xy(!1),e=t[0];return t=iS.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,s=Nn();if(Te){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Je===null)throw Error(z(349));Rs&30||H_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Jy(W_.bind(null,r,i,t),[t]),r.flags|=2048,_a(9,q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Nn(),e=Je.identifierPrefix;if(Te){var n=Hn,r=zn;n=(r&~(1<<32-pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cS={readContext:rn,useCallback:ex,useContext:rn,useEffect:jm,useImperativeHandle:Z_,useInsertionEffect:Y_,useLayoutEffect:X_,useMemo:tx,useReducer:Xd,useRef:Q_,useState:function(){return Xd(wa)},useDebugValue:Dm,useDeferredValue:function(t){var e=sn();return nx(e,qe.memoizedState,t)},useTransition:function(){var t=Xd(wa)[0],e=sn().memoizedState;return[t,e]},useMutableSource:B_,useSyncExternalStore:z_,useId:rx,unstable_isNewReconciler:!1},uS={readContext:rn,useCallback:ex,useContext:rn,useEffect:jm,useImperativeHandle:Z_,useInsertionEffect:Y_,useLayoutEffect:X_,useMemo:tx,useReducer:Jd,useRef:Q_,useState:function(){return Jd(wa)},useDebugValue:Dm,useDeferredValue:function(t){var e=sn();return qe===null?e.memoizedState=t:nx(e,qe.memoizedState,t)},useTransition:function(){var t=Jd(wa)[0],e=sn().memoizedState;return[t,e]},useMutableSource:B_,useSyncExternalStore:z_,useId:rx,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ef(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xu={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Vr(t),i=Gn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(gn(e,t,s,r),Yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Vr(t),i=Gn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(gn(e,t,s,r),Yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Vr(t),s=Gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Or(t,s,r),e!==null&&(gn(e,t,r,n),Yl(e,t,r))}};function Zy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ha(n,r)||!ha(s,i):!0}function ax(t,e,n){var r=!1,s=qr,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=Pt(e)?Cs:ft.current,r=e.contextTypes,i=(r=r!=null)?ki(t,s):qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function e0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xu.enqueueReplaceState(e,e.state,null)}function tf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=Pt(e)?Cs:ft.current,s.context=ki(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ef(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xu.enqueueReplaceState(s,s.state,null),Rc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=VI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dS=typeof WeakMap=="function"?WeakMap:Map;function lx(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Oc||(Oc=!0,ff=r),nf(t,e)},n}function cx(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){nf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){nf(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function t0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=IS.bind(null,t,e,n),e.then(t,t))}function n0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function r0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var hS=cr.ReactCurrentOwner,At=!1;function vt(t,e,n,r){e.child=t===null?V_(e,null,n,r):Ai(e,t.child,n,r)}function s0(t,e,n,r,s){n=n.render;var i=e.ref;return _i(e,s),r=Rm(t,e,n,r,i,s),n=Pm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(Te&&n&&wm(e),e.flags|=1,vt(t,e,r,s),e.child)}function i0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ux(t,e,i,r,s)):(t=nc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ha,n(o,r)&&t.ref===e.ref)return tr(t,e,s)}return e.flags|=1,t=Fr(i,r),t.ref=e.ref,t.return=e,e.child=t}function ux(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ha(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,tr(t,e,s)}return rf(t,e,n,r,s)}function dx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(pi,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(pi,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(pi,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(pi,Ft),Ft|=r;return vt(t,e,s,n),e.child}function hx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rf(t,e,n,r,s){var i=Pt(n)?Cs:ft.current;return i=ki(e,i),_i(e,s),n=Rm(t,e,n,r,i,s),r=Pm(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,tr(t,e,s)):(Te&&r&&wm(e),e.flags|=1,vt(t,e,n,s),e.child)}function o0(t,e,n,r,s){if(Pt(n)){var i=!0;Sc(e)}else i=!1;if(_i(e,s),e.stateNode===null)Zl(t,e),ax(e,n,r),tf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=rn(d):(d=Pt(n)?Cs:ft.current,d=ki(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&e0(e,o,r,d),br=!1;var g=e.memoizedState;o.state=g,Rc(e,r,o,s),u=e.memoizedState,c!==r||g!==u||Rt.current||br?(typeof f=="function"&&(ef(e,n,f,r),u=e.memoizedState),(c=br||Zy(e,n,c,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,U_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:dn(e.type,c),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Pt(n)?Cs:ft.current,u=ki(e,u));var b=n.getDerivedStateFromProps;(f=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||g!==u)&&e0(e,o,r,u),br=!1,g=e.memoizedState,o.state=g,Rc(e,r,o,s);var I=e.memoizedState;c!==m||g!==I||Rt.current||br?(typeof b=="function"&&(ef(e,n,b,r),I=e.memoizedState),(d=br||Zy(e,n,d,r,g,I,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return sf(t,e,n,r,i,s)}function sf(t,e,n,r,s,i){hx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qy(e,n,!1),tr(t,e,i);r=e.stateNode,hS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ai(e,t.child,null,i),e.child=Ai(e,null,c,i)):vt(t,e,c,i),e.memoizedState=r.state,s&&qy(e,n,!0),e.child}function fx(t){var e=t.stateNode;e.pendingContext?Hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hy(t,e.context,!1),Nm(t,e.containerInfo)}function a0(t,e,n,r,s){return Ci(),xm(s),e.flags|=256,vt(t,e,n,r),e.child}var of={dehydrated:null,treeContext:null,retryLane:0};function af(t){return{baseLanes:t,cachePool:null,transitions:null}}function mx(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(ke,s&1),t===null)return Jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tu(o,r,0,null),t=Is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=af(n),e.memoizedState=of,t):Lm(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return fS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Fr(c,i):(i=Is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?af(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=of,r}return i=t.child,t=i.sibling,r=Fr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lm(t,e){return e=Tu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pl(t,e,n,r){return r!==null&&xm(r),Ai(e,t.child,null,n),t=Lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zd(Error(z(422))),Pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Tu({mode:"visible",children:r.children},s,0,null),i=Is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ai(e,t.child,null,o),e.child.memoizedState=af(o),e.memoizedState=of,i);if(!(e.mode&1))return Pl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=Zd(i,r,void 0),Pl(t,e,o,r)}if(c=(o&t.childLanes)!==0,At||c){if(r=Je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,er(t,s),gn(r,t,s,-1))}return $m(),r=Zd(Error(z(421))),Pl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=SS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Lr(s.nextSibling),qt=e,Te=!0,fn=null,t!==null&&(Xt[Jt++]=zn,Xt[Jt++]=Hn,Xt[Jt++]=As,zn=t.id,Hn=t.overflow,As=e),e=Lm(e,r.children),e.flags|=4096,e)}function l0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zh(t.return,e,n)}function eh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function px(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l0(t,n,e);else if(t.tag===19)l0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),eh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}eh(e,!0,n,null,i);break;case"together":eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mS(t,e,n){switch(e.tag){case 3:fx(e),Ci();break;case 5:$_(e);break;case 1:Pt(e.type)&&Sc(e);break;case 4:Nm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Cc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?mx(t,e,n):(ye(ke,ke.current&1),t=tr(t,e,n),t!==null?t.sibling:null);ye(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return px(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,dx(t,e,n)}return tr(t,e,n)}var gx,lf,yx,vx;gx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lf=function(){};yx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ws(Pn.current);var i=null;switch(n){case"input":s=Ch(t,s),r=Ch(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Ph(t,s),r=Ph(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tc)}Dh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ia.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ia.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_e("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};vx=function(t,e,n,r){n!==r&&(e.flags|=4)};function So(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pS(t,e,n){var r=e.pendingProps;switch(_m(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Pt(e.type)&&Ic(),lt(e),null;case 3:return r=e.stateNode,Ri(),be(Rt),be(ft),Cm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(gf(fn),fn=null))),lf(t,e),lt(e),null;case 5:km(e);var s=ws(ya.current);if(n=e.type,t!==null&&e.stateNode!=null)yx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=ws(Pn.current),Al(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[pa]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Do.length;s++)_e(Do[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":yy(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":wy(r,i),_e("invalid",r)}Dh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Cl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Cl(r.textContent,c,t),s=["children",""+c]):ia.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":xl(r),vy(r,i,!0);break;case"textarea":xl(r),_y(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Tc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ww(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[pa]=r,gx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lh(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Do.length;s++)_e(Do[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":yy(t,r),s=Ch(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),_e("invalid",t);break;case"textarea":wy(t,r),s=Ph(t,r),_e("invalid",t);break;default:s=r}Dh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Qw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&oa(t,u):typeof u=="number"&&oa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ia.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&im(t,i,u,o))}switch(n){case"input":xl(t),vy(t,r,!1);break;case"textarea":xl(t),_y(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gi(t,!!r.multiple,i,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Tc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)vx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=ws(ya.current),ws(Pn.current),Al(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return lt(e),null;case 13:if(be(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&$t!==null&&e.mode&1&&!(e.flags&128))O_(),Ci(),e.flags|=98560,i=!1;else if(i=Al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Cn]=e}else Ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else fn!==null&&(gf(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?We===0&&(We=3):$m())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Ri(),lf(t,e),t===null&&fa(e.stateNode.containerInfo),lt(e),null;case 10:return Tm(e.type._context),lt(e),null;case 17:return Pt(e.type)&&Ic(),lt(e),null;case 19:if(be(ke),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)So(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pc(t),o!==null){for(e.flags|=128,So(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ve()>ji&&(e.flags|=128,r=!0,So(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),So(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return lt(e),null}else 2*Ve()-i.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,r=!0,So(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ve(),e.sibling=null,n=ke.current,ye(ke,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Um(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function gS(t,e){switch(_m(e),e.tag){case 1:return Pt(e.type)&&Ic(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(),be(Rt),be(ft),Cm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return km(e),null;case 13:if(be(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(ke),null;case 4:return Ri(),null;case 10:return Tm(e.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var jl=!1,dt=!1,yS=typeof WeakSet=="function"?WeakSet:Set,K=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function cf(t,e,n){try{n()}catch(r){Le(t,e,r)}}var c0=!1;function vS(t,e){if(qh=xc,t=E_(),vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var b;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)g=m,m=b;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=o),g===i&&++f===r&&(u=o),(b=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=b}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wh={focusedElem:t,selectionRange:n},xc=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var S=I.memoizedProps,A=I.memoizedState,T=e.stateNode,v=T.getSnapshotBeforeUpdate(e.elementType===e.type?S:dn(e.type,S),A);T.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(w){Le(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return I=c0,c0=!1,I}function Ko(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cf(e,n,i)}s=s.next}while(s!==r)}}function bu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wx(t){var e=t.alternate;e!==null&&(t.alternate=null,wx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[pa],delete e[Qh],delete e[eS],delete e[tS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _x(t){return t.tag===5||t.tag===3||t.tag===4}function u0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_x(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tc));else if(r!==4&&(t=t.child,t!==null))for(df(t,e,n),t=t.sibling;t!==null;)df(t,e,n),t=t.sibling}function hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hf(t,e,n),t=t.sibling;t!==null;)hf(t,e,n),t=t.sibling}var et=null,hn=!1;function wr(t,e,n){for(n=n.child;n!==null;)xx(t,e,n),n=n.sibling}function xx(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 5:dt||mi(n,e);case 6:var r=et,s=hn;et=null,wr(t,e,n),et=r,hn=s,et!==null&&(hn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(hn?(t=et,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),ua(t)):Gd(et,n.stateNode));break;case 4:r=et,s=hn,et=n.stateNode.containerInfo,hn=!0,wr(t,e,n),et=r,hn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cf(n,e,o),s=s.next}while(s!==r)}wr(t,e,n);break;case 1:if(!dt&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Le(n,e,c)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,wr(t,e,n),dt=r):wr(t,e,n);break;default:wr(t,e,n)}}function d0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yS),e.forEach(function(r){var s=NS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:et=c.stateNode,hn=!1;break e;case 3:et=c.stateNode.containerInfo,hn=!0;break e;case 4:et=c.stateNode.containerInfo,hn=!0;break e}c=c.return}if(et===null)throw Error(z(160));xx(i,o,s),et=null,hn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Le(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bx(e,t),e=e.sibling}function bx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),Sn(t),r&4){try{Ko(3,t,t.return),bu(3,t)}catch(S){Le(t,t.return,S)}try{Ko(5,t,t.return)}catch(S){Le(t,t.return,S)}}break;case 1:un(e,t),Sn(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(un(e,t),Sn(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var s=t.stateNode;try{oa(s,"")}catch(S){Le(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Hw(s,i),Lh(c,o);var d=Lh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Qw(s,m):f==="dangerouslySetInnerHTML"?Gw(s,m):f==="children"?oa(s,m):im(s,f,m,d)}switch(c){case"input":Ah(s,i);break;case"textarea":qw(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?gi(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?gi(s,!!i.multiple,i.defaultValue,!0):gi(s,!!i.multiple,i.multiple?[]:"",!1))}s[pa]=i}catch(S){Le(t,t.return,S)}}break;case 6:if(un(e,t),Sn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){Le(t,t.return,S)}}break;case 3:if(un(e,t),Sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ua(e.containerInfo)}catch(S){Le(t,t.return,S)}break;case 4:un(e,t),Sn(t);break;case 13:un(e,t),Sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vm=Ve())),r&4&&d0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,un(e,t),dt=d):un(e,t),Sn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(K=t,f=t.child;f!==null;){for(m=K=f;K!==null;){switch(g=K,b=g.child,g.tag){case 0:case 11:case 14:case 15:Ko(4,g,g.return);break;case 1:mi(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(S){Le(r,n,S)}}break;case 5:mi(g,g.return);break;case 22:if(g.memoizedState!==null){f0(m);continue}}b!==null?(b.return=g,K=b):f0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Kw("display",o))}catch(S){Le(t,t.return,S)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(S){Le(t,t.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:un(e,t),Sn(t),r&4&&d0(t);break;case 21:break;default:un(e,t),Sn(t)}}function Sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_x(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oa(s,""),r.flags&=-33);var i=u0(t);hf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=u0(t);df(t,c,o);break;default:throw Error(z(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wS(t,e,n){K=t,Ex(t)}function Ex(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||jl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||dt;c=jl;var d=dt;if(jl=o,(dt=u)&&!d)for(K=s;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?m0(s):u!==null?(u.return=o,K=u):m0(s);for(;i!==null;)K=i,Ex(i),i=i.sibling;K=s,jl=c,dt=d}h0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):h0(t)}}function h0(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||bu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Yy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yy(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ua(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&uf(e)}catch(g){Le(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function f0(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function m0(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bu(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{uf(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{uf(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){K=null;break}var c=e.sibling;if(c!==null){c.return=e.return,K=c;break}K=e.return}}var _S=Math.ceil,Lc=cr.ReactCurrentDispatcher,Om=cr.ReactCurrentOwner,tn=cr.ReactCurrentBatchConfig,ue=0,Je=null,Ue=null,rt=0,Ft=0,pi=es(0),We=0,xa=null,Ps=0,Eu=0,Mm=0,Qo=null,Nt=null,Vm=0,ji=1/0,Un=null,Oc=!1,ff=null,Mr=null,Dl=!1,Ar=null,Mc=0,Yo=0,mf=null,ec=-1,tc=0;function wt(){return ue&6?Ve():ec!==-1?ec:ec=Ve()}function Vr(t){return t.mode&1?ue&2&&rt!==0?rt&-rt:rS.transition!==null?(tc===0&&(tc=a_()),tc):(t=he,t!==0||(t=window.event,t=t===void 0?16:m_(t.type)),t):1}function gn(t,e,n,r){if(50<Yo)throw Yo=0,mf=null,Error(z(185));Va(t,n,r),(!(ue&2)||t!==Je)&&(t===Je&&(!(ue&2)&&(Eu|=n),We===4&&Tr(t,rt)),jt(t,r),n===1&&ue===0&&!(e.mode&1)&&(ji=Ve()+500,wu&&ts()))}function jt(t,e){var n=t.callbackNode;r2(t,e);var r=_c(t,t===Je?rt:0);if(r===0)n!==null&&Ey(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ey(n),e===1)t.tag===0?nS(p0.bind(null,t)):j_(p0.bind(null,t)),J2(function(){!(ue&6)&&ts()}),n=null;else{switch(l_(r)){case 1:n=um;break;case 4:n=i_;break;case 16:n=wc;break;case 536870912:n=o_;break;default:n=wc}n=Rx(n,Tx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tx(t,e){if(ec=-1,tc=0,ue&6)throw Error(z(327));var n=t.callbackNode;if(xi()&&t.callbackNode!==n)return null;var r=_c(t,t===Je?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vc(t,r);else{e=r;var s=ue;ue|=2;var i=Sx();(Je!==t||rt!==e)&&(Un=null,ji=Ve()+500,Ts(t,e));do try{ES();break}catch(c){Ix(t,c)}while(!0);Em(),Lc.current=i,ue=s,Ue!==null?e=0:(Je=null,rt=0,e=We)}if(e!==0){if(e===2&&(s=Uh(t),s!==0&&(r=s,e=pf(t,s))),e===1)throw n=xa,Ts(t,0),Tr(t,r),jt(t,Ve()),n;if(e===6)Tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!xS(s)&&(e=Vc(t,r),e===2&&(i=Uh(t),i!==0&&(r=i,e=pf(t,i))),e===1))throw n=xa,Ts(t,0),Tr(t,r),jt(t,Ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ms(t,Nt,Un);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Vm+500-Ve(),10<e)){if(_c(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kh(ms.bind(null,t,Nt,Un),e);break}ms(t,Nt,Un);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_S(r/1960))-r,10<r){t.timeoutHandle=Kh(ms.bind(null,t,Nt,Un),r);break}ms(t,Nt,Un);break;case 5:ms(t,Nt,Un);break;default:throw Error(z(329))}}}return jt(t,Ve()),t.callbackNode===n?Tx.bind(null,t):null}function pf(t,e){var n=Qo;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=Vc(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&gf(e)),t}function gf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function xS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~Mm,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),r=1<<n;t[n]=-1,e&=~r}}function p0(t){if(ue&6)throw Error(z(327));xi();var e=_c(t,0);if(!(e&1))return jt(t,Ve()),null;var n=Vc(t,e);if(t.tag!==0&&n===2){var r=Uh(t);r!==0&&(e=r,n=pf(t,r))}if(n===1)throw n=xa,Ts(t,0),Tr(t,e),jt(t,Ve()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ms(t,Nt,Un),jt(t,Ve()),null}function Fm(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(ji=Ve()+500,wu&&ts())}}function js(t){Ar!==null&&Ar.tag===0&&!(ue&6)&&xi();var e=ue;ue|=1;var n=tn.transition,r=he;try{if(tn.transition=null,he=1,t)return t()}finally{he=r,tn.transition=n,ue=e,!(ue&6)&&ts()}}function Um(){Ft=pi.current,be(pi)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,X2(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(_m(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ic();break;case 3:Ri(),be(Rt),be(ft),Cm();break;case 5:km(r);break;case 4:Ri();break;case 13:be(ke);break;case 19:be(ke);break;case 10:Tm(r.type._context);break;case 22:case 23:Um()}n=n.return}if(Je=t,Ue=t=Fr(t.current,null),rt=Ft=e,We=0,xa=null,Mm=Eu=Ps=0,Nt=Qo=null,vs!==null){for(e=0;e<vs.length;e++)if(n=vs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}vs=null}return t}function Ix(t,e){do{var n=Ue;try{if(Em(),Xl.current=Dc,jc){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jc=!1}if(Rs=0,Ye=qe=Ae=null,Go=!1,va=0,Om.current=null,n===null||n.return===null){We=1,xa=e,Ue=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=rt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=n0(o);if(b!==null){b.flags&=-257,r0(b,o,c,i,e),b.mode&1&&t0(i,d,e),e=b,u=d;var I=e.updateQueue;if(I===null){var S=new Set;S.add(u),e.updateQueue=S}else I.add(u);break e}else{if(!(e&1)){t0(i,d,e),$m();break e}u=Error(z(426))}}else if(Te&&c.mode&1){var A=n0(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),r0(A,o,c,i,e),xm(Pi(u,c));break e}}i=u=Pi(u,c),We!==4&&(We=2),Qo===null?Qo=[i]:Qo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=lx(i,u,e);Qy(i,T);break e;case 1:c=u;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Mr===null||!Mr.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=cx(i,c,e);Qy(i,w);break e}}i=i.return}while(i!==null)}kx(n)}catch(j){e=j,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Sx(){var t=Lc.current;return Lc.current=Dc,t===null?Dc:t}function $m(){(We===0||We===3||We===2)&&(We=4),Je===null||!(Ps&268435455)&&!(Eu&268435455)||Tr(Je,rt)}function Vc(t,e){var n=ue;ue|=2;var r=Sx();(Je!==t||rt!==e)&&(Un=null,Ts(t,e));do try{bS();break}catch(s){Ix(t,s)}while(!0);if(Em(),ue=n,Lc.current=r,Ue!==null)throw Error(z(261));return Je=null,rt=0,We}function bS(){for(;Ue!==null;)Nx(Ue)}function ES(){for(;Ue!==null&&!KI();)Nx(Ue)}function Nx(t){var e=Ax(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?kx(t):Ue=e,Om.current=null}function kx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gS(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ue=null;return}}else if(n=pS(n,e,Ft),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function ms(t,e,n){var r=he,s=tn.transition;try{tn.transition=null,he=1,TS(t,e,n,r)}finally{tn.transition=s,he=r}return null}function TS(t,e,n,r){do xi();while(Ar!==null);if(ue&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(s2(t,i),t===Je&&(Ue=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,Rx(wc,function(){return xi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var o=he;he=1;var c=ue;ue|=4,Om.current=null,vS(t,n),bx(n,t),H2(Wh),xc=!!qh,Wh=qh=null,t.current=n,wS(n),QI(),ue=c,he=o,tn.transition=i}else t.current=n;if(Dl&&(Dl=!1,Ar=t,Mc=s),i=t.pendingLanes,i===0&&(Mr=null),JI(n.stateNode),jt(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Oc)throw Oc=!1,t=ff,ff=null,t;return Mc&1&&t.tag!==0&&xi(),i=t.pendingLanes,i&1?t===mf?Yo++:(Yo=0,mf=t):Yo=0,ts(),null}function xi(){if(Ar!==null){var t=l_(Mc),e=tn.transition,n=he;try{if(tn.transition=null,he=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,Mc=0,ue&6)throw Error(z(331));var s=ue;for(ue|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(K=d;K!==null;){var f=K;switch(f.tag){case 0:case 11:case 15:Ko(8,f,i)}var m=f.child;if(m!==null)m.return=f,K=m;else for(;K!==null;){f=K;var g=f.sibling,b=f.return;if(wx(f),f===d){K=null;break}if(g!==null){g.return=b,K=g;break}K=b}}}var I=i.alternate;if(I!==null){var S=I.child;if(S!==null){I.child=null;do{var A=S.sibling;S.sibling=null,S=A}while(S!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ko(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,K=T;break e}K=i.return}}var v=t.current;for(K=v;K!==null;){o=K;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,K=_;else e:for(o=v;K!==null;){if(c=K,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:bu(9,c)}}catch(j){Le(c,c.return,j)}if(c===o){K=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,K=w;break e}K=c.return}}if(ue=s,ts(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(mu,t)}catch{}r=!0}return r}finally{he=n,tn.transition=e}}return!1}function g0(t,e,n){e=Pi(n,e),e=lx(t,e,1),t=Or(t,e,1),e=wt(),t!==null&&(Va(t,1,e),jt(t,e))}function Le(t,e,n){if(t.tag===3)g0(t,t,n);else for(;e!==null;){if(e.tag===3){g0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=Pi(n,t),t=cx(e,t,1),e=Or(e,t,1),t=wt(),e!==null&&(Va(e,1,t),jt(e,t));break}}e=e.return}}function IS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(rt&n)===n&&(We===4||We===3&&(rt&130023424)===rt&&500>Ve()-Vm?Ts(t,0):Mm|=n),jt(t,e)}function Cx(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=wt();t=er(t,e),t!==null&&(Va(t,e,n),jt(t,n))}function SS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cx(t,n)}function NS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Cx(t,n)}var Ax;Ax=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,mS(t,e,n);At=!!(t.flags&131072)}else At=!1,Te&&e.flags&1048576&&D_(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zl(t,e),t=e.pendingProps;var s=ki(e,ft.current);_i(e,n),s=Rm(null,e,r,t,s,n);var i=Pm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(i=!0,Sc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sm(e),s.updater=xu,e.stateNode=s,s._reactInternals=e,tf(e,r,t,n),e=sf(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&wm(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=CS(r),t=dn(r,t),s){case 0:e=rf(null,e,r,t,n);break e;case 1:e=o0(null,e,r,t,n);break e;case 11:e=s0(null,e,r,t,n);break e;case 14:e=i0(null,e,r,dn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),rf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),o0(t,e,r,s,n);case 3:e:{if(fx(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,U_(t,e),Rc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pi(Error(z(423)),e),e=a0(t,e,r,n,s);break e}else if(r!==s){s=Pi(Error(z(424)),e),e=a0(t,e,r,n,s);break e}else for($t=Lr(e.stateNode.containerInfo.firstChild),qt=e,Te=!0,fn=null,n=V_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ci(),r===s){e=tr(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return $_(e),t===null&&Jh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gh(r,s)?o=null:i!==null&&Gh(r,i)&&(e.flags|=32),hx(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&Jh(e),null;case 13:return mx(t,e,n);case 4:return Nm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ai(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),s0(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(Cc,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!Rt.current){e=tr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Gn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Zh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Zh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_i(e,n),s=rn(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=dn(r,e.pendingProps),s=dn(r.type,s),i0(t,e,r,s,n);case 15:return ux(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:dn(r,s),Zl(t,e),e.tag=1,Pt(r)?(t=!0,Sc(e)):t=!1,_i(e,n),ax(e,r,s),tf(e,r,s,n),sf(null,e,r,!0,t,n);case 19:return px(t,e,n);case 22:return dx(t,e,n)}throw Error(z(156,e.tag))};function Rx(t,e){return s_(t,e)}function kS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new kS(t,e,n,r)}function Bm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CS(t){if(typeof t=="function")return Bm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===am)return 11;if(t===lm)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Bm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ii:return Is(n.children,s,i,e);case om:o=8,s|=8;break;case Ih:return t=en(12,n,e,s|2),t.elementType=Ih,t.lanes=i,t;case Sh:return t=en(13,n,e,s),t.elementType=Sh,t.lanes=i,t;case Nh:return t=en(19,n,e,s),t.elementType=Nh,t.lanes=i,t;case $w:return Tu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fw:o=10;break e;case Uw:o=9;break e;case am:o=11;break e;case lm:o=14;break e;case xr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=en(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Is(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function Tu(t,e,n,r){return t=en(22,t,r,e),t.elementType=$w,t.lanes=n,t.stateNode={isHidden:!1},t}function th(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function nh(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Od(0),this.expirationTimes=Od(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Od(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zm(t,e,n,r,s,i,o,c,u){return t=new AS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sm(i),t}function RS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Px(t){if(!t)return qr;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Pt(n))return P_(t,n,e)}return e}function jx(t,e,n,r,s,i,o,c,u){return t=zm(n,r,!0,t,s,i,o,c,u),t.context=Px(null),n=t.current,r=wt(),s=Vr(n),i=Gn(r,s),i.callback=e??null,Or(n,i,s),t.current.lanes=s,Va(t,s,r),jt(t,r),t}function Iu(t,e,n,r){var s=e.current,i=wt(),o=Vr(s);return n=Px(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(s,e,o),t!==null&&(gn(t,s,o,i),Yl(t,s,o)),o}function Fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hm(t,e){y0(t,e),(t=t.alternate)&&y0(t,e)}function PS(){return null}var Dx=typeof reportError=="function"?reportError:function(t){console.error(t)};function qm(t){this._internalRoot=t}Su.prototype.render=qm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Iu(t,e,null,null)};Su.prototype.unmount=qm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){Iu(null,t,null,null)}),e[Zn]=null}};function Su(t){this._internalRoot=t}Su.prototype.unstable_scheduleHydration=function(t){if(t){var e=d_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&f_(t)}};function Wm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v0(){}function jS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Fc(o);i.call(d)}}var o=jx(e,r,t,0,null,!1,!1,"",v0);return t._reactRootContainer=o,t[Zn]=o.current,fa(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Fc(u);c.call(d)}}var u=zm(t,0,!1,null,null,!1,!1,"",v0);return t._reactRootContainer=u,t[Zn]=u.current,fa(t.nodeType===8?t.parentNode:t),js(function(){Iu(e,u,n,r)}),u}function ku(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Fc(o);c.call(u)}}Iu(e,o,t,s)}else o=jS(n,e,t,s,r);return Fc(o)}c_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(dm(e,n|1),jt(e,Ve()),!(ue&6)&&(ji=Ve()+500,ts()))}break;case 13:js(function(){var r=er(t,1);if(r!==null){var s=wt();gn(r,t,1,s)}}),Hm(t,1)}};hm=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=wt();gn(e,t,134217728,n)}Hm(t,134217728)}};u_=function(t){if(t.tag===13){var e=Vr(t),n=er(t,e);if(n!==null){var r=wt();gn(n,t,e,r)}Hm(t,e)}};d_=function(){return he};h_=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};Mh=function(t,e,n){switch(e){case"input":if(Ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vu(r);if(!s)throw Error(z(90));zw(r),Ah(r,s)}}}break;case"textarea":qw(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};Jw=Fm;Zw=js;var DS={usingClientEntryPoint:!1,Events:[Ua,ci,vu,Yw,Xw,Fm]},No={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LS={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n_(t),t===null?null:t.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||PS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{mu=Ll.inject(LS),Rn=Ll}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DS;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wm(e))throw Error(z(200));return RS(t,e,null,n)};Kt.createRoot=function(t,e){if(!Wm(t))throw Error(z(299));var n=!1,r="",s=Dx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zm(t,1,!1,null,null,n,!1,r,s),t[Zn]=e.current,fa(t.nodeType===8?t.parentNode:t),new qm(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=n_(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return js(t)};Kt.hydrate=function(t,e,n){if(!Nu(e))throw Error(z(200));return ku(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Wm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Dx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jx(e,null,t,1,n??null,s,!1,i,o),t[Zn]=e.current,fa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Su(e)};Kt.render=function(t,e,n){if(!Nu(e))throw Error(z(200));return ku(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(z(40));return t._reactRootContainer?(js(function(){ku(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Fm;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nu(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return ku(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function Lx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lx)}catch(t){console.error(t)}}Lx(),Lw.exports=Kt;var OS=Lw.exports,w0=OS;Eh.createRoot=w0.createRoot,Eh.hydrateRoot=w0.hydrateRoot;/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _0="popstate";function MS(t={}){function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return yf("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ba(s)}return FS(e,n,null,t)}function Ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VS(){return Math.random().toString(36).substring(2,10)}function x0(t,e){return{usr:t.state,key:t.key,idx:e}}function yf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Hi(e):e,state:n,key:e&&e.key||r||VS()}}function ba({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function FS(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c="POP",u=null,d=f();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function f(){return(o.state||{idx:null}).idx}function m(){c="POP";let A=f(),T=A==null?null:A-d;d=A,u&&u({action:c,location:S.location,delta:T})}function g(A,T){c="PUSH";let v=yf(S.location,A,T);d=f()+1;let _=x0(v,d),w=S.createHref(v);try{o.pushState(_,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(w)}i&&u&&u({action:c,location:S.location,delta:1})}function b(A,T){c="REPLACE";let v=yf(S.location,A,T);d=f();let _=x0(v,d),w=S.createHref(v);o.replaceState(_,"",w),i&&u&&u({action:c,location:S.location,delta:0})}function I(A){return US(A)}let S={get action(){return c},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(_0,m),u=A,()=>{s.removeEventListener(_0,m),u=null}},createHref(A){return e(s,A)},createURL:I,encodeLocation(A){let T=I(A);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:b,go(A){return o.go(A)}};return S}function US(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ie(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ba(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Ox(t,e,n="/"){return $S(t,e,n,!1)}function $S(t,e,n,r){let s=typeof e=="string"?Hi(e):e,i=nr(s.pathname||"/",n);if(i==null)return null;let o=Mx(t);BS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=ZS(i);c=XS(o[u],d,r)}return c}function Mx(t,e=[],n=[],r="",s=!1){let i=(o,c,u=s,d)=>{let f={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&u)return;Ie(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let m=Kn([r,f.relativePath]),g=n.concat(f);o.children&&o.children.length>0&&(Ie(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Mx(o.children,e,g,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:QS(m,o.index),routesMeta:g})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let d of Vx(o.path))i(o,c,!0,d)}),e}function Vx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Vx(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function BS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:YS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var zS=/^:[\w-]+$/,HS=3,qS=2,WS=1,GS=10,KS=-2,b0=t=>t==="*";function QS(t,e){let n=t.split("/"),r=n.length;return n.some(b0)&&(r+=KS),e&&(r+=qS),n.filter(s=>!b0(s)).reduce((s,i)=>s+(zS.test(i)?HS:i===""?WS:GS),r)}function YS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function XS(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=Uc({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Uc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Kn([i,m.pathname]),pathnameBase:rN(Kn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Kn([i,m.pathnameBase]))}return o}function Uc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:m},g)=>{if(f==="*"){let I=c[g]||"";o=i.slice(0,i.length-I.length).replace(/(.)\/+$/,"$1")}const b=c[g];return m&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function JS(t,e=!1,n=!0){wn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ZS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function nr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function eN(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hi(t):t;return{pathname:n?n.startsWith("/")?n:tN(n,e):e,search:sN(r),hash:iN(s)}}function tN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function rh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gm(t){let e=nN(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Km(t,e,n,r=!1){let s;typeof t=="string"?s=Hi(t):(s={...t},Ie(!s.pathname||!s.pathname.includes("?"),rh("?","pathname","search",s)),Ie(!s.pathname||!s.pathname.includes("#"),rh("#","pathname","hash",s)),Ie(!s.search||!s.search.includes("#"),rh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=eN(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var Kn=t=>t.join("/").replace(/\/\/+/g,"/"),rN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Fx=["POST","PUT","PATCH","DELETE"];new Set(Fx);var aN=["GET",...Fx];new Set(aN);var qi=R.createContext(null);qi.displayName="DataRouter";var Cu=R.createContext(null);Cu.displayName="DataRouterState";R.createContext(!1);var Ux=R.createContext({isTransitioning:!1});Ux.displayName="ViewTransition";var lN=R.createContext(new Map);lN.displayName="Fetchers";var cN=R.createContext(null);cN.displayName="Await";var bn=R.createContext(null);bn.displayName="Navigation";var Ba=R.createContext(null);Ba.displayName="Location";var En=R.createContext({outlet:null,matches:[],isDataRoute:!1});En.displayName="Route";var Qm=R.createContext(null);Qm.displayName="RouteError";function uN(t,{relative:e}={}){Ie(Wi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(bn),{hash:s,pathname:i,search:o}=za(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Kn([n,i])),r.createHref({pathname:c,search:o,hash:s})}function Wi(){return R.useContext(Ba)!=null}function ns(){return Ie(Wi(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ba).location}var $x="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Bx(t){R.useContext(bn).static||R.useLayoutEffect(t)}function Ym(){let{isDataRoute:t}=R.useContext(En);return t?IN():dN()}function dN(){Ie(Wi(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(qi),{basename:e,navigator:n}=R.useContext(bn),{matches:r}=R.useContext(En),{pathname:s}=ns(),i=JSON.stringify(Gm(r)),o=R.useRef(!1);return Bx(()=>{o.current=!0}),R.useCallback((u,d={})=>{if(wn(o.current,$x),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Km(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Kn([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,i,s,t])}var hN=R.createContext(null);function fN(t){let e=R.useContext(En).outlet;return R.useMemo(()=>e&&R.createElement(hN.Provider,{value:t},e),[e,t])}function za(t,{relative:e}={}){let{matches:n}=R.useContext(En),{pathname:r}=ns(),s=JSON.stringify(Gm(n));return R.useMemo(()=>Km(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function mN(t,e){return zx(t,e)}function zx(t,e,n,r,s){var v;Ie(Wi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=R.useContext(bn),{matches:o}=R.useContext(En),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let _=m&&m.path||"";Hx(d,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=ns(),b;if(e){let _=typeof e=="string"?Hi(e):e;Ie(f==="/"||((v=_.pathname)==null?void 0:v.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),b=_}else b=g;let I=b.pathname||"/",S=I;if(f!=="/"){let _=f.replace(/^\//,"").split("/");S="/"+I.replace(/^\//,"").split("/").slice(_.length).join("/")}let A=Ox(t,{pathname:S});wn(m||A!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),wn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=wN(A&&A.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:Kn([f,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:Kn([f,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,s);return e&&T?R.createElement(Ba.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},T):T}function pN(){let t=TN(),e=oN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:i},"ErrorBoundary")," or"," ",R.createElement("code",{style:i},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,o)}var gN=R.createElement(pN,null),yN=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(En.Provider,{value:this.props.routeContext},R.createElement(Qm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vN({routeContext:t,match:e,children:n}){let r=R.useContext(qi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(En.Provider,{value:t},n)}function wN(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Ie(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:g}=n,b=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||b){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,m)=>{let g,b=!1,I=null,S=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,I=f.route.errorElement||gN,c&&(u<0&&m===0?(Hx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,S=null):u===m&&(b=!0,S=f.route.hydrateFallbackElement||null)));let A=e.concat(i.slice(0,m+1)),T=()=>{let v;return g?v=I:b?v=S:f.route.Component?v=R.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=d,R.createElement(vN,{match:f,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(yN,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:T(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):T()},null)}function Xm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _N(t){let e=R.useContext(qi);return Ie(e,Xm(t)),e}function xN(t){let e=R.useContext(Cu);return Ie(e,Xm(t)),e}function bN(t){let e=R.useContext(En);return Ie(e,Xm(t)),e}function Jm(t){let e=bN(t),n=e.matches[e.matches.length-1];return Ie(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function EN(){return Jm("useRouteId")}function TN(){var r;let t=R.useContext(Qm),e=xN("useRouteError"),n=Jm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function IN(){let{router:t}=_N("useNavigate"),e=Jm("useNavigate"),n=R.useRef(!1);return Bx(()=>{n.current=!0}),R.useCallback(async(s,i={})=>{wn(n.current,$x),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var E0={};function Hx(t,e,n){!e&&!E0[t]&&(E0[t]=!0,wn(!1,n))}R.memo(SN);function SN({routes:t,future:e,state:n,unstable_onError:r}){return zx(t,void 0,n,r,e)}function Zm({to:t,replace:e,state:n,relative:r}){Ie(Wi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(bn);wn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=R.useContext(En),{pathname:o}=ns(),c=Ym(),u=Km(t,Gm(i),o,r==="path"),d=JSON.stringify(u);return R.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function NN(t){return fN(t.context)}function Yt(t){Ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Ie(!Wi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof n=="string"&&(n=Hi(n));let{pathname:u="/",search:d="",hash:f="",state:m=null,key:g="default"}=n,b=R.useMemo(()=>{let I=nr(u,o);return I==null?null:{location:{pathname:I,search:d,hash:f,state:m,key:g},navigationType:r}},[o,u,d,f,m,g,r]);return wn(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:R.createElement(bn.Provider,{value:c},R.createElement(Ba.Provider,{children:e,value:b}))}function qx({children:t,location:e}){return mN(vf(t),e)}function vf(t,e=[]){let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,vf(r.props.children,i));return}Ie(r.type===Yt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ie(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vf(r.props.children,i)),n.push(o)}),n}var rc="get",sc="application/x-www-form-urlencoded";function Au(t){return t!=null&&typeof t.tagName=="string"}function CN(t){return Au(t)&&t.tagName.toLowerCase()==="button"}function AN(t){return Au(t)&&t.tagName.toLowerCase()==="form"}function RN(t){return Au(t)&&t.tagName.toLowerCase()==="input"}function PN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jN(t,e){return t.button===0&&(!e||e==="_self")&&!PN(t)}var Ol=null;function DN(){if(Ol===null)try{new FormData(document.createElement("form"),0),Ol=!1}catch{Ol=!0}return Ol}var LN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sh(t){return t!=null&&!LN.has(t)?(wn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sc}"`),null):t}function ON(t,e){let n,r,s,i,o;if(AN(t)){let c=t.getAttribute("action");r=c?nr(c,e):null,n=t.getAttribute("method")||rc,s=sh(t.getAttribute("enctype"))||sc,i=new FormData(t)}else if(CN(t)||RN(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?nr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||rc,s=sh(t.getAttribute("formenctype"))||sh(c.getAttribute("enctype"))||sc,i=new FormData(c,t),!DN()){let{name:d,type:f,value:m}=t;if(f==="image"){let g=d?`${d}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else d&&i.append(d,m)}}else{if(Au(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rc,r=null,s=sc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ep(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function MN(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&nr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function VN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UN(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await VN(i,n);return o.links?o.links():[]}return[]}));return HN(r.flat(1).filter(FN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function T0(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):i==="data"?e.filter((u,d)=>{var m;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function $N(t,e,{includeHydrateFallback:n}={}){return BN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function BN(t){return[...new Set(t)]}function zN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function HN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(zN(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function Wx(){let t=R.useContext(qi);return ep(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qN(){let t=R.useContext(Cu);return ep(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tp=R.createContext(void 0);tp.displayName="FrameworkContext";function Gx(){let t=R.useContext(tp);return ep(t,"You must render this element inside a <HydratedRouter> element"),t}function WN(t,e){let n=R.useContext(tp),[r,s]=R.useState(!1),[i,o]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:m}=e,g=R.useRef(null);R.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let S=T=>{T.forEach(v=>{o(v.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[r]);let b=()=>{s(!0)},I=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,g,{}]:[i,g,{onFocus:ko(c,b),onBlur:ko(u,I),onMouseEnter:ko(d,b),onMouseLeave:ko(f,I),onTouchStart:ko(m,b)}]:[!1,g,{}]}function ko(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function GN({page:t,...e}){let{router:n}=Wx(),r=R.useMemo(()=>Ox(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(QN,{page:t,matches:r,...e}):null}function KN(t){let{manifest:e,routeModules:n}=Gx(),[r,s]=R.useState([]);return R.useEffect(()=>{let i=!1;return UN(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function QN({page:t,matches:e,...n}){let r=ns(),{manifest:s,routeModules:i}=Gx(),{basename:o}=Wx(),{loaderData:c,matches:u}=qN(),d=R.useMemo(()=>T0(t,e,u,s,r,"data"),[t,e,u,s,r]),f=R.useMemo(()=>T0(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let I=new Set,S=!1;if(e.forEach(T=>{var _;let v=s.routes[T.route.id];!v||!v.hasLoader||(!d.some(w=>w.route.id===T.route.id)&&T.route.id in c&&((_=i[T.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?S=!0:I.add(T.route.id))}),I.size===0)return[];let A=MN(t,o,"data");return S&&I.size>0&&A.searchParams.set("_routes",e.filter(T=>I.has(T.route.id)).map(T=>T.route.id).join(",")),[A.pathname+A.search]},[o,c,r,s,d,e,t,i]),g=R.useMemo(()=>$N(f,s),[f,s]),b=KN(f);return R.createElement(R.Fragment,null,m.map(I=>R.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),g.map(I=>R.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),b.map(({key:I,link:S})=>R.createElement("link",{key:I,nonce:n.nonce,...S})))}function YN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Kx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kx&&(window.__reactRouterVersion="7.9.5")}catch{}function XN({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=MS({window:n,v5Compat:!0}));let s=r.current,[i,o]=R.useState({action:s.action,location:s.location}),c=R.useCallback(u=>{R.startTransition(()=>o(u))},[o]);return R.useLayoutEffect(()=>s.listen(c),[s,c]),R.createElement(kN,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var Qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yx=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m,...g},b){let{basename:I}=R.useContext(bn),S=typeof d=="string"&&Qx.test(d),A,T=!1;if(typeof d=="string"&&S&&(A=d,Kx))try{let N=new URL(window.location.href),C=d.startsWith("//")?new URL(N.protocol+d):new URL(d),P=nr(C.pathname,I);C.origin===N.origin&&P!=null?d=P+C.search+C.hash:T=!0}catch{wn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=uN(d,{relative:s}),[_,w,j]=WN(r,g),V=ek(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function E(N){e&&e(N),N.defaultPrevented||V(N)}let y=R.createElement("a",{...g,...j,href:A||v,onClick:T||i?e:E,ref:YN(b,w),target:u,"data-discover":!S&&n==="render"?"true":void 0});return _&&!S?R.createElement(R.Fragment,null,y,R.createElement(GN,{page:v})):y});Yx.displayName="Link";var Xx=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:c,children:u,...d},f){let m=za(o,{relative:d.relative}),g=ns(),b=R.useContext(Cu),{navigator:I,basename:S}=R.useContext(bn),A=b!=null&&ik(m)&&c===!0,T=I.encodeLocation?I.encodeLocation(m).pathname:m.pathname,v=g.pathname,_=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(v=v.toLowerCase(),_=_?_.toLowerCase():null,T=T.toLowerCase()),_&&S&&(_=nr(_,S)||_);const w=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let j=v===T||!s&&v.startsWith(T)&&v.charAt(w)==="/",V=_!=null&&(_===T||!s&&_.startsWith(T)&&_.charAt(T.length)==="/"),E={isActive:j,isPending:V,isTransitioning:A},y=j?e:void 0,N;typeof r=="function"?N=r(E):N=[r,j?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let C=typeof i=="function"?i(E):i;return R.createElement(Yx,{...d,"aria-current":y,className:N,ref:f,style:C,to:o,viewTransition:c},typeof u=="function"?u(E):u)});Xx.displayName="NavLink";var JN=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=rc,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:m,...g},b)=>{let I=rk(),S=sk(c,{relative:d}),A=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&Qx.test(c),v=_=>{if(u&&u(_),_.defaultPrevented)return;_.preventDefault();let w=_.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||o;I(w||_.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:s,state:i,relative:d,preventScrollReset:f,viewTransition:m})};return R.createElement("form",{ref:b,method:A,action:S,onSubmit:r?u:v,...g,"data-discover":!T&&t==="render"?"true":void 0})});JN.displayName="Form";function ZN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jx(t){let e=R.useContext(qi);return Ie(e,ZN(t)),e}function ek(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o}={}){let c=Ym(),u=ns(),d=za(t,{relative:i});return R.useCallback(f=>{if(jN(f,e)){f.preventDefault();let m=n!==void 0?n:ba(u)===ba(d);c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:o})}},[u,c,d,n,r,e,t,s,i,o])}var tk=0,nk=()=>`__${String(++tk)}__`;function rk(){let{router:t}=Jx("useSubmit"),{basename:e}=R.useContext(bn),n=EN();return R.useCallback(async(r,s={})=>{let{action:i,method:o,encType:c,formData:u,body:d}=ON(r,e);if(s.navigate===!1){let f=s.fetcherKey||nk();await t.fetch(f,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function sk(t,{relative:e}={}){let{basename:n}=R.useContext(bn),r=R.useContext(En);Ie(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...za(t||".",{relative:e})},o=ns();if(t==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();i.search=f?`?${f}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Kn([n,i.pathname])),ba(i)}function ik(t,{relative:e}={}){let n=R.useContext(Ux);Ie(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Jx("useViewTransitionState"),s=za(t,{relative:e});if(!n.isTransitioning)return!1;let i=nr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=nr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Uc(s.pathname,o)!=null||Uc(s.pathname,i)!=null}const ok=()=>{};var I0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ak=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,b=d&63;u||(b=64,o||(g=64)),r.push(n[f],n[m],n[g],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Zx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ak(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new lk;const g=i<<2|c>>4;if(r.push(g),d!==64){const b=c<<4&240|d>>2;if(r.push(b),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ck=function(t){const e=Zx(t);return eb.encodeByteArray(e,!0)},$c=function(t){return ck(t).replace(/\./g,"")},tb=function(t){try{return eb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=()=>uk().__FIREBASE_DEFAULTS__,hk=()=>{if(typeof process>"u"||typeof I0>"u")return;const t=I0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tb(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return ok()||dk()||hk()||fk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nb=t=>{var e,n;return(n=(e=Ru())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rb=t=>{const e=nb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sb=()=>{var t;return(t=Ru())==null?void 0:t.config},ib=t=>{var e;return(e=Ru())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function np(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$c(JSON.stringify(n)),$c(JSON.stringify(o)),""].join(".")}const Xo={};function pk(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xo))Xo[e]?t.emulator.push(e):t.prod.push(e);return t}function gk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let S0=!1;function rp(t,e){if(typeof window>"u"||typeof document>"u"||!rs(window.location.host)||Xo[t]===e||Xo[t]||S0)return;Xo[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=pk().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,b){g.setAttribute("width","24"),g.setAttribute("id",b),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{S0=!0,o()},g}function f(g,b){g.setAttribute("id",b),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=gk(r),b=n("text"),I=document.getElementById(b)||document.createElement("span"),S=n("learnmore"),A=document.getElementById(S)||document.createElement("a"),T=n("preprendIcon"),v=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const _=g.element;c(_),f(A,S);const w=d();u(v,T),_.append(v,I,A,w),document.body.appendChild(_)}i?(I.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function vk(){var e;const t=(e=Ru())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ab(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _k(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xk(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bk(){return!vk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lb(){try{return typeof indexedDB=="object"}catch{return!1}}function cb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function Ek(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="FirebaseError";class cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Tk,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zs.prototype.create)}}class zs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Ik(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new cn(s,c,r)}}function Ik(t,e){return t.replace(Sk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Sk=/\{\$([^}]+)}/g;function Nk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(N0(i)&&N0(o)){if(!Wr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function N0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kk(t,e){const n=new Ck(t,e);return n.subscribe.bind(n)}class Ck{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ak(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ih),s.error===void 0&&(s.error=ih),s.complete===void 0&&(s.complete=ih);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ak(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ih(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=1e3,Pk=2,jk=4*60*60*1e3,Dk=.5;function k0(t,e=Rk,n=Pk){const r=e*Math.pow(n,t),s=Math.round(Dk*r*(Math.random()-.5)*2);return Math.min(jk,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class on{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mk(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ok(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ok(t){return t===ps?void 0:t}function Mk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lk(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const Fk={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},Uk=re.INFO,$k={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},Bk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$k[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pu{constructor(e){this.name=e,this._logLevel=Uk,this._logHandler=Bk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const zk=(t,e)=>e.some(n=>t instanceof n);let C0,A0;function Hk(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qk(){return A0||(A0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,wf=new WeakMap,db=new WeakMap,oh=new WeakMap,sp=new WeakMap;function Wk(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ub.set(n,t)}).catch(()=>{}),sp.set(e,t),e}function Gk(t){if(wf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wf.set(t,e)}let _f={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||db.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Kk(t){_f=t(_f)}function Qk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ah(this),e,...n);return db.set(r,e.sort?e.sort():[e]),Ur(r)}:qk().includes(t)?function(...e){return t.apply(ah(this),e),Ur(ub.get(this))}:function(...e){return Ur(t.apply(ah(this),e))}}function Yk(t){return typeof t=="function"?Qk(t):(t instanceof IDBTransaction&&Gk(t),zk(t,Hk())?new Proxy(t,_f):t)}function Ur(t){if(t instanceof IDBRequest)return Wk(t);if(oh.has(t))return oh.get(t);const e=Yk(t);return e!==t&&(oh.set(t,e),sp.set(e,t)),e}const ah=t=>sp.get(t);function hb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=Ur(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ur(o.result),u.oldVersion,u.newVersion,Ur(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Xk=["get","getKey","getAll","getAllKeys","count"],Jk=["put","add","delete","clear"],lh=new Map;function R0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lh.get(e))return lh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Jk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Xk.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return lh.set(e,i),i}Kk(t=>({...t,get:(e,n,r)=>R0(e,n)||t.get(e,n,r),has:(e,n)=>!!R0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",P0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Pu("@firebase/app"),tC="@firebase/app-compat",nC="@firebase/analytics-compat",rC="@firebase/analytics",sC="@firebase/app-check-compat",iC="@firebase/app-check",oC="@firebase/auth",aC="@firebase/auth-compat",lC="@firebase/database",cC="@firebase/data-connect",uC="@firebase/database-compat",dC="@firebase/functions",hC="@firebase/functions-compat",fC="@firebase/installations",mC="@firebase/installations-compat",pC="@firebase/messaging",gC="@firebase/messaging-compat",yC="@firebase/performance",vC="@firebase/performance-compat",wC="@firebase/remote-config",_C="@firebase/remote-config-compat",xC="@firebase/storage",bC="@firebase/storage-compat",EC="@firebase/firestore",TC="@firebase/ai",IC="@firebase/firestore-compat",SC="firebase",NC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",kC={[xf]:"fire-core",[tC]:"fire-core-compat",[rC]:"fire-analytics",[nC]:"fire-analytics-compat",[iC]:"fire-app-check",[sC]:"fire-app-check-compat",[oC]:"fire-auth",[aC]:"fire-auth-compat",[lC]:"fire-rtdb",[cC]:"fire-data-connect",[uC]:"fire-rtdb-compat",[dC]:"fire-fn",[hC]:"fire-fn-compat",[fC]:"fire-iid",[mC]:"fire-iid-compat",[pC]:"fire-fcm",[gC]:"fire-fcm-compat",[yC]:"fire-perf",[vC]:"fire-perf-compat",[wC]:"fire-rc",[_C]:"fire-rc-compat",[xC]:"fire-gcs",[bC]:"fire-gcs-compat",[EC]:"fire-fst",[IC]:"fire-fst-compat",[TC]:"fire-vertex","fire-js":"fire-js",[SC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Map,CC=new Map,Ef=new Map;function j0(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _n(t){const e=t.name;if(Ef.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Ef.set(e,t);for(const n of Ea.values())j0(n,t);for(const n of CC.values())j0(n,t);return!0}function ss(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new zs("app","Firebase",AC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new on("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=NC;function fb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:bf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(n||(n=sb()),!n)throw $r.create("no-options");const i=Ea.get(s);if(i){if(Wr(n,i.options)&&Wr(r,i.config))return i;throw $r.create("duplicate-app",{appName:s})}const o=new Vk(s);for(const u of Ef.values())o.addComponent(u);const c=new RC(n,r,o);return Ea.set(s,c),c}function qa(t=bf){const e=Ea.get(t);if(!e&&t===bf&&sb())return fb();if(!e)throw $r.create("no-app",{appName:t});return e}function PC(){return Array.from(Ea.values())}function Dt(t,e,n){let r=kC[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(o.join(" "));return}_n(new on(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="firebase-heartbeat-database",DC=1,Ta="firebase-heartbeat-store";let ch=null;function mb(){return ch||(ch=hb(jC,DC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ta)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),ch}async function LC(t){try{const n=(await mb()).transaction(Ta),r=await n.objectStore(Ta).get(pb(t));return await n.done,r}catch(e){if(e instanceof cn)rr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function D0(t,e){try{const r=(await mb()).transaction(Ta,"readwrite");await r.objectStore(Ta).put(e,pb(t)),await r.done}catch(n){if(n instanceof cn)rr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function pb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=1024,MC=30;class VC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>MC){const o=$C(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=L0(),{heartbeatsToSend:r,unsentEntries:s}=FC(this._heartbeatsCache.heartbeats),i=$c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function L0(){return new Date().toISOString().substring(0,10)}function FC(t,e=OC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),O0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),O0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lb()?cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return D0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return D0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function O0(t){return $c(JSON.stringify({version:2,heartbeats:t})).length}function $C(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){_n(new on("platform-logger",e=>new Zk(e),"PRIVATE")),_n(new on("heartbeat",e=>new VC(e),"PRIVATE")),Dt(xf,P0,t),Dt(xf,P0,"esm2020"),Dt("fire-js","")}BC("");function gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zC=gb,yb=new zs("auth","Firebase",gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Pu("@firebase/auth");function HC(t,...e){Bc.logLevel<=re.WARN&&Bc.warn(`Auth (${Hs}): ${t}`,...e)}function ic(t,...e){Bc.logLevel<=re.ERROR&&Bc.error(`Auth (${Hs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw op(t,...e)}function yn(t,...e){return op(t,...e)}function ip(t,e,n){const r={...zC(),[e]:n};return new zs("auth","Firebase",r).create(e,{appName:t.name})}function Qn(t){return ip(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&an(t,"argument-error"),ip(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function op(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yb.create(t,...e)}function X(t,e,...n){if(!t)throw op(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ic(e),new Error(e)}function sr(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function WC(){return M0()==="http:"||M0()==="https:"}function M0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WC()||ab()||"connection"in navigator)?navigator.onLine:!0}function KC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=yk()||_k()}get(){return GC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XC=new Wa(3e4,6e4);function ur(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fn(t,e,n,r,s={}){return wb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ha({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return wk()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&rs(t.emulatorConfig.host)&&(d.credentials="include"),vb.fetch()(await _b(t,t.config.apiHost,n,c),d)})}async function wb(t,e,n){t._canInitEmulator=!1;const r={...QC,...e};try{const s=new ZC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ml(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ip(t,f,d);an(t,f)}}catch(s){if(s instanceof cn)throw s;an(t,"network-request-failed",{message:String(s)})}}async function Ga(t,e,n,r,s={}){const i=await Fn(t,e,n,r,s);return"mfaPendingCredential"in i&&an(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _b(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?ap(t.config,s):`${t.config.apiScheme}://${s}`;return YC.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function JC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),XC.get())})}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function V0(t){return t!==void 0&&t.enterprise!==void 0}class eA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tA(t,e){return Fn(t,"GET","/v2/recaptchaConfig",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(t,e){return Fn(t,"POST","/v1/accounts:delete",e)}async function zc(t,e){return Fn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rA(t,e=!1){const n=fe(t),r=await n.getIdToken(e),s=lp(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Jo(uh(s.auth_time)),issuedAtTime:Jo(uh(s.iat)),expirationTime:Jo(uh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function uh(t){return Number(t)*1e3}function lp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ic("JWT malformed, contained fewer than 3 sections"),null;try{const s=tb(n);return s?JSON.parse(s):(ic("Failed to decode base64 JWT payload"),null)}catch(s){return ic("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function F0(t){const e=lp(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Di(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cn&&sA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jo(this.lastLoginAt),this.creationTime=Jo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Di(t,zc(e,{idToken:n}));X(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?xb(s.providerUserInfo):[],o=aA(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new If(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function oA(t){const e=fe(t);await Hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function xb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(t,e){const n=await wb(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await _b(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&rs(t.emulatorConfig.host)&&(u.credentials="include"),vb.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cA(t,e){return Fn(t,"POST","/v2/accounts:revokeToken",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=F0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await lA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new bi;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bi,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new iA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new If(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Di(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rA(this,e)}reload(){return oA(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(Qn(this.auth));const e=await this.getIdToken();return await Di(this,nA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:b,providerData:I,stsTokenManager:S}=n;X(m&&S,e,"internal-error");const A=bi.fromJSON(this.name,S);X(typeof m=="string",e,"internal-error"),_r(r,e.name),_r(s,e.name),X(typeof g=="boolean",e,"internal-error"),X(typeof b=="boolean",e,"internal-error"),_r(i,e.name),_r(o,e.name),_r(c,e.name),_r(u,e.name),_r(d,e.name),_r(f,e.name);const T=new mn({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:A,createdAt:d,lastLoginAt:f});return I&&Array.isArray(I)&&(T.providerData=I.map(v=>({...v}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new bi;s.updateFromServerResponse(n);const i=new mn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?xb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new bi;c.updateFromIdToken(r);const u=new mn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new If(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;function Wn(t){sr(t instanceof Function,"Expected a class definition");let e=U0.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bb.type="NONE";const $0=bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ei{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=oc(this.userKey,s.apiKey,i),this.fullPersistenceKey=oc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zc(this.auth,{idToken:e}).catch(()=>{});return n?mn._fromGetAccountInfoResponse(this.auth,n,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ei(Wn($0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Wn($0);const o=oc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){let m;if(typeof f=="string"){const g=await zc(e,{idToken:f}).catch(()=>{});if(!g)break;m=await mn._fromGetAccountInfoResponse(e,g,f)}else m=mn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ei(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ei(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Cb(e))return"Webos";if(Tb(e))return"Safari";if((e.includes("chrome/")||Ib(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Eb(t=mt()){return/firefox\//i.test(t)}function Tb(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ib(t=mt()){return/crios\//i.test(t)}function Sb(t=mt()){return/iemobile/i.test(t)}function Nb(t=mt()){return/android/i.test(t)}function kb(t=mt()){return/blackberry/i.test(t)}function Cb(t=mt()){return/webos/i.test(t)}function cp(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uA(t=mt()){var e;return cp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dA(){return xk()&&document.documentMode===10}function Ab(t=mt()){return cp(t)||Nb(t)||Cb(t)||kb(t)||/windows phone/i.test(t)||Sb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e=[]){let n;switch(t){case"Browser":n=B0(mt());break;case"Worker":n=`${B0(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e={}){return Fn(t,"GET","/v2/passwordPolicy",ur(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=6;class pA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??mA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z0(this),this.idTokenSubscription=new z0(this),this.beforeStateQueue=new hA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ei.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zc(this,{idToken:e}),r=await mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(kt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(Qn(this));const n=e?fe(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fA(this),n=new pA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ei.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&HC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function dr(t){return fe(t)}class z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=kk(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yA(t){ju=t}function Pb(t){return ju.loadJS(t)}function vA(){return ju.recaptchaEnterpriseScript}function wA(){return ju.gapiScript}function _A(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xA{constructor(){this.enterprise=new bA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const EA="recaptcha-enterprise",jb="NO_RECAPTCHA";class TA{constructor(e){this.type=EA,this.auth=dr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{tA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new eA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;V0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(jb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&V0(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=vA();u.length!==0&&(u+=c),Pb(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function H0(t,e,n,r=!1,s=!1){const i=new TA(t);let o;if(s)o=jb;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function qc(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await H0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await H0(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e){const n=ss(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wr(i,e??{}))return s;an(s,"already-initialized")}return n.initialize({options:e})}function SA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NA(t,e,n){const r=dr(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Db(e),{host:o,port:c}=kA(e),u=c===null?"":`:${c}`,d={url:`${i}//${o}${u}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Wr(d,r.config.emulator)&&Wr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,rs(o)?(np(`${i}//${o}${u}`),rp("Auth",!0)):CA()}function Db(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kA(t){const e=Db(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:q0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:q0(o)}}}function q0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function AA(t,e){return Fn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e){return Ga(t,"POST","/v1/accounts:signInWithPassword",ur(t,e))}async function Lb(t,e){return Fn(t,"POST","/v1/accounts:sendOobCode",ur(t,e))}async function PA(t,e){return Lb(t,e)}async function jA(t,e){return Lb(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return Ga(t,"POST","/v1/accounts:signInWithEmailLink",ur(t,e))}async function LA(t,e){return Ga(t,"POST","/v1/accounts:signInWithEmailLink",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends up{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ia(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ia(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qc(e,n,"signInWithPassword",RA);case"emailLink":return DA(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qc(e,r,"signUpPassword",AA);case"emailLink":return LA(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t,e){return Ga(t,"POST","/v1/accounts:signInWithIdp",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="http://localhost";class Ds extends up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ti(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ti(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ti(e,n)}buildRequest(){const e={requestUri:OA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VA(t){const e=Lo(Oo(t)).link,n=e?Lo(Oo(e)).deep_link_id:null,r=Lo(Oo(t)).deep_link_id;return(r?Lo(Oo(r)).link:null)||r||n||e||t}class dp{constructor(e){const n=Lo(Oo(e)),r=n.apiKey??null,s=n.oobCode??null,i=MA(n.mode??null);X(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=VA(e);try{return new dp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.providerId=Gi.PROVIDER_ID}static credential(e,n){return Ia._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dp.parseLink(n);return X(r,"argument-error"),Ia._fromEmailAndCode(e,r.code,r.tenantId)}}Gi.PROVIDER_ID="password";Gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends hp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Ka{constructor(){super("facebook.com")}static credential(e){return Ds._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ds._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ka{constructor(){super("github.com")}static credential(e){return Ds._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Ka{constructor(){super("twitter.com")}static credential(e,n){return Ds._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e){return Ga(t,"POST","/v1/accounts:signUp",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mn._fromIdTokenResponse(e,r,s),o=W0(r);return new Ls({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=W0(r);return new Ls({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function W0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends cn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wc(e,n,r,s)}}function Ob(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wc._fromErrorAndOperation(t,i,e,r):i})}async function UA(t,e,n=!1){const r=await Di(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e,n=!1){const{auth:r}=t;if(kt(r.app))return Promise.reject(Qn(r));const s="reauthenticate";try{const i=await Di(t,Ob(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=lp(i.idToken);X(o,r,"internal-error");const{sub:c}=o;return X(t.uid===c,r,"user-mismatch"),Ls._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&an(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,e,n=!1){if(kt(t.app))return Promise.reject(Qn(t));const r="signIn",s=await Ob(t,r,e),i=await Ls._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function BA(t,e){return Mb(dr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e,n){var r;X(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),X(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),X(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(X(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(X(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(t){const e=dr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zA(t,e,n){const r=dr(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Vb(r,s,n),await qc(r,s,"getOobCode",jA)}async function HA(t,e,n){if(kt(t.app))return Promise.reject(Qn(t));const r=dr(t),o=await qc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Fb(t),u}),c=await Ls._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function qA(t,e,n){return kt(t.app)?Promise.reject(Qn(t)):BA(fe(t),Gi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Fb(t),r})}async function WA(t,e){const n=fe(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Vb(n.auth,s,e);const{email:i}=await PA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){return Fn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=fe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Di(r,GA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function QA(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function YA(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function XA(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}function JA(t){return fe(t).signOut()}const Gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gc,"1"),this.storage.removeItem(Gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=1e3,eR=10;class $b extends Ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ab(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);dA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$b.type="LOCAL";const tR=$b;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bb.type="SESSION";const zb=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await nR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=fp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function sR(t){jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function iR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function aR(){return Hb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebaseLocalStorageDb",lR=1,Kc="firebaseLocalStorage",Wb="fbase_key";class Qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lu(t,e){return t.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function cR(){const t=indexedDB.deleteDatabase(qb);return new Qa(t).toPromise()}function Sf(){const t=indexedDB.open(qb,lR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kc,{keyPath:Wb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kc)?e(r):(r.close(),await cR(),e(await Sf()))})})}async function G0(t,e,n){const r=Lu(t,!0).put({[Wb]:e,value:n});return new Qa(r).toPromise()}async function uR(t,e){const n=Lu(t,!1).get(e),r=await new Qa(n).toPromise();return r===void 0?null:r.value}function K0(t,e){const n=Lu(t,!0).delete(e);return new Qa(n).toPromise()}const dR=800,hR=3;class Gb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Du._getInstance(aR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await iR(),!this.activeServiceWorker)return;this.sender=new rR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sf();return await G0(e,Gc,"1"),await K0(e,Gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>K0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Lu(s,!1).getAll();return new Qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gb.type="LOCAL";const fR=Gb;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e){return e?Wn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ti(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ti(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ti(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mR(t){return Mb(t.auth,new mp(t),t.bypassAuthState)}function pR(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),$A(n,new mp(t),t.bypassAuthState)}async function gR(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),UA(n,new mp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return gR;case"reauthViaPopup":case"reauthViaRedirect":return pR;default:an(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Wa(2e3,1e4);async function vR(t,e,n){if(kt(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=dr(t);qC(t,e,hp);const s=Kb(r,n);return new _s(r,"signInViaPopup",e,s).executeNotNull()}class _s extends Qb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}_s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="pendingRedirect",ac=new Map;class _R extends Qb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const r=await xR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xR(t,e){const n=TR(e),r=ER(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bR(t,e){ac.set(t._key(),e)}function ER(t){return Wn(t._redirectPersistence)}function TR(t){return oc(wR,t.config.apiKey,t.name)}async function IR(t,e,n=!1){if(kt(t.app))return Promise.reject(Qn(t));const r=dr(t),s=Kb(r,e),o=await new _R(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=10*60*1e3;class NR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Yb(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q0(e))}saveEventToCache(e){this.cachedEventUids.add(Q0(e)),this.lastProcessedEventTime=Date.now()}}function Q0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e={}){return Fn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RR=/^https?/;async function PR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CR(t);for(const n of e)try{if(jR(n))return}catch{}an(t,"unauthorized-domain")}function jR(t){const e=Tf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RR.test(n))return!1;if(AR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new Wa(3e4,6e4);function Y0(){const t=jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LR(t){return new Promise((e,n)=>{var s,i,o;function r(){Y0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y0(),n(yn(t,"network-request-failed"))},timeout:DR.get()})}if((i=(s=jn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=jn().gapi)!=null&&o.load)r();else{const c=_A("iframefcb");return jn()[c]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},Pb(`${wA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw lc=null,e})}let lc=null;function OR(t){return lc=lc||LR(t),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Wa(5e3,15e3),VR="__/auth/iframe",FR="emulator/auth/iframe",UR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ap(e,FR):`https://${t.config.authDomain}/${VR}`,r={apiKey:e.apiKey,appName:t.name,v:Hs},s=$R.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ha(r).slice(1)}`}async function zR(t){const e=await OR(t),n=jn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:BR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),c=jn().setTimeout(()=>{i(o)},MR.get());function u(){jn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qR=500,WR=600,GR="_blank",KR="http://localhost";class X0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QR(t,e,n,r=qR,s=WR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...HR,width:r.toString(),height:s.toString(),top:i,left:o},d=mt().toLowerCase();n&&(c=Ib(d)?GR:n),Eb(d)&&(e=e||KR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[b,I])=>`${g}${b}=${I},`,"");if(uA(d)&&c!=="_self")return YR(e||"",c),new X0(null);const m=window.open(e||"",c,f);X(m,t,"popup-blocked");try{m.focus()}catch{}return new X0(m)}function YR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="__/auth/handler",JR="emulator/auth/handler",ZR=encodeURIComponent("fac");async function J0(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hs,eventId:s};if(e instanceof hp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Nk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ka){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${ZR}=${encodeURIComponent(u)}`:"";return`${eP(t)}?${Ha(c).slice(1)}${d}`}function eP({config:t}){return t.emulator?ap(t,JR):`https://${t.authDomain}/${XR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="webStorageSupport";class tP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zb,this._completeRedirectFn=IR,this._overrideRedirectResult=bR}async _openPopup(e,n,r,s){var o;sr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await J0(e,n,r,Tf(),s);return QR(e,i,fp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await J0(e,n,r,Tf(),s);return sR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zR(e),r=new NR(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dh,{type:dh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[dh];i!==void 0&&n(!!i),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ab()||Tb()||cp()}}const nP=tP;var Z0="@firebase/auth",ev="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iP(t){_n(new on("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rb(t)},d=new gA(r,s,i,u);return SA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_n(new on("auth-internal",e=>{const n=dr(e.getProvider("auth").getImmediate());return(r=>new rP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dt(Z0,ev,sP(t)),Dt(Z0,ev,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=5*60,aP=ib("authIdTokenMaxAge")||oP;let tv=null;const lP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>aP)return;const s=n==null?void 0:n.token;tv!==s&&(tv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cP(t=qa()){const e=ss(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IA(t,{popupRedirectResolver:nP,persistence:[fR,tR,zb]}),r=ib("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=lP(i.toString());YA(n,o,()=>o(n.currentUser)),QA(n,c=>o(c))}}const s=nb("auth");return s&&NA(n,`http://${s}`),n}function uP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}yA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iP("Browser");var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,Xb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function N(){}N.prototype=y.prototype,E.F=y.prototype,E.prototype=new N,E.prototype.constructor=E,E.D=function(C,P,D){for(var k=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)k[ae-2]=arguments[ae];return y.prototype[P].apply(C,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,N){N||(N=0);const C=Array(16);if(typeof y=="string")for(var P=0;P<16;++P)C[P]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(P=0;P<16;++P)C[P]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=E.g[0],N=E.g[1],P=E.g[2];let D=E.g[3],k;k=y+(D^N&(P^D))+C[0]+3614090360&4294967295,y=N+(k<<7&4294967295|k>>>25),k=D+(P^y&(N^P))+C[1]+3905402710&4294967295,D=y+(k<<12&4294967295|k>>>20),k=P+(N^D&(y^N))+C[2]+606105819&4294967295,P=D+(k<<17&4294967295|k>>>15),k=N+(y^P&(D^y))+C[3]+3250441966&4294967295,N=P+(k<<22&4294967295|k>>>10),k=y+(D^N&(P^D))+C[4]+4118548399&4294967295,y=N+(k<<7&4294967295|k>>>25),k=D+(P^y&(N^P))+C[5]+1200080426&4294967295,D=y+(k<<12&4294967295|k>>>20),k=P+(N^D&(y^N))+C[6]+2821735955&4294967295,P=D+(k<<17&4294967295|k>>>15),k=N+(y^P&(D^y))+C[7]+4249261313&4294967295,N=P+(k<<22&4294967295|k>>>10),k=y+(D^N&(P^D))+C[8]+1770035416&4294967295,y=N+(k<<7&4294967295|k>>>25),k=D+(P^y&(N^P))+C[9]+2336552879&4294967295,D=y+(k<<12&4294967295|k>>>20),k=P+(N^D&(y^N))+C[10]+4294925233&4294967295,P=D+(k<<17&4294967295|k>>>15),k=N+(y^P&(D^y))+C[11]+2304563134&4294967295,N=P+(k<<22&4294967295|k>>>10),k=y+(D^N&(P^D))+C[12]+1804603682&4294967295,y=N+(k<<7&4294967295|k>>>25),k=D+(P^y&(N^P))+C[13]+4254626195&4294967295,D=y+(k<<12&4294967295|k>>>20),k=P+(N^D&(y^N))+C[14]+2792965006&4294967295,P=D+(k<<17&4294967295|k>>>15),k=N+(y^P&(D^y))+C[15]+1236535329&4294967295,N=P+(k<<22&4294967295|k>>>10),k=y+(P^D&(N^P))+C[1]+4129170786&4294967295,y=N+(k<<5&4294967295|k>>>27),k=D+(N^P&(y^N))+C[6]+3225465664&4294967295,D=y+(k<<9&4294967295|k>>>23),k=P+(y^N&(D^y))+C[11]+643717713&4294967295,P=D+(k<<14&4294967295|k>>>18),k=N+(D^y&(P^D))+C[0]+3921069994&4294967295,N=P+(k<<20&4294967295|k>>>12),k=y+(P^D&(N^P))+C[5]+3593408605&4294967295,y=N+(k<<5&4294967295|k>>>27),k=D+(N^P&(y^N))+C[10]+38016083&4294967295,D=y+(k<<9&4294967295|k>>>23),k=P+(y^N&(D^y))+C[15]+3634488961&4294967295,P=D+(k<<14&4294967295|k>>>18),k=N+(D^y&(P^D))+C[4]+3889429448&4294967295,N=P+(k<<20&4294967295|k>>>12),k=y+(P^D&(N^P))+C[9]+568446438&4294967295,y=N+(k<<5&4294967295|k>>>27),k=D+(N^P&(y^N))+C[14]+3275163606&4294967295,D=y+(k<<9&4294967295|k>>>23),k=P+(y^N&(D^y))+C[3]+4107603335&4294967295,P=D+(k<<14&4294967295|k>>>18),k=N+(D^y&(P^D))+C[8]+1163531501&4294967295,N=P+(k<<20&4294967295|k>>>12),k=y+(P^D&(N^P))+C[13]+2850285829&4294967295,y=N+(k<<5&4294967295|k>>>27),k=D+(N^P&(y^N))+C[2]+4243563512&4294967295,D=y+(k<<9&4294967295|k>>>23),k=P+(y^N&(D^y))+C[7]+1735328473&4294967295,P=D+(k<<14&4294967295|k>>>18),k=N+(D^y&(P^D))+C[12]+2368359562&4294967295,N=P+(k<<20&4294967295|k>>>12),k=y+(N^P^D)+C[5]+4294588738&4294967295,y=N+(k<<4&4294967295|k>>>28),k=D+(y^N^P)+C[8]+2272392833&4294967295,D=y+(k<<11&4294967295|k>>>21),k=P+(D^y^N)+C[11]+1839030562&4294967295,P=D+(k<<16&4294967295|k>>>16),k=N+(P^D^y)+C[14]+4259657740&4294967295,N=P+(k<<23&4294967295|k>>>9),k=y+(N^P^D)+C[1]+2763975236&4294967295,y=N+(k<<4&4294967295|k>>>28),k=D+(y^N^P)+C[4]+1272893353&4294967295,D=y+(k<<11&4294967295|k>>>21),k=P+(D^y^N)+C[7]+4139469664&4294967295,P=D+(k<<16&4294967295|k>>>16),k=N+(P^D^y)+C[10]+3200236656&4294967295,N=P+(k<<23&4294967295|k>>>9),k=y+(N^P^D)+C[13]+681279174&4294967295,y=N+(k<<4&4294967295|k>>>28),k=D+(y^N^P)+C[0]+3936430074&4294967295,D=y+(k<<11&4294967295|k>>>21),k=P+(D^y^N)+C[3]+3572445317&4294967295,P=D+(k<<16&4294967295|k>>>16),k=N+(P^D^y)+C[6]+76029189&4294967295,N=P+(k<<23&4294967295|k>>>9),k=y+(N^P^D)+C[9]+3654602809&4294967295,y=N+(k<<4&4294967295|k>>>28),k=D+(y^N^P)+C[12]+3873151461&4294967295,D=y+(k<<11&4294967295|k>>>21),k=P+(D^y^N)+C[15]+530742520&4294967295,P=D+(k<<16&4294967295|k>>>16),k=N+(P^D^y)+C[2]+3299628645&4294967295,N=P+(k<<23&4294967295|k>>>9),k=y+(P^(N|~D))+C[0]+4096336452&4294967295,y=N+(k<<6&4294967295|k>>>26),k=D+(N^(y|~P))+C[7]+1126891415&4294967295,D=y+(k<<10&4294967295|k>>>22),k=P+(y^(D|~N))+C[14]+2878612391&4294967295,P=D+(k<<15&4294967295|k>>>17),k=N+(D^(P|~y))+C[5]+4237533241&4294967295,N=P+(k<<21&4294967295|k>>>11),k=y+(P^(N|~D))+C[12]+1700485571&4294967295,y=N+(k<<6&4294967295|k>>>26),k=D+(N^(y|~P))+C[3]+2399980690&4294967295,D=y+(k<<10&4294967295|k>>>22),k=P+(y^(D|~N))+C[10]+4293915773&4294967295,P=D+(k<<15&4294967295|k>>>17),k=N+(D^(P|~y))+C[1]+2240044497&4294967295,N=P+(k<<21&4294967295|k>>>11),k=y+(P^(N|~D))+C[8]+1873313359&4294967295,y=N+(k<<6&4294967295|k>>>26),k=D+(N^(y|~P))+C[15]+4264355552&4294967295,D=y+(k<<10&4294967295|k>>>22),k=P+(y^(D|~N))+C[6]+2734768916&4294967295,P=D+(k<<15&4294967295|k>>>17),k=N+(D^(P|~y))+C[13]+1309151649&4294967295,N=P+(k<<21&4294967295|k>>>11),k=y+(P^(N|~D))+C[4]+4149444226&4294967295,y=N+(k<<6&4294967295|k>>>26),k=D+(N^(y|~P))+C[11]+3174756917&4294967295,D=y+(k<<10&4294967295|k>>>22),k=P+(y^(D|~N))+C[2]+718787259&4294967295,P=D+(k<<15&4294967295|k>>>17),k=N+(D^(P|~y))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+D&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const N=y-this.blockSize,C=this.C;let P=this.h,D=0;for(;D<y;){if(P==0)for(;D<=N;)s(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<y;)if(C[P++]=E.charCodeAt(D++),P==this.blockSize){s(this,C),P=0;break}}else for(;D<y;)if(C[P++]=E[D++],P==this.blockSize){s(this,C),P=0;break}}this.h=P,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var N=E.length-8;N<E.length;++N)E[N]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,N=0;N<4;++N)for(let C=0;C<32;C+=8)E[y++]=this.g[N]>>>C&255;return E};function i(E,y){var N=c;return Object.prototype.hasOwnProperty.call(N,E)?N[E]:N[E]=y(E)}function o(E,y){this.h=y;const N=[];let C=!0;for(let P=E.length-1;P>=0;P--){const D=E[P]|0;C&&D==y||(N[P]=D,C=!1)}this.g=N}var c={};function u(E){return-128<=E&&E<128?i(E,function(y){return new o([y|0],y<0?-1:0)}):new o([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return A(d(-E));const y=[];let N=1;for(let C=0;E>=N;C++)y[C]=E/N|0,N*=4294967296;return new o(y,0)}function f(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return A(f(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(y,8));let C=m;for(let D=0;D<E.length;D+=8){var P=Math.min(8,E.length-D);const k=parseInt(E.substring(D,D+P),y);P<8?(P=d(Math.pow(y,P)),C=C.j(P).add(d(k))):(C=C.j(N),C=C.add(d(k)))}return C}var m=u(0),g=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(S(this))return-A(this).m();let E=0,y=1;for(let N=0;N<this.g.length;N++){const C=this.i(N);E+=(C>=0?C:4294967296+C)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(S(this))return"-"+A(this).toString(E);const y=d(Math.pow(E,6));var N=this;let C="";for(;;){const P=w(N,y).g;N=T(N,P.j(y));let D=((N.g.length>0?N.g[0]:N.h)>>>0).toString(E);if(N=P,I(N))return D+C;for(;D.length<6;)D="0"+D;C=D+C}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function S(E){return E.h==-1}t.l=function(E){return E=T(this,E),S(E)?-1:I(E)?0:1};function A(E){const y=E.g.length,N=[];for(let C=0;C<y;C++)N[C]=~E.g[C];return new o(N,~E.h).add(g)}t.abs=function(){return S(this)?A(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),N=[];let C=0;for(let P=0;P<=y;P++){let D=C+(this.i(P)&65535)+(E.i(P)&65535),k=(D>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);C=k>>>16,D&=65535,k&=65535,N[P]=k<<16|D}return new o(N,N[N.length-1]&-2147483648?-1:0)};function T(E,y){return E.add(A(y))}t.j=function(E){if(I(this)||I(E))return m;if(S(this))return S(E)?A(this).j(A(E)):A(A(this).j(E));if(S(E))return A(this.j(A(E)));if(this.l(b)<0&&E.l(b)<0)return d(this.m()*E.m());const y=this.g.length+E.g.length,N=[];for(var C=0;C<2*y;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(let P=0;P<E.g.length;P++){const D=this.i(C)>>>16,k=this.i(C)&65535,ae=E.i(P)>>>16,ze=E.i(P)&65535;N[2*C+2*P]+=k*ze,v(N,2*C+2*P),N[2*C+2*P+1]+=D*ze,v(N,2*C+2*P+1),N[2*C+2*P+1]+=k*ae,v(N,2*C+2*P+1),N[2*C+2*P+2]+=D*ae,v(N,2*C+2*P+2)}for(E=0;E<y;E++)N[E]=N[2*E+1]<<16|N[2*E];for(E=y;E<2*y;E++)N[E]=0;return new o(N,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function _(E,y){this.g=E,this.h=y}function w(E,y){if(I(y))throw Error("division by zero");if(I(E))return new _(m,m);if(S(E))return y=w(A(E),y),new _(A(y.g),A(y.h));if(S(y))return y=w(E,A(y)),new _(A(y.g),y.h);if(E.g.length>30){if(S(E)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var N=g,C=y;C.l(E)<=0;)N=j(N),C=j(C);var P=V(N,1),D=V(C,1);for(C=V(C,2),N=V(N,2);!I(C);){var k=D.add(C);k.l(E)<=0&&(P=P.add(N),D=k),C=V(C,1),N=V(N,1)}return y=T(E,P.j(y)),new _(P,y)}for(P=m;E.l(y)>=0;){for(N=Math.max(1,Math.floor(E.m()/y.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),D=d(N),k=D.j(y);S(k)||k.l(E)>0;)N-=C,D=d(N),k=D.j(y);I(D)&&(D=g),P=P.add(D),E=T(E,k)}return new _(P,E)}t.B=function(E){return w(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),N=[];for(let C=0;C<y;C++)N[C]=this.i(C)&E.i(C);return new o(N,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),N=[];for(let C=0;C<y;C++)N[C]=this.i(C)|E.i(C);return new o(N,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),N=[];for(let C=0;C<y;C++)N[C]=this.i(C)^E.i(C);return new o(N,this.h^E.h)};function j(E){const y=E.g.length+1,N=[];for(let C=0;C<y;C++)N[C]=E.i(C)<<1|E.i(C-1)>>>31;return new o(N,E.h)}function V(E,y){const N=y>>5;y%=32;const C=E.g.length-N,P=[];for(let D=0;D<C;D++)P[D]=y>0?E.i(D+N)>>>y|E.i(D+N+1)<<32-y:E.i(D+N);return new o(P,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Xb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Br=o}).apply(typeof nv<"u"?nv:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jb,Mo,Zb,cc,Nf,eE,tE,nE;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var L=l[x];if(!(L in p))break e;p=p[L]}l=l[l.length-1],x=p[l],h=h(x),h!=x&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(h){var p=[],x;for(x in h)Object.prototype.hasOwnProperty.call(h,x)&&p.push([x,h[x]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function u(l,h,p){return l.call.apply(l.bind,arguments)}function d(l,h,p){return d=u,d.apply(null,arguments)}function f(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function m(l,h){function p(){}p.prototype=h.prototype,l.Z=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Ob=function(x,L,M){for(var H=Array(arguments.length-2),te=2;te<arguments.length;te++)H[te-2]=arguments[te];return h.prototype[L].apply(x,H)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function b(l){const h=l.length;if(h>0){const p=Array(h);for(let x=0;x<h;x++)p[x]=l[x];return p}return[]}function I(l,h){for(let x=1;x<arguments.length;x++){const L=arguments[x];var p=typeof L;if(p=p!="object"?p:L?Array.isArray(L)?"array":p:"null",p=="array"||p=="object"&&typeof L.length=="number"){p=l.length||0;const M=L.length||0;l.length=p+M;for(let H=0;H<M;H++)l[p+H]=L[H]}else l.push(L)}}class S{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(l){o.setTimeout(()=>{throw l},0)}function T(){var l=E;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class v{constructor(){this.h=this.g=null}add(h,p){const x=_.get();x.set(h,p),this.h?this.h.next=x:this.g=x,this.h=x}}var _=new S(()=>new w,l=>l.reset());class w{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let j,V=!1,E=new v,y=()=>{const l=Promise.resolve(void 0);j=()=>{l.then(N)}};function N(){for(var l;l=T();){try{l.h.call(l.g)}catch(p){A(p)}var h=_;h.j(l),h.h<100&&(h.h++,l.next=h.g,h.g=l)}V=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return l}();function k(l){return/^[\s\xa0]*$/.test(l)}function ae(l,h){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,h)}m(ae,P),ae.prototype.init=function(l,h){const p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget,h||(p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement)),this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),Et=0;function q(l,h,p,x,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!x,this.ha=L,this.key=++Et,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function U(l,h,p){for(const x in l)h.call(p,l[x],x,l)}function O(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function Q(l){const h={};for(const p in l)h[p]=l[p];return h}const le="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(l,h){let p,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(p in x)l[p]=x[p];for(let M=0;M<le.length;M++)p=le[M],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function ve(l){this.src=l,this.g={},this.h=0}ve.prototype.add=function(l,h,p,x,L){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const H=Ne(l,h,x,L);return H>-1?(h=l[H],p||(h.fa=!1)):(h=new q(h,this.src,M,!!x,L),h.fa=p,l.push(h)),h};function me(l,h){const p=h.type;if(p in l.g){var x=l.g[p],L=Array.prototype.indexOf.call(x,h,void 0),M;(M=L>=0)&&Array.prototype.splice.call(x,L,1),M&&(B(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Ne(l,h,p,x){for(let L=0;L<l.length;++L){const M=l[L];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==x)return L}return-1}var Mt="closure_lm_"+(Math.random()*1e6|0),Ks={};function ol(l,h,p,x,L){if(Array.isArray(h)){for(let M=0;M<h.length;M++)ol(l,h[M],p,x,L);return null}return p=gg(p),l&&l[ze]?l.J(h,p,c(x)?!!x.capture:!1,L):as(l,h,p,!1,x,L)}function as(l,h,p,x,L,M){if(!h)throw Error("Invalid event type");const H=c(L)?!!L.capture:!!L;let te=hd(l);if(te||(l[Mt]=te=new ve(l)),p=te.add(h,p,x,H,M),p.proxy)return p;if(x=ud(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)D||(L=H),L===void 0&&(L=!1),l.addEventListener(h.toString(),x,L);else if(l.attachEvent)l.attachEvent(pg(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ud(){function l(p){return h.call(l.src,l.listener,p)}const h=MT;return l}function mg(l,h,p,x,L){if(Array.isArray(h))for(var M=0;M<h.length;M++)mg(l,h[M],p,x,L);else x=c(x)?!!x.capture:!!x,p=gg(p),l&&l[ze]?(l=l.i,M=String(h).toString(),M in l.g&&(h=l.g[M],p=Ne(h,p,x,L),p>-1&&(B(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete l.g[M],l.h--)))):l&&(l=hd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ne(h,p,x,L)),(p=l>-1?h[l]:null)&&dd(p))}function dd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ze])me(h.i,l);else{var p=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(p,x,l.capture):h.detachEvent?h.detachEvent(pg(p),x):h.addListener&&h.removeListener&&h.removeListener(x),(p=hd(h))?(me(p,l),p.h==0&&(p.src=null,h[Mt]=null)):B(l)}}}function pg(l){return l in Ks?Ks[l]:Ks[l]="on"+l}function MT(l,h){if(l.da)l=!0;else{h=new ae(h,this);const p=l.listener,x=l.ha||l.src;l.fa&&dd(l),l=p.call(x,h)}return l}function hd(l){return l=l[Mt],l instanceof ve?l:null}var fd="__closure_events_fn_"+(Math.random()*1e9>>>0);function gg(l){return typeof l=="function"?l:(l[fd]||(l[fd]=function(h){return l.handleEvent(h)}),l[fd])}function ot(){C.call(this),this.i=new ve(this),this.M=this,this.G=null}m(ot,C),ot.prototype[ze]=!0,ot.prototype.removeEventListener=function(l,h,p,x){mg(this,l,h,p,x)};function pt(l,h){var p,x=l.G;if(x)for(p=[];x;x=x.G)p.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new P(h,l);else if(h instanceof P)h.target=h.target||l;else{var L=h;h=new P(x,l),Se(h,L)}L=!0;let M,H;if(p)for(H=p.length-1;H>=0;H--)M=h.g=p[H],L=al(M,x,!0,h)&&L;if(M=h.g=l,L=al(M,x,!0,h)&&L,L=al(M,x,!1,h)&&L,p)for(H=0;H<p.length;H++)M=h.g=p[H],L=al(M,x,!1,h)&&L}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var l=this.i;for(const h in l.g){const p=l.g[h];for(let x=0;x<p.length;x++)B(p[x]);delete l.g[h],l.h--}}this.G=null},ot.prototype.J=function(l,h,p,x){return this.i.add(String(l),h,!1,p,x)},ot.prototype.K=function(l,h,p,x){return this.i.add(String(l),h,!0,p,x)};function al(l,h,p,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();let L=!0;for(let M=0;M<h.length;++M){const H=h[M];if(H&&!H.da&&H.capture==p){const te=H.listener,He=H.ha||H.src;H.fa&&me(l.i,H),L=te.call(He,x)!==!1&&L}}return L&&!x.defaultPrevented}function VT(l,h){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(l,h||0)}function yg(l){l.g=VT(()=>{l.g=null,l.i&&(l.i=!1,yg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class FT extends C{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:yg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(l){C.call(this),this.h=l,this.g={}}m(ro,C);var vg=[];function wg(l){U(l.g,function(h,p){this.g.hasOwnProperty(p)&&dd(h)},l),l.g={}}ro.prototype.N=function(){ro.Z.N.call(this),wg(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=o.JSON.stringify,UT=o.JSON.parse,$T=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function _g(){}function xg(){}var so={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pd(){P.call(this,"d")}m(pd,P);function gd(){P.call(this,"c")}m(gd,P);var ls={},bg=null;function ll(){return bg=bg||new ot}ls.Ia="serverreachability";function Eg(l){P.call(this,ls.Ia,l)}m(Eg,P);function io(l){const h=ll();pt(h,new Eg(h))}ls.STAT_EVENT="statevent";function Tg(l,h){P.call(this,ls.STAT_EVENT,l),this.stat=h}m(Tg,P);function gt(l){const h=ll();pt(h,new Tg(h,l))}ls.Ja="timingevent";function Ig(l,h){P.call(this,ls.Ja,l),this.size=h}m(Ig,P);function oo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},h)}function ao(){this.g=!0}ao.prototype.ua=function(){this.g=!1};function BT(l,h,p,x,L,M){l.info(function(){if(l.g)if(M){var H="",te=M.split("&");for(let pe=0;pe<te.length;pe++){var He=te[pe].split("=");if(He.length>1){const Ke=He[0];He=He[1];const In=Ke.split("_");H=In.length>=2&&In[1]=="type"?H+(Ke+"="+He+"&"):H+(Ke+"=redacted&")}}}else H=null;else H=M;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+h+`
`+p+`
`+H})}function zT(l,h,p,x,L,M,H){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+h+`
`+p+`
`+M+" "+H})}function Qs(l,h,p,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+qT(l,p)+(x?" "+x:"")})}function HT(l,h){l.info(function(){return"TIMEOUT: "+h})}ao.prototype.info=function(){};function qT(l,h){if(!l.g)return h;if(!h)return null;try{const M=JSON.parse(h);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var p=M[l];if(!(p.length<2)){var x=p[1];if(Array.isArray(x)&&!(x.length<1)){var L=x[0];if(L!="noop"&&L!="stop"&&L!="close")for(let H=1;H<x.length;H++)x[H]=""}}}}return md(M)}catch{return h}}var cl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Sg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ng;function yd(){}m(yd,_g),yd.prototype.g=function(){return new XMLHttpRequest},Ng=new yd;function lo(l){return encodeURIComponent(String(l))}function WT(l){var h=1;l=l.split(":");const p=[];for(;h>0&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function fr(l,h,p,x){this.j=l,this.i=h,this.l=p,this.S=x||1,this.V=new ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kg}function kg(){this.i=null,this.g="",this.h=!1}var Cg={},vd={};function wd(l,h,p){l.M=1,l.A=dl(Tn(h)),l.u=p,l.R=!0,Ag(l,null)}function Ag(l,h){l.F=Date.now(),ul(l),l.B=Tn(l.A);var p=l.B,x=l.S;Array.isArray(x)||(x=[String(x)]),zg(p.i,"t",x),l.C=0,p=l.j.L,l.h=new kg,l.g=ay(l.j,p?h:null,!l.u),l.P>0&&(l.O=new FT(d(l.Y,l,l.g),l.P)),h=l.V,p=l.g,x=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(vg[0]=L.toString()),L=vg);for(let M=0;M<L.length;M++){const H=ol(p,L[M],x||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=l.J?Q(l.J):{},l.u?(l.v||(l.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,h)):(l.v="GET",l.g.ea(l.B,l.v,null,h)),io(),BT(l.i,l.v,l.B,l.l,l.S,l.u)}fr.prototype.ba=function(l){l=l.target;const h=this.O;h&&gr(l)==3?h.j():this.Y(l)},fr.prototype.Y=function(l){try{if(l==this.g)e:{const te=gr(this.g),He=this.g.ya(),pe=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||Yg(this.g)))){this.K||te!=4||He==7||(He==8||pe<=0?io(3):io(2)),_d(this);var h=this.g.ca();this.X=h;var p=GT(this);if(this.o=h==200,zT(this.i,this.v,this.B,this.l,this.S,te,h),this.o){if(this.U&&!this.L){t:{if(this.g){var x,L=this.g;if((x=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(x)){var M=x;break t}}M=null}if(l=M)Qs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xd(this,l);else{this.o=!1,this.m=3,gt(12),cs(this),co(this);break e}}if(this.R){l=!0;let Ke;for(;!this.K&&this.C<p.length;)if(Ke=KT(this,p),Ke==vd){te==4&&(this.m=4,gt(14),l=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==Cg){this.m=4,gt(15),Qs(this.i,this.l,p,"[Invalid Chunk]"),l=!1;break}else Qs(this.i,this.l,Ke,null),xd(this,Ke);if(Rg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||p.length!=0||this.h.h||(this.m=1,gt(16),l=!1),this.o=this.o&&l,!l)Qs(this.i,this.l,p,"[Invalid Chunked Response]"),cs(this),co(this);else if(p.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Cd(H),H.P=!0,gt(11))}}else Qs(this.i,this.l,p,null),xd(this,p);te==4&&cs(this),this.o&&!this.K&&(te==4?ry(this.j,this):(this.o=!1,ul(this)))}else lI(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),cs(this),co(this)}}}catch{}finally{}};function GT(l){if(!Rg(l))return l.g.la();const h=Yg(l.g);if(h==="")return"";let p="";const x=h.length,L=gr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return cs(l),co(l),"";l.h.i=new o.TextDecoder}for(let M=0;M<x;M++)l.h.h=!0,p+=l.h.i.decode(h[M],{stream:!(L&&M==x-1)});return h.length=0,l.h.g+=p,l.C=0,l.h.g}function Rg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function KT(l,h){var p=l.C,x=h.indexOf(`
`,p);return x==-1?vd:(p=Number(h.substring(p,x)),isNaN(p)?Cg:(x+=1,x+p>h.length?vd:(h=h.slice(x,x+p),l.C=x+p,h)))}fr.prototype.cancel=function(){this.K=!0,cs(this)};function ul(l){l.T=Date.now()+l.H,Pg(l,l.H)}function Pg(l,h){if(l.D!=null)throw Error("WatchDog timer not null");l.D=oo(d(l.aa,l),h)}function _d(l){l.D&&(o.clearTimeout(l.D),l.D=null)}fr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(HT(this.i,this.B),this.M!=2&&(io(),gt(17)),cs(this),this.m=2,co(this)):Pg(this,this.T-l)};function co(l){l.j.I==0||l.K||ry(l.j,l)}function cs(l){_d(l);var h=l.O;h&&typeof h.dispose=="function"&&h.dispose(),l.O=null,wg(l.V),l.g&&(h=l.g,l.g=null,h.abort(),h.dispose())}function xd(l,h){try{var p=l.j;if(p.I!=0&&(p.g==l||bd(p.h,l))){if(!l.L&&bd(p.h,l)&&p.I==3){try{var x=p.Ba.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<l.F)gl(p),ml(p);else break e;kd(p),gt(18)}}else p.xa=L[1],0<p.xa-p.K&&L[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=oo(d(p.Va,p),6e3));Lg(p.h)<=1&&p.ta&&(p.ta=void 0)}else ds(p,11)}else if((l.L||p.g==l)&&gl(p),!k(h))for(L=p.Ba.g.parse(h),h=0;h<L.length;h++){let pe=L[h];const Ke=pe[0];if(!(Ke<=p.K))if(p.K=Ke,pe=pe[1],p.I==2)if(pe[0]=="c"){p.M=pe[1],p.ba=pe[2];const In=pe[3];In!=null&&(p.ka=In,p.j.info("VER="+p.ka));const hs=pe[4];hs!=null&&(p.za=hs,p.j.info("SVER="+p.za));const yr=pe[5];yr!=null&&typeof yr=="number"&&yr>0&&(x=1.5*yr,p.O=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const vr=l.g;if(vr){const vl=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var M=x.h;M.g||vl.indexOf("spdy")==-1&&vl.indexOf("quic")==-1&&vl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ed(M,M.h),M.h=null))}if(x.G){const Ad=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ad&&(x.wa=Ad,we(x.J,x.G,Ad))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-l.F,p.j.info("Handshake RTT: "+p.T+"ms")),x=p;var H=l;if(x.na=oy(x,x.L?x.ba:null,x.W),H.L){Og(x.h,H);var te=H,He=x.O;He&&(te.H=He),te.D&&(_d(te),ul(te)),x.g=H}else ty(x);p.i.length>0&&pl(p)}else pe[0]!="stop"&&pe[0]!="close"||ds(p,7);else p.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?ds(p,7):Nd(p):pe[0]!="noop"&&p.l&&p.l.qa(pe),p.A=0)}}io(4)}catch{}}var QT=class{constructor(l,h){this.g=l,this.map=h}};function jg(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Lg(l){return l.h?1:l.g?l.g.size:0}function bd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ed(l,h){l.g?l.g.add(h):l.h=h}function Og(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}jg.prototype.cancel=function(){if(this.i=Mg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Mg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.G);return h}return b(l.i)}var Vg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YT(l,h){if(l){l=l.split("&");for(let p=0;p<l.length;p++){const x=l[p].indexOf("=");let L,M=null;x>=0?(L=l[p].substring(0,x),M=l[p].substring(x+1)):L=l[p],h(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function mr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;l instanceof mr?(this.l=l.l,uo(this,l.j),this.o=l.o,this.g=l.g,ho(this,l.u),this.h=l.h,Td(this,Hg(l.i)),this.m=l.m):l&&(h=String(l).match(Vg))?(this.l=!1,uo(this,h[1]||"",!0),this.o=fo(h[2]||""),this.g=fo(h[3]||"",!0),ho(this,h[4]),this.h=fo(h[5]||"",!0),Td(this,h[6]||"",!0),this.m=fo(h[7]||"")):(this.l=!1,this.i=new po(null,this.l))}mr.prototype.toString=function(){const l=[];var h=this.j;h&&l.push(mo(h,Fg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(mo(h,Fg,!0),"@"),l.push(lo(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&l.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(mo(p,p.charAt(0)=="/"?ZT:JT,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",mo(p,tI)),l.join("")},mr.prototype.resolve=function(l){const h=Tn(this);let p=!!l.j;p?uo(h,l.j):p=!!l.o,p?h.o=l.o:p=!!l.g,p?h.g=l.g:p=l.u!=null;var x=l.h;if(p)ho(h,l.u);else if(p=!!l.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var L=h.h.lastIndexOf("/");L!=-1&&(x=h.h.slice(0,L+1)+x)}if(L=x,L==".."||L==".")x="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){x=L.lastIndexOf("/",0)==0,L=L.split("/");const M=[];for(let H=0;H<L.length;){const te=L[H++];te=="."?x&&H==L.length&&M.push(""):te==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),x&&H==L.length&&M.push("")):(M.push(te),x=!0)}x=M.join("/")}else x=L}return p?h.h=x:p=l.i.toString()!=="",p?Td(h,Hg(l.i)):p=!!l.m,p&&(h.m=l.m),h};function Tn(l){return new mr(l)}function uo(l,h,p){l.j=p?fo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function ho(l,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);l.u=h}else l.u=null}function Td(l,h,p){h instanceof po?(l.i=h,nI(l.i,l.l)):(p||(h=mo(h,eI)),l.i=new po(h,l.l))}function we(l,h,p){l.i.set(h,p)}function dl(l){return we(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function fo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function mo(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,XT),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function XT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Fg=/[#\/\?@]/g,JT=/[#\?:]/g,ZT=/[#\?]/g,eI=/[#\?@]/g,tI=/#/g;function po(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function us(l){l.g||(l.g=new Map,l.h=0,l.i&&YT(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=po.prototype,t.add=function(l,h){us(this),this.i=null,l=Ys(this,l);let p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Ug(l,h){us(l),h=Ys(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function $g(l,h){return us(l),h=Ys(l,h),l.g.has(h)}t.forEach=function(l,h){us(this),this.g.forEach(function(p,x){p.forEach(function(L){l.call(h,L,x,this)},this)},this)};function Bg(l,h){us(l);let p=[];if(typeof h=="string")$g(l,h)&&(p=p.concat(l.g.get(Ys(l,h))));else for(l=Array.from(l.g.values()),h=0;h<l.length;h++)p=p.concat(l[h]);return p}t.set=function(l,h){return us(this),this.i=null,l=Ys(this,l),$g(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=Bg(this,l),l.length>0?String(l[0]):h):h};function zg(l,h,p){Ug(l,h),p.length>0&&(l.i=null,l.g.set(Ys(l,h),b(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(let x=0;x<h.length;x++){var p=h[x];const L=lo(p);p=Bg(this,p);for(let M=0;M<p.length;M++){let H=L;p[M]!==""&&(H+="="+lo(p[M])),l.push(H)}}return this.i=l.join("&")};function Hg(l){const h=new po;return h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),h}function Ys(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function nI(l,h){h&&!l.j&&(us(l),l.i=null,l.g.forEach(function(p,x){const L=x.toLowerCase();x!=L&&(Ug(this,x),zg(this,L,p))},l)),l.j=h}function rI(l,h){const p=new ao;if(o.Image){const x=new Image;x.onload=f(pr,p,"TestLoadImage: loaded",!0,h,x),x.onerror=f(pr,p,"TestLoadImage: error",!1,h,x),x.onabort=f(pr,p,"TestLoadImage: abort",!1,h,x),x.ontimeout=f(pr,p,"TestLoadImage: timeout",!1,h,x),o.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function sI(l,h){const p=new ao,x=new AbortController,L=setTimeout(()=>{x.abort(),pr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(M=>{clearTimeout(L),M.ok?pr(p,"TestPingServer: ok",!0,h):pr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),pr(p,"TestPingServer: error",!1,h)})}function pr(l,h,p,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(p)}catch{}}function iI(){this.g=new $T}function Id(l){this.i=l.Sb||null,this.h=l.ab||!1}m(Id,_g),Id.prototype.g=function(){return new hl(this.i,this.h)};function hl(l,h){ot.call(this),this.H=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(hl,ot),t=hl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=h,this.readyState=1,yo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(h.body=l),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,yo(this)),this.g&&(this.readyState=3,yo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function qg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?go(this):yo(this),this.readyState==3&&qg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,go(this))},t.Na=function(l){this.g&&(this.response=l,go(this))},t.ga=function(){this.g&&go(this)};function go(l){l.readyState=4,l.l=null,l.j=null,l.B=null,yo(l)}t.setRequestHeader=function(l,h){this.A.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function yo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Wg(l){let h="";return U(l,function(p,x){h+=x,h+=":",h+=p,h+=`\r
`}),h}function Sd(l,h,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=Wg(p),typeof l=="string"?p!=null&&lo(p):we(l,h,p))}function De(l){ot.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(De,ot);var oI=/^https?$/i,aI=["POST","PUT"];t=De.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,h,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ng.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){Gg(this,M);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)p.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const M of x.keys())p.set(M,x.get(M));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(aI,h,void 0)>=0)||x||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,H]of p)this.g.setRequestHeader(M,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){Gg(this,M)}};function Gg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.o=5,Kg(l),fl(l)}function Kg(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,pt(this,"complete"),pt(this,"abort"),fl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fl(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Qg(this):this.Xa())},t.Xa=function(){Qg(this)};function Qg(l){if(l.h&&typeof i<"u"){if(l.v&&gr(l)==4)setTimeout(l.Ca.bind(l),0);else if(pt(l,"readystatechange"),gr(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var x;if(x=M===0){let H=String(l.D).match(Vg)[1]||null;!H&&o.self&&o.self.location&&(H=o.self.location.protocol.slice(0,-1)),x=!oI.test(H?H.toLowerCase():"")}p=x}if(p)pt(l,"complete"),pt(l,"success");else{l.o=6;try{var L=gr(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",Kg(l)}}finally{fl(l)}}}}function fl(l,h){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const p=l.g;l.g=null,h||pt(l,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),UT(h)}};function Yg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function lI(l){const h={};l=(l.g&&gr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(k(l[x]))continue;var p=WT(l[x]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[L]||[];h[L]=M,M.push(p)}O(h,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vo(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Xg(l){this.za=0,this.i=[],this.j=new ao,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vo("baseRetryDelayMs",5e3,l),this.Za=vo("retryDelaySeedMs",1e4,l),this.Ta=vo("forwardChannelMaxRetries",2,l),this.va=vo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new jg(l&&l.concurrentRequestLimit),this.Ba=new iI,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xg.prototype,t.ka=8,t.I=1,t.connect=function(l,h,p,x){gt(0),this.W=l,this.H=h||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.J=oy(this,null,this.W),pl(this)};function Nd(l){if(Jg(l),l.I==3){var h=l.V++,p=Tn(l.J);if(we(p,"SID",l.M),we(p,"RID",h),we(p,"TYPE","terminate"),wo(l,p),h=new fr(l,l.j,h),h.M=2,h.A=dl(Tn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=ay(h.j,null),h.g.ea(h.A)),h.F=Date.now(),ul(h)}iy(l)}function ml(l){l.g&&(Cd(l),l.g.cancel(),l.g=null)}function Jg(l){ml(l),l.v&&(o.clearTimeout(l.v),l.v=null),gl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function pl(l){if(!Dg(l.h)&&!l.m){l.m=!0;var h=l.Ea;j||y(),V||(j(),V=!0),E.add(h,l),l.D=0}}function cI(l,h){return Lg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=h.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=oo(d(l.Ea,l,h),sy(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new fr(this,this.j,l);let M=this.o;if(this.U&&(M?(M=Q(M),Se(M,this.U)):M=this.U),this.u!==null||this.R||(L.J=M,M=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ey(this,L,h),p=Tn(this.J),we(p,"RID",l),we(p,"CVER",22),this.G&&we(p,"X-HTTP-Session-Id",this.G),wo(this,p),M&&(this.R?h="headers="+lo(Wg(M))+"&"+h:this.u&&Sd(p,this.u,M)),Ed(this.h,L),this.Ra&&we(p,"TYPE","init"),this.S?(we(p,"$req",h),we(p,"SID","null"),L.U=!0,wd(L,p,null)):wd(L,p,h),this.I=2}}else this.I==3&&(l?Zg(this,l):this.i.length==0||Dg(this.h)||Zg(this))};function Zg(l,h){var p;h?p=h.l:p=l.V++;const x=Tn(l.J);we(x,"SID",l.M),we(x,"RID",p),we(x,"AID",l.K),wo(l,x),l.u&&l.o&&Sd(x,l.u,l.o),p=new fr(l,l.j,p,l.D+1),l.u===null&&(p.J=l.o),h&&(l.i=h.G.concat(l.i)),h=ey(l,p,1e3),p.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Ed(l.h,p),wd(p,x,h)}function wo(l,h){l.H&&U(l.H,function(p,x){we(h,x,p)}),l.l&&U({},function(p,x){we(h,x,p)})}function ey(l,h,p){p=Math.min(l.i.length,p);const x=l.l?d(l.l.Ka,l.l,l):null;e:{var L=l.i;let te=-1;for(;;){const He=["count="+p];te==-1?p>0?(te=L[0].g,He.push("ofs="+te)):te=0:He.push("ofs="+te);let pe=!0;for(let Ke=0;Ke<p;Ke++){var M=L[Ke].g;const In=L[Ke].map;if(M-=te,M<0)te=Math.max(0,L[Ke].g-100),pe=!1;else try{M="req"+M+"_"||"";try{var H=In instanceof Map?In:Object.entries(In);for(const[hs,yr]of H){let vr=yr;c(yr)&&(vr=md(yr)),He.push(M+hs+"="+encodeURIComponent(vr))}}catch(hs){throw He.push(M+"type="+encodeURIComponent("_badmap")),hs}}catch{x&&x(In)}}if(pe){H=He.join("&");break e}}H=void 0}return l=l.i.splice(0,p),h.G=l,H}function ty(l){if(!l.g&&!l.v){l.Y=1;var h=l.Da;j||y(),V||(j(),V=!0),E.add(h,l),l.A=0}}function kd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=oo(d(l.Da,l),sy(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,ny(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=oo(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),ml(this),ny(this))};function Cd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function ny(l){l.g=new fr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var h=Tn(l.na);we(h,"RID","rpc"),we(h,"SID",l.M),we(h,"AID",l.K),we(h,"CI",l.F?"0":"1"),!l.F&&l.ia&&we(h,"TO",l.ia),we(h,"TYPE","xmlhttp"),wo(l,h),l.u&&l.o&&Sd(h,l.u,l.o),l.O&&(l.g.H=l.O);var p=l.g;l=l.ba,p.M=1,p.A=dl(Tn(h)),p.u=null,p.R=!0,Ag(p,l)}t.Va=function(){this.C!=null&&(this.C=null,ml(this),kd(this),gt(19))};function gl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function ry(l,h){var p=null;if(l.g==h){gl(l),Cd(l),l.g=null;var x=2}else if(bd(l.h,h))p=h.G,Og(l.h,h),x=1;else return;if(l.I!=0){if(h.o)if(x==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var L=l.D;x=ll(),pt(x,new Ig(x,p)),pl(l)}else ty(l);else if(L=h.m,L==3||L==0&&h.X>0||!(x==1&&cI(l,h)||x==2&&kd(l)))switch(p&&p.length>0&&(h=l.h,h.i=h.i.concat(p)),L){case 1:ds(l,5);break;case 4:ds(l,10);break;case 3:ds(l,6);break;default:ds(l,2)}}}function sy(l,h){let p=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(p*=2),p*h}function ds(l,h){if(l.j.info("Error code "+h),h==2){var p=d(l.bb,l),x=l.Ua;const L=!x;x=new mr(x||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||uo(x,"https"),dl(x),L?rI(x.toString(),p):sI(x.toString(),p)}else gt(2);l.I=0,l.l&&l.l.pa(h),iy(l),Jg(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function iy(l){if(l.I=0,l.ja=[],l.l){const h=Mg(l.h);(h.length!=0||l.i.length!=0)&&(I(l.ja,h),I(l.ja,l.i),l.h.i.length=0,b(l.i),l.i.length=0),l.l.oa()}}function oy(l,h,p){var x=p instanceof mr?Tn(p):new mr(p);if(x.g!="")h&&(x.g=h+"."+x.g),ho(x,x.u);else{var L=o.location;x=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;const M=new mr(null);x&&uo(M,x),h&&(M.g=h),L&&ho(M,L),p&&(M.h=p),x=M}return p=l.G,h=l.wa,p&&h&&we(x,p,h),we(x,"VER",l.ka),wo(l,x),x}function ay(l,h,p){if(h&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Aa&&!l.ma?new De(new Id({ab:p})):new De(l.ma),h.Fa(l.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ly(){}t=ly.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yl(){}yl.prototype.g=function(l,h){return new Vt(l,h)};function Vt(l,h){ot.call(this),this.g=new Xg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(l?l["X-WebChannel-Client-Profile"]=h.sa:l={"X-WebChannel-Client-Profile":h.sa}),this.g.U=l,(l=h&&h.Qb)&&!k(l)&&(this.g.u=l),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.G=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Xs(this)}m(Vt,ot),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Nd(this.g)},Vt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.v&&(p={},p.__data__=md(l),l=p);h.i.push(new QT(h.Ya++,l)),h.I==3&&pl(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Nd(this.g),delete this.g,Vt.Z.N.call(this)};function cy(l){pd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}m(cy,pd);function uy(){gd.call(this),this.status=1}m(uy,gd);function Xs(l){this.g=l}m(Xs,ly),Xs.prototype.ra=function(){pt(this.g,"a")},Xs.prototype.qa=function(l){pt(this.g,new cy(l))},Xs.prototype.pa=function(l){pt(this.g,new uy)},Xs.prototype.oa=function(){pt(this.g,"b")},yl.prototype.createWebChannel=yl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,nE=function(){return new yl},tE=function(){return ll()},eE=ls,Nf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,cc=cl,Sg.COMPLETE="complete",Zb=Sg,xg.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",ot.prototype.listen=ot.prototype.J,Mo=xg,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,Jb=De}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",sv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ki="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Pu("@firebase/firestore");function ei(){return Os.logLevel}function G(t,...e){if(Os.logLevel<=re.DEBUG){const n=e.map(pp);Os.debug(`Firestore (${Ki}): ${t}`,...n)}}function ir(t,...e){if(Os.logLevel<=re.ERROR){const n=e.map(pp);Os.error(`Firestore (${Ki}): ${t}`,...n)}}function Li(t,...e){if(Os.logLevel<=re.WARN){const n=e.map(pp);Os.warn(`Firestore (${Ki}): ${t}`,...n)}}function pp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,rE(t,r,n)}function rE(t,e,n){let r=`FIRESTORE (${Ki}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function de(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||rE(e,s,r)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class hP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fP{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new sE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class mP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function kf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return hh(s)===hh(i)?se(s,i):hh(s)?1:-1}return se(t.length,e.length)}const vP=55296,wP=57343;function hh(t){const e=t.charCodeAt(0);return e>=vP&&e<=wP}function Oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="__name__";class kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=kn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return se(e.length,n.length)}static compareSegments(e,n){const r=kn.isNumericId(e),s=kn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?kn.extractNumericId(e).compare(kn.extractNumericId(n)):kf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Br.fromString(e.substring(4,e.length-2))}}class ge extends kn{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const _P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends kn{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return _P.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ov}static keyField(){return new nt([ov])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(ge.fromString(e))}static fromName(e){return new Y(ge.fromString(e).popFirst(5))}static empty(){return new Y(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xP(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function av(t){if(!Y.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lv(t){if(Y.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ou(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ou(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ya(t,e){if(!oE(t))throw new W(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-62135596800,uv=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*uv);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cv)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uv}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ya(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Be("string",xe._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new xe(0,0))}static max(){return new Z(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=-1;function bP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new Gr(s,Y.empty(),e)}function EP(t){return new Gr(t.readTime,t.key,Sa)}class Gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gr(Z.min(),Y.empty(),Sa)}static max(){return new Gr(Z.max(),Y.empty(),Sa)}}function TP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==IP)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function NP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=-1;function Vu(t){return t==null}function Qc(t){return t===0&&1/t==-1/0}function kP(t){return typeof t=="number"&&Number.isInteger(t)&&!Qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="";function CP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dv(e)),e=AP(t.get(n),e);return dv(e)}function AP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case aE:n+="";break;default:n+=i}}return n}function dv(t){return t+aE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fl(this.root,e,this.comparator,!0)}}class Fl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tt.RED,this.left=s??tt.EMPTY,this.right=i??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new Ge(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new cE("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const RP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=RP.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="server_timestamp",dE="__type__",hE="__previous_value__",fE="__local_write_time__";function vp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dE])==null?void 0:r.stringValue)===uE}function Fu(t){const e=t.mapValue.fields[hE];return vp(e)?Fu(e):e}function Na(t){const e=Kr(t.mapValue.fields[fE].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n,r,s,i,o,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Yc="(default)";class ka{constructor(e,n){this.projectId=e,this.database=n||Yc}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="__type__",jP="__max__",Ul={mapValue:{}},pE="__vector__",Xc="value";function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vp(t)?4:LP(t)?9007199254740991:DP(t)?10:11:J(28295,{value:t})}function Vn(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Na(t).isEqual(Na(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Kr(s.timestampValue),c=Kr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qr(s.bytesValue).isEqual(Qr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),c=Me(i.doubleValue);return o===c?Qc(o)===Qc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Oi(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(hv(o)!==hv(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Vn(o[u],c[u])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function Ca(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function Mi(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Me(i.integerValue||i.doubleValue),u=Me(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return mv(t.timestampValue,e.timestampValue);case 4:return mv(Na(t),Na(e));case 5:return kf(t.stringValue,e.stringValue);case 6:return function(i,o){const c=Qr(i),u=Qr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=se(c[d],u[d]);if(f!==0)return f}return se(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=se(Me(i.latitude),Me(o.latitude));return c!==0?c:se(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,b,I,S;const c=i.fields||{},u=o.fields||{},d=(g=c[Xc])==null?void 0:g.arrayValue,f=(b=u[Xc])==null?void 0:b.arrayValue,m=se(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((S=f==null?void 0:f.values)==null?void 0:S.length)||0);return m!==0?m:pv(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ul.mapValue&&o===Ul.mapValue)return 0;if(i===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=kf(u[m],f[m]);if(g!==0)return g;const b=Mi(c[u[m]],d[f[m]]);if(b!==0)return b}return se(u.length,f.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function mv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=Kr(t),r=Kr(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function pv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Mi(n[s],r[s]);if(i)return i}return se(n.length,r.length)}function Vi(t){return Cf(t)}function Cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Cf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Cf(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function uc(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fu(t);return e?16+uc(e):16;case 5:return 2*t.stringValue.length;case 6:return Qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+uc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return is(r.fields,(i,o)=>{s+=i.length+uc(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function gv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Af(t){return!!t&&"integerValue"in t}function wp(t){return!!t&&"arrayValue"in t}function yv(t){return!!t&&"nullValue"in t}function vv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dc(t){return!!t&&"mapValue"in t}function DP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mE])==null?void 0:r.stringValue)===pE}function Zo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zo(t.arrayValue.values[n]);return e}return{...t}}function LP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Zo(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(Zo(this.value))}}function gE(t){const e=[];return is(t.fields,(n,r)=>{const s=new nt([n]);if(dc(r)){const i=gE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new ht(e,0,Z.min(),Z.min(),Z.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,Z.min(),Z.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,Z.min(),Z.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this.position=e,this.inclusive=n}}function wv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Mi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n="asc"){this.field=e,this.dir=n}}function OP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{}class $e extends yE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VP(e,n,r):n==="array-contains"?new $P(e,r):n==="in"?new BP(e,r):n==="not-in"?new zP(e,r):n==="array-contains-any"?new HP(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FP(e,r):new UP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mi(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends yE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xn(e,n)}matches(e){return vE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vE(t){return t.op==="and"}function wE(t){return MP(t)&&vE(t)}function MP(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function Rf(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+Vi(t.value);if(wE(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function _E(t,e){return t instanceof $e?function(r,s){return s instanceof $e&&r.op===s.op&&r.field.isEqual(s.field)&&Vn(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&_E(o,s.filters[c]),!0):!1}(t,e):void J(19439)}function xE(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${Vi(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(xE).join(" ,")+"}"}(t):"Filter"}class VP extends $e{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class FP extends $e{constructor(e,n){super(e,"in",n),this.keys=bE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UP extends $e{constructor(e,n){super(e,"not-in",n),this.keys=bE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class $P extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wp(n)&&Ca(n.arrayValue,this.value)}}class BP extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ca(this.value.arrayValue,n)}}class zP extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ca(this.value.arrayValue,n)}}class HP extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ca(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function xv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qP(t,e,n,r,s,i,o)}function _p(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vi(r)).join(",")),e.Te=n}return e.Te}function xp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_E(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_v(t.startAt,e.startAt)&&_v(t.endAt,e.endAt)}function Pf(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WP(t,e,n,r,s,i,o,c){return new Xi(t,e,n,r,s,i,o,c)}function Uu(t){return new Xi(t)}function bv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EE(t){return t.collectionGroup!==null}function ea(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ge(nt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Aa(i,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Aa(nt.keyField(),r))}return e.Ie}function Dn(t){const e=ee(t);return e.Ee||(e.Ee=GP(e,ea(t))),e.Ee}function GP(t,e){if(t.limitType==="F")return xv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Aa(s.field,i)});const n=t.endAt?new Jc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jc(t.startAt.position,t.startAt.inclusive):null;return xv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jf(t,e){const n=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zc(t,e,n){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $u(t,e){return xp(Dn(t),Dn(e))&&t.limitType===e.limitType}function TE(t){return`${_p(Dn(t))}|lt:${t.limitType}`}function ti(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xE(s)).join(", ")}]`),Vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Vi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Vi(s)).join(",")),`Target(${r})`}(Dn(t))}; limitType=${t.limitType})`}function Bu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ea(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=wv(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,ea(r),s)||r.endAt&&!function(o,c,u){const d=wv(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,ea(r),s))}(t,e)}function KP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IE(t){return(e,n)=>{let r=!1;for(const s of ea(t)){const i=QP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QP(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Mi(u,d):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new Pe(Y.comparator);function or(){return YP}const SE=new Pe(Y.comparator);function Vo(...t){let e=SE;for(const n of t)e=e.insert(n.key,n);return e}function NE(t){let e=SE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xs(){return ta()}function kE(){return ta()}function ta(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const XP=new Pe(Y.comparator),JP=new Ge(Y.comparator);function ie(...t){let e=JP;for(const n of t)e=e.add(n);return e}const ZP=new Ge(se);function ej(){return ZP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qc(e)?"-0":e}}function CE(t){return{integerValue:""+t}}function tj(t,e){return kP(e)?CE(e):bp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this._=void 0}}function nj(t,e,n){return t instanceof Ra?function(s,i){const o={fields:{[dE]:{stringValue:uE},[fE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&vp(i)&&(i=Fu(i)),i&&(o.fields[hE]=i),{mapValue:o}}(n,e):t instanceof Pa?RE(t,e):t instanceof ja?PE(t,e):function(s,i){const o=AE(s,i),c=Ev(o)+Ev(s.Ae);return Af(o)&&Af(s.Ae)?CE(c):bp(s.serializer,c)}(t,e)}function rj(t,e,n){return t instanceof Pa?RE(t,e):t instanceof ja?PE(t,e):n}function AE(t,e){return t instanceof eu?function(r){return Af(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ra extends zu{}class Pa extends zu{constructor(e){super(),this.elements=e}}function RE(t,e){const n=jE(e);for(const r of t.elements)n.some(s=>Vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ja extends zu{constructor(e){super(),this.elements=e}}function PE(t,e){let n=jE(e);for(const r of t.elements)n=n.filter(s=>!Vn(s,r));return{arrayValue:{values:n}}}class eu extends zu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ev(t){return Me(t.integerValue||t.doubleValue)}function jE(t){return wp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.field=e,this.transform=n}}function ij(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Pa&&s instanceof Pa||r instanceof ja&&s instanceof ja?Oi(r.elements,s.elements,Vn):r instanceof eu&&s instanceof eu?Vn(r.Ae,s.Ae):r instanceof Ra&&s instanceof Ra}(t.transform,e.transform)}class oj{constructor(e,n){this.version=e,this.transformResults=n}}class nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hu{}function DE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ep(t.key,nn.none()):new Xa(t.key,t.data,nn.none());{const n=t.data,r=Ct.empty();let s=new Ge(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new os(t.key,r,new Bt(s.toArray()),nn.none())}}function aj(t,e,n){t instanceof Xa?function(s,i,o){const c=s.value.clone(),u=Iv(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof os?function(s,i,o){if(!hc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Iv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(LE(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function na(t,e,n,r){return t instanceof Xa?function(i,o,c,u){if(!hc(i.precondition,o))return c;const d=i.value.clone(),f=Sv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(i,o,c,u){if(!hc(i.precondition,o))return c;const d=Sv(i.fieldTransforms,u,o),f=o.data;return f.setAll(LE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,c){return hc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function lj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=AE(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function Tv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Oi(r,s,(i,o)=>ij(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xa extends Hu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class os extends Hu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Iv(t,e,n){const r=new Map;de(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,rj(o,c,n[s]))}return r}function Sv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,nj(i,o,e))}return r}class Ep extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cj extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&aj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=na(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=na(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=DE(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(n,r)=>Tv(n,r))&&Oi(this.baseMutations,e.baseMutations,(n,r)=>Tv(n,r))}}class Tp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return XP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ce;function fj(t){switch(t){case F.OK:return J(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function OE(t){if(t===void 0)return ir("GRPC error has no .code"),F.UNKNOWN;switch(t){case Fe.OK:return F.OK;case Fe.CANCELLED:return F.CANCELLED;case Fe.UNKNOWN:return F.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return F.INTERNAL;case Fe.UNAVAILABLE:return F.UNAVAILABLE;case Fe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Fe.NOT_FOUND:return F.NOT_FOUND;case Fe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Fe.ABORTED:return F.ABORTED;case Fe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Fe.DATA_LOSS:return F.DATA_LOSS;default:return J(39323,{code:t})}}(ce=Fe||(Fe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=new Br([4294967295,4294967295],0);function Nv(t){const e=mj().encode(t),n=new Xb;return n.update(e),new Uint8Array(n.digest())}function kv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Br([n,r],0),new Br([s,i],0)]}class Ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fo(`Invalid padding: ${n}`);if(r<0)throw new Fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Br.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Br.fromNumber(r)));return s.compare(pj)===1&&(s=new Br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nv(e),[r,s]=kv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ip(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=Nv(e),[r,s]=kv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qu(Z.min(),s,new Pe(se),or(),ie())}}class Ja{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ja(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class ME{constructor(e,n){this.targetId=e,this.Ce=n}}class VE{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cv{constructor(){this.ve=0,this.Fe=Av(),this.Me=it.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new Ja(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Av()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gj{constructor(e){this.Ge=e,this.ze=new Map,this.je=or(),this.Je=$l(),this.He=$l(),this.Ye=new Pe(se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Pf(i))if(r===0){const o=new Y(i.path);this.et(n,o,ht.newNoDocument(o,Z.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Qr(r).toUint8Array()}catch(u){if(u instanceof cE)return Li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ip(o,s,i)}catch(u){return Li(u instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Pf(c.target)){const u=new Y(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ht.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ie();this.He.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new qu(e,n,this.Ye,this.je,r);return this.je=or(),this.Je=$l(),this.He=$l(),this.Ye=new Pe(se),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Cv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ge(se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ge(se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $l(){return new Pe(Y.comparator)}function Av(){return new Pe(Y.comparator)}const yj={asc:"ASCENDING",desc:"DESCENDING"},vj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wj={and:"AND",or:"OR"};class _j{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Df(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function tu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xj(t,e){return tu(t,e.toTimestamp())}function Ln(t){return de(!!t,49232),Z.fromTimestamp(function(n){const r=Kr(n);return new xe(r.seconds,r.nanos)}(t))}function Sp(t,e){return Lf(t,e).canonicalString()}function Lf(t,e){const n=function(s){return new ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UE(t){const e=ge.fromString(t);return de(qE(e),10190,{key:e.toString()}),e}function Of(t,e){return Sp(t.databaseId,e.path)}function fh(t,e){const n=UE(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(BE(n))}function $E(t,e){return Sp(t.databaseId,e)}function bj(t){const e=UE(t);return e.length===4?ge.emptyPath():BE(e)}function Mf(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BE(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Rv(t,e,n){return{name:Of(t,e),fields:n.value.mapValue.fields}}function Ej(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(de(f===void 0||typeof f=="string",58123),it.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?F.UNKNOWN:OE(d.code);return new W(f,d.message||"")}(o);n=new VE(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fh(t,r.document.name),i=Ln(r.document.updateTime),o=r.document.createTime?Ln(r.document.createTime):Z.min(),c=new Ct({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fh(t,r.document),i=r.readTime?Ln(r.readTime):Z.min(),o=ht.newNoDocument(s,i),c=r.removedTargetIds||[];n=new fc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fh(t,r.document),i=r.removedTargetIds||[];n=new fc([],i,s,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new hj(s,i),c=r.targetId;n=new ME(c,o)}}return n}function Tj(t,e){let n;if(e instanceof Xa)n={update:Rv(t,e.key,e.value)};else if(e instanceof Ep)n={delete:Of(t,e.key)};else if(e instanceof os)n={update:Rv(t,e.key,e.data),updateMask:jj(e.fieldMask)};else{if(!(e instanceof cj))return J(16599,{Vt:e.type});n={verify:Of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ja)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof eu)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function Ij(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Ln(s.updateTime):Ln(i);return o.isEqual(Z.min())&&(o=Ln(i)),new oj(o,s.transformResults||[])}(n,e))):[]}function Sj(t,e){return{documents:[$E(t,e.path)]}}function Nj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$E(t,s);const i=function(d){if(d.length!==0)return HE(xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ni(g.field),direction:Aj(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Df(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function kj(t){let e=bj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){de(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=zE(m);return g instanceof xn&&wE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(I){return new Aa(ri(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Vu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,b=m.values||[];return new Jc(b,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,b=m.values||[];return new Jc(b,g)}(n.endAt)),WP(e,s,o,i,c,"F",u,d)}function Cj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ri(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ri(n.unaryFilter.field);return $e.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ri(n.unaryFilter.field);return $e.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ri(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>zE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function Aj(t){return yj[t]}function Rj(t){return vj[t]}function Pj(t){return wj[t]}function ni(t){return{fieldPath:t.canonicalString()}}function ri(t){return nt.fromServerFormat(t.fieldPath)}function HE(t){return t instanceof $e?function(n){if(n.op==="=="){if(vv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NAN"}};if(yv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NAN"}};if(yv(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ni(n.field),op:Rj(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>HE(s));return r.length===1?r[0]:{compositeFilter:{op:Pj(n.op),filters:r}}}(t):J(54877,{filter:t})}function jj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,s,i=Z.min(),o=Z.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.yt=e}}function Lj(t){const e=kj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.Cn=new Mj}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Gr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class Mj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ge(ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ge(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WE=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(WE,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fi(0)}static cr(){return new Fi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="LruGarbageCollector",Vj=1048576;function Dv([t,e],[n,r]){const s=se(t,n);return s===0?se(e,r):s}class Fj{constructor(e){this.Ir=e,this.buffer=new Ge(Dv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Dv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Uj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(jv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Yi(n)?G(jv,"Ignoring IndexedDB error during garbage collection: ",n):await Qi(n)}await this.Vr(3e5)})}}class $j{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Mu.ce);const r=new Fj(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Pv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),ei()<=re.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Bj(t,e){return new $j(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&na(r.mutation,s,Bt.empty(),xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=xs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vo();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=or();const o=ta(),c=function(){return ta()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof os)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),na(f.mutation,d,f.mutation.getFieldMask(),xe.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>c.set(d,new Hj(f,o.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=ta();let s=new Pe((o,c)=>o-c),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Bt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||ie()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=kE();f.forEach(g=>{if(!i.has(g)){const b=DE(n.get(g),r.get(g));b!==null&&m.set(g,b),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(xs());let c=Sa,u=i;return o.next(d=>$.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?$.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ie())).next(f=>({batchId:c,changes:NE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=Vo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vo();return this.indexManager.getCollectionParents(e,i).next(c=>$.forEach(c,u=>{const d=function(m,g){return new Xi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ht.newInvalidDocument(f)))});let c=Vo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&na(f.mutation,d,Bt.empty(),xe.now()),Bu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ln(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Lj(s.bundledQuery),readTime:Ln(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.overlays=new Pe(Y.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xs();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=xs(),i=n.length+1,o=new Y(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pe((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=xs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=xs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return $.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dj(n,r));let i=this.qr.get(n);i===void 0&&(i=ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(){this.Qr=new Ge(Qe.$r),this.Ur=new Ge(Qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new ge([])),r=new Qe(n,e),s=new Qe(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new ge([])),r=new Qe(n,e),s=new Qe(n,e+1);let i=ie();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Qe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||se(e.Yr,n.Yr)}static Kr(e,n){return se(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ge(Qe.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uj(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new Qe(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?yp:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const c=this.Xr(o.Yr);i.push(c)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(se);return n.forEach(s=>{const i=new Qe(s,0),o=new Qe(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],c=>{r=r.add(c.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Qe(new Y(i),0);let c=new Ge(se);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},o),$.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){de(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new Qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qe(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.ri=e,this.docs=function(){return new Pe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,c=new Y(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||TP(EP(f),r)<=0||(s.has(f.key)||Bu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Xj(this)}getSize(e){return $.resolve(this.size)}}class Xj extends zj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.persistence=e,this.si=new qs(n=>_p(n),xp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Np,this.targetCount=0,this.ai=Fi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Fi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mu(0),this.li=!1,this.li=!0,this.hi=new Kj,this.referenceDelegate=e(this),this.Pi=new Jj(this),this.indexManager=new Oj,this.remoteDocumentCache=function(s){return new Yj(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Dj(n),this.Ii=new Wj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Gj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Qj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new Zj(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Zj extends SP{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.Ri=new Np,this.Vi=null}static mi(e){return new kp(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=Y.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class nu{constructor(e,n){this.persistence=e,this.pi=new qs(r=>CP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Bj(this,n)}static mi(e,n){return new nu(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,i.removeEntry(o,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uc(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Cp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return bk()?8:NP(mt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new eD;return this.Ss(e,n,o).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ei()<=re.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ti(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(ei()<=re.DEBUG&&G("QueryEngine","Query:",ti(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ei()<=re.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ti(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(n))):$.resolve())}ys(e,n){if(bv(n))return $.resolve(null);let r=Dn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Zc(n,null,"F"),r=Dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,Zc(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return bv(n)||s.isEqual(Z.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?$.resolve(null):(ei()<=re.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ti(n)),this.vs(e,o,n,bP(s,Sa)).next(c=>c))})}Ds(e,n){let r=new Ge(IE(e));return n.forEach((s,i)=>{Bu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ei()<=re.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ti(n)),this.ps.getDocumentsMatchingQuery(e,n,Gr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="LocalStore",nD=3e8;class rD{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Pe(se),this.xs=new qs(i=>_p(i),xp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function sD(t,e,n,r){return new rD(t,e,n,r)}async function KE(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=ie();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:c}))})})}function iD(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let b=$.resolve();return g.forEach(I=>{b=b.next(()=>f.getEntry(u,I)).next(S=>{const A=d.docVersions.get(I);de(A!==null,48541),S.version.compareTo(A)<0&&(m.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),f.addEntry(S)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function QE(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function oD(t,e){const n=ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let b=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(it.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(f.resumeToken,r)),s=s.insert(m,b),function(S,A,T){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=nD?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,b,f)&&c.push(n.Pi.updateTargetData(i,b))});let u=or(),d=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(aD(i,o,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(Z.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return $.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function aD(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):G(Ap,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:s}})}function lD(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cD(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Vf(t,e,n){const r=ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yi(o))throw o;G(Ap,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Lv(t,e,n){const r=ee(t);let s=Z.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=ee(u),g=m.xs.get(f);return g!==void 0?$.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,o,Dn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:ie())).next(c=>(uD(r,KP(e),c),{documents:c,Qs:i})))}function uD(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Ov{constructor(){this.activeTargetIds=ej()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dD{constructor(){this.Mo=new Ov,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ov,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="ConnectivityMonitor";class Vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(Mv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){G(Mv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl=null;function Ff(){return Bl===null?Bl=function(){return 268435456+Math.round(2147483648*Math.random())}():Bl++,"0x"+Bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="RestConnection",fD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Yc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ff(),c=this.zo(e,n.toUriEncodedString());G(mh,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),f=rs(d);return this.Jo(e,c,u,r,f).then(m=>(G(mh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Li(mh,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ki}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=fD[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class gD extends mD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ff();return new Promise((c,u)=>{const d=new Jb;d.setWithCredentials(!0),d.listenOnce(Zb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case cc.NO_ERROR:const m=d.getResponseJson();G(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case cc.TIMEOUT:G(ct,`RPC '${e}' ${o} timed out`),u(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const g=d.getStatus();if(G(ct,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const I=b==null?void 0:b.error;if(I&&I.status&&I.message){const S=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(I.status);u(new W(S,I.message))}else u(new W(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(F.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{G(ct,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);G(ct,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=Ff(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nE(),c=tE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");G(ct,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);this.I_(m);let g=!1,b=!1;const I=new pD({Yo:A=>{b?G(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(G(ct,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),G(ct,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Zo:()=>m.close()}),S=(A,T,v)=>{A.listen(T,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return S(m,Mo.EventType.OPEN,()=>{b||(G(ct,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),S(m,Mo.EventType.CLOSE,()=>{b||(b=!0,G(ct,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(m))}),S(m,Mo.EventType.ERROR,A=>{b||(b=!0,Li(ct,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),I.a_(new W(F.UNAVAILABLE,"The operation could not be completed")))}),S(m,Mo.EventType.MESSAGE,A=>{var T;if(!b){const v=A.data[0];de(!!v,16349);const _=v,w=(_==null?void 0:_.error)||((T=_[0])==null?void 0:T.error);if(w){G(ct,`RPC '${e}' stream ${s} received error:`,w);const j=w.status;let V=function(N){const C=Fe[N];if(C!==void 0)return OE(C)}(j),E=w.message;V===void 0&&(V=F.INTERNAL,E="Unknown error status: "+j+" with message "+w.message),b=!0,I.a_(new W(V,E)),m.close()}else G(ct,`RPC '${e}' stream ${s} received:`,v),I.u_(v)}}),S(c,eE.STAT_EVENT,A=>{A.stat===Nf.PROXY?G(ct,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Nf.NOPROXY&&G(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ph(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(t){return new _j(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="PersistentStream";class XE{constructor(e,n,r,s,i,o,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Fv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(G(Fv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yD extends XE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ej(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Ln(o.readTime):Z.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Mf(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Pf(u)?{documents:Sj(i,u)}:{query:Nj(i,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=FE(i,o.resumeToken);const d=Df(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){c.readTime=tu(i,o.snapshotVersion.toTimestamp());const d=Df(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Cj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Mf(this.serializer),n.removeTarget=e,this.q_(n)}}class vD extends XE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Ij(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Mf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Tj(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{}class _D extends wD{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Lf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(F.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,Lf(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ir(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class bD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ws(this)&&(G(Ms,"Restarting streams for network reachability change."),await async function(u){const d=ee(u);d.Ea.add(4),await Za(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Gu(d)}(this))})}),this.Ra=new xD(r,s)}}async function Gu(t){if(Ws(t))for(const e of t.da)await e(!0)}async function Za(t){for(const e of t.da)await e(!1)}function JE(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dp(n)?jp(n):Ji(n).O_()&&Pp(n,e))}function Rp(t,e){const n=ee(t),r=Ji(n);n.Ia.delete(e),r.O_()&&ZE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ws(n)&&n.Ra.set("Unknown"))}function Pp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ji(t).Y_(e)}function ZE(t,e){t.Va.Ue(e),Ji(t).Z_(e)}function jp(t){t.Va=new gj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ji(t).start(),t.Ra.ua()}function Dp(t){return Ws(t)&&!Ji(t).x_()&&t.Ia.size>0}function Ws(t){return ee(t).Ea.size===0}function e1(t){t.Va=void 0}async function ED(t){t.Ra.set("Online")}async function TD(t){t.Ia.forEach((e,n)=>{Pp(t,e)})}async function ID(t,e){e1(t),Dp(t)?(t.Ra.ha(e),jp(t)):t.Ra.set("Unknown")}async function SD(t,e,n){if(t.Ra.set("Online"),e instanceof VE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){G(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ru(t,r)}else if(e instanceof fc?t.Va.Ze(e):e instanceof ME?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const r=await QE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),ZE(i,u);const m=new Rr(f.target,u,d,f.sequenceNumber);Pp(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){G(Ms,"Failed to raise snapshot:",r),await ru(t,r)}}async function ru(t,e,n){if(!Yi(e))throw e;t.Ea.add(1),await Za(t),t.Ra.set("Offline"),n||(n=()=>QE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(Ms,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Gu(t)})}function t1(t,e){return e().catch(n=>ru(t,n,e))}async function Ku(t){const e=ee(t),n=Xr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yp;for(;ND(e);)try{const s=await lD(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,kD(e,s)}catch(s){await ru(e,s)}n1(e)&&r1(e)}function ND(t){return Ws(t)&&t.Ta.length<10}function kD(t,e){t.Ta.push(e);const n=Xr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function n1(t){return Ws(t)&&!Xr(t).x_()&&t.Ta.length>0}function r1(t){Xr(t).start()}async function CD(t){Xr(t).ra()}async function AD(t){const e=Xr(t);for(const n of t.Ta)e.ea(n.mutations)}async function RD(t,e,n){const r=t.Ta.shift(),s=Tp.from(r,e,n);await t1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ku(t)}async function PD(t,e){e&&Xr(t).X_&&await async function(r,s){if(function(o){return fj(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();Xr(r).B_(),await t1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ku(r)}}(t,e),n1(t)&&r1(t)}async function Uv(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),G(Ms,"RemoteStore received new credentials");const r=Ws(n);n.Ea.add(3),await Za(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gu(n)}async function jD(t,e){const n=ee(t);e?(n.Ea.delete(2),await Gu(n)):e||(n.Ea.add(2),await Za(n),n.Ra.set("Unknown"))}function Ji(t){return t.ma||(t.ma=function(n,r,s){const i=ee(n);return i.sa(),new yD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:ED.bind(null,t),t_:TD.bind(null,t),r_:ID.bind(null,t),H_:SD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Dp(t)?jp(t):t.Ra.set("Unknown")):(await t.ma.stop(),e1(t))})),t.ma}function Xr(t){return t.fa||(t.fa=function(n,r,s){const i=ee(n);return i.sa(),new vD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:CD.bind(null,t),r_:PD.bind(null,t),ta:AD.bind(null,t),na:RD.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ku(t)):(await t.fa.stop(),t.Ta.length>0&&(G(Ms,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Lp(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Op(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Yi(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{static emptySet(e){return new Ii(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Vo(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.ga=new Pe(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ui{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Ui(e,n,Ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class LD{constructor(){this.queries=Bv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ee(n),i=s.queries;s.queries=Bv(),i.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function Bv(){return new qs(t=>TE(t),$u)}async function Mp(t,e){const n=ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new DD,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Op(o,`Initialization of query '${ti(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Fp(n)}async function Vp(t,e){const n=ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OD(t,e){const n=ee(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&Fp(n)}function MD(t,e,n){const r=ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Fp(t){t.Ca.forEach(e=>{e.next()})}var Uf,zv;(zv=Uf||(Uf={})).Ma="default",zv.Cache="cache";class Up{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.key=e}}class i1{constructor(e){this.key=e}}class VD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=IE(e),this.tu=new Ii(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new $v,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),b=Bu(this.query,m)?m:null,I=!!g&&this.mutatedKeys.has(g.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;g&&b?g.data.isEqual(b.data)?I!==S&&(r.track({type:3,doc:b}),A=!0):this.su(g,b)||(r.track({type:2,doc:b}),A=!0,(u&&this.eu(b,u)>0||d&&this.eu(b,d)<0)&&(c=!0)):!g&&b?(r.track({type:0,doc:b}),A=!0):g&&!b&&(r.track({type:1,doc:g}),A=!0,(u||d)&&(c=!0)),A&&(b?(o=o.add(b),i=S?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((f,m)=>function(b,I){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:A})}};return S(b)-S(I)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ui(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $v,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new i1(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new s1(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ui.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class FD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UD{constructor(e){this.key=e,this.hu=!1}}class $D{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qs(c=>TE(c),$u),this.Iu=new Map,this.Eu=new Set,this.du=new Pe(Y.comparator),this.Au=new Map,this.Ru=new Np,this.Vu={},this.mu=new Map,this.fu=Fi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BD(t,e,n=!0){const r=d1(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await o1(r,e,n,!0),s}async function zD(t,e){const n=d1(t);await o1(n,e,!0,!1)}async function o1(t,e,n,r){const s=await cD(t.localStore,Dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await HD(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&JE(t.remoteStore,s),c}async function HD(t,e,n,r,s){t.pu=(m,g,b)=>async function(S,A,T,v){let _=A.view.ru(T);_.Cs&&(_=await Lv(S.localStore,A.query,!1).then(({documents:E})=>A.view.ru(E,_)));const w=v&&v.targetChanges.get(A.targetId),j=v&&v.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(_,S.isPrimaryClient,w,j);return qv(S,A.targetId,V.au),V.snapshot}(t,m,g,b);const i=await Lv(t.localStore,e,!0),o=new VD(e,i.Qs),c=o.ru(i.documents),u=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);qv(t,n,d.au);const f=new FD(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function qD(t,e,n){const r=ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!$u(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rp(r.remoteStore,s.targetId),$f(r,s.targetId)}).catch(Qi)):($f(r,s.targetId),await Vf(r.localStore,s.targetId,!0))}async function WD(t,e){const n=ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rp(n.remoteStore,r.targetId))}async function GD(t,e,n){const r=e4(t);try{const s=await function(o,c){const u=ee(o),d=xe.now(),f=c.reduce((b,I)=>b.add(I.key),ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let I=or(),S=ie();return u.Ns.getEntries(b,f).next(A=>{I=A,I.forEach((T,v)=>{v.isValidDocument()||(S=S.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,I)).next(A=>{m=A;const T=[];for(const v of c){const _=lj(v,m.get(v.key).overlayedDocument);_!=null&&T.push(new os(v.key,_,gE(_.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,T,c)}).next(A=>{g=A;const T=A.applyToLocalDocumentSet(m,S);return u.documentOverlayCache.saveOverlays(b,A.batchId,T)})}).then(()=>({batchId:g.batchId,changes:NE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Pe(se)),d=d.insert(c,u),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await el(r,s.changes),await Ku(r.remoteStore)}catch(s){const i=Op(s,"Failed to persist write");n.reject(i)}}async function a1(t,e){const n=ee(t);try{const r=await oD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(de(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?de(o.hu,14607):s.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await el(n,r,e)}catch(r){await Qi(r)}}function Hv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=ee(o);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&Fp(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KD(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Pe(Y.comparator);o=o.insert(i,ht.newNoDocument(i,Z.min()));const c=ie().add(i),u=new qu(Z.min(),new Map,new Pe(se),o,c);await a1(r,u),r.du=r.du.remove(i),r.Au.delete(e),Bp(r)}else await Vf(r.localStore,e,!1).then(()=>$f(r,e,n)).catch(Qi)}async function QD(t,e){const n=ee(t),r=e.batch.batchId;try{const s=await iD(n.localStore,e);c1(n,r,null),l1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await el(n,s)}catch(s){await Qi(s)}}async function YD(t,e,n){const r=ee(t);try{const s=await function(o,c){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(de(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);c1(r,e,n),l1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await el(r,s)}catch(s){await Qi(s)}}function l1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function c1(t,e,n){const r=ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function $f(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||u1(t,r)})}function u1(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Rp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Bp(t))}function qv(t,e,n){for(const r of n)r instanceof s1?(t.Ru.addReference(r.key,e),XD(t,r)):r instanceof i1?(G($p,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||u1(t,r.key)):J(19791,{wu:r})}function XD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(G($p,"New document in limbo: "+n),t.Eu.add(r),Bp(t))}function Bp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(ge.fromString(e)),r=t.fu.next();t.Au.set(r,new UD(n)),t.du=t.du.insert(n,r),JE(t.remoteStore,new Rr(Dn(Uu(n.path)),r,"TargetPurposeLimboResolution",Mu.ce))}}async function el(t,e,n){const r=ee(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Cp.As(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(u,d){const f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>$.forEach(d,g=>$.forEach(g.Es,b=>f.persistence.referenceDelegate.addReference(m,g.targetId,b)).next(()=>$.forEach(g.ds,b=>f.persistence.referenceDelegate.removeReference(m,g.targetId,b)))))}catch(m){if(!Yi(m))throw m;G(Ap,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const b=f.Ms.get(g),I=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(I);f.Ms=f.Ms.insert(g,S)}}}(r.localStore,i))}async function JD(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){G($p,"User change. New user:",e.toKey());const r=await KE(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new W(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await el(n,r.Ls)}}function ZD(t,e){const n=ee(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let s=ie();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function d1(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KD.bind(null,e),e.Pu.H_=OD.bind(null,e.eventManager),e.Pu.yu=MD.bind(null,e.eventManager),e}function e4(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YD.bind(null,e),e}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sD(this.persistence,new tD,e.initialUser,this.serializer)}Cu(e){return new GE(kp.mi,this.serializer)}Du(e){return new dD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class t4 extends su{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof nu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Uj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new GE(r=>nu.mi(r,n),this.serializer)}}class Bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JD.bind(null,this.syncEngine),await jD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LD}()}createDatastore(e){const n=Wu(e.databaseInfo.databaseId),r=function(i){return new gD(i)}(e.databaseInfo);return function(i,o,c,u){return new _D(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new bD(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Hv(this.syncEngine,n,0),function(){return Vv.v()?new Vv:new hD}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const m=new $D(s,i,o,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ee(s);G(Ms,"RemoteStore shutting down."),i.Ea.add(5),await Za(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bf.provider={build:()=>new Bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="FirestoreClient";class n4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G(Jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(Jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Op(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gh(t,e){t.asyncQueue.verifyOperationInProgress(),G(Jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await KE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await r4(t);G(Jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Uv(e.remoteStore,s)),t._onlineComponents=e}async function r4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Jr,"Using user provided OfflineComponentProvider");try{await gh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Li("Error using user provided cache. Falling back to memory cache: "+n),await gh(t,new su)}}else G(Jr,"Using default OfflineComponentProvider"),await gh(t,new t4(void 0));return t._offlineComponents}async function h1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Jr,"Using user provided OnlineComponentProvider"),await Wv(t,t._uninitializedComponentsProvider._online)):(G(Jr,"Using default OnlineComponentProvider"),await Wv(t,new Bf))),t._onlineComponents}function s4(t){return h1(t).then(e=>e.syncEngine)}async function iu(t){const e=await h1(t),n=e.eventManager;return n.onListen=BD.bind(null,e.syncEngine),n.onUnlisten=qD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WD.bind(null,e.syncEngine),n}function i4(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new zp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Vp(i,m));const b=g.docs.has(c);!b&&g.fromCache?d.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&g.fromCache&&u&&u.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Up(Uu(c.path),f,{includeMetadataChanges:!0,qa:!0});return Mp(i,m)}(await iu(t),t.asyncQueue,e,n,r)),r.promise}function o4(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new zp({next:g=>{f.Nu(),o.enqueueAndForget(()=>Vp(i,m)),g.fromCache&&u.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Up(c,f,{includeMetadataChanges:!0,qa:!0});return Mp(i,m)}(await iu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firestore.googleapis.com",Kv=!0;class Qv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m1,this.ssl=Kv}else this.host=e.host,this.ssl=e.ssl??Kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vj)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dP;switch(r.type){case"firstParty":return new pP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gv.get(n);r&&(G("ComponentProvider","Removing Datastore"),Gv.delete(n),r.terminate())}(this),Promise.resolve()}}function a4(t,e,n,r={}){var d;t=Lt(t,Qu);const s=rs(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(np(`https://${c}`),rp("Firestore",!0)),i.host!==m1&&i.host!==c&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!Wr(u,o)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ut.MOCK_USER;else{f=ob(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ut(g)}t._authCredentials=new hP(new sE(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hr(this.firestore,e,this._query)}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}toJSON(){return{type:Oe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ya(n,Oe._jsonSchema))return new Oe(e,r||null,new Y(ge.fromString(n.referencePath)))}}Oe._jsonSchemaVersion="firestore/documentReference/1.0",Oe._jsonSchema={type:Be("string",Oe._jsonSchemaVersion),referencePath:Be("string")};class zr extends hr{constructor(e,n,r){super(e,n,Uu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new Y(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Ze(t,e,...n){if(t=fe(t),iE("collection","path",e),t instanceof Qu){const r=ge.fromString(e,...n);return lv(r),new zr(t,null,r)}{if(!(t instanceof Oe||t instanceof zr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return lv(r),new zr(t.firestore,null,r)}}function Xe(t,e,...n){if(t=fe(t),arguments.length===1&&(e=gp.newId()),iE("doc","path",e),t instanceof Qu){const r=ge.fromString(e,...n);return av(r),new Oe(t,null,new Y(r))}{if(!(t instanceof Oe||t instanceof zr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return av(r),new Oe(t.firestore,t instanceof zr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="AsyncQueue";class Xv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YE(this,"async_queue_retry"),this._c=()=>{const r=ph();r&&G(Yv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ph();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ph();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Yn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Yi(e))throw e;G(Yv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ir("INTERNAL UNHANDLED ERROR: ",Jv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Lp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:Jv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class ar extends Qu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xv(e),this._firestoreClient=void 0,await e}}}function l4(t,e){const n=typeof t=="object"?t:qa(),r=typeof t=="string"?t:Yc,s=ss(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rb("firestore");i&&a4(s,...i)}return s}function Yu(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c4(t),t._firestoreClient}function c4(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,f){return new PP(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f1(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new n4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(it.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ya(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:Be("string",Zt._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:On._jsonSchemaVersion}}static fromJSON(e){if(Ya(e,On._jsonSchema))return new On(e.latitude,e.longitude)}}On._jsonSchemaVersion="firestore/geoPoint/1.0",On._jsonSchema={type:Be("string",On._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ya(e,Mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Mn(e.vectorValues);throw new W(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mn._jsonSchemaVersion="firestore/vectorValue/1.0",Mn._jsonSchema={type:Be("string",Mn._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=/^__.*__$/;class d4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xa(e,this.data,n,this.fieldTransforms)}}class p1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function g1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class Hp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Hp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ou(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(g1(this.Ac)&&u4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class h4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wu(e)}Cc(e,n,r,s=!1){return new Hp({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zu(t){const e=t._freezeSettings(),n=Wu(t._databaseId);return new h4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function y1(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Wp("Data must be an object, but it was:",o,r);const c=v1(r,o);let u,d;if(i.merge)u=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=zf(e,m,n);if(!o.contains(g))throw new W(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_1(f,g)||f.push(g)}u=new Bt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new d4(new Ct(c),u,d)}class ed extends Ju{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}class qp extends Ju{_toFieldTransform(e){return new sj(e.path,new Ra)}isEqual(e){return e instanceof qp}}function f4(t,e,n,r){const s=t.Cc(1,e,n);Wp("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();is(r,(u,d)=>{const f=Gp(e,u,n);d=fe(d);const m=s.yc(f);if(d instanceof ed)i.push(f);else{const g=tl(d,m);g!=null&&(i.push(f),o.set(f,g))}});const c=new Bt(i);return new p1(o,c,s.fieldTransforms)}function m4(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[zf(e,r,n)],u=[s];if(i.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(zf(e,i[g])),u.push(i[g+1]);const d=[],f=Ct.empty();for(let g=c.length-1;g>=0;--g)if(!_1(d,c[g])){const b=c[g];let I=u[g];I=fe(I);const S=o.yc(b);if(I instanceof ed)d.push(b);else{const A=tl(I,S);A!=null&&(d.push(b),f.set(b,A))}}const m=new Bt(d);return new p1(f,m,o.fieldTransforms)}function p4(t,e,n,r=!1){return tl(n,t.Cc(r?4:3,e))}function tl(t,e){if(w1(t=fe(t)))return Wp("Unsupported field value:",e,t),v1(t,e);if(t instanceof Ju)return function(r,s){if(!g1(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=tl(c,s.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:tu(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tu(s.serializer,i)}}if(r instanceof On)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zt)return{bytesValue:FE(s.serializer,r._byteString)};if(r instanceof Oe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Sp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Mn)return function(o,c){return{mapValue:{fields:{[mE]:{stringValue:pE},[Xc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return bp(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ou(r)}`)}(t,e)}function v1(t,e){const n={};return lE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,s)=>{const i=tl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function w1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof On||t instanceof Zt||t instanceof Oe||t instanceof Ju||t instanceof Mn)}function Wp(t,e,n){if(!w1(n)||!oE(n)){const r=Ou(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function zf(t,e,n){if((e=fe(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return Gp(t,e);throw ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const g4=new RegExp("[~\\*/\\[\\]]");function Gp(t,e,n){if(e.search(g4)>=0)throw ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ou(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(F.INVALID_ARGUMENT,c+t+u)}function _1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(td("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y4 extends x1{data(){return super.data()}}function td(t,e){return typeof e=="string"?Gp(t,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kp{}class Qp extends Kp{}function Zi(t,e,...n){let r=[];e instanceof Kp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Yp).length,c=i.filter(u=>u instanceof nd).length;if(o>1||o>0&&c>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class nd extends Qp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nd(e,n,r)}_apply(e){const n=this._parse(e);return E1(e._query,n),new hr(e.firestore,e.converter,jf(e._query,n))}_parse(e){const n=Zu(e.firestore);return function(i,o,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){tw(m,f);const I=[];for(const S of m)I.push(ew(u,i,S));g={arrayValue:{values:I}}}else g=ew(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||tw(m,f),g=p4(c,o,m,f==="in"||f==="not-in");return $e.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rd(t,e,n){const r=e,s=td("where",t);return nd._create(s,r,n)}class Yp extends Kp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)E1(o,u),o=jf(o,u)}(e._query,n),new hr(e.firestore,e.converter,jf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xp extends Qp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Aa(i,o)}(e._query,this._field,this._direction);return new hr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nl(t,e="asc"){const n=e,r=td("orderBy",t);return Xp._create(r,n)}class Jp extends Qp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jp(e,n,r)}_apply(e){return new hr(e.firestore,e.converter,Zc(e._query,this._limit,this._limitType))}}function v4(t){return Jp._create("limit",t,"F")}function ew(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EE(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!Y.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gv(t,new Y(r))}if(n instanceof Oe)return gv(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ou(n)}.`)}function tw(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E1(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class w4{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Me(o.doubleValue));return new Mn(n)}convertGeoPoint(e){return new On(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Na(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);de(qE(r),9688,{name:e});const s=new ka(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Uo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ss extends x1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(td("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ss._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:Be("string",Ss._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class mc extends Ss{data(e={}){return super.data(e)}}class Ns{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Uo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mc(this._firestore,this._userDataWriter,r.key,r,new Uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Uo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Uo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:_4(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ns._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){t=Lt(t,Oe);const e=Lt(t.firestore,ar);return i4(Yu(e),t._key).then(n=>I1(e,t,n))}Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:Be("string",Ns._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class Zp extends w4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function rl(t){t=Lt(t,hr);const e=Lt(t.firestore,ar),n=Yu(e),r=new Zp(e);return b1(t._query),o4(n,t._query).then(s=>new Ns(e,r,t,s))}function Hf(t,e,n){t=Lt(t,Oe);const r=Lt(t.firestore,ar),s=T1(t.converter,e,n);return sd(r,[y1(Zu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,nn.none())])}function eo(t,e,n,...r){t=Lt(t,Oe);const s=Lt(t.firestore,ar),i=Zu(s);let o;return o=typeof(e=fe(e))=="string"||e instanceof Xu?m4(i,"updateDoc",t._key,e,n,r):f4(i,"updateDoc",t._key,e),sd(s,[o.toMutation(t._key,nn.exists(!0))])}function x4(t){return sd(Lt(t.firestore,ar),[new Ep(t._key,nn.none())])}function ln(t,e){const n=Lt(t.firestore,ar),r=Xe(t),s=T1(t.converter,e);return sd(n,[y1(Zu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function b4(t,...e){var u,d,f;t=fe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Zv(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Zv(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let i,o,c;if(t instanceof Oe)o=Lt(t.firestore,ar),c=Uu(t._key.path),i={next:m=>{e[r]&&e[r](I1(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Lt(t,hr);o=Lt(m.firestore,ar),c=m._query;const g=new Zp(o);i={next:b=>{e[r]&&e[r](new Ns(o,g,m,b))},error:e[r+1],complete:e[r+2]},b1(t._query)}return function(g,b,I,S){const A=new zp(S),T=new Up(b,A,I);return g.asyncQueue.enqueueAndForget(async()=>Mp(await iu(g),T)),()=>{A.Nu(),g.asyncQueue.enqueueAndForget(async()=>Vp(await iu(g),T))}}(Yu(o),c,s,i)}function sd(t,e){return function(r,s){const i=new Yn;return r.asyncQueue.enqueueAndForget(async()=>GD(await s4(r),s,i)),i.promise}(Yu(t),e)}function I1(t,e,n){const r=n.docs.get(e._key),s=new Zp(t);return new Ss(t,s,e._key,r,new Uo(n.hasPendingWrites,n.fromCache),e.converter)}function Ce(){return new qp("serverTimestamp")}(function(e,n=!0){(function(s){Ki=s})(Hs),_n(new on("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new ar(new fP(r.getProvider("auth-internal")),new gP(o,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,f)}(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Dt(rv,sv,e),Dt(rv,sv,"esm2020")})();var E4="firebase",T4="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt(E4,T4,"app");const S1="@firebase/installations",eg="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=1e4,k1=`w:${eg}`,C1="FIS_v2",I4="https://firebaseinstallations.googleapis.com/v1",S4=60*60*1e3,N4="installations",k4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vs=new zs(N4,k4,C4);function A1(t){return t instanceof cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1({projectId:t}){return`${I4}/projects/${t}/installations`}function P1(t){return{token:t.token,requestStatus:2,expiresIn:R4(t.expiresIn),creationTime:Date.now()}}async function j1(t,e){const r=(await e.json()).error;return Vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function D1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function A4(t,{refreshToken:e}){const n=D1(t);return n.append("Authorization",P4(e)),n}async function L1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function R4(t){return Number(t.replace("s","000"))}function P4(t){return`${C1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=R1(t),s=D1(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:C1,appId:t.appId,sdkVersion:k1},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await L1(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:P1(d.authToken)}}else throw await j1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^[cdef][\w-]{21}$/,qf="";function O4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=M4(t);return L4.test(n)?n:qf}catch{return qf}}function M4(t){return D4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new Map;function V1(t,e){const n=id(t);F1(n,e),V4(n,e)}function F1(t,e){const n=M1.get(t);if(n)for(const r of n)r(e)}function V4(t,e){const n=F4();n&&n.postMessage({key:t,fid:e}),U4()}let bs=null;function F4(){return!bs&&"BroadcastChannel"in self&&(bs=new BroadcastChannel("[Firebase] FID Change"),bs.onmessage=t=>{F1(t.data.key,t.data.fid)}),bs}function U4(){M1.size===0&&bs&&(bs.close(),bs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4="firebase-installations-database",B4=1,Fs="firebase-installations-store";let yh=null;function tg(){return yh||(yh=hb($4,B4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Fs)}}})),yh}async function au(t,e){const n=id(t),s=(await tg()).transaction(Fs,"readwrite"),i=s.objectStore(Fs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&V1(t,e.fid),e}async function U1(t){const e=id(t),r=(await tg()).transaction(Fs,"readwrite");await r.objectStore(Fs).delete(e),await r.done}async function od(t,e){const n=id(t),s=(await tg()).transaction(Fs,"readwrite"),i=s.objectStore(Fs),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&V1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ng(t){let e;const n=await od(t.appConfig,r=>{const s=z4(r),i=H4(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===qf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function z4(t){const e=t||{fid:O4(),registrationStatus:0};return $1(e)}function H4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=q4(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:W4(t)}:{installationEntry:e}}async function q4(t,e){try{const n=await j4(t,e);return au(t.appConfig,n)}catch(n){throw A1(n)&&n.customData.serverCode===409?await U1(t.appConfig):await au(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function W4(t){let e=await nw(t.appConfig);for(;e.registrationStatus===1;)await O1(100),e=await nw(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ng(t);return r||n}return e}function nw(t){return od(t,e=>{if(!e)throw Vs.create("installation-not-found");return $1(e)})}function $1(t){return G4(t)?{fid:t.fid,registrationStatus:0}:t}function G4(t){return t.registrationStatus===1&&t.registrationTime+N1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4({appConfig:t,heartbeatServiceProvider:e},n){const r=Q4(t,n),s=A4(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:k1,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await L1(()=>fetch(r,c));if(u.ok){const d=await u.json();return P1(d)}else throw await j1("Generate Auth Token",u)}function Q4(t,{fid:e}){return`${R1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rg(t,e=!1){let n;const r=await od(t.appConfig,i=>{if(!B1(i))throw Vs.create("not-registered");const o=i.authToken;if(!e&&J4(o))return i;if(o.requestStatus===1)return n=Y4(t,e),i;{if(!navigator.onLine)throw Vs.create("app-offline");const c=eL(i);return n=X4(t,c),c}});return n?await n:r.authToken}async function Y4(t,e){let n=await rw(t.appConfig);for(;n.authToken.requestStatus===1;)await O1(100),n=await rw(t.appConfig);const r=n.authToken;return r.requestStatus===0?rg(t,e):r}function rw(t){return od(t,e=>{if(!B1(e))throw Vs.create("not-registered");const n=e.authToken;return tL(n)?{...e,authToken:{requestStatus:0}}:e})}async function X4(t,e){try{const n=await K4(t,e),r={...e,authToken:n};return await au(t.appConfig,r),n}catch(n){if(A1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await U1(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await au(t.appConfig,r)}throw n}}function B1(t){return t!==void 0&&t.registrationStatus===2}function J4(t){return t.requestStatus===2&&!Z4(t)}function Z4(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+S4}function eL(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function tL(t){return t.requestStatus===1&&t.requestTime+N1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t){const e=t,{installationEntry:n,registrationPromise:r}=await ng(e);return r?r.catch(console.error):rg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e=!1){const n=t;return await sL(n),(await rg(n,e)).token}async function sL(t){const{registrationPromise:e}=await ng(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){if(!t||!t.options)throw vh("App Configuration");if(!t.name)throw vh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vh(t){return Vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="installations",oL="installations-internal",aL=t=>{const e=t.getProvider("app").getImmediate(),n=iL(e),r=ss(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lL=t=>{const e=t.getProvider("app").getImmediate(),n=ss(e,z1).getImmediate();return{getId:()=>nL(n),getToken:s=>rL(n,s)}};function cL(){_n(new on(z1,aL,"PUBLIC")),_n(new on(oL,lL,"PRIVATE"))}cL();Dt(S1,eg);Dt(S1,eg,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="analytics",uL="firebase_id",dL="origin",hL=60*1e3,fL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t=new Pu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wt=new zs("analytics","Analytics",mL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){if(!t.startsWith(sg)){const e=Wt.create("invalid-gtag-resource",{gtagURL:t});return _t.warn(e.message),""}return t}function H1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function gL(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function yL(t,e){const n=gL("firebase-js-sdk-policy",{createScriptURL:pL}),r=document.createElement("script"),s=`${sg}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function vL(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function wL(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await H1(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){_t.error(c)}t("config",s,i)}async function _L(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const c=await H1(n);for(const u of o){const d=c.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){_t.error(i)}}function xL(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[c,u]=o;await _L(t,e,n,c,u)}else if(i==="config"){const[c,u]=o;await wL(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=o;t("consent",c,u)}else if(i==="get"){const[c,u,d]=o;t("get",c,u,d)}else if(i==="set"){const[c]=o;t("set",c)}else t(i,...o)}catch(c){_t.error(c)}}return s}function bL(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=xL(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function EL(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(sg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=30,IL=1e3;class SL{constructor(e={},n=IL){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const q1=new SL;function NL(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function kL(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:NL(n)},s=fL.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let c="";try{const u=await i.json();(o=u.error)!=null&&o.message&&(c=u.error.message)}catch{}throw Wt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:c})}return i.json()}async function CL(t,e=q1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Wt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Wt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new PL;return setTimeout(async()=>{c.abort()},hL),W1({appId:r,apiKey:s,measurementId:i},o,c,e)}async function W1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=q1){var c;const{appId:i,measurementId:o}=t;try{await AL(r,e)}catch(u){if(o)return _t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw u}try{const u=await kL(t);return s.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!RL(d)){if(s.deleteThrottleMetadata(i),o)return _t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:o};throw u}const f=Number((c=d==null?void 0:d.customData)==null?void 0:c.httpStatus)===503?k0(n,s.intervalMillis,TL):k0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,m),_t.debug(`Calling attemptFetch again in ${f} millis`),W1(t,m,r,s)}}function AL(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Wt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RL(t){if(!(t instanceof cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class PL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function DL(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(){if(lb())try{await cb()}catch(t){return _t.warn(Wt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return _t.warn(Wt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function OL(t,e,n,r,s,i,o){const c=CL(t);c.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&_t.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>_t.error(g)),e.push(c);const u=LL().then(g=>{if(g)return r.getId()}),[d,f]=await Promise.all([c,u]);EL(i)||yL(i,d.measurementId),s("js",new Date);const m=(o==null?void 0:o.config)??{};return m[dL]="firebase",m.update=!0,f!=null&&(m[uL]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.app=e}_delete(){return delete Si[this.app.options.appId],Promise.resolve()}}let Si={},sw=[];const iw={};let wh="dataLayer",VL="gtag",ow,ig,aw=!1;function FL(){const t=[];if(ab()&&t.push("This is a browser extension environment."),Ek()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Wt.create("invalid-analytics-context",{errorInfo:e});_t.warn(n.message)}}function UL(t,e,n){FL();const r=t.options.appId;if(!r)throw Wt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)_t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wt.create("no-api-key");if(Si[r]!=null)throw Wt.create("already-exists",{id:r});if(!aw){vL(wh);const{wrappedGtag:i,gtagCore:o}=bL(Si,sw,iw,wh,VL);ig=i,ow=o,aw=!0}return Si[r]=OL(t,sw,iw,e,ow,wh,n),new ML(t)}function $L(t=qa()){t=fe(t);const e=ss(t,lu);return e.isInitialized()?e.getImmediate():BL(t)}function BL(t,e={}){const n=ss(t,lu);if(n.isInitialized()){const s=n.getImmediate();if(Wr(e,n.getOptions()))return s;throw Wt.create("already-initialized")}return n.initialize({options:e})}function zL(t,e,n){t=fe(t),DL(ig,Si[t.app.options.appId],e,n).catch(r=>_t.error(r))}function HL(t,e,n,r){t=fe(t),jL(ig,Si[t.app.options.appId],e,n,r).catch(s=>_t.error(s))}const lw="@firebase/analytics",cw="0.10.19";function qL(){_n(new on(lu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return UL(r,s,n)},"PUBLIC")),_n(new on("analytics-internal",t,"PRIVATE")),Dt(lw,cw),Dt(lw,cw,"esm2020");function t(e){try{const n=e.getProvider(lu).getImmediate();return{logEvent:(r,s,i)=>HL(n,r,s,i),setUserProperties:(r,s)=>zL(n,r,s)}}catch(n){throw Wt.create("interop-component-reg-failed",{reason:n})}}}qL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firebasestorage.googleapis.com",K1="storageBucket",WL=2*60*1e3,GL=10*60*1e3,KL=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je extends cn{constructor(e,n,r=0){super(_h(e),`Firebase Storage: ${n} (${_h(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _h(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ee;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ee||(Ee={}));function _h(t){return"storage/"+t}function og(){const t="An unknown error occurred, please check the error payload for server response.";return new je(Ee.UNKNOWN,t)}function QL(t){return new je(Ee.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function YL(t){return new je(Ee.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(Ee.UNAUTHENTICATED,t)}function JL(){return new je(Ee.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZL(t){return new je(Ee.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Q1(){return new je(Ee.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Y1(){return new je(Ee.CANCELED,"User canceled the upload/download.")}function e3(t){return new je(Ee.INVALID_URL,"Invalid URL '"+t+"'.")}function t3(t){return new je(Ee.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function n3(){return new je(Ee.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+K1+"' property when initializing the app?")}function X1(){return new je(Ee.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function r3(){return new je(Ee.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function s3(){return new je(Ee.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function i3(t){return new je(Ee.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wf(t){return new je(Ee.INVALID_ARGUMENT,t)}function J1(){return new je(Ee.APP_DELETED,"The Firebase app was deleted.")}function o3(t){return new je(Ee.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ra(t,e){return new je(Ee.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Co(t){throw new je(Ee.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=zt.makeFromUrl(e,n)}catch{return new zt(e,"")}if(r.path==="")return r;throw t3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(w){w.path_=decodeURIComponent(w.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",b=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),I={bucket:1,path:3},S=n===G1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",T=new RegExp(`^https?://${S}/${s}/${A}`,"i"),_=[{regex:c,indices:u,postModify:i},{regex:b,indices:I,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let w=0;w<_.length;w++){const j=_[w],V=j.regex.exec(e);if(V){const E=V[j.indices.bucket];let y=V[j.indices.path];y||(y=""),r=new zt(E,y),j.postModify(r);break}}if(r==null)throw e3(e);return r}}class a3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function m(A){s=setTimeout(()=>{s=null,t(b,u())},A)}function g(){i&&clearTimeout(i)}function b(A,...T){if(d){g();return}if(A){g(),f.call(null,A,...T);return}if(u()||o){g(),f.call(null,A,...T);return}r<64&&(r*=2);let _;c===1?(c=2,_=0):_=(r+Math.random())*1e3,m(_)}let I=!1;function S(A){I||(I=!0,g(),!d&&(s!==null?(A||(c=2),clearTimeout(s),m(0)):A||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,S(!0)},n),S}function c3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){return t!==void 0}function d3(t){return typeof t=="function"}function h3(t){return typeof t=="object"&&!Array.isArray(t)}function ad(t){return typeof t=="string"||t instanceof String}function uw(t){return ag()&&t instanceof Blob}function ag(){return typeof Blob<"u"}function dw(t,e,n,r){if(r<e)throw Wf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Wf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Z1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ks;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ks||(ks={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,r,s,i,o,c,u,d,f,m,g=!0,b=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,S)=>{this.resolve_=I,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===ks.NO_ERROR,u=i.getStatus();if(!c||eT(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ks.ABORT;r(!1,new zl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new zl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());u3(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=og();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?J1():Y1();o(u)}else{const u=Q1();o(u)}};this.canceled_?n(!1,new zl(!1,null,!0)):this.backoffId_=l3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&c3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function m3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function p3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function g3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function y3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function v3(t,e,n,r,s,i,o=!0,c=!1){const u=Z1(t.urlParams),d=t.url+u,f=Object.assign({},t.headers);return g3(f,e),m3(f,n),p3(f,i),y3(f,r),new f3(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _3(...t){const e=w3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(ag())return new Blob(t);throw new je(Ee.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function x3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){if(typeof atob>"u")throw i3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xh{constructor(e,n){this.data=e,this.contentType=n||null}}function E3(t,e){switch(t){case An.RAW:return new xh(tT(e));case An.BASE64:case An.BASE64URL:return new xh(nT(t,e));case An.DATA_URL:return new xh(I3(e),S3(e))}throw og()}function tT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function T3(t){let e;try{e=decodeURIComponent(t)}catch{throw ra(An.DATA_URL,"Malformed data URL.")}return tT(e)}function nT(t,e){switch(t){case An.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ra(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case An.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ra(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=b3(e)}catch(s){throw s.message.includes("polyfill")?s:ra(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class rT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ra(An.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=N3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function I3(t){const e=new rT(t);return e.base64?nT(An.BASE64,e.rest):T3(e.rest)}function S3(t){return new rT(t).contentType}function N3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n){let r=0,s="";uw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(uw(this.data_)){const r=this.data_,s=x3(r,e,n);return s===null?null:new kr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new kr(r,!0)}}static getBlob(...e){if(ag()){const n=e.map(r=>r instanceof kr?r.data_:r);return new kr(_3.apply(null,n))}else{const n=e.map(o=>ad(o)?E3(An.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new kr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){let e;try{e=JSON.parse(t)}catch{return null}return h3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function C3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function iT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(t,e){return e}class yt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||A3}}let Hl=null;function R3(t){return!ad(t)||t.length<2?t:iT(t)}function oT(){if(Hl)return Hl;const t=[];t.push(new yt("bucket")),t.push(new yt("generation")),t.push(new yt("metageneration")),t.push(new yt("name","fullPath",!0));function e(i,o){return R3(o)}const n=new yt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new yt("size");return s.xform=r,t.push(s),t.push(new yt("timeCreated")),t.push(new yt("updated")),t.push(new yt("md5Hash",null,!0)),t.push(new yt("cacheControl",null,!0)),t.push(new yt("contentDisposition",null,!0)),t.push(new yt("contentEncoding",null,!0)),t.push(new yt("contentLanguage",null,!0)),t.push(new yt("contentType",null,!0)),t.push(new yt("metadata","customMetadata",!0)),Hl=t,Hl}function P3(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new zt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function j3(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return P3(r,t),r}function aT(t,e,n){const r=sT(e);return r===null?null:j3(t,r,n)}function D3(t,e,n,r){const s=sT(e);if(s===null||!ad(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+o(f)+"/o/"+o(m),b=to(g,n,r),I=Z1({alt:"media",token:d});return b+I})[0]}function lT(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Gs{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t){if(!t)throw og()}function lg(t,e){function n(r,s){const i=aT(t,s,e);return Xn(i!==null),i}return n}function L3(t,e){function n(r,s){const i=aT(t,s,e);return Xn(i!==null),D3(i,s,t.host,t._protocol)}return n}function sl(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=JL():s=XL():n.getStatus()===402?s=YL(t.bucket):n.getStatus()===403?s=ZL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function cg(t){const e=sl(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=QL(t.path)),i.serverResponse=s.serverResponse,i}return n}function O3(t,e,n){const r=e.fullServerUrl(),s=to(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Gs(s,i,lg(t,n),o);return c.errorHandler=cg(e),c}function M3(t,e,n){const r=e.fullServerUrl(),s=to(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Gs(s,i,L3(t,n),o);return c.errorHandler=cg(e),c}function V3(t,e){const n=e.fullServerUrl(),r=to(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const c=new Gs(r,s,o,i);return c.successCodes=[200,204],c.errorHandler=cg(e),c}function F3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function cT(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=F3(null,e)),r}function U3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=cT(e,r,s),f=lT(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",b=kr.getBlob(m,r,g);if(b===null)throw X1();const I={name:d.fullPath},S=to(i,t.host,t._protocol),A="POST",T=t.maxUploadRetryTime,v=new Gs(S,A,lg(t,n),T);return v.urlParams=I,v.headers=o,v.body=b.uploadData(),v.errorHandler=sl(e),v}class cu{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function ug(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Xn(!1)}return Xn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function $3(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=cT(e,r,s),c={name:o.fullPath},u=to(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=lT(o,n),g=t.maxUploadRetryTime;function b(S){ug(S);let A;try{A=S.getResponseHeader("X-Goog-Upload-URL")}catch{Xn(!1)}return Xn(ad(A)),A}const I=new Gs(u,d,b,g);return I.urlParams=c,I.headers=f,I.body=m,I.errorHandler=sl(e),I}function B3(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=ug(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xn(!1)}m||Xn(!1);const g=Number(m);return Xn(!isNaN(g)),new cu(g,r.size(),f==="final")}const o="POST",c=t.maxUploadRetryTime,u=new Gs(n,o,i,c);return u.headers=s,u.errorHandler=sl(e),u}const hw=256*1024;function z3(t,e,n,r,s,i,o,c){const u=new cu(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw r3();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const m=u.current,g=m+f;let b="";f===0?b="finalize":d===f?b="upload, finalize":b="upload";const I={"X-Goog-Upload-Command":b,"X-Goog-Upload-Offset":`${u.current}`},S=r.slice(m,g);if(S===null)throw X1();function A(w,j){const V=ug(w,["active","final"]),E=u.current+f,y=r.size();let N;return V==="final"?N=lg(e,i)(w,j):N=null,new cu(E,y,V==="final",N)}const T="POST",v=e.maxUploadRetryTime,_=new Gs(n,T,A,v);return _.headers=I,_.body=S.uploadData(),_.progressCallback=c||null,_.errorHandler=sl(t),_}const It={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bh(t){switch(t){case"running":case"pausing":case"canceling":return It.RUNNING;case"paused":return It.PAUSED;case"success":return It.SUCCESS;case"canceled":return It.CANCELED;case"error":return It.ERROR;default:return It.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,r){if(d3(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class q3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ks.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ks.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ks.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Co("cannot .send() more than once");if(rs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Co("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Co("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Co("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Co("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class W3 extends q3{initXhr(){this.xhr_.responseType="text"}}function gs(){return new W3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=oT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ee.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(eT(s.status,[]))if(i)s=Q1();else{this.sleepTime=Math.max(this.sleepTime*2,KL),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ee.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=$3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,gs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=B3(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,gs,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=hw*this._chunkMultiplier,n=new cu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=z3(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,gs,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){hw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=O3(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,gs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=U3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,gs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Y1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=bh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new H3(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(bh(this._state)){case It.SUCCESS:Zs(this._resolve.bind(null,this.snapshot))();break;case It.CANCELED:case It.ERROR:const n=this._reject;Zs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bh(this._state)){case It.RUNNING:case It.PAUSED:e.next&&Zs(e.next.bind(e,this.snapshot))();break;case It.SUCCESS:e.complete&&Zs(e.complete.bind(e))();break;case It.CANCELED:case It.ERROR:e.error&&Zs(e.error.bind(e,this._error))();break;default:e.error&&Zs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this._service=e,n instanceof zt?this._location=n:this._location=zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Us(e,n)}get root(){const e=new zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iT(this._location.path)}get storage(){return this._service}get parent(){const e=k3(this._location.path);if(e===null)return null;const n=new zt(this._location.bucket,e);return new Us(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw o3(e)}}function K3(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new G3(t,new kr(e),n)}function Q3(t){t._throwIfRoot("getDownloadURL");const e=M3(t.storage,t._location,oT());return t.storage.makeRequestWithTokens(e,gs).then(n=>{if(n===null)throw s3();return n})}function Y3(t){t._throwIfRoot("deleteObject");const e=V3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gs)}function X3(t,e){const n=C3(t._location.path,e),r=new zt(t._location.bucket,n);return new Us(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(t){return/^[A-Za-z]+:\/\//.test(t)}function Z3(t,e){return new Us(t,e)}function uT(t,e){if(t instanceof dg){const n=t;if(n._bucket==null)throw n3();const r=new Us(n,n._bucket);return e!=null?uT(r,e):r}else return e!==void 0?X3(t,e):t}function eO(t,e){if(e&&J3(e)){if(t instanceof dg)return Z3(t,e);throw Wf("To use ref(service, url), the first argument must be a Storage instance.")}else return uT(t,e)}function fw(t,e){const n=e==null?void 0:e[K1];return n==null?null:zt.makeFromBucketSpec(n,t)}function tO(t,e,n,r={}){t.host=`${e}:${n}`;const s=rs(e);s&&(np(`https://${t.host}/b`),rp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ob(i,t.app.options.projectId))}class dg{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=G1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WL,this._maxUploadRetryTime=GL,this._requests=new Set,s!=null?this._bucket=zt.makeFromBucketSpec(s,this._host):this._bucket=fw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zt.makeFromBucketSpec(this._url,e):this._bucket=fw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Us(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new a3(J1());{const o=v3(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const mw="@firebase/storage",pw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="storage";function nO(t,e,n){return t=fe(t),K3(t,e,n)}function rO(t){return t=fe(t),Q3(t)}function sO(t){return t=fe(t),Y3(t)}function hT(t,e){return t=fe(t),eO(t,e)}function iO(t=qa(),e){t=fe(t);const r=ss(t,dT).getImmediate({identifier:e}),s=rb("storage");return s&&oO(r,...s),r}function oO(t,e,n,r={}){tO(t,e,n,r)}function aO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new dg(n,r,s,e,Hs)}function lO(){_n(new on(dT,aO,"PUBLIC").setMultipleInstances(!0)),Dt(mw,pw,""),Dt(mw,pw,"esm2020")}lO();const cO={apiKey:"AIzaSyBHyhsDtZABqCEgmPdVHsA8r4vqTQIBJSs",authDomain:"dermaglareapp.firebaseapp.com",projectId:"dermaglareapp",storageBucket:"dermaglareapp.firebasestorage.app",messagingSenderId:"462818904186",appId:"1:462818904186:web:2040dcd437664d563bd3c3",measurementId:"G-3XLGD4G27R"},ld=PC().length?qa():fb(cO),no=cP(ld),oe=l4(ld),fT=iO(ld);$L(ld);const mT=new Bn;mT.setCustomParameters({prompt:"select_account"});const Da=t=>{if(!t||t.trim()==="")return{isValid:!1,error:"Email is required."};if(!t.includes("@"))return{isValid:!1,error:"Email must contain @ symbol."};if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return{isValid:!1,error:"Please enter a valid email address."};if(!/\.(com|net|org|edu|gov|co\.za|za|io|me|info|biz)$/i.test(t))return{isValid:!1,error:"Email must have a valid domain (.com, .net, .org, .co.za, etc.)."};const r=t.split("@")[1].toLowerCase(),s={"gmial.com":"gmail.com","gmai.com":"gmail.com","yahooo.com":"yahoo.com","yaho.com":"yahoo.com","outlok.com":"outlook.com","hotmial.com":"hotmail.com"};return s[r]?{isValid:!1,error:`Did you mean ${s[r]}?`}:{isValid:!0}},pT=t=>t.length<8?{isValid:!1,error:"Password must be at least 8 characters long."}:/[A-Z]/.test(t)?/[a-z]/.test(t)?/[0-9]/.test(t)?{isValid:!0}:{isValid:!1,error:"Password must contain at least one number."}:{isValid:!1,error:"Password must contain at least one lowercase letter."}:{isValid:!1,error:"Password must contain at least one uppercase letter."},uO=(t,e)=>t!==e?{isValid:!1,error:"Passwords do not match."}:{isValid:!0},dO=async(t,e)=>{try{const n=Da(t);if(!n.isValid)throw new Error(n.error);const r=await qA(no,t,e),s=await lr(Xe(oe,"patients",r.user.uid));if(!s.exists())throw new Error("Patient record not found. Please contact support.");return{user:r.user,patientData:s.data()}}catch(n){throw console.error("Login error:",n),new Error(cd(n.code))}},hO=async(t,e,n,r)=>{try{console.log("Starting signup process for:",t);const s=Da(t);if(!s.isValid)throw new Error(s.error);const i=pT(e);if(!i.isValid)throw new Error(i.error);console.log("Creating user account...");const o=await HA(no,t,e);console.log("User account created with UID:",o.user.uid),console.log("Sending verification email..."),await WA(o.user,{url:window.location.origin+"/dashboard",handleCodeInApp:!1}),console.log("Verification email sent successfully"),console.log("Updating user profile..."),await KA(o.user,{displayName:n}),console.log("Profile updated successfully"),console.log("Creating patient record in Firestore...");const c={name:n,email:t,createdAt:Ce(),lastVisit:Ce(),role:"patient",status:"active",emailVerified:!1,...r};if(await Hf(Xe(oe,"patients",o.user.uid),c),console.log("Patient record created successfully"),!(await lr(Xe(oe,"patients",o.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),o.user}catch(s){throw console.error("Signup error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(cd(s.code))}},fO=async()=>{try{console.log("Starting Google sign-in...");const t=await vR(no,mT);console.log("Google sign-in successful, UID:",t.user.uid);const e=await lr(Xe(oe,"patients",t.user.uid));if(console.log("Patient document exists:",e.exists()),e.exists())return console.log("Updating last visit for existing user..."),await Hf(Xe(oe,"patients",t.user.uid),{lastVisit:Ce()},{merge:!0}),console.log("Last visit updated"),{user:t.user,patientData:e.data()};{console.log("Creating new patient record for Google user...");const n={name:t.user.displayName||"Google User",email:t.user.email,photoURL:t.user.photoURL,createdAt:Ce(),lastVisit:Ce(),role:"patient",status:"active"};if(await Hf(Xe(oe,"patients",t.user.uid),n),console.log("New patient record created"),!(await lr(Xe(oe,"patients",t.user.uid))).exists())throw console.error("CRITICAL: Patient document not found after creation!"),new Error("Failed to create patient record. Please try again.");return console.log("Patient record verified in database"),{user:t.user,patientData:n}}}catch(t){throw console.error("Google login error:",t),console.error("Error code:",t.code),console.error("Error message:",t.message),t.code==="permission-denied"?new Error("Database permission error. Please contact support. Your account may have been created but needs verification."):new Error(cd(t.code))}},mO=async()=>{try{await JA(no)}catch(t){throw console.error("Logout error:",t),new Error("Failed to logout. Please try again.")}},pO=async t=>{try{const e=Da(t);if(!e.isValid)throw new Error(e.error);return await zA(no,t,{url:window.location.origin+"/login",handleCodeInApp:!1}),{success:!0,message:`Password reset email sent to ${t}. Please check your inbox.`}}catch(e){throw console.error("Password reset error:",e),new Error(cd(e.code))}},gO=t=>XA(no,t),cd=t=>({"auth/user-not-found":"No account found with this email.","auth/wrong-password":"Incorrect password. Please try again.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters.","auth/invalid-email":"Invalid email address.","auth/user-disabled":"This account has been disabled.","auth/too-many-requests":"Too many attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/popup-closed-by-user":"Sign-in popup was closed.","auth/cancelled-popup-request":"Only one popup request is allowed at a time.","auth/operation-not-allowed":"This sign-in method is not enabled. Please contact support.","permission-denied":"Database permission error. Please contact support."})[t]||"An error occurred. Please try again.",yO="modulepreload",vO=function(t){return"/"+t},gw={},uu=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=vO(u),u in gw)return;gw[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":yO,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},du=async t=>{try{const e=Zi(Ze(oe,"appointments"),rd("patientId","==",t),nl("date","desc"));return(await rl(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching appointments:",e),e}},wO=async t=>{try{console.log("bookAppointment called with:",t),console.log("Firebase db instance:",oe);const e=await ln(Ze(oe,"appointments"),{...t,createdAt:Ce()});console.log("Document created with ID:",e.id);const{getServicePrice:n}=await uu(async()=>{const{getServicePrice:c}=await Promise.resolve().then(()=>OT);return{getServicePrice:c}},[]),r=n(t.type)||{basePrice:500,name:t.type},s={patientId:t.patientId,patientName:t.patientName,patientEmail:t.patientEmail||"",appointmentId:e.id,amount:r.basePrice,description:`${t.type} - ${t.doctorName}`,service:t.type,status:"Pending",date:new Date().toISOString(),dueDate:t.date,invoiceNumber:`INV-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,createdAt:Ce()},i=await ln(Ze(oe,"invoices"),s);console.log("Invoice created with ID:",i.id);const{sendInvoiceCreatedEmail:o}=await uu(async()=>{const{sendInvoiceCreatedEmail:c}=await Promise.resolve().then(()=>RT);return{sendInvoiceCreatedEmail:c}},void 0);return await o(t.patientEmail||"",t.patientName,t.patientId,s.invoiceNumber,r.basePrice,t.date,[t.type]),e.id}catch(e){throw console.error("Error booking appointment:",e),console.error("Error details:",JSON.stringify(e,null,2)),e}},_O=async(t,e=!0)=>{var n;try{const r=Xe(oe,"appointments",t),s=await lr(r);if(!s.exists())throw new Error("Appointment not found");const i=s.data();if(await eo(r,{status:"Cancelled",cancelledAt:Ce()}),e&&i.patientId){const{createCancellationFeeInvoice:o,getServicePrice:c}=await uu(async()=>{const{createCancellationFeeInvoice:m,getServicePrice:g}=await Promise.resolve().then(()=>OT);return{createCancellationFeeInvoice:m,getServicePrice:g}},void 0),{sendCancellationFeeEmail:u}=await uu(async()=>{const{sendCancellationFeeEmail:m}=await Promise.resolve().then(()=>RT);return{sendCancellationFeeEmail:m}},void 0),d=i.type||i.serviceType,f=c(d);if(f){const m=f.basePrice*.1,g=await o(t,i.patientId);return i.patientEmail&&await u(i.patientEmail,i.patientName||"Patient",i.patientId,i.date,i.time,f.basePrice,m,`INV-${(n=g.id)==null?void 0:n.slice(-8).toUpperCase()}`),{success:!0,invoiceId:g.id,cancellationFee:m}}}return{success:!0}}catch(r){throw console.error("Error cancelling appointment:",r),r}},Gf=async t=>{try{const e=Zi(Ze(oe,"documents"),rd("patientId","==",t),nl("date","desc"));return(await rl(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching documents:",e),e}},xO=async(t,e,n)=>{try{const r=Date.now(),s=e.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`${r}_${s}`,o=hT(fT,`documents/${t}/${i}`),c=nO(o,e);return new Promise((u,d)=>{c.on("state_changed",f=>{const m=f.bytesTransferred/f.totalBytes*100;n&&n(Math.round(m))},f=>{console.error("Upload error:",f),d(new Error("Upload failed: "+f.message))},async()=>{var f;try{const m=await rO(c.snapshot.ref),g=((f=e.name.split(".").pop())==null?void 0:f.toLowerCase())||"";let b="PDF";["jpg","jpeg","png","gif","webp"].includes(g)?b="Image":["doc","docx"].includes(g)&&(b="Document");const I=Math.round(e.size/1024),S=I<1024?`${I} KB`:`${(I/1024).toFixed(2)} MB`,A=EO(e.name),T=await ln(Ze(oe,"documents"),{patientId:t,name:e.name,type:b,size:S,sizeBytes:e.size,fileUrl:m,url:m,storagePath:`documents/${t}/${i}`,date:new Date().toISOString().split("T")[0],uploadedAt:Ce(),category:A});console.log("Document uploaded successfully:",T.id),u(T.id)}catch(m){console.error("Error saving document metadata:",m),d(new Error("Failed to save document: "+m.message))}})})}catch(r){throw console.error("Upload initialization error:",r),new Error("Failed to initialize upload: "+r.message)}},bO=async(t,e)=>{try{const n=hT(fT,e);await sO(n),await x4(Xe(oe,"documents",t)),console.log("Document deleted successfully")}catch(n){throw console.error("Error deleting document:",n),new Error("Failed to delete document: "+n.message)}},EO=t=>{const e=t.toLowerCase();return e.includes("report")?"Report":e.includes("lab")||e.includes("test")?"Lab Result":e.includes("prescription")||e.includes("rx")?"Prescription":e.includes("imaging")||e.includes("scan")||e.includes("xray")?"Imaging":"General"},TO=async(t,e)=>{try{const n=Zi(Ze(oe,"chats"),rd("patientId","==",t),v4(1)),r=await rl(n);return r.empty?(await ln(Ze(oe,"chats"),{patientId:t,patientName:e,lastMessageText:"",lastMessageTimestamp:Ce(),unreadByPatient:0,unreadByAdmin:!1})).id:r.docs[0].id}catch(n){throw console.error("Error getting/creating chat:",n),n}},IO=async t=>{try{const e=Zi(Ze(oe,`chats/${t}/messages`),nl("timestamp","asc"));return(await rl(e)).docs.map(r=>({id:r.id,chatId:t,...r.data()}))}catch(e){throw console.error("Error fetching messages:",e),e}},SO=async(t,e,n)=>{try{const r=await ln(Ze(oe,`chats/${t}/messages`),{senderId:e,text:n,timestamp:Ce(),read:!1});return await eo(Xe(oe,"chats",t),{lastMessageText:n,lastMessageTimestamp:Ce(),unreadByAdmin:e!=="admin"}),r.id}catch(r){throw console.error("Error sending message:",r),r}},NO=async t=>{try{await eo(Xe(oe,"chats",t),{unreadByPatient:0})}catch(e){throw console.error("Error marking messages as read:",e),e}},kO=(t,e)=>{const n=Zi(Ze(oe,`chats/${t}/messages`),nl("timestamp","asc"));return b4(n,r=>{const s=r.docs.map(i=>({id:i.id,chatId:t,...i.data()}));e(s)})},hg=async t=>{try{const e=await lr(Xe(oe,"patients",t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){throw console.error("Error fetching patient profile:",e),e}},gT=async(t,e)=>{try{await eo(Xe(oe,"patients",t),e)}catch(n){throw console.error("Error updating patient profile:",n),n}},yT=R.createContext(void 0),Ot=()=>{const t=R.useContext(yT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},CO=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(!0),[i,o]=R.useState([]);R.useEffect(()=>gO(async I=>{if(I)try{const S=await hg(I.uid);n({...I,displayName:(S==null?void 0:S.name)||I.displayName||"Patient",photoURL:(S==null?void 0:S.photoURL)||I.photoURL||`https://ui-avatars.com/api/?name=${(S==null?void 0:S.name)||"P"}&background=F4E48E&color=3A565B`})}catch(S){console.error("Failed to fetch patient profile",S),n({...I,displayName:I.displayName||"Patient",photoURL:I.photoURL||`https://ui-avatars.com/api/?name=${I.displayName||"P"}&background=F4E48E&color=3A565B`})}else n(null);s(!1)}),[]);const c=async(b,I)=>{await dO(b,I)},u=async(b,I,S)=>{await hO(b,I,S)},d=async()=>{await mO()},f=R.useCallback((b,I="info")=>{const S=Math.random().toString(36).substr(2,9);o(A=>[...A,{id:S,message:b,type:I}]),setTimeout(()=>m(S),5e3)},[]),m=b=>{o(I=>I.filter(S=>S.id!==b))},g={user:e,loading:r,login:c,signup:u,logout:d,showToast:f,toasts:i,removeToast:m};return a.jsx(yT.Provider,{value:g,children:t})},yw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Ut=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),a.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),a.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),St=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",x2:"8",y1:"13",y2:"13"}),a.jsx("line",{x1:"16",x2:"8",y1:"17",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),Kf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),AO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),RO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"9 18 15 12 9 6"})}),PO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"15 18 9 12 15 6"})}),La=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),vT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),a.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]}),Es=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),fg=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),Oa=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),wT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),a.jsx("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),pc=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),a.jsx("polyline",{points:"22 6 12 13 2 6"})]}),Ht=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})}),hu=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.jsx("polyline",{points:"12 5 19 12 12 19"})]}),jO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),il=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),DO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),_T=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),LO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"3",x2:"21",y1:"12",y2:"12"}),a.jsx("line",{x1:"3",x2:"21",y1:"6",y2:"6"}),a.jsx("line",{x1:"3",x2:"21",y1:"18",y2:"18"})]}),Qf=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),xT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a.jsx("polyline",{points:"17 6 23 6 23 12"})]}),bT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),ET=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),TT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),a.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),IT=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),ST=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("path",{d:"m21 21-4.35-4.35"})]}),NT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),kT=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),a.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),OO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),MO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),vw=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),a.jsx("path",{d:"M22 2 11 13"})]}),VO=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),FO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"m22 8-6 4 6 4V8Z"}),a.jsx("rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2"})]}),UO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"1"}),a.jsx("circle",{cx:"12",cy:"5",r:"1"}),a.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),$O=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),a.jsx("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),a.jsx("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]}),BO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),a.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),ww=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),a.jsx("path",{d:"m15 5 4 4"})]}),zO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),a.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),_w=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})}),xw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"})}),bw=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:a.jsx("path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"})}),HO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"2",x2:"22",y1:"12",y2:"12"}),a.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),sa=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),qO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2"}),a.jsx("path",{d:"M9 22v-4h6v4"}),a.jsx("path",{d:"M8 6h.01"}),a.jsx("path",{d:"M16 6h.01"}),a.jsx("path",{d:"M12 6h.01"}),a.jsx("path",{d:"M12 10h.01"}),a.jsx("path",{d:"M12 14h.01"}),a.jsx("path",{d:"M16 10h.01"}),a.jsx("path",{d:"M16 14h.01"}),a.jsx("path",{d:"M8 10h.01"}),a.jsx("path",{d:"M8 14h.01"})]}),WO=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"}),a.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),CT=async(t,e,n,r,s,i,o)=>{try{const c="Payment Successful - Dermaglare Skin & Laser Clinic",u=`
Dear ${e},

Thank you for your payment!

Payment Details:

Invoice Number: ${r}
Amount Paid: R${s.toFixed(2)}
Payment Method: ${o}
Transaction ID: ${i}
Date: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

Your payment has been successfully processed and your invoice has been marked as paid.

You can view your invoice and payment history in your patient portal at any time.

If you have any questions about this payment, please don't hesitate to contact us at:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for choosing Dermaglare Skin & Laser Clinic!

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),d={to:t,subject:c,body:u,type:"payment_success",patientId:n,relatedId:i,sentAt:Ce(),status:"sent"};return await ln(Ze(oe,"email_notifications"),d),console.log(" Payment success email sent to:",t),console.log("Subject:",c),console.log(`
Email body:
`,u),!0}catch(c){return console.error("Error sending payment success email:",c),!1}},AT=async(t,e,n,r,s,i)=>{try{const o="Payment Failed - Dermaglare Skin & Laser Clinic",c=`
Dear ${e},

We were unable to process your payment.

Payment Details:

Invoice Number: ${r}
Amount: R${s.toFixed(2)}
Reason: ${i}
Date: ${new Date().toLocaleString("en-ZA",{timeZone:"Africa/Johannesburg"})}

Please try again or use a different payment method. Your invoice remains unpaid and can be accessed in your patient portal.

If you continue to experience issues, please contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for your understanding.

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),u={to:t,subject:o,body:c,type:"payment_failed",patientId:n,sentAt:Ce(),status:"sent"};return await ln(Ze(oe,"email_notifications"),u),console.log(" Payment failed email sent to:",t),!0}catch(o){return console.error("Error sending payment failed email:",o),!1}},GO=async(t,e,n,r,s,i,o)=>{try{const c="New Invoice - Dermaglare Skin & Laser Clinic",u=`
Dear ${e},

A new invoice has been generated for your recent visit.

Invoice Details:

Invoice Number: ${r}
Amount Due: R${s.toFixed(2)}
Due Date: ${new Date(i).toLocaleDateString("en-ZA")}

Services:
${o.map((f,m)=>`${m+1}. ${f}`).join(`
`)}

You can view and pay your invoice online through your patient portal.

Payment Options:
 Credit/Debit Card (Instant)
 EFT (1-3 business days)
 Cash (In-person)

Please ensure payment is made by the due date to avoid any additional charges.

Questions? Contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

Thank you for choosing Dermaglare!

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),d={to:t,subject:c,body:u,type:"invoice_created",patientId:n,relatedId:r,sentAt:Ce(),status:"sent"};return await ln(Ze(oe,"email_notifications"),d),console.log(" Invoice created email sent to:",t),!0}catch(c){return console.error("Error sending invoice created email:",c),!1}},KO=async(t,e,n,r,s,i,o,c)=>{try{const u="Appointment Cancellation Fee - Dermaglare Skin & Laser Clinic",d=`
Dear ${e},

Your appointment has been cancelled and a cancellation fee has been applied.

Cancellation Details:

Original Appointment: ${new Date(r).toLocaleDateString("en-ZA")} at ${s}
Consultation Fee: R${i.toFixed(2)}
Cancellation Fee (10%): R${o.toFixed(2)}
Invoice Number: ${c}

As per our cancellation policy, a 10% cancellation fee of the consultation fee has been applied.

This fee helps cover administrative costs and the reserved appointment slot. An invoice has been generated and can be viewed in your patient portal.

To avoid cancellation fees in the future, please:
 Cancel at least 24 hours in advance when possible
 Contact us if you need to reschedule

Payment can be made through:
 Credit/Debit Card (Instant)
 EFT (1-3 business days)
 Cash (In-person)

Questions about our cancellation policy? Contact us:
 info@dermaglareskin.co.za
 +27 11 234 5678

We look forward to serving you in the future.

Best regards,
Dermaglare Team


This is an automated email. Please do not reply.
    `.trim(),f={to:t,subject:u,body:d,type:"cancellation_fee",patientId:n,relatedId:c,sentAt:Ce(),status:"sent"};return await ln(Ze(oe,"email_notifications"),f),console.log(" Cancellation fee email sent to:",t),!0}catch(u){return console.error("Error sending cancellation fee email:",u),!1}},RT=Object.freeze(Object.defineProperty({__proto__:null,sendCancellationFeeEmail:KO,sendInvoiceCreatedEmail:GO,sendPaymentFailedEmail:AT,sendPaymentSuccessEmail:CT},Symbol.toStringTag,{value:"Module"})),PT=[{id:"consultation",name:"Standard Consultation",basePrice:999,duration:"30 min",description:"Comprehensive skin assessment and treatment plan",category:"medical"},{id:"medical_dermatology",name:"Medical Dermatology",basePrice:500,duration:"30 min",description:"Treatment of skin conditions",category:"medical"},{id:"cosmetic_dermatology",name:"Cosmetic Dermatology",basePrice:600,duration:"30-60 min",description:"Aesthetic treatments and procedures",category:"cosmetic"},{id:"laser_treatment",name:"Laser Treatment",basePrice:1500,duration:"45-60 min",description:"Advanced laser procedures",category:"cosmetic"},{id:"chemical_peel",name:"Chemical Peel",basePrice:800,duration:"30-45 min",description:"Chemical peels for skin renewal",category:"cosmetic"},{id:"microneedling",name:"Microneedling",basePrice:900,duration:"45 min",description:"Collagen induction therapy",category:"cosmetic"},{id:"botox",name:"Botox Injections",basePrice:2500,duration:"20-30 min",description:"Anti-aging wrinkle treatment",category:"cosmetic"},{id:"prp_therapy",name:"Platelet-Rich Plasma (PRP)",basePrice:1200,duration:"45-60 min",description:"PRP therapy for skin rejuvenation",category:"specialty"},{id:"skin_tightening",name:"Skin Tightening",basePrice:1200,duration:"45-60 min",description:"Non-surgical skin firming",category:"cosmetic"},{id:"mole_removal",name:"Mole Removal",basePrice:800,duration:"30 min",description:"Surgical removal of moles",category:"surgical"},{id:"skin_cancer_screening",name:"Skin Cancer Screening",basePrice:750,duration:"30 min",description:"Comprehensive skin cancer examination",category:"medical"},{id:"acne_treatment",name:"Acne Treatment",basePrice:650,duration:"30 min",description:"Specialized acne management",category:"medical"},{id:"paediatric_dermatology",name:"Paediatric Dermatology",basePrice:450,duration:"30-45 min",description:"Specialized skin care for children",category:"specialty"}],jT=t=>PT.find(e=>e.id===t.toLowerCase().replace(/\s+/g,"_")||e.name.toLowerCase()===t.toLowerCase()),Yf=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`INV-${e}${n}-${r}`},DT=async t=>{try{const e=Ze(oe,"invoices"),n=Zi(e,rd("patientId","==",t),nl("createdAt","desc"));return(await rl(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.error("Error fetching patient invoices:",e),[]}},Xf=async t=>{try{const e=Xe(oe,"invoices",t),n=await lr(e);return n.exists()?{id:n.id,...n.data()}:null}catch(e){return console.error("Error fetching invoice:",e),null}},QO=(t=2e3)=>new Promise(e=>setTimeout(e,t)),YO=()=>{const t=Date.now(),e=Math.floor(Math.random()*1e5);return`TXN-${t}-${e}`},XO=t=>{const e=t.replace(/\s+/g,"");if(!/^\d{13,19}$/.test(e))return!1;let n=0,r=!1;for(let s=e.length-1;s>=0;s--){let i=parseInt(e[s]);r&&(i*=2,i>9&&(i-=9)),n+=i,r=!r}return n%10===0},LT=async(t,e,n)=>{try{if(!XO(e.cardNumber))return{success:!1,message:"Invalid card number"};const r=new Date;if(new Date(parseInt(`20${e.expiryYear}`),parseInt(e.expiryMonth)-1)<r)return{success:!1,message:"Card has expired"};if(!/^\d{3,4}$/.test(e.cvv))return{success:!1,message:"Invalid CVV"};const i=await Xf(t);if(!i)return{success:!1,message:"Invoice not found"};if(i.status==="paid")return{success:!1,message:"Invoice already paid"};if(await QO(2e3),Math.random()<.1){const m={invoiceId:t,amount:i.amount,currency:"ZAR",status:"failed",paymentMethod:"card",createdAt:Ce(),updatedAt:Ce()};return await ln(Ze(oe,"payment_intents"),m),await AT(n,i.patientName,i.patientId,Yf(),i.amount,"Payment declined by bank"),{success:!1,message:"Payment declined by bank. Please try again or use a different card."}}const c=YO(),u={invoiceId:t,amount:i.amount,currency:"ZAR",status:"succeeded",paymentMethod:"card",createdAt:Ce(),updatedAt:Ce()};await ln(Ze(oe,"payment_intents"),u);const d=Xe(oe,"invoices",t);await eo(d,{status:"paid",paymentMethod:"card",transactionId:c,paidAt:new Date().toISOString(),updatedAt:Ce()});const f=await Xf(t);return await CT(n,i.patientName,i.patientId,Yf(),i.amount,c,"Credit/Debit Card"),{success:!0,transactionId:c,message:"Payment processed successfully",invoice:f}}catch(r){return console.error("Error processing card payment:",r),{success:!1,message:"Payment processing failed. Please try again."}}},JO=async(t,e)=>{try{const n=Xe(oe,"appointments",t),r=await lr(n);if(!r.exists())throw new Error("Appointment not found");const s=r.data(),i=s.type||s.serviceType,o=jT(i);if(!o)throw new Error(`Service pricing not found for: ${i}`);const c=o.basePrice*.1,u={serviceId:"cancellation_fee",serviceName:`Cancellation Fee (10% of ${o.name})`,price:c,quantity:1,total:c},d=Xe(oe,"patients",e),f=await lr(d),m=f.exists()?f.data().name:s.patientName||"Unknown Patient",g=new Date,b=new Date;b.setDate(b.getDate()+7);const I={patientId:e,patientName:m,amount:c,status:"pending",date:g.toISOString().split("T")[0],dueDate:b.toISOString().split("T")[0],services:[u],description:`Cancellation Fee - Appointment on ${s.date} at ${s.time}`,appointmentId:t,createdAt:Ce(),updatedAt:Ce()},S=Ze(oe,"invoices"),A=await ln(S,I);return await eo(n,{cancellationFeeInvoiceId:A.id,cancellationFeeApplied:!0,cancellationFeeAmount:c}),{id:A.id,...I}}catch(n){throw console.error("Error creating cancellation fee invoice:",n),n}},OT=Object.freeze(Object.defineProperty({__proto__:null,SERVICE_PRICES:PT,createCancellationFeeInvoice:JO,generateInvoiceNumber:Yf,getInvoice:Xf,getPatientInvoices:DT,getServicePrice:jT,processCardPayment:LT},Symbol.toStringTag,{value:"Module"})),ZO=({invoice:t,onClose:e,onSuccess:n})=>{var B;const{user:r,showToast:s}=Ot(),[i,o]=R.useState("card"),[c,u]=R.useState(!1),[d,f]=R.useState(0),[m,g]=R.useState(""),[b,I]=R.useState(""),[S,A]=R.useState(""),[T,v]=R.useState(""),[_,w]=R.useState(""),[j,V]=R.useState(""),[E,y]=R.useState(""),[N,C]=R.useState(""),[P,D]=R.useState(""),[k,ae]=R.useState("");if(!t)return null;const ze=U=>(U.replace(/\s+/g,"").match(/.{1,4}/g)||[]).join(" "),Et=U=>{const O=U.target.value.replace(/\s+/g,"");O.length<=16&&/^\d*$/.test(O)&&g(O)},q=async()=>{if(!(!t.id||!(r!=null&&r.email))){u(!0),f(0);try{const U=setInterval(()=>{f(O=>O>=90?(clearInterval(U),90):O+10)},200);if(i==="card"){if(!m||!b||!S||!T||!_){s("Please fill in all card details","error"),u(!1),clearInterval(U);return}const O=await LT(t.id,{cardNumber:m,expiryMonth:S,expiryYear:T,cvv:_,cardholderName:b},r.email);clearInterval(U),f(100),O.success?(s(` Payment successful! Confirmation email sent to ${r.email}`,"success"),setTimeout(()=>{n(),e()},1e3)):(s(O.message,"error"),u(!1),f(0))}else if(i==="eft"){if(!j||!E||!N||!P){s("Please fill in all EFT details","error"),u(!1),clearInterval(U);return}clearInterval(U),f(100),s("EFT payment initiated. Please allow 1-3 business days for processing.","success"),setTimeout(()=>{e()},2e3)}else if(i==="cash"){if(!k||parseFloat(k)<t.amount){s("Insufficient cash amount","error"),u(!1),clearInterval(U);return}clearInterval(U),f(100),s("Cash payment recorded successfully","success"),setTimeout(()=>{n(),e()},1e3)}}catch(U){console.error("Payment error:",U),s("Payment processing failed. Please try again.","error"),u(!1),f(0)}}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark text-white p-6 flex items-center justify-between rounded-t-2xl",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Payment Gateway"}),a.jsxs("p",{className:"text-white/80 mt-1",children:["Secure payment processing for Invoice #",(B=t.id)==null?void 0:B.slice(-8)]})]}),a.jsx("button",{onClick:e,disabled:c,className:"p-2 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(La,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-brand-light to-white border border-brand-teal/20 rounded-xl p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-gray-600 font-medium",children:"Amount Due:"}),a.jsxs("span",{className:"text-3xl font-bold text-brand-dark",children:["R",t.amount.toFixed(2)]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Service:"})," ",t.description||t.service||"Medical Services"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Payment Method"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{id:"card",icon:vT,label:"Card"},{id:"eft",icon:qO,label:"EFT"},{id:"cash",icon:WO,label:"Cash"}].map(U=>a.jsxs("button",{onClick:()=>o(U.id),disabled:c,className:`p-4 rounded-xl border-2 transition-all duration-300 ${i===U.id?"border-brand-teal bg-brand-light text-brand-teal shadow-lg":"border-gray-200 hover:border-brand-teal/50"} disabled:opacity-50`,children:[a.jsx(U.icon,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("span",{className:"text-sm font-semibold",children:U.label})]},U.id))})]}),i==="card"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Card Number"}),a.jsx("input",{type:"text",value:ze(m),onChange:Et,placeholder:"1234 5678 9012 3456",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cardholder Name"}),a.jsx("input",{type:"text",value:b,onChange:U=>I(U.target.value),placeholder:"John Doe",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Month"}),a.jsx("input",{type:"text",value:S,onChange:U=>{const O=U.target.value;/^\d{0,2}$/.test(O)&&parseInt(O||"0")<=12&&A(O)},placeholder:"MM",disabled:c,maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Year"}),a.jsx("input",{type:"text",value:T,onChange:U=>{const O=U.target.value;/^\d{0,2}$/.test(O)&&v(O)},placeholder:"YY",disabled:c,maxLength:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"CVV"}),a.jsx("input",{type:"text",value:_,onChange:U=>{const O=U.target.value;/^\d{0,4}$/.test(O)&&w(O)},placeholder:"123",disabled:c,maxLength:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 text-center font-mono"})]})]})]}),i==="eft"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Account Holder Name"}),a.jsx("input",{type:"text",value:j,onChange:U=>V(U.target.value),placeholder:"John Doe",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Account Number"}),a.jsx("input",{type:"text",value:E,onChange:U=>y(U.target.value),placeholder:"1234567890",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bank Name"}),a.jsx("input",{type:"text",value:N,onChange:U=>C(U.target.value),placeholder:"Standard Bank",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Branch Code"}),a.jsx("input",{type:"text",value:P,onChange:U=>D(U.target.value),placeholder:"051001",disabled:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono"})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Note:"})," EFT payments typically take 1-3 business days to process. You will receive a confirmation email once the payment is verified."]})})]}),i==="cash"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cash Amount (R)"}),a.jsx("input",{type:"number",value:k,onChange:U=>ae(U.target.value),placeholder:t.amount.toFixed(2),disabled:c,min:t.amount,step:"0.01",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-teal focus:border-transparent disabled:bg-gray-100 font-mono text-lg"})]}),k&&parseFloat(k)>t.amount&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Change Due:"})," R",(parseFloat(k)-t.amount).toFixed(2)]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," Cash payments must be made in person at our clinic. This form records the payment for our records."]})})]}),c&&a.jsxs("div",{className:"space-y-2 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Processing payment..."}),a.jsxs("span",{className:"font-semibold text-brand-teal",children:[d,"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal to-brand-dark transition-all duration-300 ease-out",style:{width:`${d}%`}})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:e,disabled:c,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:q,disabled:c,className:"flex-1 px-6 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all disabled:opacity-50 disabled:transform-none flex items-center justify-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),"Pay R",t.amount.toFixed(2)]})})]}),a.jsx("div",{className:"text-center text-xs text-gray-500 pt-2",children:" Secure payment processing powered by Dermaglare Payment Gateway"})]})]})})},eM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState("invoices"),[s,i]=R.useState([]),[o,c]=R.useState(!0),[u,d]=R.useState(null),[f,m]=R.useState(!1),g=async()=>{if(t!=null&&t.uid)try{c(!0);const j=(await DT(t.uid)).map(V=>{var E,y,N;return{...V,invoiceNumber:`INV-${(E=V.id)==null?void 0:E.slice(-8).toUpperCase()}`,service:V.description||((N=(y=V.services)==null?void 0:y[0])==null?void 0:N.serviceName)||"Medical Service"}});i(j),c(!1)}catch(w){console.error("Error fetching invoices:",w),e("Failed to load invoices","error"),c(!1)}};R.useEffect(()=>{g()},[t]);const b=w=>{switch(w.toLowerCase()){case"paid":return"from-green-500 to-emerald-600";case"pending":return"from-yellow-500 to-orange-600";case"overdue":return"from-red-500 to-rose-600";case"cancelled":return"from-gray-500 to-slate-600";default:return"from-gray-500 to-slate-600"}},I=w=>{switch(w.toLowerCase()){case"paid":return a.jsx(Ht,{className:"w-5 h-5"});case"pending":return a.jsx(Oa,{className:"w-5 h-5"});case"overdue":return a.jsx(wT,{className:"w-5 h-5"});case"cancelled":return a.jsx(La,{className:"w-5 h-5"});default:return null}},S=s.filter(w=>w.status.toLowerCase()==="paid").reduce((w,j)=>w+j.amount,0),A=s.filter(w=>w.status.toLowerCase()==="pending"||w.status.toLowerCase()==="overdue").reduce((w,j)=>w+j.amount,0);s.filter(w=>{const j=new Date(w.date),V=new Date;return j.getMonth()===V.getMonth()&&j.getFullYear()===V.getFullYear()}).reduce((w,j)=>w+j.amount,0);const T=w=>{d(w),m(!0)},v=()=>{g()},_=w=>{const j=`
DERMAGLARE SKIN & LASER CLINIC
Invoice: ${w.invoiceNumber}
Date: ${new Date(w.date).toLocaleDateString()}
Due Date: ${w.dueDate?new Date(w.dueDate).toLocaleDateString():"N/A"}

Patient: ${w.patientName}
Service: ${w.service}
Amount: R${w.amount.toFixed(2)}
Status: ${w.status}

Thank you for choosing Dermaglare!
    `.trim(),V=new Blob([j],{type:"text/plain"}),E=URL.createObjectURL(V),y=document.createElement("a");y.href=E,y.download=`${w.invoiceNumber}.txt`,y.click(),URL.revokeObjectURL(E),e("Invoice downloaded successfully","success")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Billing & Payments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your invoices and make secure payments"})]})}),a.jsxs("div",{className:"flex gap-4 animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("button",{onClick:()=>r("invoices"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 ${n==="invoices"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:"Invoices"}),a.jsx("button",{onClick:()=>r("history"),className:`px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 ${n==="history"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:"Payment History"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{label:"Total Paid",amount:S,icon:Ht,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Total Pending",amount:A,icon:Oa,color:"from-yellow-500 to-orange-600",delay:"0.3s"},{label:"Total Invoices",amount:s.length,icon:St,color:"from-blue-500 to-cyan-600",delay:"0.4s",isCount:!0},{label:"This Month",amount:600,icon:xT,color:"from-purple-500 to-violet-600",delay:"0.5s"}].map(w=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:w.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${w.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(w.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:w.isCount?w.amount:`R${w.amount.toFixed(2)}`}),a.jsx("div",{className:"text-gray-600 font-medium",children:w.label})]},w.label))}),n==="invoices"?a.jsx("div",{className:"space-y-6",children:o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading invoices..."})]})}):s.length===0?a.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center shadow-lg",children:[a.jsx(St,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Invoices Found"}),a.jsx("p",{className:"text-gray-600",children:"You don't have any invoices yet."})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.map((w,j)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.01] animate-slide-in-up",style:{animationDelay:`${.6+j*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${b(w.status)} animate-shimmer`}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(St,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-brand-teal transition-colors duration-300",children:w.invoiceNumber}),a.jsx("p",{className:"text-gray-600",children:w.service})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Invoice Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:new Date(w.date).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Due Date"}),a.jsx("p",{className:"font-semibold text-gray-800",children:w.dueDate?new Date(w.dueDate).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 mb-1",children:"Amount"}),a.jsxs("p",{className:"font-bold text-2xl text-gray-800",children:["R",w.amount.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-4",children:[a.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r ${b(w.status)} text-white font-semibold`,children:[I(w.status),w.status.charAt(0).toUpperCase()+w.status.slice(1)]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>_(w),className:"px-4 py-2 bg-brand-light text-brand-teal rounded-lg hover:bg-brand-teal hover:text-white font-semibold transform hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[a.jsx(fg,{className:"w-4 h-4"}),"Download"]}),w.status.toLowerCase()!=="paid"&&w.status.toLowerCase()!=="cancelled"&&w.id&&a.jsx("button",{onClick:()=>T(w),className:"px-4 py-2 bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark rounded-lg font-semibold transform hover:scale-105 transition-all duration-300",children:"Pay Now"})]})]})]})})]},w.id))})})}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Payment History"}),s.filter(w=>w.status.toLowerCase()==="paid").length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(BO,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No payment history yet."})]}):a.jsx("div",{className:"space-y-4",children:s.filter(w=>w.status.toLowerCase()==="paid").map(w=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center",children:a.jsx(Ht,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:w.invoiceNumber}),a.jsx("p",{className:"text-sm text-gray-600",children:w.service}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(w.date).toLocaleDateString("en-ZA")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-xl text-green-600",children:["R",w.amount.toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:w.paymentMethod||"Card"})]})]},w.id))})]})}),f&&a.jsx(ZO,{invoice:u,onClose:()=>{m(!1),d(null)},onSuccess:v})]})},$o=({children:t,variant:e="primary",size:n="md",className:r="",onClick:s,disabled:i,type:o="button"})=>{const c="relative overflow-hidden font-medium rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 active:scale-95",u={primary:"bg-brand-teal text-white hover:bg-brand-dark shadow-lg hover:shadow-xl hover:shadow-brand-teal/30",secondary:"bg-brand-yellow text-brand-dark hover:bg-yellow-400 shadow-lg hover:shadow-xl hover:shadow-brand-yellow/30",ghost:"bg-transparent text-brand-dark hover:bg-brand-teal/10 hover:text-brand-teal",danger:"bg-red-600 text-white hover:bg-red-700 shadow-lg hover:shadow-xl hover:shadow-red-600/30"},d={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},f=m=>{const g=m.currentTarget,b=document.createElement("span"),I=g.getBoundingClientRect(),S=Math.max(I.width,I.height),A=m.clientX-I.left-S/2,T=m.clientY-I.top-S/2;b.style.width=b.style.height=`${S}px`,b.style.left=`${A}px`,b.style.top=`${T}px`,b.classList.add("absolute","bg-white/30","rounded-full","pointer-events-none","animate-ping"),g.appendChild(b),setTimeout(()=>{b.remove()},600),s&&s(m)};return a.jsx("button",{type:o,disabled:i,onClick:f,className:`${c} ${u[e]} ${d[n]} ${r}`,children:a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:t})})},Ao=({id:t,label:e,type:n="text",placeholder:r,value:s,onChange:i,icon:o,disabled:c,defaultValue:u,error:d,required:f=!1})=>{const[m,g]=R.useState(!1);return a.jsxs("div",{className:"relative group",children:[a.jsx("label",{htmlFor:t,className:`
          block text-sm font-medium mb-2 transition-all duration-300
          ${m?"text-brand-teal":"text-gray-700"}
        `,children:e}),a.jsxs("div",{className:"relative",children:[o&&a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 transition-all duration-300 group-focus-within:text-brand-teal",children:jw.cloneElement(o,{className:"w-5 h-5"})}),a.jsx("input",{id:t,type:n,placeholder:r,value:s,defaultValue:u,onChange:i,disabled:c,required:f,"aria-invalid":!!d,onFocus:()=>g(!0),onBlur:()=>g(!1),className:`
            w-full px-4 py-3 border-2 rounded-lg
            ${o?"pl-11":""}
            transition-all duration-300
            focus:outline-none focus:border-brand-teal focus:ring-4 focus:ring-brand-teal/20
            disabled:bg-gray-100 disabled:cursor-not-allowed
            hover:border-brand-teal/50
            ${m?"shadow-lg scale-[1.02]":""}
            ${d?"border-red-400 focus:ring-red-200":""}
          `})]}),d&&a.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:d})]})},tM=()=>{const t=Array.from({length:20});return a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.map((e,n)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},n))})},nM=({className:t="w-5 h-5"})=>a.jsxs("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),rM=()=>{const{login:t,signup:e,showToast:n}=Ot(),[r,s]=R.useState(!0),[i,o]=R.useState(""),[c,u]=R.useState(""),[d,f]=R.useState(""),[m,g]=R.useState(""),[b,I]=R.useState(!1),[S,A]=R.useState(!1),[T,v]=R.useState(!1),[_,w]=R.useState(""),[j,V]=R.useState(!1),[E,y]=R.useState({}),N=async k=>{k.preventDefault(),y({}),I(!0);try{const ae=Da(i);if(!ae.isValid){y({email:ae.error}),I(!1),n(ae.error||"Invalid email","error");return}if(r)await t(i,c),n("Welcome back! ","success");else{const ze=pT(c);if(!ze.isValid){y({password:ze.error}),I(!1);return}const Et=uO(c,d);if(!Et.isValid){y({confirmPassword:Et.error}),I(!1);return}await e(i,c,m),n("Account created successfully!  Please check your email to verify your account.","success")}}catch(ae){console.error("Login/Signup Error:",ae),y({general:ae.message||"Authentication failed"}),n(ae.message||"Authentication failed","error")}finally{I(!1)}},C=async()=>{try{n("Connecting to Google... ","info"),await fO(),n("Google login successful! ","success")}catch(k){console.error("Google Login Error:",k),n(k.message||"Google login failed","error")}},P=async()=>{if(!_){n("Please enter your email address","error");return}const k=Da(_);if(!k.isValid){n(k.error||"Invalid email","error");return}try{V(!0);const ae=await pO(_);n(ae.message||"Password reset email sent! ","success"),v(!1),w("")}catch(ae){n(ae.message||"Failed to send reset email","error")}finally{V(!1)}},D=()=>{A(!S),y({}),setTimeout(()=>{s(!r)},300)};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsx(tM,{}),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/10 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/20 rounded-full blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/5 to-brand-yellow/5 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"w-full max-w-md relative z-10",style:{perspective:"1000px"},children:a.jsx("div",{className:`relative w-full transition-transform duration-700 transform-style-3d ${S?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:a.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl p-8 border border-white/50 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-brand-teal/20 via-brand-yellow/20 to-brand-teal/20 animate-shimmer",style:{backgroundSize:"200% 100%",filter:"blur(20px)",zIndex:-1}}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"relative inline-block mb-6 animate-slide-up",children:[a.jsx("div",{className:"relative p-4 bg-white rounded-3xl shadow-2xl animate-pulse-glow",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain"})}),a.jsx("div",{className:"absolute inset-0 border-4 border-brand-yellow/30 rounded-3xl animate-ping"}),a.jsx("div",{className:"absolute inset-0 border-2 border-brand-teal/20 rounded-3xl animate-pulse",style:{animationDelay:"0.5s"}})]}),a.jsx("h1",{className:"text-4xl font-bold text-brand-dark mb-2 animate-slide-up",style:{animationDelay:"100ms"},children:r?"Welcome Back!":"Join Dermaglare"}),a.jsx("p",{className:"text-gray-600 animate-slide-up",style:{animationDelay:"200ms"},children:r?"Continue your skincare journey":"Begin your transformation today"})]}),E.general&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg animate-slide-up",children:a.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[a.jsx(wT,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm font-medium",children:E.general})]})}),a.jsxs("form",{onSubmit:N,className:"space-y-5",children:[!r&&a.jsx("div",{className:"animate-slide-up",children:a.jsx(Ao,{id:"displayName",label:"Full Name",placeholder:"Jane Doe",value:m,onChange:k=>g(k.target.value),icon:a.jsx(il,{})})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"100ms"},children:a.jsx(Ao,{id:"email",label:"Email Address",type:"email",placeholder:"jane@example.com",value:i,onChange:k=>o(k.target.value),icon:a.jsx(pc,{}),error:E.email})}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"200ms"},children:a.jsx(Ao,{id:"password",label:"Password",type:"password",placeholder:"",value:c,onChange:k=>u(k.target.value),icon:a.jsx(Es,{}),error:E.password,required:!0})}),!r&&a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"250ms"},children:a.jsx(Ao,{id:"confirmPassword",label:"Confirm Password",type:"password",placeholder:"",value:d,onChange:k=>f(k.target.value),icon:a.jsx(Es,{}),error:E.confirmPassword,required:!0})}),!r&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 animate-slide-up",style:{animationDelay:"300ms"},children:[a.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password must contain:"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"At least 8 characters"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"One uppercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"One lowercase letter"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-3 h-3"}),"One number"]})]})]}),r&&a.jsxs("div",{className:"flex items-center justify-between text-sm animate-slide-up",style:{animationDelay:"250ms"},children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-2 border-brand-teal text-brand-teal focus:ring-2 focus:ring-brand-teal/20 transition-all group-hover:scale-110"}),a.jsx("span",{className:"text-gray-600 group-hover:text-brand-teal transition-colors",children:"Remember me"})]}),a.jsx("button",{type:"button",className:"text-brand-teal hover:text-brand-dark font-medium hover:underline transition-all hover:scale-105",onClick:()=>v(!0),children:"Forgot Password?"})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"300ms"},children:a.jsxs($o,{type:"submit",size:"lg",className:"w-full relative overflow-hidden group",disabled:b,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-dark via-brand-teal to-brand-dark opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-shimmer",style:{backgroundSize:"200% 100%"}}),a.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:b?a.jsx(yw,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[r?"Log In":"Create Account",a.jsx(hu,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]})})]}),a.jsxs("div",{className:"relative my-6 animate-slide-up",style:{animationDelay:"350ms"},children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white/70 text-gray-500 font-medium",children:"Or continue with"})})]}),a.jsx("div",{className:"animate-slide-up",style:{animationDelay:"400ms"},children:a.jsxs("button",{type:"button",onClick:C,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white border-2 border-gray-300 rounded-lg hover:border-brand-teal hover:shadow-lg transition-all duration-300 group hover:scale-105 active:scale-95",children:[a.jsx(nM,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"font-medium text-gray-700 group-hover:text-brand-teal transition-colors",children:"Continue with Google"})]})}),a.jsx("div",{className:"mt-6 text-center animate-slide-up",style:{animationDelay:"450ms"},children:a.jsxs("p",{className:"text-gray-600",children:[r?"Don't have an account?":"Already have an account?",a.jsxs("button",{onClick:D,className:"ml-2 text-brand-teal font-semibold hover:text-brand-dark transition-all hover:scale-105 inline-block relative group",children:[r?"Sign Up":"Log In",a.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-brand-teal group-hover:w-full transition-all duration-300"})]})]})}),a.jsxs("div",{className:"mt-8 flex items-center justify-center gap-6 text-xs text-gray-500 animate-slide-up",style:{animationDelay:"500ms"},children:[a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(Es,{className:"w-3 h-3"}),a.jsx("span",{children:"Secure"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(sa,{className:"w-3 h-3"}),a.jsx("span",{children:"HIPAA Compliant"})]}),a.jsxs("div",{className:"flex items-center gap-1 hover:text-brand-teal transition-colors cursor-pointer",children:[a.jsx(sa,{className:"w-3 h-3"}),a.jsx("span",{children:"Encrypted"})]})]})]})})}),a.jsx("div",{className:"absolute bottom-10 left-10 animate-bounce-subtle opacity-50",children:a.jsx(sa,{className:"w-12 h-12 text-brand-teal"})}),a.jsx("div",{className:"absolute top-10 right-10 animate-float opacity-50",style:{animationDelay:"1s"},children:a.jsx(Es,{className:"w-10 h-10 text-brand-yellow"})}),T&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:a.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-scale-in",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pc,{className:"w-8 h-8 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-brand-dark mb-2",children:"Reset Password"}),a.jsx("p",{className:"text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ao,{id:"resetEmail",label:"Email Address",type:"email",placeholder:"jane@example.com",value:_,onChange:k=>w(k.target.value),icon:a.jsx(pc,{})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{v(!1),w("")},className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:j,children:"Cancel"}),a.jsx("button",{type:"button",onClick:P,disabled:j||!_,className:"flex-1 px-4 py-3 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:j?a.jsxs(a.Fragment,{children:[a.jsx(yw,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"Sending..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(hu,{className:"w-5 h-5"}),a.jsx("span",{children:"Send Reset Link"})]})})]})]})]})})]})},sM=({children:t})=>{const[e,n]=R.useState(!0),{logout:r,user:s}=Ot(),i=[{to:"/dashboard",icon:a.jsx(jO,{className:"w-6 h-6"}),label:"Dashboard",color:"from-brand-teal to-brand-dark"},{to:"/appointments",icon:a.jsx(Ut,{className:"w-6 h-6"}),label:"Appointments",color:"from-brand-yellow to-brand-teal"},{to:"/documents",icon:a.jsx(St,{className:"w-6 h-6"}),label:"Documents",color:"from-brand-teal to-brand-yellow"},{to:"/chat",icon:a.jsx(Kf,{className:"w-6 h-6"}),label:"Chat",color:"from-brand-dark to-brand-teal"},{to:"/billing",icon:a.jsx(vT,{className:"w-6 h-6"}),label:"Billing",color:"from-brand-yellow to-brand-dark"},{to:"/profile",icon:a.jsx(il,{className:"w-6 h-6"}),label:"Profile",color:"from-brand-teal to-brand-yellow"},{to:"/settings",icon:a.jsx(DO,{className:"w-6 h-6"}),label:"Settings",color:"from-brand-dark to-brand-teal"}],o=()=>{var u;return a.jsxs("div",{className:`fixed top-0 left-0 h-full bg-gradient-to-b from-brand-dark via-brand-teal to-brand-dark text-white transition-all duration-500 ease-in-out shadow-2xl z-50 ${e?"w-72":"w-20"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 h-28 border-b border-white/10 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-yellow/10 to-transparent animate-gradient-x"}),a.jsx("div",{className:`flex items-center justify-center overflow-hidden transition-all duration-500 relative z-10 ${e?"w-full":"w-0"}`,children:a.jsx("div",{className:"bg-white/95 px-4 py-2 rounded-xl shadow-lg",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Skin",className:"h-16 w-auto object-contain",onError:d=>{const f=d.target;f.style.display="none";const m=f.parentElement;m&&(m.innerHTML='<span class="text-2xl font-bold text-brand-teal">DERMAGLARE</span>')}})})}),a.jsx("button",{onClick:()=>n(!e),className:"p-2.5 text-brand-yellow hover:text-white focus:outline-none rounded-xl hover:bg-white/10 transition-all duration-300 relative z-10 group",children:a.jsx(LO,{className:"w-6 h-6 transform group-hover:rotate-180 transition-transform duration-300"})})]}),a.jsx("nav",{className:"mt-6 px-3",children:a.jsx("ul",{className:"space-y-2",children:i.map((d,f)=>a.jsx("li",{className:"animate-slide-in-left",style:{animationDelay:`${f*.05}s`},children:a.jsx(Xx,{to:d.to,className:({isActive:m})=>`flex items-center p-3.5 rounded-xl transition-all duration-300 group relative overflow-hidden ${m?"bg-gradient-to-r "+d.color+" text-white shadow-2xl shadow-brand-yellow/20 scale-105":"text-white/70 hover:bg-white/10 hover:text-white hover:scale-105"}`,children:({isActive:m})=>a.jsxs(a.Fragment,{children:[m&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 animate-shimmer"}),a.jsx("div",{className:`relative transition-transform duration-300 ${m?"animate-bounce-subtle":"group-hover:scale-110"}`,children:d.icon}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:d.label}),m&&a.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-brand-yellow rounded-l-full animate-pulse"})]})})},d.to))})}),a.jsxs("div",{className:"absolute bottom-0 w-full p-4 border-t border-white/10 bg-gradient-to-t from-black/20 to-transparent",children:[e&&s&&a.jsx("div",{className:"mb-3 p-3 rounded-xl bg-white/5 backdrop-blur-sm animate-fade-in-up",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:((u=s.email)==null?void 0:u.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.displayName||"Patient"}),a.jsx("p",{className:"text-xs text-white/60 truncate",children:s.email})]})]})}),a.jsxs("button",{onClick:r,className:"flex items-center p-3.5 w-full text-white/70 hover:bg-red-500/20 hover:text-red-300 rounded-xl transition-all duration-300 group relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/10 to-red-500/0 opacity-0 group-hover:opacity-100 animate-shimmer"}),a.jsx(_T,{className:"w-6 h-6 relative z-10 transform group-hover:scale-110 transition-transform duration-300"}),a.jsx("span",{className:`ml-4 font-semibold whitespace-nowrap transition-all duration-500 relative z-10 ${e?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:"Logout"})]})]})]})},c=()=>{var u;return a.jsx("header",{className:`fixed top-0 right-0 h-20 bg-white/80 backdrop-blur-xl border-b border-gray-200/50 z-40 transition-all duration-500 ease-in-out shadow-lg ${e?"left-72":"left-20"}`,children:a.jsxs("div",{className:"flex items-center justify-between h-full px-8",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent",children:"Welcome Back!"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("button",{className:"relative p-2.5 text-brand-dark hover:text-brand-teal transition-colors rounded-xl hover:bg-brand-teal/10 group",children:[a.jsx(Qf,{className:"w-6 h-6"}),a.jsx("span",{className:"absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse border-2 border-white"})]}),a.jsxs("div",{className:"flex items-center space-x-3 p-2 pr-4 rounded-full bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 hover:from-brand-teal/20 hover:to-brand-yellow/20 transition-all duration-300 cursor-pointer",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-yellow to-brand-teal flex items-center justify-center text-brand-dark font-bold shadow-lg",children:s!=null&&s.email?s.email.charAt(0).toUpperCase():"G"}),a.jsx("span",{className:"text-sm font-semibold text-brand-dark",children:((u=s==null?void 0:s.email)==null?void 0:u.split("@")[0])||"Guest"})]})]})]})})};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-yellow/10",children:[a.jsx(o,{}),a.jsx(c,{}),a.jsx("main",{className:`transition-all duration-500 ease-in-out pt-20 ${e?"ml-72":"ml-20"}`,children:a.jsx("div",{className:"p-8 animate-fade-in-up",children:t})})]})},Jf=({children:t,className:e="",hover:n=!0,style:r})=>a.jsx("div",{className:`
        bg-white rounded-xl shadow-md p-6 
        transition-all duration-300
        ${n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":""}
        ${e}
        animate-scale-in
      `,style:r,children:t}),iM=({icon:t,label:e,value:n,trend:r,color:s,delay:i,onClick:o})=>{const[c,u]=R.useState(0),d=typeof n=="number"?n:0;return R.useEffect(()=>{if(typeof n=="number"){const g=d/60;let b=0;const I=setInterval(()=>{b+=g,b>=d?(u(d),clearInterval(I)):u(Math.floor(b))},2e3/60);return()=>clearInterval(I)}},[d]),a.jsx("div",{className:"group animate-scale-in",style:{animationDelay:`${i}ms`},onClick:o,children:a.jsxs(Jf,{className:"relative overflow-hidden hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 cursor-pointer border-2 border-transparent hover:border-brand-yellow/50",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s} opacity-5 group-hover:opacity-10 transition-opacity duration-500`}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`p-4 rounded-2xl bg-gradient-to-br ${s} group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:a.jsx("div",{className:"text-white",children:t})}),r&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-600 text-sm font-semibold",children:[a.jsx(xT,{className:"w-4 h-4"}),a.jsx("span",{children:r})]})]}),a.jsx("h3",{className:"text-4xl font-bold text-brand-dark mb-2 group-hover:scale-105 transition-transform duration-300",children:typeof n=="number"?c:n}),a.jsx("p",{className:"text-gray-600 font-medium",children:e})]})]})})},oM=()=>{var _;const{user:t}=Ot(),e=Ym(),[n,r]=R.useState(""),[s,i]=R.useState([]),[o,c]=R.useState([]),[u,d]=R.useState(0),[f,m]=R.useState(!0),[g,b]=R.useState([]);R.useEffect(()=>{const w=new Date().getHours();w<12?r("Good Morning"):w<18?r("Good Afternoon"):r("Good Evening")},[]),R.useEffect(()=>{(async()=>{if(t)try{m(!0);const j=await du(t.uid);i(j);const V=await Gf(t.uid);c(V),d(V.length);const E=[];V.slice(0,2).forEach(y=>{const N=y.uploadedAt?new Date(y.uploadedAt):new Date;E.push({id:y.id||"",action:"New document uploaded",detail:y.name,time:I(N),icon:a.jsx(St,{className:"w-5 h-5"}),color:"bg-brand-yellow",onClick:()=>e("/documents"),timestamp:N})}),j.filter(y=>y.status==="Confirmed").slice(0,2).forEach(y=>{const N=y.createdAt?new Date(y.createdAt):new Date;E.push({id:y.id||"",action:"Appointment confirmed",detail:`${y.type} - ${new Date(y.date).toLocaleDateString()}`,time:I(N),icon:a.jsx(sa,{className:"w-5 h-5"}),color:"bg-green-500",onClick:()=>e("/appointments"),timestamp:N})}),E.sort((y,N)=>N.timestamp.getTime()-y.timestamp.getTime()),b(E.slice(0,3))}catch(j){console.error("Error fetching dashboard data:",j)}finally{m(!1)}})()},[t,e]);const I=w=>{const j=Math.floor((new Date().getTime()-w.getTime())/1e3);if(j<60)return"Just now";const V=Math.floor(j/60);if(V<60)return`${V} ${V===1?"minute":"minutes"} ago`;const E=Math.floor(V/60);if(E<24)return`${E} ${E===1?"hour":"hours"} ago`;const y=Math.floor(E/24);if(y<7)return`${y} ${y===1?"day":"days"} ago`;const N=Math.floor(y/7);if(N<4)return`${N} ${N===1?"week":"weeks"} ago`;const C=Math.floor(y/30);return`${C} ${C===1?"month":"months"} ago`},S=s.filter(w=>w.status==="Pending"||w.status==="Confirmed"),A=s.filter(w=>w.status==="Completed").length,T=[{icon:a.jsx(Ut,{className:"w-8 h-8"}),label:"Upcoming Appointments",value:S.length,trend:S.length>0?`+${S.length}`:void 0,color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{icon:a.jsx(St,{className:"w-8 h-8"}),label:"Documents",value:u,color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{icon:a.jsx(Kf,{className:"w-8 h-8"}),label:"Unread Messages",value:0,color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{icon:a.jsx(sa,{className:"w-8 h-8"}),label:"Completed Visits",value:A,color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}],v=S.slice(0,3).map(w=>{const j=new Date(w.date),V=new Date,E=new Date(V);E.setDate(E.getDate()+1);let y="";return j.toDateString()===V.toDateString()?y="Today":j.toDateString()===E.toDateString()?y="Tomorrow":y=j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),{id:w.id||"",title:w.type,doctor:w.doctorName||"Dr. Jabu Nkehli",date:y,time:w.time,type:"In-Person",color:"from-brand-teal to-brand-dark"}});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-teal via-brand-dark to-brand-teal p-8 md:p-12 shadow-2xl animate-fade-in-down",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-yellow/20 rounded-full filter blur-3xl animate-float"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-brand-teal/30 rounded-full filter blur-3xl animate-float",style:{animationDelay:"1s"}}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"bg-white/95 p-4 rounded-2xl shadow-2xl backdrop-blur-sm",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare Logo",className:"h-20 w-auto object-contain",onError:w=>{const j=w.target;j.style.display="none";const V=j.parentElement;V&&(V.innerHTML='<span class="text-4xl font-bold text-brand-teal px-4">DERMAGLARE</span>')}})}),a.jsxs("div",{className:"border-l-2 border-brand-yellow/50 pl-6",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-3 animate-slide-in-left flex items-center gap-3",children:[n,","," ",(t==null?void 0:t.displayName)||((_=t==null?void 0:t.email)==null?void 0:_.split("@")[0])||"there","!",a.jsx("span",{className:"text-brand-yellow",children:""})]}),a.jsxs("p",{className:"text-brand-yellow text-lg animate-slide-in-left",style:{animationDelay:"0.1s"},children:["Your skin health journey continues."," ",S.length>0?`You have ${S.length} upcoming ${S.length===1?"appointment":"appointments"}.`:"Book your next appointment today."]})]})]}),a.jsx("div",{className:"animate-scale-in",style:{animationDelay:"0.2s"},children:a.jsxs($o,{onClick:()=>e("/appointments"),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark font-bold shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[a.jsx(Ut,{className:"w-5 h-5 mr-2"}),"Book Appointment"]})})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((w,j)=>a.jsx(iM,{...w,delay:j*100},w.label))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent animate-slide-in-right",children:"Upcoming Appointments"}),a.jsxs($o,{onClick:()=>e("/appointments"),variant:"ghost",className:"text-brand-teal hover:text-brand-dark",children:["View All ",a.jsx(hu,{className:"w-4 h-4 ml-2"})]})]}),a.jsx("div",{className:"space-y-4",children:v.length>0?v.map((w,j)=>a.jsx("div",{className:"group animate-slide-in-up",style:{animationDelay:`${j*100}ms`},children:a.jsx(Jf,{className:"hover:shadow-2xl transition-all duration-500 hover:-translate-y-1 cursor-pointer border-2 border-transparent hover:border-brand-yellow/30",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${w.color} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:a.jsx(Ut,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:w.title}),a.jsx("p",{className:"text-gray-600",children:w.doctor})]}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-brand-teal/10 text-brand-teal",children:w.type})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:w.date})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Oa,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:w.time})]})]})]}),a.jsx($o,{onClick:()=>e("/appointments"),size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-brand-teal to-brand-dark text-white",children:"View Details"})]})})},w.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming appointments"})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-brand-teal to-brand-dark bg-clip-text text-transparent mb-6 animate-slide-in-left",children:"Recent Activity"}),a.jsxs(Jf,{className:"bg-gradient-to-br from-white to-brand-light/50 backdrop-blur-sm animate-scale-in",children:[a.jsx("div",{className:"space-y-4",children:g.length>0?g.map((w,j)=>a.jsxs("div",{onClick:w.onClick,className:"flex items-start gap-4 p-3 rounded-xl hover:bg-white/60 transition-all duration-300 cursor-pointer group animate-slide-in-right",style:{animationDelay:`${j*100}ms`},children:[a.jsx("div",{className:`${w.color} p-2.5 rounded-xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300`,children:w.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-brand-dark group-hover:text-brand-teal transition-colors duration-300",children:w.action}),a.jsx("p",{className:"text-sm text-gray-600",children:w.detail}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:w.time})]})]},w.id)):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent activity"})}),a.jsxs($o,{onClick:()=>e("/appointments"),variant:"ghost",className:"w-full mt-4 text-brand-teal hover:text-brand-dark",children:["View All Activity ",a.jsx(hu,{className:"w-4 h-4 ml-2"})]})]}),a.jsxs("div",{className:"mt-6 animate-scale-in",style:{animationDelay:"0.4s"},children:[a.jsx("h3",{className:"text-xl font-bold text-brand-dark mb-4",children:"Quick Actions"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Book",icon:a.jsx(Ut,{className:"w-5 h-5"}),color:"from-brand-teal to-brand-dark",onClick:()=>e("/appointments")},{label:"Upload",icon:a.jsx(St,{className:"w-5 h-5"}),color:"from-brand-yellow to-orange-400",onClick:()=>e("/documents")},{label:"Message",icon:a.jsx(Kf,{className:"w-5 h-5"}),color:"from-purple-500 to-brand-teal",onClick:()=>e("/chat")},{label:"History",icon:a.jsx(bT,{className:"w-5 h-5"}),color:"from-green-500 to-brand-teal",onClick:()=>e("/appointments")}].map((w,j)=>a.jsxs("button",{onClick:w.onClick,className:`p-4 rounded-xl bg-gradient-to-br ${w.color} text-white font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 animate-scale-in`,style:{animationDelay:`${.5+j*.1}s`},children:[w.icon,a.jsx("span",{className:"block mt-2 text-sm",children:w.label})]},w.label))})]})]})]})]})},aM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState(!1),[s,i]=R.useState(!0),[o,c]=R.useState({name:"",email:"",phone:"",address:"",dateOfBirth:"",bloodType:"",height:"",weight:"",allergies:"",emergencyContact:""}),[u,d]=R.useState(0),[f,m]=R.useState(0);R.useEffect(()=>{(async()=>{var S,A,T,v;if(t)try{i(!0);const _=await hg(t.uid),w=await du(t.uid);c(_?{name:_.name||t.displayName||"",email:_.email||t.email||"",phone:_.phone||"",address:_.address||"",dateOfBirth:_.dob||"",bloodType:_.bloodType||"O+",height:((A=(S=_.vitals)==null?void 0:S.heightCm)==null?void 0:A.toString())||"",weight:((v=(T=_.vitals)==null?void 0:T.weightKg)==null?void 0:v.toString())||"",allergies:Array.isArray(_.allergies)?_.allergies.join(", "):"",emergencyContact:_.emergencyContact||""}:j=>({...j,name:t.displayName||"",email:t.email||""})),d(w.length),m(w.filter(j=>j.status==="Completed").length)}catch(_){console.error("Error fetching profile:",_),e("Failed to load profile data","error")}finally{i(!1)}})()},[t,e]);const g=async()=>{if(t)try{const I={name:o.name,email:o.email,phone:o.phone,address:o.address,dob:o.dateOfBirth,allergies:o.allergies?o.allergies.split(",").map(S=>S.trim()):[],vitals:{heightCm:o.height?parseFloat(o.height):void 0,weightKg:o.weight?parseFloat(o.weight):void 0},bloodType:o.bloodType,emergencyContact:o.emergencyContact};await gT(t.uid,I),r(!1),e("Profile updated successfully","success")}catch(I){console.error("Error saving profile:",I),e("Failed to update profile","error")}},b=[{label:"Appointments",value:u.toString(),change:`${u} total`,icon:Ut,color:"from-blue-500 to-cyan-600"},{label:"Health Score",value:"92%",change:"Excellent",icon:_w,color:"from-green-500 to-emerald-600"},{label:"Completed Visits",value:f.toString(),change:"All time",icon:bT,color:"from-purple-500 to-violet-600"}];return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading profile..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"My Profile"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your personal information and health records"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden animate-slide-in-left",children:[a.jsx("div",{className:"h-32 bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal relative",children:a.jsx("div",{className:"absolute inset-0 bg-black/10"})}),a.jsxs("div",{className:"px-6 pb-6",children:[a.jsxs("div",{className:"relative -mt-16 mb-4",children:[a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center text-brand-dark font-bold text-5xl border-4 border-white shadow-xl mx-auto animate-scale-in",children:o.name.charAt(0).toUpperCase()}),a.jsx("button",{className:"absolute bottom-0 right-1/2 translate-x-16 w-10 h-10 bg-gradient-to-r from-brand-teal to-brand-dark rounded-full flex items-center justify-center text-white shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300",children:a.jsx(zO,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:o.name}),a.jsx("p",{className:"text-gray-600",children:o.email}),a.jsx("div",{className:"mt-4 inline-block px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-sm font-semibold",children:"Active Patient"})]}),a.jsx("div",{className:"space-y-3",children:b.map((I,S)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gradient-to-br from-brand-light to-white rounded-xl animate-fade-in",style:{animationDelay:`${S*.1}s`},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${I.color} flex items-center justify-center`,children:a.jsx(I.icon,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:I.label}),a.jsx("p",{className:"font-bold text-gray-800",children:I.value})]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:I.change})]},I.label))}),a.jsx("button",{onClick:()=>r(!n),className:"w-full mt-6 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),"Save Changes"]}):a.jsxs(a.Fragment,{children:[a.jsx(ww,{className:"w-5 h-5"}),"Edit Profile"]})})]})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(il,{className:"w-5 h-5 text-white"})}),"Personal Information"]}),!n&&a.jsx("button",{onClick:()=>r(!0),className:"text-brand-teal hover:text-brand-dark transition-colors duration-300",children:a.jsx(ww,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),n?a.jsx("input",{type:"text",value:o.name,onChange:I=>c({...o,name:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.name})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),n?a.jsx("input",{type:"email",value:o.email,onChange:I=>c({...o,email:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(pc,{className:"w-4 h-4 text-brand-teal"}),o.email]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),n?a.jsx("input",{type:"tel",value:o.phone,onChange:I=>c({...o,phone:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(ET,{className:"w-4 h-4 text-brand-teal"}),o.phone]})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date of Birth"}),n?a.jsx("input",{type:"date",value:o.dateOfBirth,onChange:I=>c({...o,dateOfBirth:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-brand-teal"}),new Date(o.dateOfBirth).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Address"}),n?a.jsx("input",{type:"text",value:o.address,onChange:I=>c({...o,address:I.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"}):a.jsxs("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium flex items-center gap-2",children:[a.jsx(TT,{className:"w-4 h-4 text-brand-teal"}),o.address]})]})]}),n&&a.jsxs("div",{className:"mt-6 flex gap-4 animate-fade-in",children:[a.jsx("button",{onClick:g,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Save Changes"}),a.jsx("button",{onClick:()=>r(!1),className:"px-8 bg-gray-200 text-gray-700 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-all duration-300",children:"Cancel"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-up",style:{animationDelay:"0.3s"},children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(_w,{className:"w-5 h-5 text-white"})}),"Medical Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Blood Type"}),a.jsx("div",{className:"px-4 py-3 bg-red-50 rounded-xl text-red-800 font-bold",children:o.bloodType})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Allergies"}),a.jsx("div",{className:"px-4 py-3 bg-orange-50 rounded-xl text-orange-800 font-medium",children:o.allergies})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Height"}),a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.height})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Weight"}),a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.weight})]}),a.jsxs("div",{className:"md:col-span-2 animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Emergency Contact"}),a.jsx("div",{className:"px-4 py-3 bg-brand-light rounded-xl text-gray-800 font-medium",children:o.emergencyContact})]})]})]})]})]})]})},lM=()=>{const{user:t,showToast:e,logout:n}=Ot(),[r,s]=R.useState(!1),[i,o]=R.useState([{id:"email_notifications",label:"Email Notifications",description:"Receive email updates about appointments and health reminders",enabled:!0},{id:"sms_notifications",label:"SMS Notifications",description:"Get text messages for appointment reminders",enabled:!1},{id:"push_notifications",label:"Push Notifications",description:"Receive push notifications on your devices",enabled:!0},{id:"marketing_emails",label:"Marketing Emails",description:"Receive newsletters and promotional content",enabled:!1}]),[c,u]=R.useState([{id:"profile_visibility",label:"Profile Visibility",description:"Make your profile visible to healthcare providers",enabled:!0},{id:"share_data",label:"Share Anonymous Data",description:"Help improve our services with anonymous usage data",enabled:!1},{id:"two_factor",label:"Two-Factor Authentication",description:"Add an extra layer of security to your account",enabled:!0}]),[d,f]=R.useState({theme:"light",language:"English",fontSize:"medium"});R.useEffect(()=>{(async()=>{var A,T,v;if(t!=null&&t.uid)try{const _=await hg(t.uid);(A=_==null?void 0:_.settings)!=null&&A.notifications&&o(_.settings.notifications),(T=_==null?void 0:_.settings)!=null&&T.privacy&&u(_.settings.privacy),(v=_==null?void 0:_.settings)!=null&&v.appearance&&f(_.settings.appearance)}catch(_){console.error("Error loading settings:",_)}})()},[t]);const m=async()=>{if(t!=null&&t.uid)try{s(!0),await gT(t.uid,{settings:{notifications:i,privacy:c,appearance:d}}),e("Settings saved successfully!","success"),s(!1)}catch(S){console.error("Error saving settings:",S),e("Failed to save settings","error"),s(!1)}},g=S=>{o(i.map(A=>A.id===S?{...A,enabled:!A.enabled}:A)),setTimeout(m,500)},b=S=>{u(c.map(A=>A.id===S?{...A,enabled:!A.enabled}:A)),setTimeout(m,500)},I=({enabled:S,onToggle:A})=>a.jsx("button",{onClick:A,className:`relative w-14 h-7 rounded-full transition-all duration-300 ${S?"bg-gradient-to-r from-brand-teal to-brand-dark":"bg-gray-300"}`,children:a.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-300 ${S?"transform translate-x-7":""}`})});return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Settings"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your account preferences and settings"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-8 animate-slide-in-left",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Navigation"}),a.jsx("nav",{className:"space-y-2",children:[{icon:Qf,label:"Notifications",href:"#notifications"},{icon:xw,label:"Privacy & Security",href:"#privacy"},{icon:bw,label:"Appearance",href:"#appearance"},{icon:HO,label:"Language & Region",href:"#language"},{icon:Es,label:"Account",href:"#account"}].map((S,A)=>a.jsxs("a",{href:S.href,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-brand-light transition-all duration-300 group animate-fade-in",style:{animationDelay:`${A*.1}s`},children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:a.jsx(S.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"font-semibold text-gray-700 group-hover:text-brand-teal transition-colors duration-300",children:S.label})]},S.label))})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{id:"notifications",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:a.jsx(Qf,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Notifications"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage how you receive notifications"})]})]}),a.jsx("div",{className:"space-y-4",children:i.map((S,A)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${A*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:S.label}),a.jsx("p",{className:"text-sm text-gray-600",children:S.description})]}),a.jsx(I,{enabled:S.enabled,onToggle:()=>g(S.id)})]},S.id))})]}),a.jsxs("div",{id:"privacy",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.2s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:a.jsx(xw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Privacy & Security"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Control your privacy and security settings"})]})]}),a.jsx("div",{className:"space-y-4 mb-6",children:c.map((S,A)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:bg-brand-light/70 transition-all duration-300 animate-fade-in",style:{animationDelay:`${.3+A*.1}s`},children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:S.label}),a.jsx("p",{className:"text-sm text-gray-600",children:S.description})]}),a.jsx(I,{enabled:S.enabled,onToggle:()=>b(S.id)})]},S.id))}),a.jsx("div",{className:"pt-6 border-t border-gray-200",children:a.jsxs("button",{className:"w-full bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(Es,{className:"w-5 h-5"}),"Change Password"]})})]}),a.jsxs("div",{id:"appearance",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.4s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(bw,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Appearance"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Customize how the app looks"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Theme"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(S=>a.jsx("button",{onClick:()=>f({...d,theme:S}),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${d.theme===S?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]}),a.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"0.6s"},children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Font Size"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["small","medium","large"].map(S=>a.jsx("button",{onClick:()=>f({...d,fontSize:S}),className:`p-3 rounded-xl border-2 font-semibold transition-all duration-300 transform hover:scale-105 ${d.fontSize===S?"border-brand-teal bg-brand-light text-brand-teal":"border-gray-200 bg-white text-gray-700 hover:border-brand-teal"}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]})]})]}),a.jsxs("div",{id:"account",className:"bg-white rounded-2xl shadow-xl p-6 animate-slide-in-right",style:{animationDelay:"0.6s"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 flex items-center justify-center",children:a.jsx(Es,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Account Actions"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your account data"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.7s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(fg,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Download Your Data"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Export all your health records and data"})]})]}),a.jsx("div",{className:"text-blue-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-yellow-50 hover:bg-yellow-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.8s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(NT,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Privacy Policy"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Review how we protect your data"})]})]}),a.jsx("div",{className:"text-yellow-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-between p-4 bg-red-50 hover:bg-red-100 rounded-xl transition-all duration-300 group animate-fade-in",style:{animationDelay:"0.9s"},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(kT,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{className:"text-left",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:"Delete Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and data"})]})]}),a.jsx("div",{className:"text-red-600 group-hover:translate-x-1 transition-transform duration-300",children:""})]}),a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 p-4 bg-gradient-to-r from-brand-teal to-brand-dark text-white rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 animate-fade-in",style:{animationDelay:"1s"},children:[a.jsx(_T,{className:"w-5 h-5"}),"Sign Out"]})]})]})]})]})]})},cM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState("all"),[s,i]=R.useState(!1),[o,c]=R.useState([]),[u,d]=R.useState(!0),[f,m]=R.useState(!1),[g,b]=R.useState("list"),[I,S]=R.useState(new Date),[A,T]=R.useState(null),[v,_]=R.useState({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"});R.useEffect(()=>{(async()=>{if(t)try{d(!0);const le=(await du(t.uid)).map(Se=>{let ve="upcoming";return Se.status==="Completed"?ve="completed":Se.status==="Cancelled"?ve="cancelled":ve="upcoming",{id:Se.id||"",title:Se.type,doctor:Se.doctorName||"Dr. Jabu Nkehli",date:Se.date,time:Se.time,location:"Dermaglare Clinic - Main Branch",type:Se.type,status:ve}});c(le)}catch(Q){console.error("Error fetching appointments:",Q),e("Failed to load appointments","error")}finally{d(!1)}})()},[t,e]);const w=async O=>{try{await _O(String(O)),c(o.map(Q=>Q.id===O?{...Q,status:"cancelled"}:Q)),e("Appointment cancelled successfully","success")}catch(Q){console.error("Error cancelling appointment:",Q),e("Failed to cancel appointment","error")}},j=async O=>{if(O.preventDefault(),console.log("=== Booking Appointment ==="),console.log("User:",t),console.log("Form data:",v),!t){e("Please login to book an appointment","error");return}if(!v.date||!v.time||!v.type){console.log("Validation failed - missing fields"),e("Please fill in all required fields","error");return}try{m(!0);const Q={patientId:t.uid,patientName:t.displayName||t.email||"Patient",patientEmail:t.email||"",date:v.date,time:v.time,type:v.type,status:"Pending",doctorName:v.doctorName,notes:v.notes};console.log("Appointment data to save:",Q);const le=await wO(Q);console.log("Appointment booked with ID:",le);const Se=await du(t.uid);console.log("Fetched appointments:",Se);const ve=Se.map(me=>{let Ne="upcoming";return me.status==="Completed"?Ne="completed":me.status==="Cancelled"?Ne="cancelled":Ne="upcoming",{id:me.id||"",title:me.type,doctor:me.doctorName||"Dr. Jabu Nkehli",date:me.date,time:me.time,location:"Dermaglare Clinic - Main Branch",type:me.type,status:Ne}});console.log("Transformed appointments:",ve),c(ve),_({date:"",time:"",type:"",notes:"",doctorName:"Dr. Jabu Nkehli"}),i(!1),m(!1),e("Appointment booked successfully! ","success")}catch(Q){console.error("Error booking appointment:",Q),e(`Failed to book appointment: ${Q}`,"error"),m(!1)}},V=n==="all"?o:o.filter(O=>O.status===n),E=o.filter(O=>O.status==="upcoming").length,y=o.filter(O=>O.status==="completed").length,N=new Date().getMonth(),C=new Date().getFullYear(),P=o.filter(O=>{const Q=new Date(O.date);return Q.getMonth()===N&&Q.getFullYear()===C}).length,D=O=>{const Q=O.getFullYear(),le=O.getMonth(),Se=new Date(Q,le,1),me=new Date(Q,le+1,0).getDate(),Ne=Se.getDay();return{daysInMonth:me,startingDayOfWeek:Ne,year:Q,month:le}},k=O=>o.filter(Q=>{const le=new Date(Q.date);return le.getDate()===O.getDate()&&le.getMonth()===O.getMonth()&&le.getFullYear()===O.getFullYear()}),ae=()=>{S(new Date(I.getFullYear(),I.getMonth()-1,1))},ze=()=>{S(new Date(I.getFullYear(),I.getMonth()+1,1))},Et=O=>{const Q=new Date;return O.getDate()===Q.getDate()&&O.getMonth()===Q.getMonth()&&O.getFullYear()===Q.getFullYear()},q=(O,Q)=>O?O.getDate()===Q.getDate()&&O.getMonth()===Q.getMonth()&&O.getFullYear()===Q.getFullYear():!1,B=O=>{switch(O){case"upcoming":return"from-green-500 to-emerald-600";case"completed":return"from-blue-500 to-cyan-600";case"cancelled":return"from-red-500 to-rose-600";default:return"from-gray-500 to-slate-600"}},U=O=>{switch(O){case"upcoming":return a.jsx(Oa,{className:"w-5 h-5"});case"completed":return a.jsx(Ht,{className:"w-5 h-5"});case"cancelled":return a.jsx(La,{className:"w-5 h-5"});default:return null}};return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading appointments..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Appointments"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Manage your healthcare appointments"})]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(AO,{className:"w-5 h-5"}),"Book Appointment"]})]}),a.jsxs("div",{className:"flex gap-4 items-center animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsx("div",{className:"flex gap-2",children:["all","upcoming","completed","cancelled"].map(O=>a.jsx("button",{onClick:()=>r(O),className:`px-4 py-2 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 ${n===O?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:O.charAt(0).toUpperCase()+O.slice(1)},O))}),a.jsxs("div",{className:"ml-auto flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(IT,{className:"w-5 h-5 text-brand-teal"})}),a.jsx("button",{className:"p-2 bg-white rounded-lg shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsx(ST,{className:"w-5 h-5 text-brand-teal"})})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{label:"Upcoming",count:E,color:"from-green-500 to-emerald-600",delay:"0.2s"},{label:"Completed",count:y,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"This Month",count:P,color:"from-purple-500 to-violet-600",delay:"0.4s"}].map(O=>a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:O.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${O.color} flex items-center justify-center mb-4 animate-pulse-glow`,children:a.jsx(Ut,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:O.count}),a.jsx("div",{className:"text-gray-600 font-medium",children:O.label})]},O.label))}),a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("div",{className:"flex gap-2 bg-white rounded-xl p-1 shadow-md",children:[a.jsx("button",{onClick:()=>b("list"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="list"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"List View"}),a.jsx("button",{onClick:()=>b("calendar"),className:`px-6 py-2 rounded-lg font-semibold transition-all duration-300 ${g==="calendar"?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"text-gray-600 hover:text-brand-teal"}`,children:"Calendar View"})]})}),g==="calendar"&&a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:I.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ae,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(PO,{className:"w-6 h-6 text-brand-teal"})}),a.jsx("button",{onClick:ze,className:"p-2 hover:bg-brand-light rounded-lg transition-colors",children:a.jsx(RO,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(O=>a.jsx("div",{className:"text-center font-bold text-gray-600 py-2",children:O},O)),(()=>{const{daysInMonth:O,startingDayOfWeek:Q,year:le,month:Se}=D(I),ve=[];for(let me=0;me<Q;me++)ve.push(a.jsx("div",{className:"aspect-square"},`empty-${me}`));for(let me=1;me<=O;me++){const Ne=new Date(le,Se,me),Mt=k(Ne),Ks=Et(Ne),ol=q(A,Ne);ve.push(a.jsx("div",{onClick:()=>T(Ne),className:`aspect-square p-2 rounded-lg border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${Ks?"border-brand-yellow bg-brand-yellow/10 ring-2 ring-brand-yellow ring-offset-2":ol?"border-brand-teal bg-brand-teal/10":"border-gray-200 hover:border-brand-teal/50"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("span",{className:`text-sm font-semibold ${Ks?"text-brand-teal":"text-gray-700"}`,children:me}),Mt.length>0&&a.jsxs("div",{className:"flex-1 flex flex-col gap-1 mt-1",children:[Mt.slice(0,2).map((as,ud)=>a.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${as.status==="upcoming"?"bg-green-100 text-green-700":as.status==="completed"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,title:`${as.time} - ${as.title}`,children:as.time},ud)),Mt.length>2&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",Mt.length-2," more"]})]})]})},me))}return ve})()]}),A&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsxs("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:["Appointments on"," ",A.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),k(A).length>0?a.jsx("div",{className:"space-y-3",children:k(A).map(O=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-brand-light rounded-xl hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${O.status==="upcoming"?"bg-green-500":O.status==="completed"?"bg-blue-500":"bg-red-500"}`}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:O.title}),a.jsxs("p",{className:"text-sm text-gray-600",children:[O.time,"  ",O.doctor]})]})]}),O.status==="upcoming"&&a.jsx("button",{onClick:()=>w(O.id),className:"text-red-600 hover:text-red-700 text-sm font-semibold hover:underline transition-colors",children:"Cancel"})]},O.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No appointments on this date"})]})]}),g==="list"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:V.map((O,Q)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.5+Q*.1}s`},children:[a.jsx("div",{className:`h-2 bg-gradient-to-r ${B(O.status)} animate-shimmer`}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1 group-hover:text-brand-teal transition-colors duration-300",children:O.title}),a.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold bg-brand-light text-brand-teal",children:O.type})]}),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r ${B(O.status)} text-white text-sm font-semibold`,children:[U(O.status),O.status]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center",children:a.jsx(il,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Doctor"}),a.jsx("p",{className:"font-semibold",children:O.doctor})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-brand-yellow to-orange-400 flex items-center justify-center",children:a.jsx(Ut,{className:"w-5 h-5 text-brand-dark"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date & Time"}),a.jsxs("p",{className:"font-semibold",children:[new Date(O.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})," ","at ",O.time]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-violet-600 flex items-center justify-center",children:a.jsx(TT,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Location"}),a.jsx("p",{className:"font-semibold",children:O.location})]})]})]}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[O.status==="upcoming"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Reschedule"}),a.jsx("button",{onClick:()=>w(O.id),className:"px-6 bg-red-50 text-red-600 py-3 rounded-xl font-semibold hover:bg-red-100 transform hover:scale-105 transition-all duration-300",children:"Cancel"})]}),O.status==="completed"&&a.jsx("button",{className:"flex-1 bg-gradient-to-r from-blue-500 to-cyan-600 text-white py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"View Details"})]})]})]},O.id))}),V.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(Ut,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No appointments found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:n==="all"?"You don't have any appointments scheduled yet.":`No ${n} appointments.`}),a.jsx("button",{onClick:()=>i(!0),className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Book Your First Appointment"})]})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full mx-4 shadow-2xl animate-scale-in max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-1",children:"Book New Appointment"}),a.jsx("p",{className:"text-brand-yellow",children:"Schedule your visit with us"})]}),a.jsx("button",{onClick:()=>i(!1),className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(La,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Appointment Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:v.type,onChange:O=>_({...v,type:O.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select appointment type"}),a.jsx("option",{value:"General Consultation",children:"General Consultation"}),a.jsx("option",{value:"Skin Checkup",children:"Skin Checkup"}),a.jsx("option",{value:"Acne Treatment",children:"Acne Treatment"}),a.jsx("option",{value:"Laser Treatment",children:"Laser Treatment"}),a.jsx("option",{value:"Chemical Peel",children:"Chemical Peel"}),a.jsx("option",{value:"Botox/Fillers",children:"Botox/Fillers"}),a.jsx("option",{value:"Mole Removal",children:"Mole Removal"}),a.jsx("option",{value:"Follow-up",children:"Follow-up Visit"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Doctor ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:v.doctorName,onChange:O=>_({...v,doctorName:O.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"Dr. Jabu Nkehli",children:"Dr. Jabu Nkehli - Dermatologist"}),a.jsx("option",{value:"Dr. Sarah Johnson",children:"Dr. Sarah Johnson - Specialist"}),a.jsx("option",{value:"Dr. Michael Chen",children:"Dr. Michael Chen - Cosmetic Dermatology"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"date",value:v.date,onChange:O=>_({...v,date:O.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700",children:["Preferred Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Oa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsxs("select",{value:v.time,onChange:O=>_({...v,time:O.target.value}),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors text-gray-700",required:!0,children:[a.jsx("option",{value:"",children:"Select time"}),a.jsx("option",{value:"08:00 AM",children:"08:00 AM"}),a.jsx("option",{value:"09:00 AM",children:"09:00 AM"}),a.jsx("option",{value:"10:00 AM",children:"10:00 AM"}),a.jsx("option",{value:"11:00 AM",children:"11:00 AM"}),a.jsx("option",{value:"12:00 PM",children:"12:00 PM"}),a.jsx("option",{value:"01:00 PM",children:"01:00 PM"}),a.jsx("option",{value:"02:00 PM",children:"02:00 PM"}),a.jsx("option",{value:"03:00 PM",children:"03:00 PM"}),a.jsx("option",{value:"04:00 PM",children:"04:00 PM"}),a.jsx("option",{value:"05:00 PM",children:"05:00 PM"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Additional Notes (Optional)"}),a.jsx("textarea",{value:v.notes,onChange:O=>_({...v,notes:O.target.value}),rows:4,placeholder:"Please provide any additional information about your condition or concerns...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-brand-teal focus:outline-none transition-colors resize-none text-gray-700"})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Ut,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important Information:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Appointments are subject to availability and confirmation"}),a.jsx("li",{children:"You will receive a confirmation email within 24 hours"}),a.jsx("li",{children:"Please arrive 10 minutes before your appointment"})]})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Booking..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),a.jsx("span",{children:"Confirm Booking"})]})})]})]})]})})]})},uM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState("all"),[s,i]=R.useState(""),[o,c]=R.useState([]),[u,d]=R.useState(!0),[f,m]=R.useState(!1),[g,b]=R.useState(!1),[I,S]=R.useState(0),[A,T]=R.useState(null),v=R.useRef(null);R.useEffect(()=>{(async()=>{if(t)try{d(!0);const U=(await Gf(t.uid)).map(O=>({id:O.id||"",name:O.name,type:O.type||"PDF",category:O.category||"General",size:O.size||"Unknown",date:O.date,url:O.fileUrl||O.url,storagePath:O.storagePath}));c(U)}catch(B){console.error("Error fetching documents:",B),e("Failed to load documents","error")}finally{d(!1)}})()},[t,e]);const _=async q=>{if(confirm("Are you sure you want to delete this document?"))try{const B=o.find(U=>U.id===q);if(!B||!B.storagePath){e("Cannot delete document: storage path not found","error");return}await bO(String(q),B.storagePath),c(o.filter(U=>U.id!==q)),e("Document deleted successfully","success")}catch(B){console.error("Error deleting document:",B),e("Failed to delete document","error")}},w=q=>{q.url?window.open(q.url,"_blank"):e("Document URL not available","error")},j=q=>{var U;const B=(U=q.target.files)==null?void 0:U[0];if(B){if(B.size>10*1024*1024){e("File size must be less than 10MB","error");return}T(B),m(!0)}},V=async()=>{if(!(!A||!t))try{b(!0),S(0),await xO(t.uid,A,U=>{S(U)});const B=(await Gf(t.uid)).map(U=>({id:U.id||"",name:U.name,type:U.type||"PDF",category:U.category||"General",size:U.size||"Unknown",date:U.date,url:U.fileUrl||U.url,storagePath:U.storagePath}));c(B),m(!1),T(null),S(0),e("Document uploaded successfully! ","success")}catch(q){console.error("Error uploading document:",q),e("Failed to upload document","error")}finally{b(!1)}},E=()=>{m(!1),T(null),S(0),v.current&&(v.current.value="")},y=["all",...Array.from(new Set(o.map(q=>q.category)))],N=y.length>1?y:["all","Lab Results","Prescriptions","Treatment Plans","Insurance","Forms","Reports"],C=o.filter(q=>{const B=n==="all"||q.category===n,U=q.name.toLowerCase().includes(s.toLowerCase());return B&&U}),P=o.filter(q=>q.category==="Lab Results").length,D=o.filter(q=>q.category==="Prescriptions").length,k=o.reduce((q,B)=>{const U=B.size.match(/([\d.]+)\s*(KB|MB)/i);if(U){const O=parseFloat(U[1]),Q=U[2].toUpperCase();return q+(Q==="MB"?O:O/1024)}return q},0),ae=k<1?`${(k*1024).toFixed(1)} KB`:`${k.toFixed(1)} MB`,ze=q=>({"Lab Results":"from-blue-500 to-cyan-600",Prescriptions:"from-green-500 to-emerald-600","Treatment Plans":"from-purple-500 to-violet-600",Insurance:"from-orange-500 to-amber-600",Forms:"from-pink-500 to-rose-600",Reports:"from-indigo-500 to-blue-600"})[q]||"from-gray-500 to-slate-600",Et=q=>a.jsx(St,{className:"w-8 h-8 text-white"});return u?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Loading documents..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8",children:[a.jsxs("div",{className:"mb-8 animate-fade-in-down",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Documents"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Access and manage your medical documents"})]}),a.jsxs("button",{onClick:()=>{var q;return(q=v.current)==null?void 0:q.click()},className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2 animate-scale-in",children:[a.jsx(OO,{className:"w-5 h-5"}),"Upload Document"]}),a.jsx("input",{ref:v,type:"file",onChange:j,className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif"})]}),a.jsxs("div",{className:"flex gap-4 animate-slide-in-up",style:{animationDelay:"0.1s"},children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(ST,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search documents...",value:s,onChange:q=>i(q.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300 shadow-sm hover:shadow-md"})]}),a.jsx("button",{className:"p-3 bg-white rounded-xl shadow hover:shadow-lg transition-all duration-300 transform hover:scale-105 border-2 border-gray-200",children:a.jsx(IT,{className:"w-6 h-6 text-brand-teal"})})]})]}),a.jsx("div",{className:"mb-8 overflow-x-auto animate-slide-in-up",style:{animationDelay:"0.2s"},children:a.jsx("div",{className:"flex gap-3 min-w-max pb-2",children:N.map(q=>a.jsx("button",{onClick:()=>r(q),className:`px-5 py-2 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 whitespace-nowrap ${n===q?"bg-gradient-to-r from-brand-teal to-brand-dark text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50 shadow"}`,children:q==="all"?"All Documents":q},q))})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{label:"Total Documents",count:o.length,icon:St,color:"from-blue-500 to-cyan-600",delay:"0.3s"},{label:"Lab Results",count:P,icon:St,color:"from-green-500 to-emerald-600",delay:"0.4s"},{label:"Prescriptions",count:D,icon:St,color:"from-purple-500 to-violet-600",delay:"0.5s"},{label:"Storage Used",count:ae,icon:MO,color:"from-orange-500 to-amber-600",delay:"0.6s"}].map(q=>a.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 animate-fade-in-up",style:{animationDelay:q.delay},children:[a.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${q.color} flex items-center justify-center mb-3 animate-pulse-glow`,children:a.jsx(q.icon,{className:"w-6 h-6 text-white"})}),a.jsx("div",{className:"text-2xl font-bold text-gray-800 mb-1",children:(typeof q.count=="number",q.count)}),a.jsx("div",{className:"text-gray-600 text-sm font-medium",children:q.label})]},q.label))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((q,B)=>a.jsxs("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:scale-[1.02] animate-slide-in-up",style:{animationDelay:`${.7+B*.1}s`},children:[a.jsxs("div",{className:`h-48 bg-gradient-to-br ${ze(q.category)} flex items-center justify-center relative overflow-hidden`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-all duration-300"}),Et(q.type),a.jsx("div",{className:"absolute top-4 right-4 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-xs font-semibold text-gray-800",children:q.type})]}),a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 group-hover:text-brand-teal transition-colors duration-300 line-clamp-2",children:q.name}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:`px-2 py-1 rounded-lg bg-gradient-to-r ${ze(q.category)} text-white text-xs font-semibold`,children:q.category}),a.jsx("span",{children:q.size})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:new Date(q.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>w(q),className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white py-2 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx(NT,{className:"w-4 h-4"}),"View"]}),a.jsx("button",{onClick:()=>w(q),className:"p-2 bg-brand-light text-brand-teal rounded-lg hover:bg-brand-teal hover:text-white transform hover:scale-110 transition-all duration-300",children:a.jsx(fg,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>_(q.id),className:"p-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transform hover:scale-110 transition-all duration-300",children:a.jsx(kT,{className:"w-5 h-5"})})]})]})]},q.id))}),C.length===0&&a.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(St,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No documents found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:s?`No documents match "${s}"`:n==="all"?"Upload your first document to get started.":`No documents in ${n}.`}),a.jsx("button",{onClick:()=>{var q;return(q=v.current)==null?void 0:q.click()},className:"bg-gradient-to-r from-brand-yellow to-orange-400 hover:from-orange-400 hover:to-brand-yellow text-brand-dark px-8 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"Upload Document"})]}),f&&A&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full mx-4 shadow-2xl animate-scale-in",children:[a.jsx("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-6 rounded-t-2xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Upload Document"}),a.jsx("p",{className:"text-brand-yellow text-sm",children:"Uploading to your medical records"})]}),!g&&a.jsx("button",{onClick:E,className:"text-white hover:text-brand-yellow transition-colors p-2 hover:bg-white/10 rounded-lg",children:a.jsx(La,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-6 p-4 bg-brand-light rounded-xl",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center flex-shrink-0",children:a.jsx(St,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-gray-800 truncate",children:A.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[(A.size/1024).toFixed(2)," KB"]})]})]})}),g&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Uploading..."}),a.jsxs("span",{className:"text-sm font-semibold text-brand-teal",children:[I,"%"]})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal to-brand-dark transition-all duration-300 rounded-full",style:{width:`${I}%`}})})]}),a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(St,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:"Important:"}),a.jsxs("ul",{className:"space-y-1 list-disc list-inside text-xs",children:[a.jsx("li",{children:"Maximum file size: 10MB"}),a.jsx("li",{children:"Supported formats: PDF, DOC, DOCX, JPG, PNG"}),a.jsx("li",{children:"Documents are securely encrypted"})]})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:E,disabled:g,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:V,disabled:g,className:"flex-1 bg-gradient-to-r from-brand-teal to-brand-dark text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Uploading..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ht,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload"})]})})]})]})]})})]})},dM=()=>{const{user:t,showToast:e}=Ot(),[n,r]=R.useState(""),[s,i]=R.useState(null),[o,c]=R.useState([]),[u,d]=R.useState(null),[f,m]=R.useState(!0),[g,b]=R.useState(!1),I=R.useRef(null),S=[{id:1,name:"Dr. Jabu Nkehli",role:"Dermatologist",avatar:"JN",online:!0,lastMessage:"Your lab results are ready",unread:2},{id:2,name:"Support Team",role:"Customer Support",avatar:"ST",online:!0,lastMessage:"How can we help you today?",unread:0}];R.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{m(!0);const j=await TO(t.uid,t.displayName||t.email||"Patient");d(j);const E=(await IO(j)).map(y=>({id:y.id||"",sender:y.senderId===t.uid?"user":"support",text:y.text,timestamp:A(y.timestamp),read:y.read||!1}));c(E),await NO(j),m(!1)}catch(j){console.error("Error initializing chat:",j),e("Failed to load chat","error"),m(!1)}})()},[t]),R.useEffect(()=>{if(!u||!(t!=null&&t.uid))return;const w=kO(u,j=>{const V=j.map(E=>({id:E.id||"",sender:E.senderId===t.uid?"user":"support",text:E.text,timestamp:A(E.timestamp),read:E.read||!1}));c(V)});return()=>w()},[u,t]);const A=w=>{if(!w)return"";let j;return w.toDate?j=w.toDate():w.seconds?j=new Date(w.seconds*1e3):j=new Date(w),j.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};R.useEffect(()=>{S.length>0&&!s&&i(S[0])},[]);const T=()=>{var w;(w=I.current)==null||w.scrollIntoView({behavior:"smooth"})};R.useEffect(()=>{T()},[o]);const v=async w=>{if(w.preventDefault(),!n.trim()||!u||!(t!=null&&t.uid)||g)return;const j=n.trim();try{b(!0),r(""),await SO(u,t.uid,j),T()}catch(V){console.error("Error sending message:",V),e("Failed to send message","error"),r(j)}finally{b(!1)}},_=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),v(w))};return a.jsxs("div",{className:"h-screen bg-gradient-to-br from-brand-light via-white to-brand-light/50 p-8 flex flex-col",children:[a.jsxs("div",{className:"mb-6 animate-fade-in-down",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-2 animate-gradient-x",children:"Messages"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Connect with your healthcare providers"})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 overflow-hidden animate-slide-in-up",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("input",{type:"text",placeholder:"Search conversations...",className:"w-full px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300"})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:S.map((w,j)=>a.jsx("div",{onClick:()=>i(w),className:`p-4 border-b border-gray-100 cursor-pointer transition-all duration-300 hover:bg-brand-light animate-fade-in ${(s==null?void 0:s.id)===w.id?"bg-brand-light border-l-4 border-l-brand-teal":""}`,style:{animationDelay:`${j*.1}s`},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-brand-teal to-brand-dark flex items-center justify-center text-white font-bold",children:w.avatar}),w.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-800 truncate",children:w.name}),w.unread>0&&a.jsx("span",{className:"bg-gradient-to-r from-brand-yellow to-orange-400 text-brand-dark text-xs font-bold px-2 py-1 rounded-full animate-pulse-glow",children:w.unread})]}),a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:w.role}),a.jsx("p",{className:"text-sm text-gray-600 truncate",children:w.lastMessage})]})]})},w.id))})]}),a.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gradient-to-r from-brand-teal to-brand-dark p-4 flex items-center justify-between animate-slide-in-down",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-brand-teal font-bold",children:s.avatar}),s.online&&a.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse-glow"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white",children:s.name}),a.jsx("p",{className:"text-xs text-brand-yellow",children:s.online?"Online":"Offline"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(ET,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(FO,{className:"w-5 h-5 text-white"})}),a.jsx("button",{className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(UO,{className:"w-5 h-5 text-white"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-brand-light/20 to-white",children:[f?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-brand-teal mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]})}):o.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center animate-fade-in",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(vw,{className:"w-10 h-10 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Start the conversation"}),a.jsxs("p",{className:"text-gray-500",children:["Send a message to ",s.name]})]})}):o.map((w,j)=>a.jsx("div",{className:`flex ${w.sender==="user"?"justify-end":"justify-start"} animate-slide-in-up`,style:{animationDelay:`${j*.05}s`},children:a.jsxs("div",{className:`max-w-[70%] ${w.sender==="user"?"bg-gradient-to-br from-brand-teal to-brand-dark text-white":"bg-white shadow-md"} rounded-2xl p-4 transform hover:scale-[1.02] transition-all duration-300`,children:[a.jsx("p",{className:`mb-2 ${w.sender==="user"?"text-white":"text-gray-800"}`,children:w.text}),a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:`text-xs ${w.sender==="user"?"text-brand-yellow":"text-gray-500"}`,children:w.timestamp}),w.sender==="user"&&a.jsx(Ht,{className:`w-4 h-4 ${w.read?"text-brand-yellow":"text-white/50"}`})]})]})},w.id)),g&&a.jsx("div",{className:"flex justify-end animate-fade-in",children:a.jsx("div",{className:"max-w-[70%] bg-gradient-to-br from-brand-teal/50 to-brand-dark/50 text-white rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("span",{className:"text-xs text-brand-yellow",children:"Sending..."})]})})}),a.jsx("div",{ref:I})]}),a.jsx("form",{onSubmit:v,className:"p-4 border-t border-gray-200 bg-white",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx(VO,{className:"w-5 h-5"})}),a.jsx("button",{type:"button",className:"p-2 text-brand-teal hover:bg-brand-light rounded-lg transition-all duration-300 transform hover:scale-110",children:a.jsx($O,{className:"w-5 h-5"})}),a.jsx("input",{type:"text",value:n,onChange:w=>r(w.target.value),onKeyPress:_,placeholder:"Type your message...",disabled:g,className:"flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-brand-teal outline-none transition-all duration-300 disabled:opacity-50"}),a.jsx("button",{type:"submit",disabled:!n.trim()||g,className:"bg-gradient-to-r from-brand-teal to-brand-dark text-white p-3 rounded-xl hover:shadow-lg transform hover:scale-110 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center min-w-[48px]",children:g?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(vw,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center animate-fade-in",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-brand-teal to-brand-dark rounded-full flex items-center justify-center animate-float",children:a.jsx(il,{className:"w-12 h-12 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-600",children:"Choose a contact to start messaging"})]})})})]})]})},hM=({onLoadingComplete:t})=>{const[e,n]=R.useState(0),[r,s]=R.useState(!1);return R.useEffect(()=>{const i=setInterval(()=>{n(c=>c>=100?(clearInterval(i),100):c+2)},100),o=setTimeout(()=>{s(!0),setTimeout(()=>{t()},500)},5e3);return()=>{clearInterval(i),clearTimeout(o)}},[t]),a.jsxs("div",{className:`fixed inset-0 bg-gradient-to-br from-brand-light via-white to-brand-yellow/20 flex items-center justify-center z-[9999] transition-opacity duration-500 ${r?"opacity-0":"opacity-100"}`,children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[[...Array(20)].map((i,o)=>a.jsx("div",{className:"absolute w-2 h-2 bg-brand-teal/30 rounded-full animate-float",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*10}s`}},o)),a.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-brand-teal/20 rounded-full blur-3xl animate-pulse-glow"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-brand-yellow/30 rounded-full blur-3xl animate-pulse-glow",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-r from-brand-teal/10 to-brand-yellow/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[a.jsxs("div",{className:"relative mb-12 animate-scale-in",children:[a.jsx("div",{className:"absolute inset-0 -m-8",children:a.jsx("div",{className:"w-full h-full border-4 border-brand-teal/30 rounded-full animate-ping"})}),a.jsx("div",{className:"absolute inset-0 -m-12",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-yellow/30 rounded-full animate-pulse",style:{animationDelay:"0.5s"}})}),a.jsx("div",{className:"absolute inset-0 -m-16",children:a.jsx("div",{className:"w-full h-full border-2 border-brand-teal/20 rounded-full animate-ping",style:{animationDelay:"1s"}})}),a.jsx("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:a.jsx("img",{src:"https://dermaglareskin.co.za/wp-content/uploads/2023/07/Dermaglare-Skin.png",alt:"Dermaglare",className:"h-24 w-auto object-contain animate-pulse-glow"})}),a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-brand-yellow rounded-full animate-bounce opacity-75"}),a.jsx("div",{className:"absolute -bottom-4 -left-4 w-6 h-6 bg-brand-teal rounded-full animate-bounce opacity-75",style:{animationDelay:"0.3s"}})]}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-brand-teal via-brand-dark to-brand-teal bg-clip-text text-transparent mb-4 animate-gradient-x",children:"Welcome to Dermaglare"}),a.jsx("p",{className:"text-gray-600 text-lg mb-8 animate-fade-in",children:"Preparing your skincare journey..."}),a.jsx("div",{className:"w-80 h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-brand-teal via-brand-yellow to-brand-teal rounded-full transition-all duration-300 ease-out animate-shimmer",style:{width:`${e}%`,backgroundSize:"200% 100%"}})}),a.jsxs("p",{className:"text-brand-teal font-semibold mt-3 text-sm",children:[e,"% Complete"]}),a.jsxs("div",{className:"flex gap-2 mt-8",children:[a.jsx("div",{className:"w-3 h-3 bg-brand-teal rounded-full animate-bounce"}),a.jsx("div",{className:"w-3 h-3 bg-brand-yellow rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-3 h-3 bg-brand-dark rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-gray-500 text-sm italic animate-fade-in",children:[e<20&&" Loading your personalized dashboard...",e>=20&&e<40&&" Securing your data...",e>=40&&e<60&&" Syncing appointments...",e>=60&&e<80&&" Preparing documents...",e>=80&&e<100&&" Almost there...",e>=100&&" Ready!"]})})]}),a.jsx("div",{className:"absolute bottom-10 left-10 w-16 h-16 border-4 border-brand-teal/20 rounded-full animate-spin-slow"}),a.jsx("div",{className:"absolute top-10 right-10 w-12 h-12 border-4 border-brand-yellow/20 rounded-full animate-spin-slow",style:{animationDelay:"1s"}})]})},fM=()=>{const{user:t}=Ot();return t?a.jsx(sM,{children:a.jsxs(qx,{children:[a.jsx(Yt,{path:"dashboard",element:a.jsx(oM,{})}),a.jsx(Yt,{path:"appointments",element:a.jsx(cM,{})}),a.jsx(Yt,{path:"documents",element:a.jsx(uM,{})}),a.jsx(Yt,{path:"chat",element:a.jsx(dM,{})}),a.jsx(Yt,{path:"billing",element:a.jsx(eM,{})}),a.jsx(Yt,{path:"profile",element:a.jsx(aM,{})}),a.jsx(Yt,{path:"settings",element:a.jsx(lM,{})}),a.jsx(Yt,{path:"*",element:a.jsx(Zm,{to:"/dashboard",replace:!0})})]})}):null},mM=()=>{const{user:t}=Ot();return t?a.jsx(fM,{}):a.jsx(Zm,{to:"/login",replace:!0})},pM=()=>{const{user:t}=Ot();return t?a.jsx(Zm,{to:"/dashboard",replace:!0}):a.jsx(NN,{})};function gM(){const{loading:t}=Ot(),[e,n]=R.useState(!0);R.useEffect(()=>{sessionStorage.getItem("hasShownLoading")&&n(!1)},[]);const r=()=>{n(!1),sessionStorage.setItem("hasShownLoading","true")};return e?a.jsx(hM,{onLoadingComplete:r}):t?a.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:a.jsx("div",{className:"text-xl font-semibold animate-pulse",children:"Loading Patient Portal..."})}):a.jsxs(qx,{children:[a.jsx(Yt,{element:a.jsx(pM,{}),children:a.jsx(Yt,{path:"/login",element:a.jsx(rM,{})})}),a.jsx(Yt,{path:"/*",element:a.jsx(mM,{})})]})}Eh.createRoot(document.getElementById("root")).render(a.jsx(jw.StrictMode,{children:a.jsx(XN,{children:a.jsx(CO,{children:a.jsx(gM,{})})})}));
